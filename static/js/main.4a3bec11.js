/*! For license information please see main.4a3bec11.js.LICENSE.txt */
!function(){"use strict";var e={110:function(e,t,n){var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u={};function s(e){return r.isMemo(e)?o:u[e.$$typeof]||i}u[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},u[r.Memo]=o;var c=Object.defineProperty,l=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=h(n);i&&i!==p&&e(t,i,r)}var o=l(n);f&&(o=o.concat(f(n)));for(var u=s(t),v=s(n),m=0;m<o.length;++m){var g=o[m];if(!a[g]&&(!r||!r[g])&&(!v||!v[g])&&(!u||!u[g])){var y=d(n,g);try{c(t,g,y)}catch(b){}}}}return t}},746:function(e,t){var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,h=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,k=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case h:return e;default:switch(e=e&&e.$$typeof){case c:case d:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.AsyncMode=l,t.ConcurrentMode=f,t.ContextConsumer=c,t.ContextProvider=s,t.Element=r,t.ForwardRef=d,t.Fragment=a,t.Lazy=m,t.Memo=v,t.Portal=i,t.Profiler=u,t.StrictMode=o,t.Suspense=h,t.isAsyncMode=function(e){return _(e)||w(e)===l},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===c},t.isContextProvider=function(e){return w(e)===s},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return w(e)===d},t.isFragment=function(e){return w(e)===a},t.isLazy=function(e){return w(e)===m},t.isMemo=function(e){return w(e)===v},t.isPortal=function(e){return w(e)===i},t.isProfiler=function(e){return w(e)===u},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===h},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===a||e===f||e===u||e===o||e===h||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===v||e.$$typeof===s||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===b||e.$$typeof===k||e.$$typeof===g)},t.typeOf=w},309:function(e,t,n){e.exports=n(746)},463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(h,e)&&(d.test(e)?p[e]=!0:(h[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var k=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var j=!1;function B(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function V(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function q(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:q(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return q(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||he.hasOwnProperty(e)&&he[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(he).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),he[t]=he[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ke=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Se(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ee(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Me(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Le=!1,Fe=null,Ue=!1,je=null,Be={onError:function(e){Le=!0,Fe=e}};function Ve(e,t,n,r,i,a,o,u,s){Le=!1,Fe=null,Me.apply(Be,arguments)}function qe(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(qe(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=qe(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ht(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function kt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,St,Et=!1,Tt=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=qe(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);ke=r,n.target.dispatchEvent(r),ke=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(jt),Pt.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function qt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Nt&&Vt(Nt,e),null!==At&&Vt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=k.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,r){var i=bt,a=zt.transition;zt.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=i,zt.transition=a}}function Ht(e,t,n,r){var i=bt,a=zt.transition;zt.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=i,zt.transition=a}}function Kt(e,t,n,r){if(Wt){var i=Yt(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Mt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Lt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Lt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Lt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Mt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=we(r))))if(null===(t=qe(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),dn=an(fn),hn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(hn),vn=an(F({},hn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),gn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),kn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return In}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(En),Cn=an(F({},hn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},hn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Mn=null;l&&"documentMode"in document&&(Mn=document.documentMode);var Ln=l&&"TextEvent"in window&&!Mn,Fn=l&&(!On||Mn&&8<Mn&&11>=Mn),Un=String.fromCharCode(32),jn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Qn(e){Ur(e,0)}function Yn(e){if(K(ki(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Gn(t,Kn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function hr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&hr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function kr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&hr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&sr(yr,r)||(yr=r,0<(r=Hr(gr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Nr=Sr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(Ve.apply(this,arguments),Le){if(!Le)throw Error(a(198));var l=Fe;Le=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function qr(e){if(!e[Vr]){e[Vr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function zr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=yi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Tr:case Cr:s=gn;break;case Nr:s=An;break;case"scroll":s=dn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,d=l?null!==u?u+"Capture":null:u;l=[];for(var h,p=r;null!==p;){var v=(h=p).stateNode;if(5===h.tag&&null!==v&&(h=v,null!==d&&(null!=(v=Pe(p,d))&&l.push(Gr(p,v,h)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===ke||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(f=qe(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==s?u:ki(s),h=null==c?u:ki(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=h,v=null,yi(i)===r&&((l=new l(d,p+"enter",c,n,i)).target=h,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(d=c,p=0,h=l=s;h;h=Kr(h))p++;for(h=0,v=d;v;v=Kr(v))h++;for(;0<p-h;)l=Kr(l),p--;for(;0<h-p;)d=Kr(d),h--;for(;p--;){if(l===d||null!==d&&l===d.alternate)break e;l=Kr(l),d=Kr(d)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?ki(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=$n;else if(Wn(u))if(Xn)m=or;else{m=ir;var g=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Gn(o,m,n,i):(g&&g(e,u,r),"focusout"===e&&(g=u._wrapperState)&&g.controlled&&"number"===u.type&&ee(u,"number",u.value)),g=r?ki(r):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,kr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":kr(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else qn?Bn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(qn||"onCompositionStart"!==b?"onCompositionEnd"===b&&qn&&(y=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,qn=!0)),0<(g=Hr(r,b)).length&&(b=new kn(b,e,null,n,i),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(qn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Zt=Jt=Xt=null,qn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new kn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void qt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),di="__reactFiber$"+fi,hi="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,gi="__reactHandles$"+fi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[di])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ki(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[hi]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ei(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ii(Ti),Ni=Ii(!1),Ai=Ti;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ni),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Mi(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Mi(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Ni),Si(Ci),Ei(Ci,e)):Si(Ni),Ei(Ni,n)}var Ui=null,ji=!1,Bi=!1;function Vi(e){null===Ui?Ui=[e]:Ui.push(e)}function qi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=bt;try{var n=Ui;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Ze,qi),i}finally{bt=t,Bi=!1}}return null}var zi=k.ReactCurrentBatchConfig;function Wi(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Gi=Ii(null),Hi=null,Ki=null,Qi=null;function Yi(){Qi=Ki=Hi=null}function $i(e){var t=Gi.current;Si(Gi),e._currentValue=t}function Xi(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ji(e,t){Hi=e,Qi=Ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Zi(e){var t=e._currentValue;if(Qi!==e)if(e={context:e,memoizedValue:t,next:null},null===Ki){if(null===Hi)throw Error(a(308));Ki=e,Hi.dependencies={lanes:0,firstContext:e}}else Ki=Ki.next=e;return t}var ea=null,ta=!1;function na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ia(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function aa(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,tc(e)?(null===(e=n.interleaved)?(t.next=t,null===ea?ea=[n]:ea.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function oa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ua(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function sa(e,t,n,r){var i=e.updateQueue;ta=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var d=u.lane,h=u.eventTime;if((r&d)===d){null!==l&&(l=l.next={eventTime:h,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(d=t,h=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(h,f,d):p)||void 0===d)break e;f=F({},f,d);break e;case 2:ta=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[u]:d.push(u))}else h={eventTime:h,lane:d,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=h,s=f):l=l.next=h,o|=d;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(d=u).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ds|=o,e.lanes=o,e.memoizedState=f}}function ca(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var la=(new r.Component).refs;function fa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var da={isMounted:function(e){return!!(e=e._reactInternals)&&qe(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xs(),i=Js(e),a=ia(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xs(),i=Js(e),a=ia(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),aa(e,a),null!==(t=Zs(e,i,r))&&oa(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xs(),r=Js(e),i=ia(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),aa(e,i),null!==(t=Zs(e,r,n))&&oa(t,e,r)}};function ha(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function pa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Zi(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=da,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function va(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&da.enqueueReplaceState(t,t.state,null)}function ma(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=la,na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Zi(a):(a=Pi(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&da.enqueueReplaceState(i,i.state,null),sa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var ga=[],ya=0,ba=null,ka=0,wa=[],_a=0,xa=null,Ia=1,Sa="";function Ea(e,t){ga[ya++]=ka,ga[ya++]=ba,ba=e,ka=t}function Ta(e,t,n){wa[_a++]=Ia,wa[_a++]=Sa,wa[_a++]=xa,xa=e;var r=Ia;e=Sa;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ia=1<<32-ot(t)+i|n<<i|r,Sa=a+e}else Ia=1<<a|n<<i|r,Sa=e}function Ca(e){null!==e.return&&(Ea(e,1),Ta(e,1,0))}function Na(e){for(;e===ba;)ba=ga[--ya],ga[ya]=null,ka=ga[--ya],ga[ya]=null;for(;e===xa;)xa=wa[--_a],wa[_a]=null,Sa=wa[--_a],wa[_a]=null,Ia=wa[--_a],wa[_a]=null}var Aa=null,Ra=null,Pa=!1,Da=null;function Oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Ma(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,Aa=e,Ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,Aa=e,Ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==xa?{id:Ia,overflow:Sa}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Aa=e,Ra=null,!0);default:return!1}}function La(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Fa(e){if(Pa){var t=Ra;if(t){var n=t;if(!Ma(e,t)){if(La(e))throw Error(a(418));t=ci(n.nextSibling);var r=Aa;t&&Ma(e,t)?Oa(r,n):(e.flags=-4097&e.flags|2,Pa=!1,Aa=e)}}else{if(La(e))throw Error(a(418));e.flags=-4097&e.flags|2,Pa=!1,Aa=e}}}function Ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Aa=e}function ja(e){if(e!==Aa)return!1;if(!Pa)return Ua(e),Pa=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=Ra)){if(La(e)){for(e=Ra;e;)e=ci(e.nextSibling);throw Error(a(418))}for(;t;)Oa(e,t),t=ci(t.nextSibling)}if(Ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ra=null}}else Ra=Aa?ci(e.stateNode.nextSibling):null;return!0}function Ba(){Ra=Aa=null,Pa=!1}function Va(e){null===Da?Da=[e]:Da.push(e)}function qa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function za(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Ga(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Wa(a)===t.type)?((r=i(t,n.props)).ref=qa(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=qa(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=qa(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Oc(t,e.mode,n,null)).return=e,t;za(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return h(e,t,(i=n._init)(n._payload),r)}if(te(n)||M(n))return null!==i?null:f(e,t,n,r,null);za(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||M(r))return f(t,e=e.get(n)||null,r,i,null);za(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var g=h(i,f,u[v],s);if(null===g){null===f&&(f=m);break}e&&f&&null===g.alternate&&t(i,f),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,f=m}if(v===u.length)return n(i,f),Pa&&Ea(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=d(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return Pa&&Ea(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),Pa&&Ea(i,v),c}function m(i,u,s,c){var l=M(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,g=null,y=s.next();null!==v&&!y.done;m++,y=s.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=h(i,v,y.value,c);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),u=o(b,u,m),null===f?l=b:f.sibling=b,f=b,v=g}if(y.done)return n(i,v),Pa&&Ea(i,m),l;if(null===v){for(;!y.done;m++,y=s.next())null!==(y=d(i,y.value,c))&&(u=o(y,u,m),null===f?l=y:f.sibling=y,f=y);return Pa&&Ea(i,m),l}for(v=r(i,v);!y.done;m++,y=s.next())null!==(y=p(v,i,m,y.value,c))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),u=o(y,u,m),null===f?l=y:f.sibling=y,f=y);return e&&v.forEach((function(e){return t(i,e)})),Pa&&Ea(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=qa(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Oc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Dc(o.type,o.key,o.props,null,r.mode,s)).ref=qa(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Fc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(M(o))return m(r,a,o,s);za(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Lc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ha=Ga(!0),Ka=Ga(!1),Qa={},Ya=Ii(Qa),$a=Ii(Qa),Xa=Ii(Qa);function Ja(e){if(e===Qa)throw Error(a(174));return e}function Za(e,t){switch(Ei(Xa,t),Ei($a,e),Ei(Ya,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Ya),Ei(Ya,t)}function eo(){Si(Ya),Si($a),Si(Xa)}function to(e){Ja(Xa.current);var t=Ja(Ya.current),n=se(t,e.type);t!==n&&(Ei($a,e),Ei(Ya,n))}function no(e){$a.current===e&&(Si(Ya),Si($a))}var ro=Ii(0);function io(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ao=[];function oo(){for(var e=0;e<ao.length;e++)ao[e]._workInProgressVersionPrimary=null;ao.length=0}var uo=k.ReactCurrentDispatcher,so=k.ReactCurrentBatchConfig,co=0,lo=null,fo=null,ho=null,po=!1,vo=!1,mo=0,go=0;function yo(){throw Error(a(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function ko(e,t,n,r,i,o){if(co=o,lo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,uo.current=null===e||null===e.memoizedState?ru:iu,e=n(r,i),vo){o=0;do{if(vo=!1,mo=0,25<=o)throw Error(a(301));o+=1,ho=fo=null,t.updateQueue=null,uo.current=au,e=n(r,i)}while(vo)}if(uo.current=nu,t=null!==fo&&null!==fo.next,co=0,ho=fo=lo=null,po=!1,t)throw Error(a(300));return e}function wo(){var e=0!==mo;return mo=0,e}function _o(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ho?lo.memoizedState=ho=e:ho=ho.next=e,ho}function xo(){if(null===fo){var e=lo.alternate;e=null!==e?e.memoizedState:null}else e=fo.next;var t=null===ho?lo.memoizedState:ho.next;if(null!==t)ho=t,fo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(fo=e).memoizedState,baseState:fo.baseState,baseQueue:fo.baseQueue,queue:fo.queue,next:null},null===ho?lo.memoizedState=ho=e:ho=ho.next=e}return ho}function Io(e,t){return"function"===typeof t?t(e):t}function So(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=fo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((co&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=d,u=r):c=c.next=d,lo.lanes|=f,Ds|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,lo.lanes|=o,Ds|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Eo(e){var t=xo(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Co(e,t){var n=lo,r=xo(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,jo(Ro.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ho&&1&ho.memoizedState.tag){if(n.flags|=2048,Oo(9,Ao.bind(null,n,r,i,t),void 0,null),null===Es)throw Error(a(349));0!==(30&co)||No(n,t,i)}return i}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ao(e,t,n,r){t.value=n,t.getSnapshot=r,Po(t)&&Zs(e,1,-1)}function Ro(e,t,n){return n((function(){Po(t)&&Zs(e,1,-1)}))}function Po(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Do(e){var t=_o();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Io,lastRenderedState:e},t.queue=e,e=e.dispatch=Xo.bind(null,lo,e),[t.memoizedState,e]}function Oo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=lo.updateQueue)?(t={lastEffect:null,stores:null},lo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Mo(){return xo().memoizedState}function Lo(e,t,n,r){var i=_o();lo.flags|=e,i.memoizedState=Oo(1|t,n,void 0,void 0===r?null:r)}function Fo(e,t,n,r){var i=xo();r=void 0===r?null:r;var a=void 0;if(null!==fo){var o=fo.memoizedState;if(a=o.destroy,null!==r&&bo(r,o.deps))return void(i.memoizedState=Oo(t,n,a,r))}lo.flags|=e,i.memoizedState=Oo(1|t,n,a,r)}function Uo(e,t){return Lo(8390656,8,e,t)}function jo(e,t){return Fo(2048,8,e,t)}function Bo(e,t){return Fo(4,2,e,t)}function Vo(e,t){return Fo(4,4,e,t)}function qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function zo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Fo(4,4,qo.bind(null,t,e),n)}function Wo(){}function Go(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ho(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ko(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),lo.lanes|=n,Ds|=n,e.baseState=!0),t)}function Qo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{bt=n,so.transition=r}}function Yo(){return xo().memoizedState}function $o(e,t,n){var r=Js(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e)?Zo(t,n):(eu(e,t,n),null!==(e=Zs(e,r,n=Xs()))&&tu(e,t,r))}function Xo(e,t,n){var r=Js(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Zo(t,i);else{eu(e,t,i);var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o))return}catch(s){}null!==(e=Zs(e,r,n=Xs()))&&tu(e,t,r)}}function Jo(e){var t=e.alternate;return e===lo||null!==t&&t===lo}function Zo(e,t){vo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function eu(e,t,n){tc(e)?(null===(e=t.interleaved)?(n.next=n,null===ea?ea=[t]:ea.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function tu(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var nu={readContext:Zi,useCallback:yo,useContext:yo,useEffect:yo,useImperativeHandle:yo,useInsertionEffect:yo,useLayoutEffect:yo,useMemo:yo,useReducer:yo,useRef:yo,useState:yo,useDebugValue:yo,useDeferredValue:yo,useTransition:yo,useMutableSource:yo,useSyncExternalStore:yo,useId:yo,unstable_isNewReconciler:!1},ru={readContext:Zi,useCallback:function(e,t){return _o().memoizedState=[e,void 0===t?null:t],e},useContext:Zi,useEffect:Uo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Lo(4194308,4,qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Lo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Lo(4,2,e,t)},useMemo:function(e,t){var n=_o();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=_o();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=$o.bind(null,lo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},_o().memoizedState=e},useState:Do,useDebugValue:Wo,useDeferredValue:function(e){return _o().memoizedState=e},useTransition:function(){var e=Do(!1),t=e[0];return e=Qo.bind(null,e[1]),_o().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=lo,i=_o();if(Pa){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Es)throw Error(a(349));0!==(30&co)||No(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Uo(Ro.bind(null,r,o,e),[e]),r.flags|=2048,Oo(9,Ao.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=_o(),t=Es.identifierPrefix;if(Pa){var n=Sa;t=":"+t+"R"+(n=(Ia&~(1<<32-ot(Ia)-1)).toString(32)+n),0<(n=mo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=go++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},iu={readContext:Zi,useCallback:Go,useContext:Zi,useEffect:jo,useImperativeHandle:zo,useInsertionEffect:Bo,useLayoutEffect:Vo,useMemo:Ho,useReducer:So,useRef:Mo,useState:function(){return So(Io)},useDebugValue:Wo,useDeferredValue:function(e){return Ko(xo(),fo.memoizedState,e)},useTransition:function(){return[So(Io)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1},au={readContext:Zi,useCallback:Go,useContext:Zi,useEffect:jo,useImperativeHandle:zo,useInsertionEffect:Bo,useLayoutEffect:Vo,useMemo:Ho,useReducer:Eo,useRef:Mo,useState:function(){return Eo(Io)},useDebugValue:Wo,useDeferredValue:function(e){var t=xo();return null===fo?t.memoizedState=e:Ko(t,fo.memoizedState,e)},useTransition:function(){return[Eo(Io)[0],xo().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Yo,unstable_isNewReconciler:!1};function ou(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i}}function uu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var su,cu,lu,fu="function"===typeof WeakMap?WeakMap:Map;function du(e,t,n){(n=ia(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Vs||(Vs=!0,qs=r),uu(0,t)},n}function hu(e,t,n){(n=ia(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uu(0,t),"function"!==typeof r&&(null===zs?zs=new Set([this]):zs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fu;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function vu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function mu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ia(-1,1)).tag=2,aa(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function gu(e,t){if(!Pa)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function bu(e,t,n){var r=t.pendingProps;switch(Na(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yu(t),null;case 1:case 17:return Pi(t.type)&&Di(),yu(t),null;case 3:return r=t.stateNode,eo(),Si(Ni),Si(Ci),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ja(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Da&&(ac(Da),Da=null))),yu(t),null;case 5:no(t);var i=Ja(Xa.current);if(n=t.type,null!==e&&null!=t.stateNode)cu(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return yu(t),null}if(e=Ja(Ya.current),ja(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[hi]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":$(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ye(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[di]=t,e[hi]=r,su(e,t),t.stateNode=e;e:{switch(s=be(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Mr.length;i++)jr(Mr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&de(e,l):"number"===typeof l&&de(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&b(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return yu(t),null;case 6:if(e&&null!=t.stateNode)lu(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=Ja(Xa.current),Ja(Ya.current),ja(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=Aa))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return yu(t),null;case 13:if(Si(ro),r=t.memoizedState,Pa&&null!==Ra&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ra;r;)r=ci(r.nextSibling);return Ba(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=ja(t),null===e){if(!r)throw Error(a(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(a(317));r[di]=t}else Ba(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return yu(t),null}return null!==Da&&(ac(Da),Da=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?ja(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Rs&&(Rs=3):pc())),null!==t.updateQueue&&(t.flags|=4),yu(t),null);case 4:return eo(),null===e&&qr(t.stateNode.containerInfo),yu(t),null;case 10:return $i(t.type._context),yu(t),null;case 19:if(Si(ro),null===(o=t.memoizedState))return yu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)gu(o,!1);else{if(0!==Rs||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=io(e))){for(t.flags|=128,gu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>js&&(t.flags|=128,r=!0,gu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=io(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),gu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!Pa)return yu(t),null}else 2*Xe()-o.renderingStartTime>js&&1073741824!==n&&(t.flags|=128,r=!0,gu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=ro.current,Ei(ro,r?1&n|2:1&n),t):(yu(t),null);case 22:case 23:return lc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ns)&&(yu(t),6&t.subtreeFlags&&(t.flags|=8192)):yu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}su=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},cu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ja(Ya.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ye(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var ku=k.ReactCurrentOwner,wu=!1;function _u(e,t,n,r){t.child=null===e?Ka(t,null,n,r):Ha(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ji(t,i),r=ko(e,t,n,r,a,i),n=wo(),null===e||wu?(Pa&&n&&Ca(t),t.flags|=1,_u(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Iu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Su(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Su(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Cu(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(As,Ns),Ns|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(As,Ns),Ns|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(As,Ns),Ns|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(As,Ns),Ns|=r;return _u(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Ri(t,a),Ji(t,i),n=ko(e,t,n,r,a,i),r=wo(),null===e||wu?(Pa&&r&&Ca(t),t.flags|=1,_u(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Nu(e,t,n,r,i){if(Pi(n)){var a=!0;Li(t)}else a=!1;if(Ji(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),pa(t,n,r),ma(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Zi(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&va(t,o,r,c),ta=!1;var d=t.memoizedState;o.state=d,sa(t,r,o,i),s=t.memoizedState,u!==r||d!==s||Ni.current||ta?("function"===typeof l&&(fa(t,n,l,r),s=t.memoizedState),(u=ta||ha(t,n,u,r,d,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:Wi(t.type,u),o.props=c,f=t.pendingProps,d=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Zi(s):s=Ri(t,s=Pi(n)?Ai:Ci.current);var h=n.getDerivedStateFromProps;(l="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||d!==s)&&va(t,o,r,s),ta=!1,d=t.memoizedState,o.state=d,sa(t,r,o,i);var p=t.memoizedState;u!==f||d!==p||Ni.current||ta?("function"===typeof h&&(fa(t,n,h,r),p=t.memoizedState),(c=ta||ha(t,n,c,r,d,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Au(e,t,n,r,a,i)}function Au(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ha(t,e.child,null,a),t.child=Ha(t,null,u,a)):_u(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Ru(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Za(e,t.containerInfo)}function Pu(e,t,n,r,i){return Ba(),Va(i),t.flags|=256,_u(e,t,n,r),t.child}var Du={dehydrated:null,treeContext:null,retryLane:0};function Ou(e){return{baseLanes:e,cachePool:null,transitions:null}}function Mu(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Lu(e,t,n){var r,i=t.pendingProps,o=ro.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(ro,1&o),null===e)return Fa(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,u?(i=t.mode,u=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=o):u=Mc(o,i,0,null),e=Oc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ou(n),t.memoizedState=Du,e):Fu(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(s)return 256&t.flags?(t.flags&=-257,Bu(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(u=i.fallback,o=t.mode,i=Mc({mode:"visible",children:i.children},o,0,null),(u=Oc(u,o,n,null)).flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,0!==(1&t.mode)&&Ha(t,e.child,null,n),t.child.memoizedState=Ou(n),t.memoizedState=Du,u);if(0===(1&t.mode))t=Bu(e,t,n,null);else if("$!"===r.data)t=Bu(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),wu||i){if(null!==(i=Es)){switch(n&-n){case 4:u=2;break;case 16:u=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:u=32;break;case 536870912:u=268435456;break;default:u=0}0!==(i=0!==(u&(i.suspendedLanes|n))?0:u)&&i!==o.retryLane&&(o.retryLane=i,Zs(e,i,-1))}pc(),t=Bu(e,t,n,Error(a(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,t=null):(n=o.treeContext,Ra=ci(r.nextSibling),Aa=t,Pa=!0,Da=null,null!==n&&(wa[_a++]=Ia,wa[_a++]=Sa,wa[_a++]=xa,Ia=n.id,Sa=n.overflow,xa=t),(t=Fu(t,t.pendingProps.children)).flags|=4096);return t}return u?(i=ju(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Mu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}return u?(i=ju(e,t,i.children,i.fallback,n),u=t.child,o=e.child.memoizedState,u.memoizedState=null===o?Ou(n):Mu(o,n),u.childLanes=e.childLanes&~n,t.memoizedState=Du,i):(n=Uu(e,t,i.children,n),t.memoizedState=null,n)}function Fu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uu(e,t,n,r){var i=e.child;return e=i.sibling,n=Pc(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function ju(e,t,n,r,i){var a=t.mode,o=(e=e.child).sibling,u={mode:"hidden",children:n};return 0===(1&a)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=u,t.deletions=null):(n=Pc(e,u)).subtreeFlags=14680064&e.subtreeFlags,null!==o?r=Pc(o,r):(r=Oc(r,a,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Bu(e,t,n,r){return null!==r&&Va(r),Ha(t,e.child,null,n),(e=Fu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Xi(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_u(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===io(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===io(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ds|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Gu(e,t){switch(Na(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Si(Ni),Si(Ci),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Si(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));Ba()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ro),null;case 4:return eo(),null;case 10:return $i(t.type._context),null;case 22:case 23:return lc(),null;default:return null}}var Hu=!1,Ku=!1,Qu="function"===typeof WeakSet?WeakSet:Set,Yu=null;function $u(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){xc(e,t,r)}else n.current=null}function Xu(e,t,n){try{n()}catch(r){xc(e,t,r)}}var Ju=!1;function Zu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&Xu(t,n,a)}i=i.next}while(i!==r)}}function es(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ts(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ns(e){var t=e.alternate;null!==t&&(e.alternate=null,ns(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[hi],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function rs(e){return 5===e.tag||3===e.tag||4===e.tag}function is(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||rs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function as(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(as(e,t,n),e=e.sibling;null!==e;)as(e,t,n),e=e.sibling}function os(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(os(e,t,n),e=e.sibling;null!==e;)os(e,t,n),e=e.sibling}var us=null,ss=!1;function cs(e,t,n){for(n=n.child;null!==n;)ls(e,t,n),n=n.sibling}function ls(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Ku||$u(n,t);case 6:var r=us,i=ss;us=null,cs(e,t,n),ss=i,null!==(us=r)&&(ss?(e=us,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):us.removeChild(n.stateNode));break;case 18:null!==us&&(ss?(e=us,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),qt(e)):si(us,n.stateNode));break;case 4:r=us,i=ss,us=n.stateNode.containerInfo,ss=!0,cs(e,t,n),us=r,ss=i;break;case 0:case 11:case 14:case 15:if(!Ku&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&Xu(n,t,o),i=i.next}while(i!==r)}cs(e,t,n);break;case 1:if(!Ku&&($u(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){xc(n,t,u)}cs(e,t,n);break;case 21:cs(e,t,n);break;case 22:1&n.mode?(Ku=(r=Ku)||null!==n.memoizedState,cs(e,t,n),Ku=r):cs(e,t,n);break;default:cs(e,t,n)}}function fs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qu),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ds(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:us=s.stateNode,ss=!1;break e;case 3:case 4:us=s.stateNode.containerInfo,ss=!0;break e}s=s.return}if(null===us)throw Error(a(160));ls(o,u,i),us=null,ss=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){xc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)hs(t,e),t=t.sibling}function hs(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ds(t,e),ps(e),4&r){try{Zu(3,e,e.return),es(3,e)}catch(v){xc(e,e.return,v)}try{Zu(5,e,e.return)}catch(v){xc(e,e.return,v)}}break;case 1:ds(t,e),ps(e),512&r&&null!==n&&$u(n,n.return);break;case 5:if(ds(t,e),ps(e),512&r&&null!==n&&$u(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(v){xc(e,e.return,v)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),be(s,u);var l=be(s,o);for(u=0;u<c.length;u+=2){var f=c[u],d=c[u+1];"style"===f?me(i,d):"dangerouslySetInnerHTML"===f?fe(i,d):"children"===f?de(i,d):b(i,f,d,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[hi]=o}catch(v){xc(e,e.return,v)}}break;case 6:if(ds(t,e),ps(e),4&r){if(null===e.stateNode)throw Error(a(162));l=e.stateNode,f=e.memoizedProps;try{l.nodeValue=f}catch(v){xc(e,e.return,v)}}break;case 3:if(ds(t,e),ps(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qt(t.containerInfo)}catch(v){xc(e,e.return,v)}break;case 4:default:ds(t,e),ps(e);break;case 13:ds(t,e),ps(e),8192&(l=e.child).flags&&null!==l.memoizedState&&(null===l.alternate||null===l.alternate.memoizedState)&&(Us=Xe()),4&r&&fs(e);break;case 22:if(l=null!==n&&null!==n.memoizedState,1&e.mode?(Ku=(f=Ku)||l,ds(t,e),Ku=f):ds(t,e),ps(e),8192&r){f=null!==e.memoizedState;e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,f?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(v){xc(e,e.return,v)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=f?"":h.memoizedProps}catch(v){xc(e,e.return,v)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}if(f&&!l&&0!==(1&e.mode))for(Yu=e,e=e.child;null!==e;){for(l=Yu=e;null!==Yu;){switch(d=(f=Yu).child,f.tag){case 0:case 11:case 14:case 15:Zu(4,f,f.return);break;case 1:if($u(f,f.return),"function"===typeof(o=f.stateNode).componentWillUnmount){h=f,p=f.return;try{i=h,o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(v){xc(h,p,v)}}break;case 5:$u(f,f.return);break;case 22:if(null!==f.memoizedState){ys(l);continue}}null!==d?(d.return=f,Yu=d):ys(l)}e=e.sibling}}break;case 19:ds(t,e),ps(e),4&r&&fs(e);case 21:}}function ps(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(rs(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),os(e,is(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;as(e,is(e),o);break;default:throw Error(a(161))}}catch(u){xc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vs(e,t,n){Yu=e,ms(e,t,n)}function ms(e,t,n){for(var r=0!==(1&e.mode);null!==Yu;){var i=Yu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Hu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Ku;u=Hu;var c=Ku;if(Hu=o,(Ku=s)&&!c)for(Yu=i;null!==Yu;)s=(o=Yu).child,22===o.tag&&null!==o.memoizedState?bs(i):null!==s?(s.return=o,Yu=s):bs(i);for(;null!==a;)Yu=a,ms(a,t,n),a=a.sibling;Yu=i,Hu=u,Ku=c}gs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Yu=a):gs(e)}}function gs(e){for(;null!==Yu;){var t=Yu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ku||es(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ku)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wi(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&ca(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ca(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var d=f.dehydrated;null!==d&&qt(d)}}}break;default:throw Error(a(163))}Ku||512&t.flags&&ts(t)}catch(h){xc(t,t.return,h)}}if(t===e){Yu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Yu=n;break}Yu=t.return}}function ys(e){for(;null!==Yu;){var t=Yu;if(t===e){Yu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Yu=n;break}Yu=t.return}}function bs(e){for(;null!==Yu;){var t=Yu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{es(4,t)}catch(s){xc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){xc(t,i,s)}}var a=t.return;try{ts(t)}catch(s){xc(t,a,s)}break;case 5:var o=t.return;try{ts(t)}catch(s){xc(t,o,s)}}}catch(s){xc(t,t.return,s)}if(t===e){Yu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Yu=u;break}Yu=t.return}}var ks,ws=Math.ceil,_s=k.ReactCurrentDispatcher,xs=k.ReactCurrentOwner,Is=k.ReactCurrentBatchConfig,Ss=0,Es=null,Ts=null,Cs=0,Ns=0,As=Ii(0),Rs=0,Ps=null,Ds=0,Os=0,Ms=0,Ls=null,Fs=null,Us=0,js=1/0,Bs=null,Vs=!1,qs=null,zs=null,Ws=!1,Gs=null,Hs=0,Ks=0,Qs=null,Ys=-1,$s=0;function Xs(){return 0!==(6&Ss)?Xe():-1!==Ys?Ys:Ys=Xe()}function Js(e){return 0===(1&e.mode)?1:0!==(2&Ss)&&0!==Cs?Cs&-Cs:null!==zi.transition?(0===$s&&($s=vt()),$s):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function Zs(e,t,n){if(50<Ks)throw Ks=0,Qs=null,Error(a(185));var r=ec(e,t);return null===r?null:(gt(r,t,n),0!==(2&Ss)&&r===Es||(r===Es&&(0===(2&Ss)&&(Os|=t),4===Rs&&oc(r,Cs)),nc(r,n),1===t&&0===Ss&&0===(1&e.mode)&&(js=Xe()+500,ji&&qi())),r)}function ec(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function tc(e){return(null!==Es||null!==ea)&&0!==(1&e.mode)&&0===(2&Ss)}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=ht(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=dt(e,e===Es?Cs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,Vi(e)}(uc.bind(null,e)):Vi(uc.bind(null,e)),oi((function(){0===Ss&&qi()})),n=null;else{switch(kt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Cc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Ys=-1,$s=0,0!==(6&Ss))throw Error(a(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=dt(e,e===Es?Cs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Ss;Ss|=2;var o=hc();for(Es===e&&Cs===t||(Bs=null,js=Xe()+500,fc(e,t));;)try{gc();break}catch(s){dc(e,s)}Yi(),_s.current=o,Ss=i,null!==Ts?t=0:(Es=null,Cs=0,t=Rs)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ic(e,i))),1===t)throw n=Ps,fc(e,0),oc(e,r),nc(e,Xe()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ic(e,o))),1===t))throw n=Ps,fc(e,0),oc(e,r),nc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:kc(e,Fs,Bs);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Us+500-Xe())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Xs(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(kc.bind(null,e,Fs,Bs),t);break}kc(e,Fs,Bs);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ws(r/1960))-r)){e.timeoutHandle=ri(kc.bind(null,e,Fs,Bs),r);break}kc(e,Fs,Bs);break;default:throw Error(a(329))}}}return nc(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=Ls;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Fs,Fs=n,null!==t&&ac(t)),e}function ac(e){null===Fs?Fs=e:Fs.push.apply(Fs,e)}function oc(e,t){for(t&=~Ms,t&=~Os,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function uc(e){if(0!==(6&Ss))throw Error(a(327));wc();var t=dt(e,0);if(0===(1&t))return nc(e,Xe()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Ps,fc(e,0),oc(e,t),nc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Fs,Bs),nc(e,Xe()),null}function sc(e,t){var n=Ss;Ss|=1;try{return e(t)}finally{0===(Ss=n)&&(js=Xe()+500,ji&&qi())}}function cc(e){null!==Gs&&0===Gs.tag&&0===(6&Ss)&&wc();var t=Ss;Ss|=1;var n=Is.transition,r=bt;try{if(Is.transition=null,bt=1,e)return e()}finally{bt=r,Is.transition=n,0===(6&(Ss=t))&&qi()}}function lc(){Ns=As.current,Si(As)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ts)for(n=Ts.return;null!==n;){var r=n;switch(Na(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:eo(),Si(Ni),Si(Ci),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Si(ro);break;case 10:$i(r.type._context);break;case 22:case 23:lc()}n=n.return}if(Es=e,Ts=e=Pc(e.current,null),Cs=Ns=t,Rs=0,Ps=null,Ms=Os=Ds=0,Fs=Ls=null,null!==ea){for(t=0;t<ea.length;t++)if(null!==(r=(n=ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ea=null}return e}function dc(e,t){for(;;){var n=Ts;try{if(Yi(),uo.current=nu,po){for(var r=lo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}po=!1}if(co=0,ho=fo=lo=null,vo=!1,mo=0,xs.current=null,null===n||null===n.return){Rs=1,Ps=t,Ts=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Cs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,d=f.tag;if(0===(1&f.mode)&&(0===d||11===d||15===d)){var h=f.alternate;h?(f.updateQueue=h.updateQueue,f.memoizedState=h.memoizedState,f.lanes=h.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=vu(u);if(null!==p){p.flags&=-257,mu(p,u,s,0,t),1&p.mode&&pu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){pu(o,l,t),pc();break e}c=Error(a(426))}else if(Pa&&1&s.mode){var g=vu(u);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),mu(g,u,s,0,t),Va(c);break e}}o=c,4!==Rs&&(Rs=2),null===Ls?Ls=[o]:Ls.push(o),c=ou(c,s),s=u;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,ua(s,du(0,c,t));break e;case 1:o=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===zs||!zs.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,ua(s,hu(s,o,t));break e}}s=s.return}while(null!==s)}bc(n)}catch(k){t=k,Ts===n&&null!==n&&(Ts=n=n.return);continue}break}}function hc(){var e=_s.current;return _s.current=nu,null===e?nu:e}function pc(){0!==Rs&&3!==Rs&&2!==Rs||(Rs=4),null===Es||0===(268435455&Ds)&&0===(268435455&Os)||oc(Es,Cs)}function vc(e,t){var n=Ss;Ss|=2;var r=hc();for(Es===e&&Cs===t||(Bs=null,fc(e,t));;)try{mc();break}catch(i){dc(e,i)}if(Yi(),Ss=n,_s.current=r,null!==Ts)throw Error(a(261));return Es=null,Cs=0,Rs}function mc(){for(;null!==Ts;)yc(Ts)}function gc(){for(;null!==Ts&&!Ye();)yc(Ts)}function yc(e){var t=ks(e.alternate,e,Ns);e.memoizedProps=e.pendingProps,null===t?bc(e):Ts=t,xs.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=bu(n,t,Ns)))return void(Ts=n)}else{if(null!==(n=Gu(n,t)))return n.flags&=32767,void(Ts=n);if(null===e)return Rs=6,void(Ts=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ts=t);Ts=t=e}while(null!==t);0===Rs&&(Rs=5)}function kc(e,t,n){var r=bt,i=Is.transition;try{Is.transition=null,bt=1,function(e,t,n,r){do{wc()}while(null!==Gs);if(0!==(6&Ss))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Es&&(Ts=Es=null,Cs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Cc(tt,(function(){return wc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Is.transition,Is.transition=null;var u=bt;bt=1;var s=Ss;Ss|=4,xs.current=null,function(e,t){if(ei=Wt,hr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(s=u+i),d!==o||0!==r&&3!==d.nodeType||(c=u+r),3===d.nodeType&&(u+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++l===i&&(s=u),h===o&&++f===r&&(c=u),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Yu=t;null!==Yu;)if(e=(t=Yu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Yu=e;else for(;null!==Yu;){t=Yu;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Wi(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var k=t.stateNode.containerInfo;if(1===k.nodeType)k.textContent="";else if(9===k.nodeType){var w=k.body;null!=w&&(w.textContent="")}break;default:throw Error(a(163))}}catch(_){xc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Yu=e;break}Yu=t.return}v=Ju,Ju=!1}(e,n),hs(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,vs(n,e,i),$e(),Ss=s,bt=u,Is.transition=o}else e.current=n;if(Ws&&(Ws=!1,Gs=e,Hs=i),0===(o=e.pendingLanes)&&(zs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),nc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Vs)throw Vs=!1,e=qs,qs=null,e;0!==(1&Hs)&&0!==e.tag&&wc(),0!==(1&(o=e.pendingLanes))?e===Qs?Ks++:(Ks=0,Qs=e):Ks=0,qi()}(e,t,n,r)}finally{Is.transition=i,bt=r}return null}function wc(){if(null!==Gs){var e=kt(Hs),t=Is.transition,n=bt;try{if(Is.transition=null,bt=16>e?16:e,null===Gs)var r=!1;else{if(e=Gs,Gs=null,Hs=0,0!==(6&Ss))throw Error(a(331));var i=Ss;for(Ss|=4,Yu=e.current;null!==Yu;){var o=Yu,u=o.child;if(0!==(16&Yu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Yu=l;null!==Yu;){var f=Yu;switch(f.tag){case 0:case 11:case 15:Zu(8,f,o)}var d=f.child;if(null!==d)d.return=f,Yu=d;else for(;null!==Yu;){var h=(f=Yu).sibling,p=f.return;if(ns(f),f===l){Yu=null;break}if(null!==h){h.return=p,Yu=h;break}Yu=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Yu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Yu=u;else e:for(;null!==Yu;){if(0!==(2048&(o=Yu).flags))switch(o.tag){case 0:case 11:case 15:Zu(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Yu=y;break e}Yu=o.return}}var b=e.current;for(Yu=b;null!==Yu;){var k=(u=Yu).child;if(0!==(2064&u.subtreeFlags)&&null!==k)k.return=u,Yu=k;else e:for(u=b;null!==Yu;){if(0!==(2048&(s=Yu).flags))try{switch(s.tag){case 0:case 11:case 15:es(9,s)}}catch(_){xc(s,s.return,_)}if(s===u){Yu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Yu=w;break e}Yu=s.return}}if(Ss=i,qi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Is.transition=t}}return!1}function _c(e,t,n){aa(e,t=du(0,t=ou(n,t),1)),t=Xs(),null!==(e=ec(e,1))&&(gt(e,1,t),nc(e,t))}function xc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===zs||!zs.has(r))){aa(t,e=hu(t,e=ou(n,e),1)),e=Xs(),null!==(t=ec(t,1))&&(gt(t,1,e),nc(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Xs(),e.pingedLanes|=e.suspendedLanes&n,Es===e&&(Cs&n)===n&&(4===Rs||3===Rs&&(130023424&Cs)===Cs&&500>Xe()-Us?fc(e,0):Ms|=n),nc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=Xs();null!==(e=ec(e,t))&&(gt(e,t,n),nc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Cc(e,t){return Ke(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Oc(n.children,i,o,t);case I:u=8,i|=8;break;case S:return(e=Ac(12,n,t,2|i)).elementType=S,e.lanes=o,e;case N:return(e=Ac(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Ac(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case T:u=9;break e;case C:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Ac(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Oc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={},e}function Lc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Uc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Ac(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},na(a),e}function Bc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Vc(e){if(!e)return Ti;e:{if(qe(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Mi(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=Vc(null),n=e.current,(a=ia(r=Xs(),i=Js(n))).callback=void 0!==t&&null!==t?t:null,aa(n,a),e.current.lanes=i,gt(e,i,r),nc(e,r),e}function zc(e,t,n,r){var i=t.current,a=Xs(),o=Js(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ia(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),aa(i,t),null!==(e=Zs(i,o,a))&&oa(e,i,o),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}ks=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Ru(t),Ba();break;case 5:to(t);break;case 1:Pi(t.type)&&Li(t);break;case 4:Za(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(Gi,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lu(e,t,n):(Ei(ro,1&ro.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ei(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Wu(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,Pa&&0!==(1048576&t.flags)&&Ta(t,ka,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=Ri(t,Ci.current);Ji(t,n),i=ko(null,t,r,e,i,n);var o=wo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,na(t),i.updater=da,t.stateNode=i,i._reactInternals=t,ma(t,r,e,n),t=Au(null,t,r,!0,o,n)):(t.tag=0,Pa&&o&&Ca(t),_u(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=Wi(r,e),i){case 0:t=Cu(null,t,r,e,n);break e;case 1:t=Nu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=Iu(null,t,r,Wi(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 1:return r=t.type,i=t.pendingProps,Nu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 3:e:{if(Ru(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,ra(e,t),sa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=Pu(e,t,r,n,i=Error(a(424)));break e}for(Ra=ci(t.stateNode.containerInfo.firstChild),Aa=t,Pa=!0,Da=null,n=Ka(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(Ba(),r===i){t=Wu(e,t,n);break e}_u(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&Fa(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),_u(e,t,u,n),t.child;case 6:return null===e&&Fa(t),null;case 13:return Lu(e,t,n);case 4:return Za(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ha(t,null,r,n):_u(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:Wi(r,i),n);case 7:return _u(e,t,t.pendingProps,n),t.child;case 8:case 12:return _u(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(Gi,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=ia(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Xi(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),Xi(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}_u(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ji(t,n),r=r(i=Zi(i)),t.flags|=1,_u(e,t,r,n),t.child;case 14:return i=Wi(r=t.type,t.pendingProps),Iu(e,t,r,i=Wi(r.type,i),n);case 15:return Su(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wi(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Pi(r)?(e=!0,Li(t)):e=!1,Ji(t,n),pa(t,r,i),ma(t,r,i,n),Au(null,t,r,!0,e,n);case 19:return zu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Wc(o);u.call(e)}}zc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Wc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pi]=o.current,qr(8===e.nodeType?e.parentNode:e),cc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Wc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=s,e[pi]=s.current,qr(8===e.nodeType?e.parentNode:e),cc((function(){zc(t,s,n,r)})),s}(n,t,e,i,r);return Wc(o)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));zc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cc((function(){zc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(yt(t,1|n),nc(t,Xe()),0===(6&Ss)&&(js=Xe()+500,qi()))}break;case 13:var r=Xs();cc((function(){return Zs(e,1,r)})),Hc(e,1)}},_t=function(e){13===e.tag&&(Zs(e,134217728,Xs()),Hc(e,134217728))},xt=function(e){if(13===e.tag){var t=Xs(),n=Js(e);Zs(e,n,t),Hc(e,n)}},It=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));K(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=sc,Ne=cc;var el={usingClientEntryPoint:!1,Events:[bi,ki,wi,Ee,Te,sc]},tl={findFiberByHostInstance:yi,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nl={bundleType:tl.bundleType,version:tl.version,rendererPackageName:tl.rendererPackageName,rendererConfig:tl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:k.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{it=rl.inject(nl),at=rl}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=el,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return Bc(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,qr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return cc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,qr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(a(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(a(40));return!!e._reactRootContainer&&(cc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=sc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Zc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},372:function(e,t){var n=60103,r=60106,i=60107,a=60108,o=60114,u=60109,s=60110,c=60112,l=60113,f=60120,d=60115,h=60116,p=60121,v=60122,m=60117,g=60129,y=60131;if("function"===typeof Symbol&&Symbol.for){var b=Symbol.for;n=b("react.element"),r=b("react.portal"),i=b("react.fragment"),a=b("react.strict_mode"),o=b("react.profiler"),u=b("react.provider"),s=b("react.context"),c=b("react.forward_ref"),l=b("react.suspense"),f=b("react.suspense_list"),d=b("react.memo"),h=b("react.lazy"),p=b("react.block"),v=b("react.server.block"),m=b("react.fundamental"),g=b("react.debug_trace_mode"),y=b("react.legacy_hidden")}function k(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case o:case a:case l:case f:return e;default:switch(e=e&&e.$$typeof){case s:case c:case h:case d:case u:return e;default:return t}}case r:return t}}}t.isContextConsumer=function(e){return k(e)===s}},441:function(e,t,n){e.exports=n(372)},459:function(e,t){var n,r=Symbol.for("react.element"),i=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.server_context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case a:case u:case o:case d:case h:return e;default:switch(e=e&&e.$$typeof){case l:case c:case f:case v:case p:case s:return e;default:return t}}case i:return t}}}n=Symbol.for("react.module.reference"),t.isContextConsumer=function(e){return g(e)===c}},900:function(e,t,n){e.exports=n(459)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var k=b.prototype=new y;k.constructor=b,v(k,g.prototype),k.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.1.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,d=null,h=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,k(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,y(E),E=-1),p=!0;var a=h;try{for(k(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!N());){var o=d.callback;if("function"===typeof o){d.callback=null,h=d.priorityLevel;var u=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?d.callback=u:d===r(c)&&i(c),k(n)}else i(c);d=r(c)}if(null!==d)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{d=null,h=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,S=null,E=-1,T=5,C=-1;function N(){return!(t.unstable_now()-C<T)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(I=!1,S=null)}}else I=!1}if("function"===typeof b)x=function(){b(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){g(A,0)};function D(e){S=e,I||(I=!0,x())}function O(e,n){E=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(y(E),E=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}},296:function(e,t,n){e.exports=n(813)},561:function(e,t,n){var r=n(791);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=r.useState,o=r.useEffect,u=r.useLayoutEffect,s=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var l="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=a({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return u((function(){i.value=n,i.getSnapshot=t,c(i)&&l({inst:i})}),[e,n,t]),o((function(){return c(i)&&l({inst:i}),e((function(){c(i)&&l({inst:i})}))}),[e]),s(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},595:function(e,t,n){var r=n(791),i=n(248);var a="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=i.useSyncExternalStore,u=r.useRef,s=r.useEffect,c=r.useMemo,l=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var f=u(null);if(null===f.current){var d={hasValue:!1,value:null};f.current=d}else d=f.current;f=c((function(){function e(e){if(!s){if(s=!0,o=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return u=t}return u=e}if(t=u,a(o,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(o=e,u=n)}var o,u,s=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var h=o(e,f[0],f[1]);return s((function(){d.hasValue=!0,d.value=h}),[h]),l(h),h}},248:function(e,t,n){e.exports=n(561)},327:function(e,t,n){e.exports=n(595)},137:function(e,t,n){e.exports=n.p+"static/media/icon.cd75da25009bcf6f9f80.png"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/todo/";var r={};!function(){n.d(r,{_:function(){return xY}});var e={};n.r(e),n.d(e,{FirebaseError:function(){return ze},SDK_VERSION:function(){return ln},_DEFAULT_ENTRY_NAME:function(){return $t},_addComponent:function(){return en},_addOrOverwriteComponent:function(){return tn},_apps:function(){return Jt},_clearComponents:function(){return on},_components:function(){return Zt},_getProvider:function(){return rn},_registerComponent:function(){return nn},_removeServiceInstance:function(){return an},deleteApp:function(){return pn},getApp:function(){return dn},getApps:function(){return hn},initializeApp:function(){return fn},onLog:function(){return gn},registerVersion:function(){return mn},setLogLevel:function(){return yn}});var t,i=n(791),a=n.t(i,2),o=n(250);function u(e){if(Array.isArray(e))return e}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){return u(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,u=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){u=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(u)throw i}}return a}}(e,t)||c(e,t)||l()}function d(){return d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var h=function(e){return e};var p="beforeunload",v="popstate";function m(e){e.preventDefault(),e.returnValue=""}function g(){var e=[];return{get length(){return e.length},push:function(t){return e.push(t),function(){e=e.filter((function(e){return e!==t}))}},call:function(t){e.forEach((function(e){return e&&e(t)}))}}}function y(){return Math.random().toString(36).substr(2,8)}function b(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function k(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}var w=(0,i.createContext)(null);var _=(0,i.createContext)(null);var x=(0,i.createContext)({outlet:null,matches:[]});function I(e,t){if(!e)throw new Error(t)}function S(e,t,n){void 0===n&&(n="/");var r=D(("string"===typeof t?k(t):t).pathname||"/",n);if(null==r)return null;var i=E(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=A(i[o],r);return a}function E(e,t,n,r){return void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r=""),e.forEach((function(e,i){var a={relativePath:e.path||"",caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(a.relativePath.startsWith(r)||I(!1),a.relativePath=a.relativePath.slice(r.length));var o=O([r,a.relativePath]),u=n.concat(a);e.children&&e.children.length>0&&(!0===e.index&&I(!1),E(e.children,t,u,o)),(null!=e.path||e.index)&&t.push({path:o,score:N(o,e.index),routesMeta:u})})),t}var T=/^:\w+$/,C=function(e){return"*"===e};function N(e,t){var n=e.split("/"),r=n.length;return n.some(C)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!C(e)})).reduce((function(e,t){return e+(T.test(t)?3:""===t?1:10)}),r)}function A(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=R({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:O([i,l.pathname]),pathnameBase:M(O([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=O([i,l.pathnameBase]))}return a}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(e,t){return r.push(t),"([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i+=n?"\\/*$":"(?:(?=[.~-]|%[0-9A-F]{2})|\\b|\\/|$)";return[new RegExp(i,t?void 0:"i"),r]}(e.path,e.caseSensitive,e.end),r=f(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(n){return e}}(c[n]||""),e}),{}),pathname:u,pathnameBase:s,pattern:e}}function P(e,t,n){var r,i="string"===typeof e?k(e):e,a=""===e||""===i.pathname?"/":i.pathname;if(null==a)r=n;else{var o=t.length-1;if(a.startsWith("..")){for(var u=a.split("/");".."===u[0];)u.shift(),o-=1;i.pathname=u.join("/")}r=o>=0?t[o]:"/"}var s=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?k(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:L(a),hash:F(u)}}(i,r);return a&&"/"!==a&&a.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=e.charAt(t.length);return n&&"/"!==n?null:e.slice(t.length)||"/"}var O=function(e){return e.join("/").replace(/\/\/+/g,"/")},M=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},L=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},F=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""};function U(e){j()||I(!1);var t=(0,i.useContext)(w),n=t.basename,r=t.navigator,a=q(e),o=a.hash,u=a.pathname,s=a.search,c=u;if("/"!==n){var l=function(e){return""===e||""===e.pathname?"/":"string"===typeof e?k(e).pathname:e.pathname}(e),f=null!=l&&l.endsWith("/");c="/"===u?n+(f?"/":""):O([n,u])}return r.createHref({pathname:c,search:s,hash:o})}function j(){return null!=(0,i.useContext)(_)}function B(){return j()||I(!1),(0,i.useContext)(_).location}function V(){j()||I(!1);var e=(0,i.useContext)(w),t=e.basename,n=e.navigator,r=(0,i.useContext)(x).matches,a=B().pathname,o=JSON.stringify(r.map((function(e){return e.pathnameBase}))),u=(0,i.useRef)(!1);(0,i.useEffect)((function(){u.current=!0}));var s=(0,i.useCallback)((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=P(e,JSON.parse(o),a);"/"!==t&&(i.pathname=O([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state)}else n.go(e)}),[t,n,o,a]);return s}function q(e){var t=(0,i.useContext)(x).matches,n=B().pathname,r=JSON.stringify(t.map((function(e){return e.pathnameBase})));return(0,i.useMemo)((function(){return P(e,JSON.parse(r),n)}),[e,r,n])}function z(e,t){return void 0===t&&(t=[]),null==e?null:e.reduceRight((function(n,r,a){return(0,i.createElement)(x.Provider,{children:void 0!==r.route.element?r.route.element:n,value:{outlet:n,matches:t.concat(e.slice(0,a+1))}})}),null)}function W(e){var t=e.to,n=e.replace,r=e.state;j()||I(!1);var a=V();return(0,i.useEffect)((function(){a(t,{replace:n,state:r})})),null}function G(e){I(!1)}function H(e){var n=e.basename,r=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,d=void 0!==f&&f;j()&&I(!1);var h=M(r),p=(0,i.useMemo)((function(){return{basename:h,navigator:l,static:d}}),[h,l,d]);"string"===typeof u&&(u=k(u));var v=u,m=v.pathname,g=void 0===m?"/":m,y=v.search,b=void 0===y?"":y,x=v.hash,S=void 0===x?"":x,E=v.state,T=void 0===E?null:E,C=v.key,N=void 0===C?"default":C,A=(0,i.useMemo)((function(){var e=D(g,h);return null==e?null:{pathname:e,search:b,hash:S,state:T,key:N}}),[h,g,b,S,T,N]);return null==A?null:(0,i.createElement)(w.Provider,{value:p},(0,i.createElement)(_.Provider,{children:o,value:{location:A,navigationType:c}}))}function K(e){var t=e.children,n=e.location;return function(e,t){j()||I(!1);var n,r=(0,i.useContext)(x).matches,a=r[r.length-1],o=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/"),s=(a&&a.route,B());if(t){var c,l="string"===typeof t?k(t):t;"/"===u||(null==(c=l.pathname)?void 0:c.startsWith(u))||I(!1),n=l}else n=s;var f=n.pathname||"/",d=S(e,{pathname:"/"===u?f:f.slice(u.length)||"/"});return z(d&&d.map((function(e){return Object.assign({},e,{params:Object.assign({},o,e.params),pathname:O([u,e.pathname]),pathnameBase:"/"===e.pathnameBase?u:O([u,e.pathnameBase])})})),r)}(Q(t),n)}function Q(e){var t=[];return i.Children.forEach(e,(function(e){if((0,i.isValidElement)(e))if(e.type!==i.Fragment){e.type!==G&&I(!1);var n={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(n.children=Q(e.props.children)),t.push(n)}else t.push.apply(t,Q(e.props.children))})),t}function Y(){return Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y.apply(this,arguments)}function $(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var X=["onClick","reloadDocument","replace","state","target","to"];function J(e){var n=e.basename,r=e.children,a=e.window,o=(0,i.useRef)();null==o.current&&(o.current=function(e){void 0===e&&(e={});var n=e.window,r=void 0===n?document.defaultView:n,i=r.history;function a(){var e=r.location,t=e.pathname,n=e.search,a=e.hash,o=i.state||{};return[o.idx,h({pathname:t,search:n,hash:a,state:o.usr||null,key:o.key||"default"})]}var o=null;r.addEventListener(v,(function(){if(o)w.call(o),o=null;else{var e=t.Pop,n=a(),r=n[0],i=n[1];if(w.length){if(null!=r){var u=c-r;u&&(o={action:e,location:i,retry:function(){T(-1*u)}},T(u))}}else E(e)}}));var u=t.Pop,s=a(),c=s[0],l=s[1],f=g(),w=g();function _(e){return"string"===typeof e?e:b(e)}function x(e,t){return void 0===t&&(t=null),h(d({pathname:l.pathname,hash:"",search:""},"string"===typeof e?k(e):e,{state:t,key:y()}))}function I(e,t){return[{usr:e.state,key:e.key,idx:t},_(e)]}function S(e,t,n){return!w.length||(w.call({action:e,location:t,retry:n}),!1)}function E(e){u=e;var t=a();c=t[0],l=t[1],f.call({action:u,location:l})}function T(e){i.go(e)}null==c&&(c=0,i.replaceState(d({},i.state,{idx:c}),""));var C={get action(){return u},get location(){return l},createHref:_,push:function e(n,a){var o=t.Push,u=x(n,a);if(S(o,u,(function(){e(n,a)}))){var s=I(u,c+1),l=s[0],f=s[1];try{i.pushState(l,"",f)}catch(d){r.location.assign(f)}E(o)}},replace:function e(n,r){var a=t.Replace,o=x(n,r);if(S(a,o,(function(){e(n,r)}))){var u=I(o,c),s=u[0],l=u[1];i.replaceState(s,"",l),E(a)}},go:T,back:function(){T(-1)},forward:function(){T(1)},listen:function(e){return f.push(e)},block:function(e){var t=w.push(e);return 1===w.length&&r.addEventListener(p,m),function(){t(),w.length||r.removeEventListener(p,m)}}};return C}({window:a}));var u=o.current,s=f((0,i.useState)({action:u.action,location:u.location}),2),c=s[0],l=s[1];return(0,i.useLayoutEffect)((function(){return u.listen(l)}),[u]),(0,i.createElement)(H,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:u})}var Z=(0,i.forwardRef)((function(e,t){var n=e.onClick,r=e.reloadDocument,a=e.replace,o=void 0!==a&&a,u=e.state,s=e.target,c=e.to,l=$(e,X),f=U(c),d=function(e,t){var n=void 0===t?{}:t,r=n.target,a=n.replace,o=n.state,u=V(),s=B(),c=q(e);return(0,i.useCallback)((function(t){if(0===t.button&&(!r||"_self"===r)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)){t.preventDefault();var n=!!a||b(s)===b(c);u(e,{replace:n,state:o})}}),[s,u,c,a,o,r,e])}(c,{replace:o,state:u,target:s});return(0,i.createElement)("a",Y({},l,{href:f,onClick:function(e){n&&n(e),e.defaultPrevented||r||d(e)},ref:t,target:s}))}));function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}function te(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}function ne(){return ne="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=te(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},ne.apply(this,arguments)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ie(e,t)}function oe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function se(e,t){if(t&&("object"===ue(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function ce(e){var t=oe();return function(){var n,r=ee(e);if(t){var i=ee(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return se(this,n)}}function le(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function fe(){fe=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(E){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var i=t&&t.prototype instanceof f?t:f,a=Object.create(i.prototype),o=new x(r||[]);return a._invoke=function(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return S()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=k(o,n);if(u){if(u===l)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(e,n,o),a}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(E){return{type:"throw",arg:E}}}e.wrap=s;var l={};function f(){}function d(){}function h(){}var p={};u(p,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(I([])));m&&m!==t&&n.call(m,i)&&(p=m);var g=h.prototype=f.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function r(i,a,o,u){var s=c(e[i],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==ue(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,o,u)}),(function(e){r("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,u)}))}u(s.arg)}var i;this._invoke=function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}}function k(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method))return l;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,l;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,l):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,l)}function w(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function _(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(w,this),this.reset(!0)}function I(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,a=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:S}}function S(){return{value:void 0,done:!0}}return d.prototype=h,u(g,"constructor",h),u(h,"constructor",d),d.displayName=u(h,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new b(s(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},y(g),u(g,o,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=I,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),l},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),_(n),l}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;_(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:I(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},e}function de(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function he(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){de(a,r,i,o,u,"next",e)}function u(e){de(a,r,i,o,u,"throw",e)}o(void 0)}))}}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function me(e,t,n){return t&&ve(e.prototype,t),n&&ve(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ge(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ye(e){return function(e){if(Array.isArray(e))return s(e)}(e)||ge(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ke(e,t,n){return ke=oe()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&ie(i,n.prototype),i},ke.apply(null,arguments)}function we(e){var t="function"===typeof Map?new Map:void 0;return we=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return ke(e,arguments,ee(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),ie(n,e)},we(e)}var _e=!1,xe=!1,Ie="${JSCORE_VERSION}",Se=function(e,t){if(!e)throw Ee(t)},Ee=function(e){return new Error("Firebase Database ("+Ie+") INTERNAL ASSERT FAILED: "+e)},Te=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,d=(15&u)<<2|c>>6,h=63&c;s||(h=64,o||(d=64)),r.push(n[l],n[f],n[d],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Te(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},Ne=function(e){var t=Te(e);return Ce.encodeByteArray(t,!0)},Ae=function(e){return Ne(e).replace(/\./g,"")},Re=function(e){try{return Ce.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function Pe(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Pe(e[n],t[n]));return e}var De=function(){function e(){var t=this;pe(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return me(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function Oe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Ae(JSON.stringify({alg:"none",type:"JWT"})),Ae(JSON.stringify(a)),""].join(".")}function Me(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Le(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function Fe(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function Ue(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function je(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Be(){var e=Me();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ve(){return!0===_e||!0===xe}function qe(){return"object"===typeof indexedDB}var ze=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(re(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(re(a),We.prototype.create),a}return me(n)}(we(Error)),We=function(){function e(t,n,r){pe(this,e),this.service=t,this.serviceName=n,this.errors=r}return me(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?Ge(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new ze(n,a,t);return o}}]),e}();function Ge(e,t){return e.replace(He,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var He=/\{\$([^}]+)}/g;function Ke(e){return JSON.parse(e)}function Qe(e){return JSON.stringify(e)}var Ye=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Ke(Re(a[0])||""),n=Ke(Re(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function $e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Xe(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Je(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ze(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function et(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(tt(u)&&tt(s)){if(!et(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function tt(e){return null!==e&&"object"===typeof e}function nt(e){for(var t=[],n=function(){var e=f(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function rt(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=f(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function it(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var at=function(){function e(){pe(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return me(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],d=this.chain_[3],h=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=d^l&(f^d),s=1518500249):(u=l^f^d,s=1859775393):p<60?(u=l&f|d&(l|f),s=2400959708):(u=l^f^d,s=3395469782);var v=(c<<5|c>>>27)+u+h+s+n[p]&4294967295;h=d,d=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function ot(e,t){var n=new ut(e,t);return n.subscribe.bind(n)}var ut=function(){function e(t,n){var r=this;pe(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return me(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=le(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=st),void 0===r.error&&(r.error=st),void 0===r.complete&&(r.complete=st);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function st(){}function ct(e,t){return"".concat(e," failed: ").concat(t," argument ")}var lt=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ft(e){return e&&e._delegate?e._delegate:e}var dt=function(){function e(t,n,r){pe(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return me(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),ht="[DEFAULT]",pt=function(){function e(t,n){pe(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return me(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new De;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ht})}catch(s){}var t,n=le(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=f(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(ye(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),ye(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=le(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=f(i.value,2),s=u[0],c=u[1],l=this.normalizeInstanceIdentifier(s);r===l&&c.resolve(a)}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(x_){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t=e.instanceIdentifier,n=e.options,r=void 0===n?{}:n,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:vt(t),options:r}),this.instances.set(t,i),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(x_){}return i||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht;return this.component?this.component.multipleInstances?e:ht:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();function vt(e){return e===ht?void 0:e}var mt,gt,yt=function(){function e(t){pe(this,e),this.name=t,this.providers=new Map}return me(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new pt(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),bt=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(gt||(gt={}));var kt={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},wt=gt.INFO,_t=(be(mt={},gt.DEBUG,"log"),be(mt,gt.VERBOSE,"log"),be(mt,gt.INFO,"info"),be(mt,gt.WARN,"warn"),be(mt,gt.ERROR,"error"),mt),xt=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=_t[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},It=function(){function e(t){pe(this,e),this.name=t,this._logLevel=wt,this._logHandler=xt,this._userLogHandler=null,bt.push(this)}return me(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in gt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?kt[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.DEBUG].concat(t)),this._logHandler.apply(this,[this,gt.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.VERBOSE].concat(t)),this._logHandler.apply(this,[this,gt.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.INFO].concat(t)),this._logHandler.apply(this,[this,gt.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.WARN].concat(t)),this._logHandler.apply(this,[this,gt.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,gt.ERROR].concat(t)),this._logHandler.apply(this,[this,gt.ERROR].concat(t))}}]),e}();function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tt,Ct;var Nt=new WeakMap,At=new WeakMap,Rt=new WeakMap,Pt=new WeakMap,Dt=new WeakMap;var Ot={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return At.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Rt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ft(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Mt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ct||(Ct=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ut(this),n),Ft(Nt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ft(e.apply(Ut(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ut(this),t].concat(r));return Rt.set(a,t.sort?t.sort():[t]),Ft(a)}}function Lt(e){return"function"===typeof e?Mt(e):(e instanceof IDBTransaction&&function(e){if(!At.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));At.set(e,t)}}(e),t=e,(Tt||(Tt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Ot):e);var t}function Ft(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ft(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Nt.set(t,e)})).catch((function(){})),Dt.set(t,e),t}(e);if(Pt.has(e))return Pt.get(e);var t=Lt(e);return t!==e&&(Pt.set(e,t),Dt.set(t,e)),t}var Ut=function(e){return Dt.get(e)};var jt,Bt,Vt,qt=["get","getKey","getAll","getAllKeys","count"],zt=["put","add","delete","clear"],Wt=new Map;function Gt(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Wt.get(t))return Wt.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=zt.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||qt.includes(n))){var a=function(){var e=he(fe().mark((function e(t){var a,o,u,s,c,l,f=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Wt.set(t,a),a}}}jt=function(e){return Et(Et({},e),{},{get:function(t,n,r){return Gt(t,n)||e.get(t,n,r)},has:function(t,n){return!!Gt(t,n)||e.has(t,n)}})},Ot=jt(Ot);var Ht=function(){function e(t){pe(this,e),this.container=t}return me(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Kt="@firebase/app",Qt="0.7.25",Yt=new It("@firebase/app"),$t="[DEFAULT]",Xt=(be(Bt={},Kt,"fire-core"),be(Bt,"@firebase/app-compat","fire-core-compat"),be(Bt,"@firebase/analytics","fire-analytics"),be(Bt,"@firebase/analytics-compat","fire-analytics-compat"),be(Bt,"@firebase/app-check","fire-app-check"),be(Bt,"@firebase/app-check-compat","fire-app-check-compat"),be(Bt,"@firebase/auth","fire-auth"),be(Bt,"@firebase/auth-compat","fire-auth-compat"),be(Bt,"@firebase/database","fire-rtdb"),be(Bt,"@firebase/database-compat","fire-rtdb-compat"),be(Bt,"@firebase/functions","fire-fn"),be(Bt,"@firebase/functions-compat","fire-fn-compat"),be(Bt,"@firebase/installations","fire-iid"),be(Bt,"@firebase/installations-compat","fire-iid-compat"),be(Bt,"@firebase/messaging","fire-fcm"),be(Bt,"@firebase/messaging-compat","fire-fcm-compat"),be(Bt,"@firebase/performance","fire-perf"),be(Bt,"@firebase/performance-compat","fire-perf-compat"),be(Bt,"@firebase/remote-config","fire-rc"),be(Bt,"@firebase/remote-config-compat","fire-rc-compat"),be(Bt,"@firebase/storage","fire-gcs"),be(Bt,"@firebase/storage-compat","fire-gcs-compat"),be(Bt,"@firebase/firestore","fire-fst"),be(Bt,"@firebase/firestore-compat","fire-fst-compat"),be(Bt,"fire-js","fire-js"),be(Bt,"firebase","fire-js-all"),Bt),Jt=new Map,Zt=new Map;function en(e,t){try{e.container.addComponent(t)}catch(n){Yt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function tn(e,t){e.container.addOrOverwriteComponent(t)}function nn(e){var t=e.name;if(Zt.has(t))return Yt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Zt.set(t,e);var n,r=le(Jt.values());try{for(r.s();!(n=r.n()).done;){en(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function rn(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function an(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:$t;rn(e,t).clearInstance(n)}function on(){Zt.clear()}var un=(be(Vt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),be(Vt,"bad-app-name","Illegal App name: '{$appName}"),be(Vt,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),be(Vt,"app-deleted","Firebase App named '{$appName}' already deleted"),be(Vt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),be(Vt,"invalid-log-argument","First argument to `onLog` must be null or a function."),be(Vt,"storage-open","Error thrown when opening storage. Original error: {$originalErrorMessage}."),be(Vt,"storage-get","Error thrown when reading from storage. Original error: {$originalErrorMessage}."),be(Vt,"storage-set","Error thrown when writing to storage. Original error: {$originalErrorMessage}."),be(Vt,"storage-delete","Error thrown when deleting from storage. Original error: {$originalErrorMessage}."),Vt),sn=new We("app","Firebase",un),cn=function(){function e(t,n,r){var i=this;pe(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new dt("app",(function(){return i}),"PUBLIC"))}return me(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}]),e}(),ln="9.8.2";function fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"!==typeof t){var n=t;t={name:n}}var r=Object.assign({name:$t,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw sn.create("bad-app-name",{appName:String(i)});var a=Jt.get(i);if(a){if(et(e,a.options)&&et(r,a.config))return a;throw sn.create("duplicate-app",{appName:i})}var o,u=new yt(i),s=le(Zt.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new cn(e,r,u);return Jt.set(i,l),l}function dn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=Jt.get(e);if(!t)throw sn.create("no-app",{appName:e});return t}function hn(){return Array.from(Jt.values())}function pn(e){return vn.apply(this,arguments)}function vn(){return vn=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Jt.has(n)){e.next=6;break}return Jt.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),vn.apply(this,arguments)}function mn(e,t,n){var r,i=null!==(r=Xt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Yt.warn(u.join(" "))}nn(new dt("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function gn(e,t){if(null!==e&&"function"!==typeof e)throw sn.create("invalid-log-argument");!function(e,t){var n,r=le(bt);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=kt[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:gt[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function yn(e){var t;t=e,bt.forEach((function(e){e.setLogLevel(t)}))}var bn="firebase-heartbeat-store",kn=null;function wn(){return kn||(kn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ft(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ft(u.result),e.oldVersion,e.newVersion,Ft(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(bn)}}).catch((function(e){throw sn.create("storage-open",{originalErrorMessage:e.message})}))),kn}function _n(e){return xn.apply(this,arguments)}function xn(){return xn=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wn();case 3:return n=e.sent,e.abrupt("return",n.transaction(bn).objectStore(bn).get(En(t)));case 7:throw e.prev=7,e.t0=e.catch(0),sn.create("storage-get",{originalErrorMessage:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),xn.apply(this,arguments)}function In(e,t){return Sn.apply(this,arguments)}function Sn(){return Sn=he(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wn();case 3:return r=e.sent,i=r.transaction(bn,"readwrite"),a=i.objectStore(bn),e.next=8,a.put(n,En(t));case 8:return e.abrupt("return",i.done);case 11:throw e.prev=11,e.t0=e.catch(0),sn.create("storage-set",{originalErrorMessage:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),Sn.apply(this,arguments)}function En(e){return"".concat(e.name,"!").concat(e.options.appId)}var Tn=function(){function e(t){var n=this;pe(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Rn(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return me(e,[{key:"triggerHeartbeat",value:function(){var e=he(fe().mark((function e(){var t,n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Cn(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=he(fe().mark((function e(){var t,n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Cn(),n=Nn(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=Ae(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Cn(){return(new Date).toISOString().substring(0,10)}function Nn(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=le(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Pn(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),Pn(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var An,Rn=function(){function e(t){pe(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return me(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(qe()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,_n(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",In(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",In(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(ye(r.heartbeats),ye(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Pn(e){return Ae(JSON.stringify({version:2,heartbeats:e})).length}An="",nn(new dt("platform-logger",(function(e){return new Ht(e)}),"PRIVATE")),nn(new dt("heartbeat",(function(e){return new Tn(e)}),"PRIVATE")),mn(Kt,Qt,An),mn(Kt,Qt,"esm2017"),mn("fire-js","");function Dn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var On;Object.create;var Mn="facebook.com",Ln="github.com",Fn="google.com",Un="password",jn="twitter.com",Bn="EMAIL_SIGNIN",Vn="PASSWORD_RESET",qn="RECOVER_EMAIL",zn="REVERT_SECOND_FACTOR_ADDITION",Wn="VERIFY_AND_CHANGE_EMAIL",Gn="VERIFY_EMAIL";function Hn(){return be({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Kn=function(){var e;return be(e={},"admin-restricted-operation","This operation is restricted to administrators only."),be(e,"argument-error",""),be(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),be(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),be(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),be(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),be(e,"cordova-not-ready","Cordova framework is not ready."),be(e,"cors-unsupported","This browser is not supported."),be(e,"credential-already-in-use","This credential is already associated with a different user account."),be(e,"custom-token-mismatch","The custom token corresponds to a different audience."),be(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),be(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),be(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),be(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),be(e,"email-already-in-use","The email address is already in use by another account."),be(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),be(e,"expired-action-code","The action code has expired."),be(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),be(e,"internal-error","An internal AuthError has occurred."),be(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),be(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),be(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),be(e,"invalid-auth-event","An internal AuthError has occurred."),be(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),be(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),be(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),be(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),be(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),be(e,"invalid-email","The email address is badly formatted."),be(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),be(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),be(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),be(e,"invalid-credential","The supplied auth credential is malformed or has expired."),be(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),be(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),be(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),be(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),be(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),be(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),be(e,"wrong-password","The password is invalid or the user does not have a password."),be(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),be(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),be(e,"invalid-provider-id","The specified provider ID is invalid."),be(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),be(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),be(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),be(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),be(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),be(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),be(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),be(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),be(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),be(e,"missing-continue-uri","A continue URL must be provided in the request."),be(e,"missing-iframe-start","An internal AuthError has occurred."),be(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),be(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),be(e,"missing-multi-factor-info","No second factor identifier is provided."),be(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),be(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),be(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),be(e,"app-deleted","This instance of FirebaseApp has been deleted."),be(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),be(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),be(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),be(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),be(e,"no-auth-event","An internal AuthError has occurred."),be(e,"no-such-provider","User was not linked to an account with the given provider."),be(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),be(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),be(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),be(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),be(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),be(e,"provider-already-linked","User can only be linked to one identity for the given provider."),be(e,"quota-exceeded","The project's quota for this operation has been exceeded."),be(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),be(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),be(e,"rejected-credential","The request contains malformed or mismatching credentials."),be(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),be(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),be(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),be(e,"timeout","The operation has timed out."),be(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),be(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),be(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),be(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),be(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),be(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),be(e,"unverified-email","The operation requires a verified email."),be(e,"user-cancelled","The user did not grant your application the permissions it requested."),be(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),be(e,"user-disabled","The user account has been disabled by an administrator."),be(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),be(e,"user-signed-out",""),be(e,"weak-password","The password must be 6 characters long or more."),be(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),be(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Qn=Hn,Yn=new We("auth","Firebase",Hn()),$n=new It("@firebase/auth");function Xn(e){if($n.logLevel<=gt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];$n.error.apply($n,["Auth (".concat(ln,"): ").concat(e)].concat(n))}}function Jn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw nr.apply(void 0,[e].concat(n))}function Zn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return nr.apply(void 0,[e].concat(n))}function er(e,t,n){var r=Object.assign(Object.assign({},Qn()),be({},t,n));return new We("auth","Firebase",r).create(t,{appName:e.name})}function tr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Jn(e,"argument-error"),er(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function nr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=ye(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(ye(o)))}return Yn.create.apply(Yn,[e].concat(n))}function rr(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw nr.apply(void 0,[t].concat(r))}}function ir(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Xn(t),new Error(t)}function ar(e,t){e||ir(t)}var or=new Map;function ur(e){ar(e instanceof Function,"Expected a class definition");var t=or.get(e);return t?(ar(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,or.set(e,t),t)}function sr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function cr(){return"http:"===lr()||"https:"===lr()}function lr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var fr=function(){function e(t,n){pe(this,e),this.shortDelay=t,this.longDelay=n,ar(n>t,"Short delay should be less than long delay!"),this.isMobile=Le()||je()}return me(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(cr()||Ue()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function dr(e,t){ar(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var hr=function(){function e(){pe(this,e)}return me(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),pr=(be(On={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),be(On,"MISSING_CUSTOM_TOKEN","internal-error"),be(On,"INVALID_IDENTIFIER","invalid-email"),be(On,"MISSING_CONTINUE_URI","internal-error"),be(On,"INVALID_PASSWORD","wrong-password"),be(On,"MISSING_PASSWORD","internal-error"),be(On,"EMAIL_EXISTS","email-already-in-use"),be(On,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),be(On,"INVALID_IDP_RESPONSE","invalid-credential"),be(On,"INVALID_PENDING_TOKEN","invalid-credential"),be(On,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),be(On,"MISSING_REQ_TYPE","internal-error"),be(On,"EMAIL_NOT_FOUND","user-not-found"),be(On,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),be(On,"EXPIRED_OOB_CODE","expired-action-code"),be(On,"INVALID_OOB_CODE","invalid-action-code"),be(On,"MISSING_OOB_CODE","internal-error"),be(On,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),be(On,"INVALID_ID_TOKEN","invalid-user-token"),be(On,"TOKEN_EXPIRED","user-token-expired"),be(On,"USER_NOT_FOUND","user-token-expired"),be(On,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),be(On,"INVALID_CODE","invalid-verification-code"),be(On,"INVALID_SESSION_INFO","invalid-verification-id"),be(On,"INVALID_TEMPORARY_PROOF","invalid-credential"),be(On,"MISSING_SESSION_INFO","missing-verification-id"),be(On,"SESSION_EXPIRED","code-expired"),be(On,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),be(On,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),be(On,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),be(On,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),be(On,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),be(On,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),be(On,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),be(On,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),be(On,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),be(On,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),be(On,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),On),vr=new fr(3e4,6e4);function mr(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function gr(e,t,n,r){return yr.apply(this,arguments)}function yr(){return yr=he(fe().mark((function e(t,n,r,i){var a,o=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",br(t,a,he(fe().mark((function e(){var a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=nt(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",hr.fetch()(xr(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),yr.apply(this,arguments)}function br(e,t,n){return kr.apply(this,arguments)}function kr(){return kr=he(fe().mark((function e(t,n,r){var i,a,o,u,s,c,l,d,h,p;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},pr),n),e.prev=2,a=new Ir(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw Sr(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),l=f(c,2),d=l[0],h=l[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw Sr(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw Sr(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw Sr(t,"user-disabled",u);case 29:if(p=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!h){e.next=34;break}throw er(t,p,h);case 34:Jn(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof ze)){e.next=41;break}throw e.t0;case 41:Jn(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),kr.apply(this,arguments)}function wr(e,t,n,r){return _r.apply(this,arguments)}function _r(){return _r=he(fe().mark((function e(t,n,r,i){var a,o,u=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,gr(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Jn(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),_r.apply(this,arguments)}function xr(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?dr(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Ir=function(){function e(t){var n=this;pe(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Zn(n.auth,"network-request-failed"))}),vr.get())}))}return me(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Sr(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Zn(e,t,r);return i.customData._tokenResponse=n,i}function Er(e,t){return Tr.apply(this,arguments)}function Tr(){return Tr=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Tr.apply(this,arguments)}function Cr(e,t){return Nr.apply(this,arguments)}function Nr(){return Nr=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Nr.apply(this,arguments)}function Ar(e,t){return Rr.apply(this,arguments)}function Rr(){return Rr=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),Rr.apply(this,arguments)}function Pr(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function Dr(){return Dr=he(fe().mark((function e(t){var n,r,i,a,o,u,s=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=ft(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,rr((a=Mr(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:Pr(Or(a.auth_time)),issuedAtTime:Pr(Or(a.iat)),expirationTime:Pr(Or(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),Dr.apply(this,arguments)}function Or(e){return 1e3*Number(e)}function Mr(e){var t=f(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Xn("JWT malformed, contained fewer than 3 sections"),null;try{var a=Re(r);return a?JSON.parse(a):(Xn("Failed to decode base64 JWT payload"),null)}catch(o){return Xn("Caught error parsing JWT payload as JSON",o),null}}function Lr(e,t){return Fr.apply(this,arguments)}function Fr(){return Fr=he(fe().mark((function e(t,n){var r=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof ze&&Ur(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),Fr.apply(this,arguments)}function Ur(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var jr=function(){function e(t){pe(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return me(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(he(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Br=function(){function e(t,n){pe(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return me(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=Pr(this.lastLoginAt),this.creationTime=Pr(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function Vr(e){return qr.apply(this,arguments)}function qr(){return qr=he(fe().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,d;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,Lr(t,Ar(r,{idToken:i}));case 6:rr(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?Gr(o.providerUserInfo):[],s=Wr(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Br(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),qr.apply(this,arguments)}function zr(){return(zr=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ft(t),e.next=3,Vr(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wr(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(ye(n),ye(t))}function Gr(e){return e.map((function(e){var t=e.providerId,n=Dn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Hr(e,t){return Kr.apply(this,arguments)}function Kr(){return Kr=he(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(t,{},he(fe().mark((function e(){var r,i,a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=nt({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=xr(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",hr.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),Kr.apply(this,arguments)}var Qr=function(){function e(){pe(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return me(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){rr(e.idToken,"internal-error"),rr("undefined"!==typeof e.idToken,"internal-error"),rr("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=Mr(e);return rr(t,"internal-error"),rr("undefined"!==typeof t.exp,"internal-error"),rr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=he(fe().mark((function e(t){var n,r=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],rr(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=he(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Hr(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return ir("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(rr("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(rr("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(rr("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Yr(e,t){rr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var $r=function(){function e(t){pe(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=Dn(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?ye(a.providerData):[],this.metadata=new Br(a.createdAt||void 0,a.lastLoginAt||void 0)}return me(e,[{key:"getIdToken",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lr(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(rr(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return Dr.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return zr.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(rr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){rr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=he(fe().mark((function e(t){var n,r,i=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,Vr(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,Lr(this,Er(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,d=null!==(i=n.email)&&void 0!==i?i:void 0,h=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,g=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,b=n.uid,k=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;rr(b&&x,t,"internal-error");var I=Qr.fromJSON(this.name,x);rr("string"===typeof b,t,"internal-error"),Yr(f,t.name),Yr(d,t.name),rr("boolean"===typeof k,t,"internal-error"),rr("boolean"===typeof w,t,"internal-error"),Yr(h,t.name),Yr(p,t.name),Yr(v,t.name),Yr(m,t.name),Yr(g,t.name),Yr(y,t.name);var S=new e({uid:b,auth:t,email:d,emailVerified:k,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:h,tenantId:v,stsTokenManager:I,createdAt:g,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(S._redirectEventId=m),S}},{key:"_fromIdTokenResponse",value:function(){var t=he(fe().mark((function t(n,r){var i,a,o,u=arguments;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new Qr).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,Vr(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Xr=function(){function e(){pe(this,e),this.type="NONE",this.storage={}}return me(e,[{key:"_isAvailable",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Xr.type="NONE";var Jr=Xr;function Zr(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var ei=function(){function e(t,n,r){pe(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Zr(this.userKey,a.apiKey,o),this.fullPersistenceKey=Zr("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return me(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?$r._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=he(fe().mark((function t(n,r){var i,a,o,u,s,c,l,f,d,h,p,v=arguments;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(ur(Jr),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||ur(Jr),u=Zr(i,n.config.apiKey,n.name),s=null,c=le(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(d=t.sent)){t.next=23;break}return h=$r._fromJSON(n,d),f!==o&&(s=h),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function ti(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ai(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ni(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ui(t))return"Blackberry";if(si(t))return"Webos";if(ri(t))return"Safari";if((t.includes("chrome/")||ii(t))&&!t.includes("edge/"))return"Chrome";if(oi(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function ni(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/firefox\//i.test(e)}function ri(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ii(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/crios\//i.test(e)}function ai(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/iemobile/i.test(e)}function oi(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/android/i.test(e)}function ui(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/blackberry/i.test(e)}function si(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/webos/i.test(e)}function ci(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/iphone|ipad|ipod/i.test(e)}function li(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return ci(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function fi(){return Be()&&10===document.documentMode}function di(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return ci(e)||oi(e)||si(e)||ui(e)||/windows phone/i.test(e)||ai(e)}function hi(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=ti(Me());break;case"Worker":t="".concat(ti(Me()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ln,"/").concat(r)}var pi=function(){function e(t){pe(this,e),this.auth=t,this.queue=[]}return me(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=he(fe().mark((function e(t){var n,r,i,a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=le(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=le(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),vi=function(){function e(t,n,r){pe(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gi(this),this.idTokenSubscription=new gi(this),this.beforeStateQueue=new pi(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Yn,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return me(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=ur(t)),this._initializationPromise=this.queue(he(fe().mark((function r(){var i,a;return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ei.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=he(fe().mark((function e(t){var n,r,i,a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return rr(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Vr(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),e.t0.code==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ft(t):null)&&rr(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=he(fe().mark((function e(t){var n,r=this,i=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&rr(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(he(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(ur(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new We("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=he(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return rr(n=t&&ur(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,ei.create(this,[ur(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=he(fe().mark((function e(t){var n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return rr(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&(this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh()),this.currentUser=t,!t){e.next=7;break}return e.next=5,this.assertedPersistence.setCurrentUser(t);case 5:e.next=9;break;case 7:return e.next=9,this.assertedPersistence.removeCurrentUser();case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return rr(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hi(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=he(fe().mark((function e(){var t,n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=be({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function mi(e){return ft(e)}var gi=function(){function e(t){var n=this;pe(this,e),this.auth=t,this.observer=null,this.addObserver=ot((function(e){return n.observer=e}))}return me(e,[{key:"next",get:function(){return rr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function yi(e,t,n){var r=mi(e);rr(r._canInitEmulator,r,"emulator-config-failed"),rr(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=bi(t),o=function(e){var t=bi(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:ki(r.substr(a.length+1))}}var o=f(r.split(":"),2);return{host:o[0],port:ki(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function bi(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ki(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var wi=function(){function e(t,n){pe(this,e),this.providerId=t,this.signInMethod=n}return me(e,[{key:"toJSON",value:function(){return ir("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return ir("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return ir("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return ir("not implemented")}}]),e}();function _i(e,t){return xi.apply(this,arguments)}function xi(){return xi=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:resetPassword",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),xi.apply(this,arguments)}function Ii(e,t){return Si.apply(this,arguments)}function Si(){return Si=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),Si.apply(this,arguments)}function Ei(e,t){return Ti.apply(this,arguments)}function Ti(){return Ti=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:update",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ti.apply(this,arguments)}function Ci(e,t){return Ni.apply(this,arguments)}function Ni(){return Ni=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wr(t,"POST","/v1/accounts:signInWithPassword",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ni.apply(this,arguments)}function Ai(e,t){return Ri.apply(this,arguments)}function Ri(){return Ri=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:sendOobCode",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Ri.apply(this,arguments)}function Pi(e,t){return Di.apply(this,arguments)}function Di(){return Di=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ai(t,n));case 1:case"end":return e.stop()}}),e)}))),Di.apply(this,arguments)}function Oi(e,t){return Mi.apply(this,arguments)}function Mi(){return Mi=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ai(t,n));case 1:case"end":return e.stop()}}),e)}))),Mi.apply(this,arguments)}function Li(e,t){return Fi.apply(this,arguments)}function Fi(){return Fi=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ai(t,n));case 1:case"end":return e.stop()}}),e)}))),Fi.apply(this,arguments)}function Ui(e,t){return ji.apply(this,arguments)}function ji(){return ji=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ai(t,n));case 1:case"end":return e.stop()}}),e)}))),ji.apply(this,arguments)}function Bi(e,t){return Vi.apply(this,arguments)}function Vi(){return Vi=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wr(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Vi.apply(this,arguments)}function qi(e,t){return zi.apply(this,arguments)}function zi(){return zi=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wr(t,"POST","/v1/accounts:signInWithEmailLink",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),zi.apply(this,arguments)}var Wi=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return pe(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return me(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ci(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",Bi(t,{email:this._email,oobCode:this._password}));case 5:Jn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",Ii(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",qi(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Jn(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(wi);function Gi(e,t){return Hi.apply(this,arguments)}function Hi(){return Hi=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wr(t,"POST","/v1/accounts:signInWithIdp",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Hi.apply(this,arguments)}var Ki=function(e){ae(n,e);var t=ce(n);function n(){var e;return pe(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return me(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return Gi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Gi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Gi(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nt(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Jn("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=Dn(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(wi);function Qi(e,t){return Yi.apply(this,arguments)}function Yi(){return Yi=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:sendVerificationCode",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Yi.apply(this,arguments)}function $i(){return $i=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wr(t,"POST","/v1/accounts:signInWithPhoneNumber",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),$i.apply(this,arguments)}function Xi(){return Xi=he(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wr(t,"POST","/v1/accounts:signInWithPhoneNumber",mr(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Sr(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Xi.apply(this,arguments)}var Ji=be({},"USER_NOT_FOUND","user-not-found");function Zi(){return Zi=he(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",wr(t,"POST","/v1/accounts:signInWithPhoneNumber",mr(t,r),Ji));case 2:case"end":return e.stop()}}),e)}))),Zi.apply(this,arguments)}var ea=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this,"phone","phone")).params=e,r}return me(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return $i.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Xi.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Zi.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(wi);var ta=function(){function e(t){var n,r,i,a,o,u;pe(this,e);var s=rt(it(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);rr(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return me(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=rt(it(e)).link,n=t?rt(it(t)).deep_link_id:null,r=rt(it(e)).deep_link_id;return(r?rt(it(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(x_){return null}}}]),e}();var na=function(){function e(){pe(this,e),this.providerId=e.PROVIDER_ID}return me(e,null,[{key:"credential",value:function(e,t){return Wi._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=ta.parseLink(t);return rr(n,"argument-error"),Wi._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();na.PROVIDER_ID="password",na.EMAIL_PASSWORD_SIGN_IN_METHOD="password",na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var ra=function(){function e(t){pe(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return me(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),ia=function(e){ae(n,e);var t=ce(n);function n(){var e;return pe(this,n),(e=t.apply(this,arguments)).scopes=[],e}return me(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return ye(this.scopes)}}]),n}(ra),aa=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return rr(e.idToken||e.accessToken,"argument-error"),Ki._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return rr("providerId"in t&&"signInMethod"in t,"argument-error"),Ki._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(ia),oa=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.call(this,"facebook.com")}return me(n,null,[{key:"credential",value:function(e){return Ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(x_){return null}}}]),n}(ia);oa.FACEBOOK_SIGN_IN_METHOD="facebook.com",oa.PROVIDER_ID="facebook.com";var ua=function(e){ae(n,e);var t=ce(n);function n(){var e;return pe(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return me(n,null,[{key:"credential",value:function(e,t){return Ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(x_){return null}}}]),n}(ia);ua.GOOGLE_SIGN_IN_METHOD="google.com",ua.PROVIDER_ID="google.com";var sa=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.call(this,"github.com")}return me(n,null,[{key:"credential",value:function(e){return Ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(x_){return null}}}]),n}(ia);sa.GITHUB_SIGN_IN_METHOD="github.com",sa.PROVIDER_ID="github.com";var ca=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return me(n,[{key:"_getIdTokenResponse",value:function(e){return Gi(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,Gi(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,Gi(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(wi),la=function(e){ae(n,e);var t=ce(n);function n(e){return pe(this,n),rr(e.startsWith("saml."),"argument-error"),t.call(this,e)}return me(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=ca.fromJSON(e);return rr(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return ca._create(r,n)}catch(i){return null}}}]),n}(ra),fa=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.call(this,"twitter.com")}return me(n,null,[{key:"credential",value:function(e,t){return Ki._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(x_){return null}}}]),n}(ia);function da(e,t){return ha.apply(this,arguments)}function ha(){return ha=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wr(t,"POST","/v1/accounts:signUp",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),ha.apply(this,arguments)}fa.TWITTER_SIGN_IN_METHOD="twitter.com",fa.PROVIDER_ID="twitter.com";var pa=function(){function e(t){pe(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return me(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=he(fe().mark((function t(n,r,i){var a,o,u,s,c=arguments;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,$r._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=va(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=he(fe().mark((function t(n,r,i){var a;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=va(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function va(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function ma(){return ma=he(fe().mark((function e(t){var n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mi(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new pa({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,da(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,pa._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),ma.apply(this,arguments)}var ga=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a){var o,u;return pe(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(re(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return me(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(ze);function ya(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw ga._fromErrorAndOperation(e,n,t,r);throw n}))}function ba(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function ka(e,t){return wa.apply(this,arguments)}function wa(){return wa=he(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ft(t),e.next=3,Ia(!0,r,n);case 3:return e.t0=Cr,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=ba(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),wa.apply(this,arguments)}function _a(e,t){return xa.apply(this,arguments)}function xa(){return xa=he(fe().mark((function e(t,n){var r,i,a=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=Lr,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",pa._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),xa.apply(this,arguments)}function Ia(e,t,n){return Sa.apply(this,arguments)}function Sa(){return(Sa=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vr(n);case 2:i=ba(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",rr(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ea(e,t){return Ta.apply(this,arguments)}function Ta(){return Ta=he(fe().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,Lr(t,ya(i,a,n,t),r);case 6:return rr((o=e.sent).idToken,i,"internal-error"),rr(u=Mr(o.idToken),i,"internal-error"),s=u.sub,rr(t.uid===s,i,"user-mismatch"),e.abrupt("return",pa._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Jn(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),Ta.apply(this,arguments)}function Ca(e,t){return Na.apply(this,arguments)}function Na(){return Na=he(fe().mark((function e(t,n){var r,i,a,o,u=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,ya(t,i,n);case 4:return a=e.sent,e.next=7,pa._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),Na.apply(this,arguments)}function Aa(e,t){return Ra.apply(this,arguments)}function Ra(){return Ra=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ca(mi(t),n));case 1:case"end":return e.stop()}}),e)}))),Ra.apply(this,arguments)}function Pa(e,t){return Da.apply(this,arguments)}function Da(){return(Da=he(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ft(t),e.next=3,Ia(!1,r,n.providerId);case 3:return e.abrupt("return",_a(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oa(e,t){return Ma.apply(this,arguments)}function Ma(){return(Ma=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ea(ft(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function La(e,t){return Fa.apply(this,arguments)}function Fa(){return Fa=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",wr(t,"POST","/v1/accounts:signInWithCustomToken",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),Fa.apply(this,arguments)}function Ua(){return Ua=he(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mi(t),e.next=3,La(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,pa._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)}))),Ua.apply(this,arguments)}var ja=function(){function e(t,n){pe(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return me(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?Ba._fromServerResponse(e,t):Jn(e,"internal-error")}}]),e}(),Ba=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return me(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(ja);function Va(e,t,n){var r;rr((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),rr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(rr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(rr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function qa(){return qa=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),a={requestType:"PASSWORD_RESET",email:n},r&&Va(i,a,r),e.next=5,Oi(i,a);case 5:case"end":return e.stop()}}),e)}))),qa.apply(this,arguments)}function za(){return za=he(fe().mark((function e(t,n,r){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_i(ft(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)}))),za.apply(this,arguments)}function Wa(){return Wa=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ei(ft(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),Wa.apply(this,arguments)}function Ga(e,t){return Ha.apply(this,arguments)}function Ha(){return Ha=he(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ft(t),e.next=3,_i(r,{oobCode:n});case 3:i=e.sent,rr(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return rr(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:rr(i.mfaInfo,r,"internal-error");case 13:rr(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=ja._fromServerResponse(mi(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)}))),Ha.apply(this,arguments)}function Ka(){return Ka=he(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ga(ft(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),Ka.apply(this,arguments)}function Qa(e,t,n){return Ya.apply(this,arguments)}function Ya(){return Ya=he(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mi(t),e.next=3,da(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,pa._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),Ya.apply(this,arguments)}function $a(e,t,n){return Aa(ft(e),na.credential(t,n))}function Xa(){return Xa=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),a={requestType:"EMAIL_SIGNIN",email:n},rr(r.handleCodeInApp,i,"argument-error"),r&&Va(i,a,r),e.next=6,Li(i,a);case 6:case"end":return e.stop()}}),e)}))),Xa.apply(this,arguments)}function Ja(){return Ja=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),rr((a=na.credentialWithLink(n,r||sr()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",Aa(i,a));case 4:case"end":return e.stop()}}),e)}))),Ja.apply(this,arguments)}function Za(e,t){return eo.apply(this,arguments)}function eo(){return eo=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:createAuthUri",mr(t,n)));case 1:case"end":return e.stop()}}),e)}))),eo.apply(this,arguments)}function to(){return to=he(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=cr()?sr():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Za(ft(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)}))),to.apply(this,arguments)}function no(){return(no=he(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ft(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&Va(r.auth,a,n),e.next=8,Pi(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ro(){return(ro=he(fe().mark((function e(t,n,r){var i,a,o,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&Va(i.auth,o,r),e.next=8,Ui(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function io(e,t){return ao.apply(this,arguments)}function ao(){return ao=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",gr(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),ao.apply(this,arguments)}function oo(){return(oo=he(fe().mark((function e(t,n){var r,i,a,o,u,s,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=ft(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,Lr(a,io(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uo(e,t,n){return so.apply(this,arguments)}function so(){return so=he(fe().mark((function e(t,n,r){var i,a,o,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,Lr(t,Ii(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)}))),so.apply(this,arguments)}var co=me((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};pe(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),lo=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a){var o;return pe(this,n),(o=t.call(this,e,r,i)).username=a,o}return me(n)}(co),fo=function(e){ae(n,e);var t=ce(n);function n(e,r){return pe(this,n),t.call(this,e,"facebook.com",r)}return me(n)}(co),ho=function(e){ae(n,e);var t=ce(n);function n(e,r){return pe(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return me(n)}(lo),po=function(e){ae(n,e);var t=ce(n);function n(e,r){return pe(this,n),t.call(this,e,"google.com",r)}return me(n)}(co),vo=function(e){ae(n,e);var t=ce(n);function n(e,r,i){return pe(this,n),t.call(this,e,"twitter.com",r,i)}return me(n)}(lo);function mo(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=Mr(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new co(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new fo(a,i);case"github.com":return new ho(a,i);case"google.com":return new po(a,i);case"twitter.com":return new vo(a,i,e.screenName||null);case"custom":case"anonymous":return new co(a,null);default:return new co(a,r,i)}}(n)}var go=function(){function e(t,n){pe(this,e),this.type=t,this.credential=n}return me(e,[{key:"toJSON",value:function(){return{multiFactorSession:be({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t){return new e("enroll",t)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),yo=function(){function e(t,n,r){pe(this,e),this.session=t,this.hints=n,this.signInResolver=r}return me(e,[{key:"resolveSignIn",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=mi(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return ja._fromServerResponse(r,e)}));rr(i.mfaPendingCredential,r,"internal-error");var o=go._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=he(fe().mark((function e(t){var a,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,pa._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return rr(n.user,r,"internal-error"),e.abrupt("return",pa._forOperation(n.user,n.operationType,u));case 17:Jn(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function bo(e,t){return gr(e,"POST","/v2/accounts/mfaEnrollment:start",mr(e,t))}function ko(e,t){return gr(e,"POST","/v2/accounts/mfaEnrollment:withdraw",mr(e,t))}var wo=function(){function e(t){var n=this;pe(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return ja._fromServerResponse(t.auth,e)})))}))}return me(e,[{key:"getSession",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=go,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=he(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,Lr(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=he(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,Lr(this.user,ko(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),e.t0.code==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),_o=new WeakMap;var xo="__sak",Io=function(){function e(t,n){pe(this,e),this.storageRetriever=t,this.type=n}return me(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(xo,"1"),this.storage.removeItem(xo),Promise.resolve(!0)):Promise.resolve(!1)}catch(x_){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var So=function(e){ae(n,e);var t=ce(n);function n(){var e;return pe(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=Me();return ri(e)||ci(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=di(),e._shouldAllowMigration=!0,e}return me(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);fi()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=he(fe().mark((function e(t,r){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(ee(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=he(fe().mark((function e(t){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(ee(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(ee(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(Io);So.type="LOCAL";var Eo=So,To=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return me(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(Io);To.type="SESSION";var Co=To;function No(e){return Promise.all(e.map(function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var Ao=function(){function e(t){pe(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return me(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=he(fe().mark((function e(t){var n,r,i,a,o,u,s,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,No(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function Ro(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ao.receivers=[];var Po=function(){function e(t){pe(this,e),this.target=t,this.handlers=new Set}return me(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=he(fe().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=Ro("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function Do(){return window}function Oo(){return"undefined"!==typeof Do().WorkerGlobalScope&&"function"===typeof Do().importScripts}function Mo(){return Lo.apply(this,arguments)}function Lo(){return(Lo=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function Fo(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var Uo="firebaseLocalStorageDb",jo="firebaseLocalStorage",Bo="fbase_key",Vo=function(){function e(t){pe(this,e),this.request=t}return me(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function qo(e,t){return e.transaction([jo],t?"readwrite":"readonly").objectStore(jo)}function zo(){var e=indexedDB.deleteDatabase(Uo);return new Vo(e).toPromise()}function Wo(){var e=indexedDB.open(Uo,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(jo,{keyPath:Bo})}catch(r){n(r)}})),e.addEventListener("success",he(fe().mark((function n(){var r;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(jo)){n.next=12;break}return r.close(),n.next=5,zo();case 5:return n.t0=t,n.next=8,Wo();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Go(e,t,n){return Ho.apply(this,arguments)}function Ho(){return Ho=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=qo(t,!0).put((be(i={},Bo,n),be(i,"value",r),i)),e.abrupt("return",new Vo(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Ho.apply(this,arguments)}function Ko(e,t){return Qo.apply(this,arguments)}function Qo(){return Qo=he(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qo(t,!1).get(n),e.next=3,new Vo(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Qo.apply(this,arguments)}function Yo(e,t){var n=qo(e,!0).delete(t);return new Vo(n).toPromise()}var $o=function(){function e(){pe(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return me(e,[{key:"_openDb",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,Wo();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Oo()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=he(fe().mark((function e(){var t=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=Ao._getInstance(Oo()?self:null),this.receiver._subscribe("keyChanged",function(){var e=he(fe().mark((function e(n,r){var i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=he(fe().mark((function e(){var t,n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mo();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new Po(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&Fo()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,Wo();case 5:return t=e.sent,e.next=8,Go(t,xo,"1");case 8:return e.next=10,Yo(t,xo);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=he(fe().mark((function e(t,n){var r=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Go(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ko(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=he(fe().mark((function e(t){var n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Yo(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=he(fe().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=qo(e,!1).getAll();return new Vo(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=le(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(d){i.e(d)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(he(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();$o.type="LOCAL";var Xo=$o;function Jo(e,t){return gr(e,"POST","/v2/accounts/mfaSignIn:start",mr(e,t))}function Zo(e){return eu.apply(this,arguments)}function eu(){return eu=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gr(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),eu.apply(this,arguments)}function tu(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Zn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function nu(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var ru=1e12,iu=function(){function e(t){pe(this,e),this.auth=t,this.counter=ru,this._widgets=new Map}return me(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new au(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||ru;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||ru;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||ru,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),au=function(){function e(t,n,r){var i=this;pe(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;rr(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return me(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var ou=nu("rcb"),uu=new fr(3e4,6e4),su="https://www.google.com/recaptcha/api.js?",cu=function(){function e(){pe(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Do().grecaptcha}return me(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return rr(lu(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(Do().grecaptcha):new Promise((function(r,i){var a=Do().setTimeout((function(){i(Zn(e,"network-request-failed"))}),uu.get());Do()[ou]=function(){Do().clearTimeout(a),delete Do()[ou];var o=Do().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Zn(e,"internal-error"))},tu("".concat(su,"?").concat(nt({onload:ou,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Zn(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!Do().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function lu(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var fu=function(){function e(){pe(this,e)}return me(e,[{key:"load",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new iu(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),du="recaptcha",hu={theme:"light",type:"image"},pu=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},hu),r=arguments.length>2?arguments[2]:void 0;pe(this,e),this.parameters=n,this.type=du,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=mi(r),this.isInvisible="invisible"===this.parameters.size,rr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;rr(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fu:new cu,this.validateStartingState()}return me(e,[{key:"verify",value:function(){var e=he(fe().mark((function e(){var t,n,r,i=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){rr(!this.parameters.sitekey,this.auth,"argument-error"),rr(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),rr("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=Do()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){rr(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=he(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return rr(cr()&&!Oo(),this.auth,"internal-error"),e.next=3,vu();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Zo(this.auth);case 8:rr(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return rr(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function vu(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var mu=function(){function e(t,n){pe(this,e),this.verificationId=t,this.onConfirmation=n}return me(e,[{key:"confirm",value:function(e){var t=ea._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function gu(){return gu=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mi(t),e.next=3,wu(i,n,ft(r));case 3:return a=e.sent,e.abrupt("return",new mu(a,(function(e){return Aa(i,e)})));case 5:case"end":return e.stop()}}),e)}))),gu.apply(this,arguments)}function yu(e,t,n){return bu.apply(this,arguments)}function bu(){return(bu=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),e.next=3,Ia(!1,i,"phone");case 3:return e.next=5,wu(i.auth,n,ft(r));case 5:return a=e.sent,e.abrupt("return",new mu(a,(function(e){return Pa(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ku(){return(ku=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ft(t),e.next=3,wu(i.auth,n,ft(r));case 3:return a=e.sent,e.abrupt("return",new mu(a,(function(e){return Oa(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wu(e,t,n){return _u.apply(this,arguments)}function _u(){return _u=he(fe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,rr("string"===typeof a,t,"argument-error"),rr(r.type===du,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return rr("enroll"===u.type,t,"internal-error"),e.next=13,bo(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return rr("signin"===u.type,t,"internal-error"),rr(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Jo(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Qi(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,d=f.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),_u.apply(this,arguments)}function xu(){return(xu=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_a(ft(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Iu=function(){function e(t){pe(this,e),this.providerId=e.PROVIDER_ID,this.auth=mi(t)}return me(e,[{key:"verifyPhoneNumber",value:function(e,t){return wu(this.auth,e,ft(t))}}],[{key:"credential",value:function(e,t){return ea._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?ea._fromTokenResponse(n,r):null}}]),e}();function Su(e,t){return t?ur(t):(rr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Iu.PROVIDER_ID="phone",Iu.PHONE_SIGN_IN_METHOD="phone";var Eu=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this,"custom","custom")).params=e,r}return me(n,[{key:"_getIdTokenResponse",value:function(e){return Gi(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return Gi(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return Gi(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(wi);function Tu(e){return Ca(e.auth,new Eu(e),e.bypassAuthState)}function Cu(e){var t=e.auth,n=e.user;return rr(n,t,"internal-error"),Ea(n,new Eu(e),e.bypassAuthState)}function Nu(e){return Au.apply(this,arguments)}function Au(){return Au=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,rr(r=t.user,n,"internal-error"),e.abrupt("return",_a(r,new Eu(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),Au.apply(this,arguments)}var Ru=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];pe(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return me(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=he(fe().mark((function t(n,r){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=he(fe().mark((function e(t){var n,r,i,a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Tu;case"linkViaPopup":case"linkViaRedirect":return Nu;case"reauthViaPopup":case"reauthViaRedirect":return Cu;default:Jn(this.auth,"internal-error")}}},{key:"resolve",value:function(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){ar(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),Pu=new fr(2e3,1e4);function Du(e,t,n){return Ou.apply(this,arguments)}function Ou(){return Ou=he(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mi(t),tr(t,n,ra),a=Su(i,r),o=new Uu(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),Ou.apply(this,arguments)}function Mu(){return(Mu=he(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tr((i=ft(t)).auth,n,ra),a=Su(i.auth,r),o=new Uu(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lu(e,t,n){return Fu.apply(this,arguments)}function Fu(){return(Fu=he(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tr((i=ft(t)).auth,n,ra),a=Su(i.auth,r),o=new Uu(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Uu=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o){var u;return pe(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=re(u),u}return me(n,[{key:"executeNotNull",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return rr(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=he(fe().mark((function e(){var t,n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ar(1===this.filter.length,"Popup operations only handle one event"),t=Ro(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Zn(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Zn(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Zn(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,Pu.get())}()}}]),n}(Ru);Uu.currentPopupAction=null;var ju=new Map,Bu=function(e){ae(n,e);var t=ce(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return pe(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return me(n,[{key:"execute",value:function(){var e=he(fe().mark((function e(){var t,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=ju.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,Vu(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,ne(ee(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:ju.set(this.auth._key(),t);case 21:return this.bypassAuthState||ju.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=he(fe().mark((function e(t){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",ne(ee(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",ne(ee(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(Ru);function Vu(e,t){return qu.apply(this,arguments)}function qu(){return qu=he(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ku(n),i=Hu(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),qu.apply(this,arguments)}function zu(e,t){return Wu.apply(this,arguments)}function Wu(){return Wu=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Hu(t)._set(Ku(n),"true"));case 1:case"end":return e.stop()}}),e)}))),Wu.apply(this,arguments)}function Gu(e,t){ju.set(e._key(),t)}function Hu(e){return ur(e._redirectPersistence)}function Ku(e){return Zr("pendingRedirect",e.config.apiKey,e.name)}function Qu(e,t,n){return function(e,t,n){return Yu.apply(this,arguments)}(e,t,n)}function Yu(){return Yu=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=mi(t),tr(t,n,ra),a=Su(i,r),e.next=5,zu(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)}))),Yu.apply(this,arguments)}function $u(e,t,n){return function(e,t,n){return Xu.apply(this,arguments)}(e,t,n)}function Xu(){return(Xu=he(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tr((i=ft(t)).auth,n,ra),a=Su(i.auth,r),e.next=5,zu(a,i.auth);case 5:return e.next=7,is(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ju(e,t,n){return function(e,t,n){return Zu.apply(this,arguments)}(e,t,n)}function Zu(){return(Zu=he(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return tr((i=ft(t)).auth,n,ra),a=Su(i.auth,r),e.next=5,Ia(!1,i,n.providerId);case 5:return e.next=7,zu(a,i.auth);case 7:return e.next=9,is(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function es(e,t){return ts.apply(this,arguments)}function ts(){return ts=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mi(t)._initializationPromise;case 2:return e.abrupt("return",ns(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),ts.apply(this,arguments)}function ns(e,t){return rs.apply(this,arguments)}function rs(){return rs=he(fe().mark((function e(t,n){var r,i,a,o,u,s=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=mi(t),a=Su(i,n),o=new Bu(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),rs.apply(this,arguments)}function is(e){return as.apply(this,arguments)}function as(){return(as=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ro("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var os=function(){function e(t){pe(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return me(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ss(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!ss(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Zn(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(us(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(us(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function us(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function ss(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function cs(e){return ls.apply(this,arguments)}function ls(){return ls=he(fe().mark((function e(t){var n,r=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",gr(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),ls.apply(this,arguments)}var fs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ds=/^https?/;function hs(){return hs=he(fe().mark((function e(t){var n,r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,cs(t);case 4:n=e.sent,r=n.authorizedDomains,i=le(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!ps(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Jn(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),hs.apply(this,arguments)}function ps(e){var t=sr(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!ds.test(r))return!1;if(fs.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var vs=new fr(3e4,6e4);function ms(){var e=Do().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=ye(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var gs=null;function ys(e){return gs=gs||function(e){return new Promise((function(t,n){var r,i,a;function o(){ms(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){ms(),n(Zn(e,"network-request-failed"))},timeout:vs.get()})}if(null===(i=null===(r=Do().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=Do().gapi)||void 0===a?void 0:a.load)){var u=nu("iframefcb");return Do()[u]=function(){gapi.load?o():n(Zn(e,"network-request-failed"))},tu("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw gs=null,e}))}(e),gs}var bs=new fr(5e3,15e3),ks={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ws=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _s(e){var t=e.config;rr(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?dr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:ln},i=ws.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(nt(r).slice(1))}function xs(e){return Is.apply(this,arguments)}function Is(){return Is=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ys(t);case 2:return n=e.sent,rr(r=Do().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:_s(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ks,dontclear:!0},(function(e){return new Promise(function(){var n=he(fe().mark((function n(r,i){var a,o,u;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){Do().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Zn(t,"network-request-failed"),o=Do().setTimeout((function(){i(a)}),bs.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),Is.apply(this,arguments)}var Ss={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Es="_blank",Ts="http://localhost",Cs=function(){function e(t){pe(this,e),this.window=t,this.associatedEvent=null}return me(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function Ns(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},Ss),{width:r.toString(),height:i.toString(),top:a,left:o}),c=Me().toLowerCase();n&&(u=ii(c)?Es:n),ni(c)&&(t=t||Ts,s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=f(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(li(c)&&"_self"!==u)return As(t||"",u),new Cs(null);var d=window.open(t||"",u,l);rr(d,e,"popup-blocked");try{d.focus()}catch(h){}return new Cs(d)}function As(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var Rs="__/auth/handler",Ps="emulator/auth/handler";function Ds(e,t,n,r,i,a){rr(e.config.authDomain,e,"auth-domain-config-required"),rr(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:ln,eventId:i};if(t instanceof ra){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Je(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=f(s[u],2),l=c[0],d=c[1];o[l]=d}}if(t instanceof ia){var h=t.getScopes().filter((function(e){return""!==e}));h.length>0&&(o.scopes=h.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var g=m[v];void 0===p[g]&&delete p[g]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Rs);return dr(t,Ps)}(e),"?").concat(nt(p).slice(1))}var Os="webStorageSupport",Ms=function(){function e(){pe(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Co,this._completeRedirectFn=ns,this._overrideRedirectResult=Gu}return me(e,[{key:"_openPopup",value:function(){var e=he(fe().mark((function e(t,n,r,i){var a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ar(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=Ds(t,n,r,sr(),i),e.abrupt("return",Ns(t,o,Ro()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=he(fe().mark((function e(t,n,r,i){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=Ds(t,n,r,sr(),i),Do().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(ar(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xs(t);case 2:return n=e.sent,r=new os(t),n.register("authEvent",(function(e){return rr(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(Os,{type:Os},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),Jn(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return hs.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return di()||ri()||ci()}}]),e}(),Ls=Ms,Fs=function(){function e(t){pe(this,e),this.factorId=t}return me(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ir("unexpected MultiFactorSessionType")}}}]),e}(),Us=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this,"phone")).credential=e,r}return me(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return gr(e,"POST","/v2/accounts/mfaEnrollment:finalize",mr(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return gr(e,"POST","/v2/accounts/mfaSignIn:finalize",mr(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(Fs),js=function(){function e(){pe(this,e)}return me(e,null,[{key:"assertion",value:function(e){return Us._fromCredential(e)}}]),e}();js.FACTOR_ID="phone";var Bs,Vs="@firebase/auth",qs="0.20.2",zs=function(){function e(t){pe(this,e),this.auth=t,this.internalListeners=new Map}return me(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){rr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function Ws(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function Gs(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}Bs="Browser",nn(new dt("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){rr(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),rr(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:Bs,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hi(Bs)},i=new vi(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ur);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),nn(new dt("auth-internal",(function(e){return function(e){return new zs(e)}(mi(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),mn(Vs,qs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Bs)),mn(Vs,qs,"esm2017");var Hs=function(){return Hs=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Hs.apply(this,arguments)},Ks=function(e){return{loading:void 0===e||null===e,value:e}},Qs=function(e){var t=e?e():void 0,n=(0,i.useReducer)((function(e,t){switch(t.type){case"error":return Hs(Hs({},e),{error:t.error,loading:!1,value:void 0});case"reset":return Ks(t.defaultValue);case"value":return Hs(Hs({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),Ks(t)),r=n[0],a=n[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,i.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:u,setValue:s,value:r.value}}),[r.error,r.loading,o,u,s,r.value])},Ys=function(e,t){var n=Qs((function(){return e.currentUser})),r=n.error,a=n.loading,o=n.setError,u=n.setValue,s=n.value;(0,i.useEffect)((function(){var n=function(e,t,n,r){return ft(e).onAuthStateChanged(t,n,r)}(e,(function(e){return Ws(void 0,void 0,void 0,(function(){var n;return Gs(this,(function(r){switch(r.label){case 0:if(!(null===t||void 0===t?void 0:t.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,t.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o(n),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){n()}}),[e]);var c=[s,a,r];return(0,i.useMemo)((function(){return c}),c)},$s={tasks:"Tasks_tasks__Rt0Jp",tasksWindow:"Tasks_tasksWindow__J47GS",tasksList:"Tasks_tasksList__6cMPG",queries:"Tasks_queries__tF2wC"};function Xs(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Js(e,t){if(null==e)return{};var n,r,i=Xs(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Zs,ec="Task_task__AxqWw",tc="Task_taskInput__6l0HK",nc="Task_lightTaskInput__+Dt32",rc="Task_text__+M2DB",ic="Task_cross__qMRLW",ac="Task_mark__2EM+t",oc={mark:"\u0421heckmark_mark__7tEmZ",filled:"\u0421heckmark_filled__-GNVo"},uc=n(184),sc=["isActive"],cc=function(e){var t=e.isActive,n=Js(e,sc),r=(0,uc.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"11",height:"9",children:(0,uc.jsx)("path",{fill:"none",stroke:"#FFF",strokeWidth:"2",d:"M1 4.304L3.696 7l6-6"})}),i=t?oc.blank:oc.filled;return(0,uc.jsx)("div",Et(Et({},n),{},{children:(0,uc.jsx)("div",{className:oc.mark+" "+i,children:t?"":r})}))},lc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},fc={},dc=dc||{},hc=lc||self;function pc(){}function vc(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function mc(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var gc="closure_uid_"+(1e9*Math.random()>>>0),yc=0;function bc(e,t,n){return e.call.apply(e.bind,arguments)}function kc(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function wc(e,t,n){return(wc=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?bc:kc).apply(null,arguments)}function _c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function xc(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Ic(){this.s=this.s,this.o=this.o}var Sc={};Ic.prototype.s=!1,Ic.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,gc)&&e[gc]||(e[gc]=++yc)}(this);delete Sc[e]}},Ic.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ec=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Tc=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,a=0;a<r;a++)a in i&&t.call(n,i[a],a,e)};function Cc(e){return Array.prototype.concat.apply([],arguments)}function Nc(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ac(e){return/^[\s\xa0]*$/.test(e)}var Rc,Pc=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Dc(e,t){return-1!=e.indexOf(t)}function Oc(e,t){return e<t?-1:e>t?1:0}e:{var Mc=hc.navigator;if(Mc){var Lc=Mc.userAgent;if(Lc){Rc=Lc;break e}}Rc=""}function Fc(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function Uc(e){var t={};for(var n in e)t[n]=e[n];return t}var jc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Bc(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<jc.length;a++)n=jc[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Vc(e){return Vc[" "](e),e}Vc[" "]=pc;var qc,zc=Dc(Rc,"Opera"),Wc=Dc(Rc,"Trident")||Dc(Rc,"MSIE"),Gc=Dc(Rc,"Edge"),Hc=Gc||Wc,Kc=Dc(Rc,"Gecko")&&!(Dc(Rc.toLowerCase(),"webkit")&&!Dc(Rc,"Edge"))&&!(Dc(Rc,"Trident")||Dc(Rc,"MSIE"))&&!Dc(Rc,"Edge"),Qc=Dc(Rc.toLowerCase(),"webkit")&&!Dc(Rc,"Edge");function Yc(){var e=hc.document;return e?e.documentMode:void 0}e:{var $c="",Xc=function(){var e=Rc;return Kc?/rv:([^\);]+)(\)|;)/.exec(e):Gc?/Edge\/([\d\.]+)/.exec(e):Wc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Qc?/WebKit\/(\S+)/.exec(e):zc?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Xc&&($c=Xc?Xc[1]:""),Wc){var Jc=Yc();if(null!=Jc&&Jc>parseFloat($c)){qc=String(Jc);break e}}qc=$c}var Zc,el={};function tl(){return function(e){var t=el;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Pc(String(qc)).split("."),n=Pc("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Oc(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Oc(0==a[2].length,0==o[2].length)||Oc(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(hc.document&&Wc){var nl=Yc();Zc=nl||(parseInt(qc,10)||void 0)}else Zc=void 0;var rl=Zc,il=function(){if(!hc.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{hc.addEventListener("test",pc,t),hc.removeEventListener("test",pc,t)}catch(n){}return e}();function al(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ol(e,t){if(al.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Kc){e:{try{Vc(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ul[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ol.Z.h.call(this)}}al.prototype.h=function(){this.defaultPrevented=!0},xc(ol,al);var ul={2:"touch",3:"pen",4:"mouse"};ol.prototype.h=function(){ol.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var sl="closure_listenable_"+(1e6*Math.random()|0),cl=0;function ll(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++cl,this.ca=this.fa=!1}function fl(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function dl(e){this.src=e,this.g={},this.h=0}function hl(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ec(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(fl(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function pl(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ca&&a.listener==t&&a.capture==!!n&&a.ia==r)return i}return-1}dl.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=pl(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new ll(t,this.src,a,!!r,i)).fa=n,e.push(t)),t};var vl="closure_lm_"+(1e6*Math.random()|0),ml={};function gl(e,t,n,r,i){if(r&&r.once)return bl(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)gl(e,t[a],n,r,i);return null}return n=El(n),e&&e[sl]?e.N(t,n,mc(r)?!!r.capture:!!r,i):yl(e,t,n,!1,r,i)}function yl(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=mc(i)?!!i.capture:!!i,u=Il(e);if(u||(e[vl]=u=new dl(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=xl;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)il||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(_l(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function bl(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)bl(e,t[a],n,r,i);return null}return n=El(n),e&&e[sl]?e.O(t,n,mc(r)?!!r.capture:!!r,i):yl(e,t,n,!0,r,i)}function kl(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)kl(e,t[a],n,r,i);else r=mc(r)?!!r.capture:!!r,n=El(n),e&&e[sl]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=pl(a=e.g[t],n,r,i))&&(fl(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Il(e))&&(t=e.g[t.toString()],e=-1,t&&(e=pl(t,n,r,i)),(n=-1<e?t[e]:null)&&wl(n))}function wl(e){if("number"!==typeof e&&e&&!e.ca){var t=e.src;if(t&&t[sl])hl(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(_l(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Il(t))?(hl(n,e),0==n.h&&(n.src=null,t[vl]=null)):fl(e)}}}function _l(e){return e in ml?ml[e]:ml[e]="on"+e}function xl(e,t){if(e.ca)e=!0;else{t=new ol(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&wl(e),e=n.call(r,t)}return e}function Il(e){return(e=e[vl])instanceof dl?e:null}var Sl="__closure_events_fn_"+(1e9*Math.random()>>>0);function El(e){return"function"===typeof e?e:(e[Sl]||(e[Sl]=function(t){return e.handleEvent(t)}),e[Sl])}function Tl(){Ic.call(this),this.i=new dl(this),this.P=this,this.I=null}function Cl(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new al(t,e);else if(t instanceof al)t.target=t.target||e;else{var i=t;Bc(t=new al(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Nl(o,r,!0,t)&&i}if(i=Nl(o=t.g=e,r,!0,t)&&i,i=Nl(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Nl(o=t.g=n[a],r,!1,t)&&i}function Nl(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ca&&o.capture==n){var u=o.listener,s=o.ia||o.src;o.fa&&hl(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}xc(Tl,Ic),Tl.prototype[sl]=!0,Tl.prototype.removeEventListener=function(e,t,n,r){kl(this,e,t,n,r)},Tl.prototype.M=function(){if(Tl.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)fl(n[r]);delete t.g[e],t.h--}}this.I=null},Tl.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Tl.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Al=hc.JSON.stringify;function Rl(){var e=jl,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Pl,Dl=function(){function e(){pe(this,e),this.h=this.g=null}return me(e,[{key:"add",value:function(e,t){var n=Ol.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Ol=new(function(){function e(t,n){pe(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return me(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Ml}),(function(e){return e.reset()})),Ml=function(){function e(){pe(this,e),this.next=this.g=this.h=null}return me(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ll(e){hc.setTimeout((function(){throw e}),0)}function Fl(e,t){Pl||function(){var e=hc.Promise.resolve(void 0);Pl=function(){e.then(Bl)}}(),Ul||(Pl(),Ul=!0),jl.add(e,t)}var Ul=!1,jl=new Dl;function Bl(){for(var e;e=Rl();){try{e.h.call(e.g)}catch(n){Ll(n)}var t=Ol;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ul=!1}function Vl(e,t){Tl.call(this),this.h=e||1,this.g=t||hc,this.j=wc(this.kb,this),this.l=Date.now()}function ql(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function zl(e,t,n){if("function"===typeof e)n&&(e=wc(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=wc(e.handleEvent,e)}return 2147483647<Number(t)?-1:hc.setTimeout(e,t||0)}function Wl(e){e.g=zl((function(){e.g=null,e.i&&(e.i=!1,Wl(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}xc(Vl,Tl),(Zs=Vl.prototype).da=!1,Zs.S=null,Zs.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Cl(this,"tick"),this.da&&(ql(this),this.start()))}},Zs.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Zs.M=function(){Vl.Z.M.call(this),ql(this),delete this.g};var Gl=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return me(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Wl(this)}},{key:"M",value:function(){ne(ee(n.prototype),"M",this).call(this),this.g&&(hc.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Ic);function Hl(e){Ic.call(this),this.h=e,this.g={}}xc(Hl,Ic);var Kl=[];function Ql(e,t,n,r){Array.isArray(n)||(n&&(Kl[0]=n.toString()),n=Kl);for(var i=0;i<n.length;i++){var a=gl(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function Yl(e){Fc(e.g,(function(e,t){this.g.hasOwnProperty(t)&&wl(e)}),e),e.g={}}function $l(){this.g=!0}function Xl(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Al(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}Hl.prototype.M=function(){Hl.Z.M.call(this),Yl(this)},Hl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$l.prototype.Aa=function(){this.g=!1},$l.prototype.info=function(){};var Jl={},Zl=null;function ef(){return Zl=Zl||new Tl}function tf(e){al.call(this,Jl.Ma,e)}function nf(e){var t=ef();Cl(t,new tf(t,e))}function rf(e,t){al.call(this,Jl.STAT_EVENT,e),this.stat=t}function af(e){var t=ef();Cl(t,new rf(t,e))}function of(e,t){al.call(this,Jl.Na,e),this.size=t}function uf(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return hc.setTimeout((function(){e()}),t)}Jl.Ma="serverreachability",xc(tf,al),Jl.STAT_EVENT="statevent",xc(rf,al),Jl.Na="timingevent",xc(of,al);var sf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},cf={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function lf(){}function ff(e){return e.h||(e.h=e.i())}function df(){}lf.prototype.h=null;var hf,pf={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function vf(){al.call(this,"d")}function mf(){al.call(this,"c")}function gf(){}function yf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new Hl(this),this.P=kf,e=Hc?125:void 0,this.W=new Vl(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new bf}function bf(){this.i=null,this.g="",this.h=!1}xc(vf,al),xc(mf,al),xc(gf,lf),gf.prototype.g=function(){return new XMLHttpRequest},gf.prototype.i=function(){return{}},hf=new gf;var kf=45e3,wf={},_f={};function xf(e,t,n){e.K=1,e.v=Hf(Bf(t)),e.s=n,e.U=!0,If(e,null)}function If(e,t){e.F=Date.now(),Cf(e),e.A=Bf(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),ad(n.h,"t",r),e.C=0,n=e.l.H,e.h=new bf,e.g=uh(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Gl(wc(e.Ia,e,e.g),e.O)),Ql(e.V,e.g,"readystatechange",e.gb),t=e.H?Uc(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),nf(1),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.X,e.s)}function Sf(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Ba)}function Ef(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Tf(e,n))==_f){4==t&&(e.o=4,af(14),i=!1),Xl(e.j,e.m,null,"[Incomplete Response]");break}if(r==wf){e.o=4,af(15),Xl(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Xl(e.j,e.m,r,null),Df(e,r)}Sf(e)&&r!=_f&&r!=wf&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,af(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Zd(t),t.L=!0,af(11))):(Xl(e.j,e.m,n,"[Invalid Chunked Response]"),Pf(e),Rf(e))}function Tf(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?_f:(n=Number(t.substring(n,r)),isNaN(n)?wf:(r+=1)+n>t.length?_f:(t=t.substr(r,n),e.C=r+n,t))}function Cf(e){e.Y=Date.now()+e.P,Nf(e,e.P)}function Nf(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=uf(wc(e.eb,e),t)}function Af(e){e.B&&(hc.clearTimeout(e.B),e.B=null)}function Rf(e){0==e.l.G||e.I||nh(e.l,e)}function Pf(e){Af(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ql(e.W),Yl(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Df(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||hd(n.i,e)))if(n.I=e.N,!e.J&&hd(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;th(n),Wd(n)}Jd(n),af(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=uf(wc(n.ab,n),6e3));if(1>=dd(n.i)&&n.ka){try{n.ka()}catch(a){}n.ka=void 0}}else ih(n,11)}else if((e.J||n.g==e)&&th(n),!Ac(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.U=a[0],a=a[1],2==n.G)if("c"==a[0]){n.J=a[1],n.la=a[2];var o=a[3];null!=o&&(n.ma=o,n.h.info("VER="+n.ma));var u=a[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;!f.g&&(Dc(l,"spdy")||Dc(l,"quic")||Dc(l,"h2"))&&(f.j=f.l,f.g=new Set,f.h&&(pd(f,f.h),f.h=null))}if(r.D){var d=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;d&&(r.sa=d,Gf(r.F,r.D,d))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var h=e;if((r=n).oa=oh(r,r.H?r.la:null,r.W),h.J){vd(r.i,h);var p=h,v=r.K;v&&p.setTimeout(v),p.B&&(Af(p),Cf(p)),r.g=h}else Xd(r);0<n.l.length&&Kd(n)}else"stop"!=a[0]&&"close"!=a[0]||ih(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?ih(n,7):zd(n):"noop"!=a[0]&&n.j&&n.j.wa(a),n.A=0)}nf(4)}catch(a){}}function Of(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(vc(e)||"string"===typeof e)Tc(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(vc(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"===typeof e)return e.split("");if(vc(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length;for(var a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}}function Mf(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Mf)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Lf(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Ff(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Ff(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Ff(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Zs=yf.prototype).setTimeout=function(e){this.P=e},Zs.gb=function(e){e=e.target;var t=this.L;t&&3==Ud(e)?t.l():this.Ia(e)},Zs.Ia=function(e){try{if(e==this.g)e:{var t=Ud(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Hc||this.g&&(this.h.h||this.g.ga()||jd(this.g)))){this.I||4!=t||7==n||nf(8==n||0>=r?3:2),Af(this);var i=this.g.ba();this.N=i;t:if(Sf(this)){var a=jd(this.g);e="";var o=a.length,u=4==Ud(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Pf(this),Rf(this);var s="";break t}this.h.i=new hc.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,e+=this.h.i.decode(a[n],{stream:u&&n==o-1});a.splice(0,o),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ac(c)){var f=c;break t}}f=null}if(!(i=f)){this.i=!1,this.o=3,af(12),Pf(this),Rf(this);break e}Xl(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Df(this,i)}this.U?(Ef(this,t,s),Hc&&this.i&&3==t&&(Ql(this.V,this.W,"tick",this.fb),this.W.start())):(Xl(this.j,this.m,s,null),Df(this,s)),4==t&&Pf(this),this.i&&!this.I&&(4==t?nh(this.l,this):(this.i=!1,Cf(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,af(12)):(this.o=0,af(13)),Pf(this),Rf(this)}}}catch(t){}},Zs.fb=function(){if(this.g){var e=Ud(this.g),t=this.g.ga();this.C<t.length&&(Af(this),Ef(this,e,t),this.i&&4!=e&&Cf(this))}},Zs.cancel=function(){this.I=!0,Pf(this)},Zs.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(nf(3),af(17)),Pf(this),this.o=2,Rf(this)):Nf(this,this.Y-e)},(Zs=Mf.prototype).R=function(){Lf(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Zs.T=function(){return Lf(this),this.g.concat()},Zs.get=function(e,t){return Ff(this.h,e)?this.h[e]:t},Zs.set=function(e,t){Ff(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Zs.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],a=this.get(i);e.call(t,a,i,this)}};var Uf=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function jf(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof jf){this.g=void 0!==t?t:e.g,Vf(this,e.j),this.s=e.s,qf(this,e.i),zf(this,e.m),this.l=e.l,t=e.h;var n=new td;n.i=t.i,t.g&&(n.g=new Mf(t.g),n.h=t.h),Wf(this,n),this.o=e.o}else e&&(n=String(e).match(Uf))?(this.g=!!t,Vf(this,n[1]||"",!0),this.s=Kf(n[2]||""),qf(this,n[3]||"",!0),zf(this,n[4]),this.l=Kf(n[5]||"",!0),Wf(this,n[6]||"",!0),this.o=Kf(n[7]||"")):(this.g=!!t,this.h=new td(null,this.g))}function Bf(e){return new jf(e)}function Vf(e,t,n){e.j=n?Kf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function qf(e,t,n){e.i=n?Kf(t,!0):t}function zf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Wf(e,t,n){t instanceof td?(e.h=t,function(e,t){t&&!e.j&&(nd(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(rd(this,t),ad(this,n,e))}),e)),e.j=t}(e.h,e.g)):(n||(t=Qf(t,Zf)),e.h=new td(t,e.g))}function Gf(e,t,n){e.h.set(t,n)}function Hf(e){return Gf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Kf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Qf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Yf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Yf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}jf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Qf(t,$f,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Qf(t,$f,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(Qf(n,"/"==n.charAt(0)?Jf:Xf,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Qf(n,ed)),e.join("")};var $f=/[#\/\?@]/g,Xf=/[#\?:]/g,Jf=/[#\?]/g,Zf=/[#\?@]/g,ed=/#/g;function td(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function nd(e){e.g||(e.g=new Mf,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function rd(e,t){nd(e),t=od(e,t),Ff(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Ff((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Lf(e)))}function id(e,t){return nd(e),t=od(e,t),Ff(e.g.h,t)}function ad(e,t,n){rd(e,t),0<n.length&&(e.i=null,e.g.set(od(e,t),Nc(n)),e.h+=n.length)}function od(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Zs=td.prototype).add=function(e,t){nd(this),this.i=null,e=od(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Zs.forEach=function(e,t){nd(this),this.g.forEach((function(n,r){Tc(n,(function(n){e.call(t,n,r,this)}),this)}),this)},Zs.T=function(){nd(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Zs.R=function(e){nd(this);var t=[];if("string"===typeof e)id(this,e)&&(t=Cc(t,this.g.get(od(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Cc(t,e[n])}return t},Zs.set=function(e,t){return nd(this),this.i=null,id(this,e=od(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Zs.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Zs.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var o=i;""!==r[a]&&(o+="="+encodeURIComponent(String(r[a]))),e.push(o)}}return this.i=e.join("&")};var ud=me((function e(t,n){pe(this,e),this.h=t,this.g=n}));function sd(e){this.l=e||ld,hc.PerformanceNavigationTiming?e=0<(e=hc.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(hc.g&&hc.g.Ea&&hc.g.Ea()&&hc.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var cd,ld=10;function fd(e){return!!e.h||!!e.g&&e.g.size>=e.j}function dd(e){return e.h?1:e.g?e.g.size:0}function hd(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function pd(e,t){e.g?e.g.add(t):e.h=t}function vd(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function md(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=le(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Nc(e.i)}function gd(){}function yd(){this.g=new gd}function bd(e,t,n){var r=n||"";try{Of(e,(function(e,n){var i=e;mc(e)&&(i=Al(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function kd(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function wd(e){this.l=e.$b||null,this.j=e.ib||!1}function _d(e,t){Tl.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=xd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sd.prototype.cancel=function(){if(this.i=md(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=le(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},gd.prototype.stringify=function(e){return hc.JSON.stringify(e,void 0)},gd.prototype.parse=function(e){return hc.JSON.parse(e,void 0)},xc(wd,lf),wd.prototype.g=function(){return new _d(this.l,this.j)},wd.prototype.i=(cd={},function(){return cd}),xc(_d,Tl);var xd=0;function Id(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Sd(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ed(e)}function Ed(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Zs=_d.prototype).open=function(e,t){if(this.readyState!=xd)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ed(this)},Zs.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||hc).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Zs.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Sd(this)),this.readyState=xd},Zs.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ed(this)),this.g&&(this.readyState=3,Ed(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if("undefined"!==typeof hc.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Id(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Zs.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Sd(this):Ed(this),3==this.readyState&&Id(this)}},Zs.Ua=function(e){this.g&&(this.response=this.responseText=e,Sd(this))},Zs.Ta=function(e){this.g&&(this.response=e,Sd(this))},Zs.ha=function(){this.g&&Sd(this)},Zs.setRequestHeader=function(e,t){this.v.append(e,t)},Zs.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Zs.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(_d.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Td=hc.JSON.parse;function Cd(e){Tl.call(this),this.headers=new Mf,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Nd,this.K=this.L=!1}xc(Cd,Tl);var Nd="",Ad=/^https?$/i,Rd=["POST","PUT"];function Pd(e){return"content-type"==e.toLowerCase()}function Dd(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Od(e),Ld(e)}function Od(e){e.D||(e.D=!0,Cl(e,"complete"),Cl(e,"error"))}function Md(e){if(e.h&&"undefined"!=typeof dc&&(!e.C[1]||4!=Ud(e)||2!=e.ba()))if(e.v&&4==Ud(e))zl(e.Fa,0,e);else if(Cl(e,"readystatechange"),4==Ud(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Uf)[1]||null;if(!a&&hc.self&&hc.self.location){var o=hc.self.location.protocol;a=o.substr(0,o.length-1)}i=!Ad.test(a?a.toLowerCase():"")}t=i}if(t)Cl(e,"complete"),Cl(e,"success");else{e.m=6;try{var u=2<Ud(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",Od(e)}}finally{Ld(e)}}}function Ld(e,t){if(e.g){Fd(e);var n=e.g,r=e.C[0]?pc:null;e.g=null,e.C=null,t||Cl(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Fd(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(hc.clearTimeout(e.A),e.A=null)}function Ud(e){return e.g?e.g.readyState:0}function jd(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Nd:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Bd(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return Fc(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Gf(e,t,n))}function Vd(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function qd(e){this.za=0,this.l=[],this.h=new $l,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Vd("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Vd("baseRetryDelayMs",5e3,e),this.$a=Vd("retryDelaySeedMs",1e4,e),this.Ya=Vd("forwardChannelMaxRetries",2,e),this.ra=Vd("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new sd(e&&e.concurrentRequestLimit),this.Ca=new yd,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function zd(e){if(Gd(e),3==e.G){var t=e.V++,n=Bf(e.F);Gf(n,"SID",e.J),Gf(n,"RID",t),Gf(n,"TYPE","terminate"),Yd(e,n),(t=new yf(e,e.h,t,void 0)).K=2,t.v=Hf(Bf(n)),n=!1,hc.navigator&&hc.navigator.sendBeacon&&(n=hc.navigator.sendBeacon(t.v.toString(),"")),!n&&hc.Image&&((new Image).src=t.v,n=!0),n||(t.g=uh(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Cf(t)}ah(e)}function Wd(e){e.g&&(Zd(e),e.g.cancel(),e.g=null)}function Gd(e){Wd(e),e.u&&(hc.clearTimeout(e.u),e.u=null),th(e),e.i.cancel(),e.m&&("number"===typeof e.m&&hc.clearTimeout(e.m),e.m=null)}function Hd(e,t){e.l.push(new ud(e.Za++,t)),3==e.G&&Kd(e)}function Kd(e){fd(e.i)||e.m||(e.m=!0,Fl(e.Ha,e),e.C=0)}function Qd(e,t){var n;n=t?t.m:e.V++;var r=Bf(e.F);Gf(r,"SID",e.J),Gf(r,"RID",n),Gf(r,"AID",e.U),Yd(e,r),e.o&&e.s&&Bd(r,e.o,e.s),n=new yf(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=$d(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),pd(e.i,n),xf(n,r,t)}function Yd(e,t){e.j&&Of({},(function(e,n){Gf(t,n,e)}))}function $d(e,t,n){n=Math.min(e.l.length,n);var r=e.j?wc(e.j.Oa,e.j,e):null;e:for(var i=e.l,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{bd(l,o,"req"+c+"_")}catch(Mh){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function Xd(e){e.g||e.u||(e.Y=1,Fl(e.Ga,e),e.A=0)}function Jd(e){return!(e.g||e.u||3<=e.A)&&(e.Y++,e.u=uf(wc(e.Ga,e),rh(e,e.A)),e.A++,!0)}function Zd(e){null!=e.B&&(hc.clearTimeout(e.B),e.B=null)}function eh(e){e.g=new yf(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Bf(e.oa);Gf(t,"RID","rpc"),Gf(t,"SID",e.J),Gf(t,"CI",e.N?"0":"1"),Gf(t,"AID",e.U),Yd(e,t),Gf(t,"TYPE","xmlhttp"),e.o&&e.s&&Bd(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Hf(Bf(t)),n.s=null,n.U=!0,If(n,e)}function th(e){null!=e.v&&(hc.clearTimeout(e.v),e.v=null)}function nh(e,t){var n=null;if(e.g==t){th(e),Zd(e),e.g=null;var r=2}else{if(!hd(e.i,t))return;n=t.D,vd(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Cl(r=ef(),new of(r,n,t,i)),Kd(e)}else Xd(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(dd(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.l=t.D.concat(e.l),!0):!(1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya))&&(e.m=uf(wc(e.Ha,e,t),rh(e,e.C)),e.C++,!0))}(e,t)||2==r&&Jd(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:ih(e,5);break;case 4:ih(e,10);break;case 3:ih(e,6);break;default:ih(e,2)}}function rh(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function ih(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=wc(e.jb,e);n||(n=new jf("//www.google.com/images/cleardot.gif"),hc.location&&"http"==hc.location.protocol||Vf(n,"https"),Hf(n)),function(e,t){var n=new $l;if(hc.Image){var r=new Image;r.onload=_c(kd,n,r,"TestLoadImage: loaded",!0,t),r.onerror=_c(kd,n,r,"TestLoadImage: error",!1,t),r.onabort=_c(kd,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=_c(kd,n,r,"TestLoadImage: timeout",!1,t),hc.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else af(2);e.G=0,e.j&&e.j.va(t),ah(e),Gd(e)}function ah(e){e.G=0,e.I=-1,e.j&&(0==md(e.i).length&&0==e.l.length||(e.i.i.length=0,Nc(e.l),e.l.length=0),e.j.ua())}function oh(e,t,n){var r=function(e){return e instanceof jf?Bf(e):new jf(e,void 0)}(n);if(""!=r.i)t&&qf(r,t+"."+r.i),zf(r,r.m);else{var i=hc.location;r=function(e,t,n,r){var i=new jf(null,void 0);return e&&Vf(i,e),t&&qf(i,t),n&&zf(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&Fc(e.aa,(function(e,t){Gf(r,t,e)})),t=e.D,n=e.sa,t&&n&&Gf(r,t,n),Gf(r,"VER",e.ma),Yd(e,r),r}function uh(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ba&&!e.qa?new Cd(new wd({ib:!0})):new Cd(e.qa)).L=e.H,t}function sh(){}function ch(){if(Wc&&!(10<=Number(rl)))throw Error("Environmental error: no available transport.")}function lh(e,t){Tl.call(this),this.g=new qd(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ac(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ac(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hh(this)}function fh(e){vf.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dh(){mf.call(this),this.status=1}function hh(e){this.g=e}(Zs=Cd.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():hf.g(),this.C=this.u?ff(this.u):ff(hf),this.g.onreadystatechange=wc(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(a){return void Dd(this,a)}e=n||"";var i=new Mf(this.headers);r&&Of(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=Pd,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.T()),n=hc.FormData&&e instanceof hc.FormData,!(0<=Ec(Rd,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.g.setRequestHeader(t,e)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fd(this),0<this.B&&((this.K=function(e){return Wc&&tl()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wc(this.pa,this)):this.A=zl(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(a){Dd(this,a)}},Zs.pa=function(){"undefined"!=typeof dc&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cl(this,"timeout"),this.abort(8))},Zs.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Cl(this,"complete"),Cl(this,"abort"),Ld(this))},Zs.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ld(this,!0)),Cd.Z.M.call(this)},Zs.Fa=function(){this.s||(this.F||this.v||this.l?Md(this):this.cb())},Zs.cb=function(){Md(this)},Zs.ba=function(){try{return 2<Ud(this)?this.g.status:-1}catch(cd){return-1}},Zs.ga=function(){try{return this.g?this.g.responseText:""}catch(cd){return""}},Zs.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Td(t)}},Zs.Da=function(){return this.m},Zs.La=function(){return"string"===typeof this.j?this.j:String(this.j)},(Zs=qd.prototype).ma=8,Zs.G=1,Zs.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Zs.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new yf(this,this.h,e,void 0),n=this.s;if(this.P&&(n?Bc(n=Uc(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var a=this.l[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=$d(this,t,r),Gf(i=Bf(this.F),"RID",e),Gf(i,"CVER",22),this.D&&Gf(i,"X-HTTP-Session-Id",this.D),Yd(this,i),this.o&&n&&Bd(i,this.o,n),pd(this.i,t),this.Ra&&Gf(i,"TYPE","init"),this.ja?(Gf(i,"$req",r),Gf(i,"SID","null"),t.$=!0,xf(t,i,null)):xf(t,i,r),this.G=2}}else 3==this.G&&(e?Qd(this,e):0==this.l.length||fd(this.i)||Qd(this))},Zs.Ga=function(){if(this.u=null,eh(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=uf(wc(this.bb,this),e)}},Zs.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,af(10),Wd(this),eh(this))},Zs.ab=function(){null!=this.v&&(this.v=null,Wd(this),Jd(this),af(19))},Zs.jb=function(e){e?(this.h.info("Successfully pinged google.com"),af(2)):(this.h.info("Failed to ping google.com"),af(1))},(Zs=sh.prototype).xa=function(){},Zs.wa=function(){},Zs.va=function(){},Zs.ua=function(){},Zs.Oa=function(){},ch.prototype.g=function(e,t){return new lh(e,t)},xc(lh,Tl),lh.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Fl(wc(e.hb,e,t))),af(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=oh(e,null,e.W),Kd(e)},lh.prototype.close=function(){zd(this.g)},lh.prototype.u=function(e){if("string"===typeof e){var t={};t.__data__=e,Hd(this.g,t)}else this.v?((t={}).__data__=Al(e),Hd(this.g,t)):Hd(this.g,e)},lh.prototype.M=function(){this.g.j=null,delete this.j,zd(this.g),delete this.g,lh.Z.M.call(this)},xc(fh,vf),xc(dh,mf),xc(hh,sh),hh.prototype.xa=function(){Cl(this.g,"a")},hh.prototype.wa=function(e){Cl(this.g,new fh(e))},hh.prototype.va=function(e){Cl(this.g,new dh(e))},hh.prototype.ua=function(){Cl(this.g,"b")},ch.prototype.createWebChannel=ch.prototype.g,lh.prototype.send=lh.prototype.u,lh.prototype.open=lh.prototype.m,lh.prototype.close=lh.prototype.close,sf.NO_ERROR=0,sf.TIMEOUT=8,sf.HTTP_ERROR=6,cf.COMPLETE="complete",df.EventType=pf,pf.OPEN="a",pf.CLOSE="b",pf.ERROR="c",pf.MESSAGE="d",Tl.prototype.listen=Tl.prototype.N,Cd.prototype.listenOnce=Cd.prototype.O,Cd.prototype.getLastError=Cd.prototype.La,Cd.prototype.getLastErrorCode=Cd.prototype.Da,Cd.prototype.getStatus=Cd.prototype.ba,Cd.prototype.getResponseJson=Cd.prototype.Qa,Cd.prototype.getResponseText=Cd.prototype.ga,Cd.prototype.send=Cd.prototype.ea;var ph=fc.createWebChannelTransport=function(){return new ch},vh=fc.getStatEventTarget=function(){return ef()},mh=fc.ErrorCode=sf,gh=fc.EventType=cf,yh=fc.Event=Jl,bh=fc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},kh=fc.FetchXmlHttpFactory=wd,wh=fc.WebChannel=df,_h=fc.XhrIo=Cd,xh="@firebase/firestore",Ih=function(){function e(t){pe(this,e),this.uid=t}return me(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Ih.UNAUTHENTICATED=new Ih(null),Ih.GOOGLE_CREDENTIALS=new Ih("google-credentials-uid"),Ih.FIRST_PARTY=new Ih("first-party-uid"),Ih.MOCK_USER=new Ih("mock-user");var Sh="9.8.0",Eh=new It("@firebase/firestore");function Th(){return Eh.logLevel}function Ch(e){if(Eh.logLevel<=gt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Rh);Eh.debug.apply(Eh,["Firestore (".concat(Sh,"): ").concat(e)].concat(ye(i)))}}function Nh(e){if(Eh.logLevel<=gt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Rh);Eh.error.apply(Eh,["Firestore (".concat(Sh,"): ").concat(e)].concat(ye(i)))}}function Ah(e){if(Eh.logLevel<=gt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Rh);Eh.warn.apply(Eh,["Firestore (".concat(Sh,"): ").concat(e)].concat(ye(i)))}}function Rh(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Ph(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Sh,") INTERNAL ASSERTION FAILED: ")+e;throw Nh(t),new Error(t)}function Dh(e,t){e||Ph()}function Oh(e,t){return e}var Mh={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Lh=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return me(n)}(ze),Fh=me((function e(){var t=this;pe(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Uh=me((function e(t,n){pe(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),jh=function(){function e(){pe(this,e)}return me(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ih.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Bh=function(){function e(t){pe(this,e),this.token=t,this.changeListener=null}return me(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Vh=function(){function e(t){pe(this,e),this.t=t,this.currentUser=Ih.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return me(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Fh;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Fh,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Ch("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Ch("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Fh)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Ch("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Dh("string"==typeof n.accessToken),new Uh(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Dh(null===e||"string"==typeof e),new Ih(e)}}]),e}(),qh=me((function e(t,n,r){pe(this,e),this.type="FirstParty",this.user=Ih.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)})),zh=function(){function e(t,n,r){pe(this,e),this.h=t,this.l=n,this.m=r}return me(e,[{key:"getToken",value:function(){return Promise.resolve(new qh(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Ih.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Wh=me((function e(t){pe(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Gh=function(){function e(t){pe(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}return me(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Ch("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.p;return n.p=e.token,Ch("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Ch("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?i(e):Ch("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Dh("string"==typeof t.token),e.p=t.token,new Wh(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),Hh=function(){function e(t,n){var r=this;pe(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.I(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return me(e,[{key:"I",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function Kh(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}Hh.A=-1;var Qh=function(){function e(){pe(this,e)}return me(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=Kh(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function Yh(e,t){return e<t?-1:e>t?1:0}function $h(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Xh(e){return e+"\0"}var Jh=function(){function e(t,n){if(pe(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Lh(Mh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Lh(Mh.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Lh(Mh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Lh(Mh.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return me(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Yh(this.nanoseconds,e.nanoseconds):Yh(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Zh=function(){function e(t){pe(this,e),this.timestamp=t}return me(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Jh(0,0))}},{key:"max",value:function(){return new e(new Jh(253402300799,999999999))}}]),e}();function ep(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function tp(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function np(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var rp=function(){function e(t,n,r){pe(this,e),void 0===n?n=0:n>t.length&&Ph(),void 0===r?r=t.length-n:r>t.length-n&&Ph(),this.segments=t,this.offset=n,this.len=r}return me(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),ip=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,ye(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(rp),ap=/^[_a-zA-Z][_a-zA-Z0-9]*$/,op=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return ap.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Lh(Mh.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Lh(Mh.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Lh(Mh.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(rp),up=function(){function e(t){pe(this,e),this.fields=t,t.sort(op.comparator)}return me(e,[{key:"covers",value:function(e){var t,n=le(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return $h(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}]),e}();var sp=function(e){function t(e){pe(this,t),this.binaryString=e}return me(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Yh(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();sp.EMPTY_BYTE_STRING=new sp("");var cp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lp(e){if(Dh(!!e),"string"==typeof e){var t=0,n=cp.exec(e);if(Dh(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:fp(e.seconds),nanos:fp(e.nanos)}}function fp(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function dp(e){return"string"==typeof e?sp.fromBase64String(e):sp.fromUint8Array(e)}function hp(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pp(e){var t=e.mapValue.fields.__previous_value__;return hp(t)?pp(t):t}function vp(e){var t=lp(e.mapValue.fields.__local_write_time__.timestampValue);return new Jh(t.seconds,t.nanos)}var mp=me((function e(t,n,r,i,a,o,u,s){pe(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),gp=function(){function e(t,n){pe(this,e),this.projectId=t,this.database=n||"(default)"}return me(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function yp(e){return null==e}function bp(e){return 0===e&&1/e==-1/0}function kp(e){return"number"==typeof e&&Number.isInteger(e)&&!bp(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var wp=function(){function e(t){pe(this,e),this.path=t}return me(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===ip.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(ip.fromString(t))}},{key:"fromName",value:function(t){return new e(ip.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(ip.emptyPath())}},{key:"comparator",value:function(e,t){return ip.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new ip(t.slice()))}}]),e}(),_p={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xp={nullValue:"NULL_VALUE"};function Ip(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?hp(e)?4:Up(e)?9007199254740991:10:Ph()}function Sp(e,t){if(e===t)return!0;var n=Ip(e);if(n!==Ip(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return vp(e).isEqual(vp(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=lp(e.timestampValue),r=lp(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return dp(e.bytesValue).isEqual(dp(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return fp(e.geoPointValue.latitude)===fp(t.geoPointValue.latitude)&&fp(e.geoPointValue.longitude)===fp(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return fp(e.integerValue)===fp(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=fp(e.doubleValue),r=fp(t.doubleValue);return n===r?bp(n)===bp(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $h(e.arrayValue.values||[],t.arrayValue.values||[],Sp);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ep(n)!==ep(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Sp(n[i],r[i])))return!1;return!0}(e,t);default:return Ph()}}function Ep(e,t){return void 0!==(e.values||[]).find((function(e){return Sp(e,t)}))}function Tp(e,t){if(e===t)return 0;var n=Ip(e),r=Ip(t);if(n!==r)return Yh(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Yh(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=fp(e.integerValue||e.doubleValue),r=fp(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Cp(e.timestampValue,t.timestampValue);case 4:return Cp(vp(e),vp(t));case 5:return Yh(e.stringValue,t.stringValue);case 6:return function(e,t){var n=dp(e),r=dp(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Yh(n[i],r[i]);if(0!==a)return a}return Yh(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Yh(fp(e.latitude),fp(t.latitude));return 0!==n?n:Yh(fp(e.longitude),fp(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Tp(n[i],r[i]);if(a)return a}return Yh(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===_p.mapValue&&t===_p.mapValue)return 0;if(e===_p.mapValue)return 1;if(t===_p.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Yh(r[o],a[o]);if(0!==u)return u;var s=Tp(n[r[o]],i[a[o]]);if(0!==s)return s}return Yh(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Ph()}}function Cp(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Yh(e,t);var n=lp(e),r=lp(t),i=Yh(n.seconds,r.seconds);return 0!==i?i:Yh(n.nanos,r.nanos)}function Np(e){return Ap(e)}function Ap(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=lp(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?dp(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,wp.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=le(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Ap(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=le(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Ap(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Ph();var t,n}function Rp(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Pp(e){return!!e&&"integerValue"in e}function Dp(e){return!!e&&"arrayValue"in e}function Op(e){return!!e&&"nullValue"in e}function Mp(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Lp(e){return!!e&&"mapValue"in e}function Fp(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return tp(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Fp(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Fp(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Up(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function jp(e){return"nullValue"in e?xp:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Rp(gp.empty(),wp.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Ph()}function Bp(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Rp(gp.empty(),wp.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?_p:Ph()}function Vp(e,t){var n=Tp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function qp(e,t){var n=Tp(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var zp=function(){function e(t){pe(this,e),this.value=t}return me(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Lp(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Fp(t)}},{key:"setAll",value:function(e){var t=this,n=op.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Fp(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Lp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Sp(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Lp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){tp(t,(function(t,n){return e[t]=n}));var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Fp(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function Wp(e){var t=[];return tp(e.fields,(function(e,n){var r=new op([e]);if(Lp(n)){var i=Wp(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=le(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new up(t)}var Gp=function(){function e(t,n,r,i,a,o){pe(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.data=a,this.documentState=o}return me(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=zp.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=zp.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Zh.min(),Zh.min(),zp.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,Zh.min(),r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Zh.min(),zp.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Zh.min(),zp.empty(),2)}}]),e}(),Hp=me((function e(t,n,r,i){pe(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Kp(e){return e.fields.find((function(e){return 2===e.kind}))}function Qp(e){return e.fields.filter((function(e){return 2!==e.kind}))}Hp.UNKNOWN_ID=-1;var Yp=me((function e(t,n){pe(this,e),this.fieldPath=t,this.kind=n})),$p=function(){function e(t,n){pe(this,e),this.sequenceNumber=t,this.offset=n}return me(e,null,[{key:"empty",value:function(){return new e(0,Zp.min())}}]),e}();function Xp(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zh.fromTimestamp(1e9===r?new Jh(n+1,0):new Jh(n,r));return new Zp(i,wp.empty(),t)}function Jp(e){return new Zp(e.readTime,e.key,-1)}var Zp=function(){function e(t,n,r){pe(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return me(e,null,[{key:"min",value:function(){return new e(Zh.min(),wp.empty(),-1)}},{key:"max",value:function(){return new e(Zh.max(),wp.empty(),-1)}}]),e}();function ev(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=wp.comparator(e.documentKey,t.documentKey))?n:Yh(e.largestBatchId,t.largestBatchId)}var tv=function(){function e(t,n){pe(this,e),this.comparator=t,this.root=n||rv.EMPTY}return me(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,rv.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,rv.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new nv(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new nv(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new nv(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new nv(this.root,e,this.comparator,!0)}}]),e}(),nv=function(){function e(t,n,r,i){pe(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return me(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),rv=function(){function e(t,n,r,i,a){pe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return me(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Ph();if(this.right.isRed())throw Ph();var e=this.left.check();if(e!==this.right.check())throw Ph();return e+(this.isRed()?0:1)}}]),e}();rv.EMPTY=null,rv.RED=!0,rv.BLACK=!1,rv.EMPTY=new(function(){function e(){pe(this,e),this.size=0}return me(e,[{key:"key",get:function(){throw Ph()}},{key:"value",get:function(){throw Ph()}},{key:"color",get:function(){throw Ph()}},{key:"left",get:function(){throw Ph()}},{key:"right",get:function(){throw Ph()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new rv(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var iv=function(){function e(t){pe(this,e),this.comparator=t,this.data=new tv(this.comparator)}return me(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new av(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new av(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),av=function(){function e(t){pe(this,e),this.iter=t}return me(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function ov(e){return e.hasNext()?e.getNext():void 0}var uv=me((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;pe(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.P=null}));function sv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new uv(e,t,n,r,i,a,o)}function cv(e){var t=Oh(e);if(null===t.P){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return(t=e).field.canonicalString()+t.op.toString()+Np(t.value);var t})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),yp(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Np(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Np(e)})).join(",")),t.P=n}return t.P}function lv(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Ev(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],a=t.filters[r],i.op!==a.op||!i.field.isEqual(a.field)||!Sp(i.value,a.value))return!1;var i,a;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cv(e.startAt,t.startAt)&&Cv(e.endAt,t.endAt)}function fv(e){return wp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function dv(e,t){return e.filters.filter((function(e){return e instanceof vv&&e.field.isEqual(t)}))}function hv(e,t,n){var r,i=xp,a=!0,o=le(dv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=xp,c=!0;switch(u.op){case"<":case"<=":s=jp(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=xp}Vp({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Vp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function pv(e,t,n){var r,i=_p,a=!0,o=le(dv(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=_p,c=!0;switch(u.op){case">=":case">":s=Bp(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=_p}qp({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(d){o.e(d)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];qp({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var vv=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return me(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Tp(t,this.value)):null!==t&&Ip(this.value)===Ip(t)&&this.v(Tp(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ph()}}},{key:"S",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new mv(e,t,r):"array-contains"===t?new kv(e,r):"in"===t?new wv(e,r):"not-in"===t?new _v(e,r):"array-contains-any"===t?new xv(e,r):new n(e,t,r)}},{key:"V",value:function(e,t,n){return"in"===t?new gv(e,n):new yv(e,n)}}]),n}(function(){return me((function e(){pe(this,e)}))}()),mv=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this,e,r,i)).key=wp.fromName(i.referenceValue),a}return me(n,[{key:"matches",value:function(e){var t=wp.comparator(e.key,this.key);return this.v(t)}}]),n}(vv),gv=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,"in",r)).keys=bv("in",r),i}return me(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(vv),yv=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,"not-in",r)).keys=bv("not-in",r),i}return me(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(vv);function bv(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return wp.fromName(e.referenceValue)}))}var kv=function(e){ae(n,e);var t=ce(n);function n(e,r){return pe(this,n),t.call(this,e,"array-contains",r)}return me(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Dp(t)&&Ep(t.arrayValue,this.value)}}]),n}(vv),wv=function(e){ae(n,e);var t=ce(n);function n(e,r){return pe(this,n),t.call(this,e,"in",r)}return me(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Ep(this.value.arrayValue,t)}}]),n}(vv),_v=function(e){ae(n,e);var t=ce(n);function n(e,r){return pe(this,n),t.call(this,e,"not-in",r)}return me(n,[{key:"matches",value:function(e){if(Ep(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Ep(this.value.arrayValue,t)}}]),n}(vv),xv=function(e){ae(n,e);var t=ce(n);function n(e,r){return pe(this,n),t.call(this,e,"array-contains-any",r)}return me(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Dp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Ep(t.value.arrayValue,e)}))}}]),n}(vv),Iv=me((function e(t,n){pe(this,e),this.position=t,this.inclusive=n})),Sv=me((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";pe(this,e),this.field=t,this.dir=n}));function Ev(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Tv(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?wp.comparator(wp.fromName(o.referenceValue),n.key):Tp(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Cv(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Sp(e.position[n],t.position[n]))return!1;return!0}var Nv=me((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;pe(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.D=null,this.C=null,this.startAt,this.endAt}));function Av(e,t,n,r,i,a,o,u){return new Nv(e,t,n,r,i,a,o,u)}function Rv(e){return new Nv(e)}function Pv(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Dv(e){var t,n=le(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.S())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Ov(e){return null!==e.collectionGroup}function Mv(e){var t=Oh(e);if(null===t.D){t.D=[];var n=Dv(t),r=Pv(t);if(null!==n&&null===r)n.isKeyField()||t.D.push(new Sv(n)),t.D.push(new Sv(op.keyField(),"asc"));else{var i,a=!1,o=le(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.D.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Sv(op.keyField(),s))}}}return t.D}function Lv(e){var t=Oh(e);if(!t.C)if("F"===t.limitType)t.C=sv(t.path,t.collectionGroup,Mv(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=le(Mv(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new Sv(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new Iv(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new Iv(t.startAt.position,t.startAt.inclusive):null;t.C=sv(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.C}function Fv(e,t,n){return new Nv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Uv(e,t){return lv(Lv(e),Lv(t))&&e.limitType===t.limitType}function jv(e){return"".concat(cv(Lv(e)),"|lt:").concat(e.limitType)}function Bv(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Np(t.value));var t})).join(", "),"]")),yp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Np(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Np(e)})).join(",")),"Target(".concat(t,")")}(Lv(e)),"; limitType=").concat(e.limitType,")")}function Vv(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):wp.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=le(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=le(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Tv(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Mv(e),t))&&!(e.endAt&&!function(e,t,n){var r=Tv(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Mv(e),t))}(e,t)}function qv(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function zv(e){return function(t,n){var r,i=!1,a=le(Mv(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Wv(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Wv(e,t,n){var r=e.field.isKeyField()?wp.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Tp(r,i):Ph()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ph()}}function Gv(e,t){if(e.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:bp(t)?"-0":t}}function Hv(e){return{integerValue:""+e}}function Kv(e,t){return kp(t)?Hv(t):Gv(e,t)}var Qv=me((function e(){pe(this,e),this._=void 0}));function Yv(e,t,n){return e instanceof Jv?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Zv?em(e,t):e instanceof tm?nm(e,t):function(e,t){var n=Xv(e,t),r=im(n)+im(e.k);return Pp(n)&&Pp(e.k)?Hv(r):Gv(e.M,r)}(e,t)}function $v(e,t,n){return e instanceof Zv?em(e,t):e instanceof tm?nm(e,t):n}function Xv(e,t){return e instanceof rm?Pp(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Jv=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n)}(Qv),Zv=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).elements=e,r}return me(n)}(Qv);function em(e,t){var n,r=am(t),i=le(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Sp(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var tm=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).elements=e,r}return me(n)}(Qv);function nm(e,t){var n,r=am(t),i=le(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Sp(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var rm=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).M=e,i.k=r,i}return me(n)}(Qv);function im(e){return fp(e.integerValue||e.doubleValue)}function am(e){return Dp(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var om=me((function e(t,n){pe(this,e),this.field=t,this.transform=n}));var um=me((function e(t,n){pe(this,e),this.version=t,this.transformResults=n})),sm=function(){function e(t,n){pe(this,e),this.updateTime=t,this.exists=n}return me(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function cm(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var lm=me((function e(){pe(this,e)}));function fm(e,t,n){e instanceof mm?function(e,t,n){var r=e.value.clone(),i=bm(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof gm?function(e,t,n){if(cm(e.precondition,t)){var r=bm(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ym(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function dm(e,t,n){e instanceof mm?function(e,t,n){if(cm(e.precondition,t)){var r=e.value.clone(),i=km(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(vm(t),r).setHasLocalMutations()}}(e,t,n):e instanceof gm?function(e,t,n){if(cm(e.precondition,t)){var r=km(e.fieldTransforms,n,t),i=t.data;i.setAll(ym(e)),i.setAll(r),t.convertToFoundDocument(vm(t),i).setHasLocalMutations()}}(e,t,n):function(e,t){cm(e.precondition,t)&&t.convertToNoDocument(Zh.min())}(e,t)}function hm(e,t){var n,r=null,i=le(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Xv(a.transform,o||null);null!=u&&(null==r&&(r=zp.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function pm(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$h(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Zv&&t instanceof Zv||e instanceof tm&&t instanceof tm?$h(e.elements,t.elements,Sp):e instanceof rm&&t instanceof rm?Sp(e.k,t.k):e instanceof Jv&&t instanceof Jv}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function vm(e){return e.isFoundDocument()?e.version:Zh.min()}var mm=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return pe(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return me(n)}(lm),gm=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return pe(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return me(n)}(lm);function ym(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function bm(e,t,n){var r=new Map;Dh(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,$v(o,u,n[i]))}return r}function km(e,t,n){var r,i=new Map,a=le(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Yv(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var wm,_m,xm=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return me(n)}(lm),Im=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return me(n)}(lm),Sm=me((function e(t){pe(this,e),this.count=t}));function Em(e){switch(e){default:return Ph();case Mh.CANCELLED:case Mh.UNKNOWN:case Mh.DEADLINE_EXCEEDED:case Mh.RESOURCE_EXHAUSTED:case Mh.INTERNAL:case Mh.UNAVAILABLE:case Mh.UNAUTHENTICATED:return!1;case Mh.INVALID_ARGUMENT:case Mh.NOT_FOUND:case Mh.ALREADY_EXISTS:case Mh.PERMISSION_DENIED:case Mh.FAILED_PRECONDITION:case Mh.ABORTED:case Mh.OUT_OF_RANGE:case Mh.UNIMPLEMENTED:case Mh.DATA_LOSS:return!0}}function Tm(e){if(void 0===e)return Nh("GRPC error has no .code"),Mh.UNKNOWN;switch(e){case wm.OK:return Mh.OK;case wm.CANCELLED:return Mh.CANCELLED;case wm.UNKNOWN:return Mh.UNKNOWN;case wm.DEADLINE_EXCEEDED:return Mh.DEADLINE_EXCEEDED;case wm.RESOURCE_EXHAUSTED:return Mh.RESOURCE_EXHAUSTED;case wm.INTERNAL:return Mh.INTERNAL;case wm.UNAVAILABLE:return Mh.UNAVAILABLE;case wm.UNAUTHENTICATED:return Mh.UNAUTHENTICATED;case wm.INVALID_ARGUMENT:return Mh.INVALID_ARGUMENT;case wm.NOT_FOUND:return Mh.NOT_FOUND;case wm.ALREADY_EXISTS:return Mh.ALREADY_EXISTS;case wm.PERMISSION_DENIED:return Mh.PERMISSION_DENIED;case wm.FAILED_PRECONDITION:return Mh.FAILED_PRECONDITION;case wm.ABORTED:return Mh.ABORTED;case wm.OUT_OF_RANGE:return Mh.OUT_OF_RANGE;case wm.UNIMPLEMENTED:return Mh.UNIMPLEMENTED;case wm.DATA_LOSS:return Mh.DATA_LOSS;default:return Ph()}}(_m=wm||(wm={}))[_m.OK=0]="OK",_m[_m.CANCELLED=1]="CANCELLED",_m[_m.UNKNOWN=2]="UNKNOWN",_m[_m.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_m[_m.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_m[_m.NOT_FOUND=5]="NOT_FOUND",_m[_m.ALREADY_EXISTS=6]="ALREADY_EXISTS",_m[_m.PERMISSION_DENIED=7]="PERMISSION_DENIED",_m[_m.UNAUTHENTICATED=16]="UNAUTHENTICATED",_m[_m.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_m[_m.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_m[_m.ABORTED=10]="ABORTED",_m[_m.OUT_OF_RANGE=11]="OUT_OF_RANGE",_m[_m.UNIMPLEMENTED=12]="UNIMPLEMENTED",_m[_m.INTERNAL=13]="INTERNAL",_m[_m.UNAVAILABLE=14]="UNAVAILABLE",_m[_m.DATA_LOSS=15]="DATA_LOSS";var Cm=function(){function e(t,n){pe(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return me(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){tp(this.inner,(function(t,n){var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var a=f(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return np(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Nm=new tv(wp.comparator);function Am(){return Nm}var Rm=new tv(wp.comparator);function Pm(){for(var e=Rm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Dm(){return new Cm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Om=new tv(wp.comparator),Mm=new iv(wp.comparator);function Lm(){for(var e=Mm,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Fm=new iv(Yh);function Um(){return Fm}var jm=function(){function e(t,n,r,i,a){pe(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return me(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Bm.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Zh.min(),r,Um(),Am(),Lm())}}]),e}(),Bm=function(){function e(t,n,r,i,a){pe(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return me(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(sp.EMPTY_BYTE_STRING,n,Lm(),Lm(),Lm())}}]),e}(),Vm=me((function e(t,n,r,i){pe(this,e),this.O=t,this.removedTargetIds=n,this.key=r,this.F=i})),qm=me((function e(t,n){pe(this,e),this.targetId=t,this.$=n})),zm=me((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sp.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;pe(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Wm=function(){function e(){pe(this,e),this.B=0,this.L=Km(),this.U=sp.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}return me(e,[{key:"current",get:function(){return this.q}},{key:"resumeToken",get:function(){return this.U}},{key:"G",get:function(){return 0!==this.B}},{key:"j",get:function(){return this.K}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}},{key:"H",value:function(){var e=Lm(),t=Lm(),n=Lm();return this.L.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ph()}})),new Bm(this.U,this.q,e,t,n)}},{key:"J",value:function(){this.K=!1,this.L=Km()}},{key:"Y",value:function(e,t){this.K=!0,this.L=this.L.insert(e,t)}},{key:"X",value:function(e){this.K=!0,this.L=this.L.remove(e)}},{key:"Z",value:function(){this.B+=1}},{key:"tt",value:function(){this.B-=1}},{key:"et",value:function(){this.K=!0,this.q=!0}}]),e}(),Gm=function(){function e(t){pe(this,e),this.nt=t,this.st=new Map,this.it=Am(),this.rt=Hm(),this.ot=new iv(Yh)}return me(e,[{key:"ut",value:function(e){var t,n=le(e.O);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,a=le(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.ct(o,e.key,e.F)}}catch(u){a.e(u)}finally{a.f()}}},{key:"ht",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.lt(n);switch(e.state){case 0:t.ft(n)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||t.removeTarget(n);break;case 3:t.ft(n)&&(r.et(),r.W(e.resumeToken));break;case 4:t.ft(n)&&(t.dt(n),r.W(e.resumeToken));break;default:Ph()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((function(e,r){n.ft(r)&&t(r)}))}},{key:"_t",value:function(e){var t=e.targetId,n=e.$.count,r=this.wt(t);if(r){var i=r.target;if(fv(i))if(0===n){var a=new wp(i.path);this.ct(t,a,Gp.newNoDocument(a,Zh.min()))}else Dh(1===n);else this.gt(t)!==n&&(this.dt(t),this.ot=this.ot.add(t))}}},{key:"yt",value:function(e){var t=this,n=new Map;this.st.forEach((function(r,i){var a=t.wt(i);if(a){if(r.current&&fv(a.target)){var o=new wp(a.target.path);null!==t.it.get(o)||t.It(i,o)||t.ct(i,o,Gp.newNoDocument(o,e))}r.j&&(n.set(i,r.H()),r.J())}}));var r=Lm();this.rt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.it.forEach((function(t,n){return n.setReadTime(e)}));var i=new jm(e,n,this.ot,this.it,r);return this.it=Am(),this.rt=Hm(),this.ot=new iv(Yh),i}},{key:"at",value:function(e,t){if(this.ft(e)){var n=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,n),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.ft(e)){var r=this.lt(e);this.It(e,t)?r.Y(t,1):r.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),n&&(this.it=this.it.insert(t,n))}}},{key:"removeTarget",value:function(e){this.st.delete(e)}},{key:"gt",value:function(e){var t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Z",value:function(e){this.lt(e).Z()}},{key:"lt",value:function(e){var t=this.st.get(e);return t||(t=new Wm,this.st.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.rt.get(e);return t||(t=new iv(Yh),this.rt=this.rt.insert(e,t)),t}},{key:"ft",value:function(e){var t=null!==this.wt(e);return t||Ch("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}},{key:"dt",value:function(e){var t=this;this.st.set(e,new Wm),this.nt.getRemoteKeysForTarget(e).forEach((function(n){t.ct(e,n,null)}))}},{key:"It",value:function(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}]),e}();function Hm(){return new tv(wp.comparator)}function Km(){return new tv(wp.comparator)}var Qm={asc:"ASCENDING",desc:"DESCENDING"},Ym={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$m=me((function e(t,n){pe(this,e),this.databaseId=t,this.N=n}));function Xm(e,t){return e.N?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jm(e,t){return e.N?t.toBase64():t.toUint8Array()}function Zm(e,t){return Xm(e,t.toTimestamp())}function eg(e){return Dh(!!e),Zh.fromTimestamp(function(e){var t=lp(e);return new Jh(t.seconds,t.nanos)}(e))}function tg(e,t){return function(e){return new ip(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ng(e){var t=ip.fromString(e);return Dh(Sg(t)),t}function rg(e,t){return tg(e.databaseId,t.path)}function ig(e,t){var n=ng(t);if(n.get(1)!==e.databaseId.projectId)throw new Lh(Mh.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Lh(Mh.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new wp(sg(n))}function ag(e,t){return tg(e.databaseId,t)}function og(e){var t=ng(e);return 4===t.length?ip.emptyPath():sg(t)}function ug(e){return new ip(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function sg(e){return Dh(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function cg(e,t,n){return{name:rg(e,t),fields:n.value.mapValue.fields}}function lg(e,t,n){var r=ig(e,t.name),i=eg(t.updateTime),a=new zp({mapValue:{fields:t.fields}}),o=Gp.newFoundDocument(r,i,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function fg(e,t){return"found"in t?function(e,t){Dh(!!t.found),t.found.name,t.found.updateTime;var n=ig(e,t.found.name),r=eg(t.found.updateTime),i=new zp({mapValue:{fields:t.found.fields}});return Gp.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Dh(!!t.missing),Dh(!!t.readTime);var n=ig(e,t.missing),r=eg(t.readTime);return Gp.newNoDocument(n,r)}(e,t):Ph()}function dg(e,t){var n;if(t instanceof mm)n={update:cg(e,t.key,t.value)};else if(t instanceof xm)n={delete:rg(e,t.key)};else if(t instanceof gm)n={update:cg(e,t.key,t.data),updateMask:Ig(t.fieldMask)};else{if(!(t instanceof Im))return Ph();n={verify:rg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Jv)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Zv)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tm)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rm)return{fieldPath:t.field.canonicalString(),increment:n.k};throw Ph()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Zm(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ph()}(e,t.precondition)),n}function hg(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?sm.updateTime(eg(e.updateTime)):void 0!==e.exists?sm.exists(e.exists):sm.none()}(t.currentDocument):sm.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Dh("REQUEST_TIME"===t.setToServerValue),n=new Jv;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Zv(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new tm(i)}else"increment"in t?n=new rm(e,t.increment):Ph();var a=op.fromServerFormat(t.fieldPath);return new om(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=ig(e,t.update.name),a=new zp({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new up(t.map((function(e){return op.fromServerFormat(e)})))}(t.updateMask);return new gm(i,a,o,n,r)}return new mm(i,a,n,r)}if(t.delete){var u=ig(e,t.delete);return new xm(u,n)}if(t.verify){var s=ig(e,t.verify);return new Im(s,n)}return Ph()}function pg(e,t){return{documents:[ag(e,t.path)]}}function vg(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ag(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ag(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(Mp(e.value))return{unaryFilter:{field:kg(e.field),op:"IS_NAN"}};if(Op(e.value))return{unaryFilter:{field:kg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Mp(e.value))return{unaryFilter:{field:kg(e.field),op:"IS_NOT_NAN"}};if(Op(e.value))return{unaryFilter:{field:kg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kg(e.field),op:bg(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:kg(e.field),direction:yg(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.N||yp(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function mg(e){var t=og(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Dh(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=gg(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new Sv(wg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return yp(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Iv(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Iv(n,t)}(n.endAt)),Av(t,i,u,o,s,"F",c,l)}function gg(e){return e?void 0!==e.unaryFilter?[xg(e)]:void 0!==e.fieldFilter?[_g(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return gg(e)})).reduce((function(e,t){return e.concat(t)})):Ph():[]}function yg(e){return Qm[e]}function bg(e){return Ym[e]}function kg(e){return{fieldPath:e.canonicalString()}}function wg(e){return op.fromServerFormat(e.fieldPath)}function _g(e){return vv.create(wg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ph()}}(e.fieldFilter.op),e.fieldFilter.value)}function xg(e){switch(e.unaryFilter.op){case"IS_NAN":var t=wg(e.unaryFilter.field);return vv.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=wg(e.unaryFilter.field);return vv.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=wg(e.unaryFilter.field);return vv.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=wg(e.unaryFilter.field);return vv.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Ph()}}function Ig(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Sg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Eg(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Cg(t)),t=Tg(e.get(n),t);return Cg(t)}function Tg(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Cg(e){return e+"\x01\x01"}function Ng(e){var t=e.length;if(Dh(t>=2),2===t)return Dh("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ip.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Ph(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Ph()}a=o+2}return new ip(r)}var Ag=["userId","batchId"];function Rg(e,t){return[e,Eg(t)]}function Pg(e,t,n){return[e,Eg(t),n]}var Dg={},Og=["prefixPath","collectionGroup","readTime","documentId"],Mg=["prefixPath","collectionGroup","documentId"],Lg=["collectionGroup","readTime","prefixPath","documentId"],Fg=["canonicalId","targetId"],Ug=["targetId","path"],jg=["path","targetId"],Bg=["collectionId","parent"],Vg=["indexId","uid"],qg=["uid","sequenceNumber"],zg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Wg=["indexId","uid","orderedDocumentKey"],Gg=["userId","collectionPath","documentId"],Hg=["userId","collectionPath","largestBatchId"],Kg=["userId","collectionGroup","largestBatchId"],Qg=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Yg=[].concat(ye(Qg),["documentOverlays"]),$g=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Xg=[].concat($g,["indexConfiguration","indexState","indexEntries"]),Jg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Zg=function(){function e(){pe(this,e),this.onCommittedListeners=[]}return me(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}(),ey=function(){function e(t){var n=this;pe(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return me(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Ph(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=le(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}}]),e}(),ty=function(){function e(t,n){var r=this;pe(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.At=new Fh,this.transaction.oncomplete=function(){r.At.resolve()},this.transaction.onabort=function(){n.error?r.At.reject(new iy(t,n.error)):r.At.resolve()},this.transaction.onerror=function(e){var n=cy(e.target.error);r.At.reject(new iy(t,n))}}return me(e,[{key:"Rt",get:function(){return this.At.promise}},{key:"abort",value:function(e){e&&this.At.reject(e),this.aborted||(Ch("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"bt",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new oy(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new iy(n,t)}}}]),e}(),ny=function(){function e(t,n,r){pe(this,e),this.name=t,this.version=n,this.Pt=r,12.2===e.Vt(Me())&&Nh("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return me(e,[{key:"Nt",value:function(){var e=he(fe().mark((function e(t){var n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Ch("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new iy(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Lh(Mh.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Lh(Mh.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new iy(t,n))},i.onupgradeneeded=function(e){Ch("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Pt.kt(t,i.transaction,e.oldVersion,n.version).next((function(){Ch("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.Mt&&(this.db.onversionchange=function(e){return n.Mt(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ot",value:function(e){this.Mt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=he(fe().mark((function e(t,n,r,i){var a,o,u,s,c=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0;case 2:return++o,e.prev=3,e.delegateYield(fe().mark((function e(){var n,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Nt(t);case 2:return c.db=e.sent,n=ty.open(c.db,t,a?"readonly":"readwrite",r),o=i(n).next((function(e){return n.bt(),e})).catch((function(e){return n.abort(e),ey.reject(e)})).toPromise(),o.catch((function(){})),e.next=7,n.Rt;case 7:return e.t0=o,e.abrupt("return",{v:e.t0});case 9:case"end":return e.stop()}}),e)}))(),"t0",5);case 5:if("object"!==typeof(u=e.t0)){e.next=8;break}return e.abrupt("return",u.v);case 8:e.next=15;break;case 10:if(e.prev=10,e.t1=e.catch(3),s="FirebaseError"!==e.t1.name&&o<3,Ch("SimpleDb","Transaction failed with error:",e.t1.message,"Retrying:",s),this.close(),s){e.next=15;break}return e.abrupt("return",Promise.reject(e.t1));case 15:e.next=2;break;case 17:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Ch("SimpleDb","Removing database:",e),uy(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"vt",value:function(){if(!qe())return!1;if(e.St())return!0;var t=Me(),n=e.Vt(t),r=0<n&&n<10,i=e.Dt(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"St",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.Ct)}},{key:"xt",value:function(e,t){return e.store(t)}},{key:"Vt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Dt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ry=function(){function e(t){pe(this,e),this.Ft=t,this.$t=!1,this.Bt=null}return me(e,[{key:"isDone",get:function(){return this.$t}},{key:"Lt",get:function(){return this.Bt}},{key:"cursor",set:function(e){this.Ft=e}},{key:"done",value:function(){this.$t=!0}},{key:"Ut",value:function(e){this.Bt=e}},{key:"delete",value:function(){return uy(this.Ft.delete())}}]),e}(),iy=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,Mh.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return me(n)}(Lh);function ay(e){return"IndexedDbTransactionError"===e.name}var oy=function(){function e(t){pe(this,e),this.store=t}return me(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Ch("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ch("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),uy(n)}},{key:"add",value:function(e){return Ch("SimpleDb","ADD",this.store.name,e,e),uy(this.store.add(e))}},{key:"get",value:function(e){var t=this;return uy(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Ch("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Ch("SimpleDb","DELETE",this.store.name,e),uy(this.store.delete(e))}},{key:"count",value:function(){return Ch("SimpleDb","COUNT",this.store.name),uy(this.store.count())}},{key:"qt",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.Kt(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new ey((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"Gt",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new ey((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Qt",value:function(e,t){Ch("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.jt=!1;var r=this.cursor(n);return this.Kt(r,(function(e,t,n){return n.delete()}))}},{key:"Wt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Kt(r,t)}},{key:"zt",value:function(e){var t=this.cursor({});return new ey((function(n,r){t.onerror=function(e){var t=cy(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"Kt",value:function(e,t){var n=[];return new ey((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new ry(i),o=t(i.primaryKey,i.value,a);if(o instanceof ey){var u=o.catch((function(e){return a.done(),ey.reject(e)}));n.push(u)}a.isDone?r():null===a.Lt?i.continue():i.continue(a.Lt)}else r()}})).next((function(){return ey.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.jt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function uy(e){return new ey((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=cy(e.target.error);n(t)}}))}var sy=!1;function cy(e){var t=ny.Vt(Me());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Lh("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return sy||(sy=!0,setTimeout((function(){throw r}),0)),r}}return e}var ly=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).Ht=e,i.currentSequenceNumber=r,i}return me(n)}(Zg);function fy(e,t){var n=Oh(e);return ny.xt(n.Ht,t)}var dy=function(){function e(t,n,r,i){pe(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return me(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&fm(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=le(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&dm(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,a=le(this.mutations);try{for(a.s();!(i=a.n()).done;){var o=i.value;o.key.isEqual(e.key)&&dm(o,e,this.localWriteTime)}}catch(u){a.e(u)}finally{a.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach((function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Zh.min())}))}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Lm())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&$h(this.mutations,e.mutations,(function(e,t){return pm(e,t)}))&&$h(this.baseMutations,e.baseMutations,(function(e,t){return pm(e,t)}))}}]),e}(),hy=function(){function e(t,n,r,i){pe(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return me(e,null,[{key:"from",value:function(t,n,r){Dh(t.mutations.length===r.length);for(var i=Om,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),py=function(){function e(t,n){pe(this,e),this.largestBatchId=t,this.mutation=n}return me(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),vy=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zh.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zh.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:sp.EMPTY_BYTE_STRING;pe(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return me(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),my=me((function e(t){pe(this,e),this.Jt=t}));function gy(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:yy(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:rg(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Xm(e,t.version.toTimestamp())}}(e.Jt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:by(t.version)};else{if(!t.isUnknownDocument())return Ph();r.unknownDocument={path:n.path.toArray(),version:by(t.version)}}return r}function yy(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function by(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ky(e){var t=new Jh(e.seconds,e.nanoseconds);return Zh.fromTimestamp(t)}function wy(e,t){for(var n=(t.baseMutations||[]).map((function(t){return hg(e.Jt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return hg(e.Jt,t)})),u=Jh.fromMillis(t.localWriteTimeMs);return new dy(t.batchId,u,n,o)}function _y(e){var t,n,r=ky(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?ky(e.lastLimboFreeSnapshotVersion):Zh.min();return void 0!==e.query.documents?(Dh(1===(n=e.query).documents.length),t=Lv(Rv(og(n.documents[0])))):t=function(e){return Lv(mg(e))}(e.query),new vy(t,e.targetId,0,e.lastListenSequenceNumber,r,i,sp.fromBase64String(e.resumeToken))}function xy(e,t){var n,r=by(t.snapshotVersion),i=by(t.lastLimboFreeSnapshotVersion);n=fv(t.target)?pg(e.Jt,t.target):vg(e.Jt,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:cv(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Iy(e){var t=mg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Fv(t,t.limit,"L"):t}function Sy(e,t){return new py(t.largestBatchId,hg(e.Jt,t.overlayMutation))}function Ey(e,t){var n=t.path.lastSegment();return[e,Eg(t.path.popLast()),n]}var Ty=function(){function e(){pe(this,e)}return me(e,[{key:"getBundleMetadata",value:function(e,t){return Cy(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:ky(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return Cy(e).put({bundleId:(n=t).id,createTime:by(eg(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Ny(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Iy(t.bundledQuery),readTime:ky(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return Ny(e).put(function(e){return{name:e.name,readTime:by(eg(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Cy(e){return fy(e,"bundles")}function Ny(e){return fy(e,"namedQueries")}var Ay=function(){function e(t,n){pe(this,e),this.M=t,this.userId=n}return me(e,[{key:"getOverlay",value:function(e,t){var n=this;return Ry(e).get(Ey(this.userId,t)).next((function(e){return e?Sy(n.M,e):null}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new py(t,a);i.push(r.Xt(e,o))})),ey.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Eg(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(Ry(e).Qt("collectionPathOverlayIndex",i))})),ey.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Dm(),a=Eg(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ry(e).qt("collectionPathOverlayIndex",o).next((function(e){var t,n=le(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Sy(r.M,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Dm(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ry(e).Wt({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Sy(a.M,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"Xt",value:function(e,t){return Ry(e).put(function(e,t,n){var r=f(Ey(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:dg(e.Jt,n.mutation)}}(this.M,this.userId,t))}}],[{key:"Yt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function Ry(e){return fy(e,"documentOverlays")}var Py=function(){function e(){pe(this,e)}return me(e,[{key:"Zt",value:function(e,t){this.te(e,t),t.ee()}},{key:"te",value:function(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(fp(e.integerValue));else if("doubleValue"in e){var n=fp(e.doubleValue);isNaN(n)?this.ne(t,13):(this.ne(t,15),bp(n)?t.se(0):t.se(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie("".concat(r.seconds||"")),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(dp(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ne(t,45),t.se(i.latitude||0),t.se(i.longitude||0)}else"mapValue"in e?Up(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):Ph()}},{key:"re",value:function(e,t){this.ne(t,25),this.le(e,t)}},{key:"le",value:function(e,t){t.ie(e)}},{key:"ce",value:function(e,t){var n=e.fields||{};this.ne(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.re(a,t),this.te(n[a],t)}}},{key:"he",value:function(e,t){var n=e.values||[];this.ne(t,50);var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.te(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"ae",value:function(e,t){var n=this;this.ne(t,37),wp.fromName(e).path.forEach((function(e){n.ne(t,60),n.le(e,t)}))}},{key:"ne",value:function(e,t){e.se(t)}},{key:"oe",value:function(e){e.se(2)}}]),e}();function Dy(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Oy(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=Dy(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Py.fe=new Py;var My=function(){function e(){pe(this,e),this.buffer=new Uint8Array(1024),this.position=0}return me(e,[{key:"de",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this._e(n.value),n=t.next();this.we()}},{key:"me",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.ge(n.value),n=t.next();this.ye()}},{key:"pe",value:function(e){var t,n=le(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(r<"\ud800"||"\udbff"<r)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{var a=r.codePointAt(0);this._e(240|a>>>18),this._e(128|63&a>>>12),this._e(128|63&a>>>6),this._e(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.we()}},{key:"Ie",value:function(e){var t,n=le(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{var a=r.codePointAt(0);this.ge(240|a>>>18),this.ge(128|63&a>>>12),this.ge(128|63&a>>>6),this.ge(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ye()}},{key:"Te",value:function(e){var t=this.Ee(e),n=Oy(t);this.Ae(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Re",value:function(e){var t=this.Ee(e),n=Oy(t);this.Ae(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"be",value:function(){this.Pe(255),this.Pe(255)}},{key:"Ve",value:function(){this.ve(255),this.ve(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Se",value:function(){return this.buffer.slice(0,this.position)}},{key:"Ee",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"_e",value:function(e){var t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}},{key:"ge",value:function(e){var t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}},{key:"we",value:function(){this.Pe(0),this.Pe(1)}},{key:"ye",value:function(){this.ve(0),this.ve(1)}},{key:"Pe",value:function(e){this.Ae(1),this.buffer[this.position++]=e}},{key:"ve",value:function(e){this.Ae(1),this.buffer[this.position++]=~e}},{key:"Ae",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Ly=function(){function e(t){pe(this,e),this.De=t}return me(e,[{key:"ue",value:function(e){this.De.de(e)}},{key:"ie",value:function(e){this.De.pe(e)}},{key:"se",value:function(e){this.De.Te(e)}},{key:"ee",value:function(){this.De.be()}}]),e}(),Fy=function(){function e(t){pe(this,e),this.De=t}return me(e,[{key:"ue",value:function(e){this.De.me(e)}},{key:"ie",value:function(e){this.De.Ie(e)}},{key:"se",value:function(e){this.De.Re(e)}},{key:"ee",value:function(){this.De.Ve()}}]),e}(),Uy=function(){function e(){pe(this,e),this.De=new My,this.Ce=new Ly(this.De),this.xe=new Fy(this.De)}return me(e,[{key:"seed",value:function(e){this.De.seed(e)}},{key:"Ne",value:function(e){return 0===e?this.Ce:this.xe}},{key:"Se",value:function(){return this.De.Se()}},{key:"reset",value:function(){this.De.reset()}}]),e}(),jy=function(){function e(t,n,r,i){pe(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return me(e,[{key:"ke",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function By(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Vy(e.arrayValue,t.arrayValue))?n:0!==(n=Vy(e.directionalValue,t.directionalValue))?n:wp.comparator(e.documentKey,t.documentKey)}function Vy(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var qy=function(){function e(t){pe(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];var n,r=le(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.S()?this.Fe=i:this.Oe.push(i)}}catch(a){r.e(a)}finally{r.f()}}return me(e,[{key:"$e",value:function(e){var t=Kp(e);if(void 0!==t&&!this.Be(t))return!1;for(var n=Qp(e),r=0,i=0;r<n.length&&this.Be(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Fe){var a=n[r];if(!this.Le(this.Fe,a)||!this.Ue(this.Me[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Me.length||!this.Ue(this.Me[i++],o))return!1}return!0}},{key:"Be",value:function(e){var t,n=le(this.Oe);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.Le(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"Le",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"Ue",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}(),zy=function(){function e(){pe(this,e),this.qe=new Wy}return me(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.qe.add(t),ey.resolve()}},{key:"getCollectionParents",value:function(e,t){return ey.resolve(this.qe.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return ey.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return ey.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return ey.resolve(null)}},{key:"getIndexType",value:function(e,t){return ey.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return ey.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return ey.resolve(null)}},{key:"getMinOffset",value:function(e,t){return ey.resolve(Zp.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return ey.resolve()}},{key:"updateIndexEntries",value:function(e,t){return ey.resolve()}}]),e}(),Wy=function(){function e(){pe(this,e),this.index={}}return me(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new iv(ip.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new iv(ip.comparator)).toArray()}}]),e}(),Gy=new Uint8Array(0),Hy=function(){function e(t,n){pe(this,e),this.user=t,this.databaseId=n,this.Ke=new Wy,this.Ge=new Cm((function(e){return cv(e)}),(function(e,t){return lv(e,t)})),this.uid=t.uid||""}return me(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ke.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ke.add(t)}));var a={collectionId:r,parent:Eg(i)};return Ky(e).put(a)}return ey.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Xh(t),""],!1,!0);return Ky(e).qt(r).next((function(e){var r,i=le(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Ng(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=Yy(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);return delete r.indexId,n.add(r).next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Yy(e),r=$y(e),i=Qy(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Qy(e),i=!0,a=new Map;return ey.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Lm(),o=[];return ey.forEach(a,(function(i,a){var u;Ch("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(cv(t)));var s=function(e,t){var n=Kp(t);if(void 0===n)return null;var r,i=le(dv(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=le(Qp(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=le(dv(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=le(Qp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?hv(e,o.fieldPath,e.startAt):pv(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Iv(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=le(Qp(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?pv(e,o.fieldPath,e.endAt):hv(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Iv(r,i)}(a,i),d=n.We(i,a,l),h=n.We(i,a,f),p=n.ze(i,a,c),v=n.He(i.indexId,s,d,l.inclusive,h,f.inclusive,p);return ey.forEach(v,(function(n){return r.Gt(n,t.limit).next((function(t){t.forEach((function(t){var n=wp.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return ey.resolve(null)}))}},{key:"Qe",value:function(e){var t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}},{key:"He",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(s){var f=t?u.Je(t[s/c]):Gy,d=u.Ye(e,f,n[s%c],r),h=u.Xe(e,f,i[s%c],a),p=o.map((function(t){return u.Ye(e,f,t,!0)}));l.push.apply(l,ye(u.createRange(d,h,p)))},d=0;d<s;++d)f(d);return l}},{key:"Ye",value:function(e,t,n,r){var i=new jy(e,wp.empty(),t,n);return r?i:i.ke()}},{key:"Xe",value:function(e,t,n,r){var i=new jy(e,wp.empty(),t,n);return r?i.ke():i}},{key:"je",value:function(e,t){var n=new qy(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=le(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.$e(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2;return ey.forEach(this.Qe(t),(function(t){return n.je(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new iv(op.comparator),r=!1,i=le(e.filters);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.field.isKeyField()||("array-contains"===a.op||"array-contains-any"===a.op?r=!0:n=n.add(a.field))}}catch(c){i.e(c)}finally{i.f()}var o,u=le(e.orderBy);try{for(u.s();!(o=u.n()).done;){var s=o.value;s.field.isKeyField()||(n=n.add(s.field))}}catch(c){u.e(c)}finally{u.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return r}))}},{key:"Ze",value:function(e,t){var n,r=new Uy,i=le(Qp(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Ne(a.kind);Py.fe.Zt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Se()}},{key:"Je",value:function(e){var t=new Uy;return Py.fe.Zt(e,t.Ne(0)),t.Se()}},{key:"tn",value:function(e,t){var n=new Uy;return Py.fe.Zt(Rp(this.databaseId,t),n.Ne(function(e){var t=Qp(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Se()}},{key:"ze",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Uy);var i,a=0,o=le(Qp(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=le(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.en(t,s.fieldPath)&&Dp(c))r=this.nn(r,s,c);else{var d=f.Ne(s.kind);Py.fe.Zt(c,d)}}}catch(h){l.e(h)}finally{l.f()}}}catch(h){o.e(h)}finally{o.f()}return this.sn(r)}},{key:"We",value:function(e,t,n){return this.ze(e,t,n.position)}},{key:"sn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Se();return t}},{key:"nn",value:function(e,t,n){var r,i=ye(e),a=[],o=le(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=le(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Uy;f.seed(l.Se()),Py.fe.Zt(s,f.Ne(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"en",value:function(e,t){return!!e.filters.find((function(e){return e instanceof vv&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Yy(e),i=$y(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next((function(e){var t=[];return ey.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new $p(t.sequenceNumber,new Zp(ky(t.readTime),new wp(Ng(t.documentKey)),t.largestBatchId)):$p.empty(),r=e.fields.map((function(e){var t=f(e,2),n=t[0],r=t[1];return new Yp(op.fromServerFormat(n),r)}));return new Hp(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Yh(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Yy(e),a=$y(e);return this.rn(e).next((function(e){return i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return ey.forEach(t,(function(t){return a.put(function(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:by(r.readTime),documentKey:Eg(r.documentKey.path),largestBatchId:r.largestBatchId}}(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return ey.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?ey.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),ey.forEach(a,(function(r){return n.on(e,t,r).next((function(t){var a=n.un(i,r);return t.isEqual(a)?ey.resolve():n.an(e,i,r,t,a)}))}))}))}))}},{key:"cn",value:function(e,t,n,r){return Qy(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"hn",value:function(e,t,n,r){return Qy(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(n,t.key),t.key.path.toArray()])}},{key:"on",value:function(e,t,n){var r=Qy(e),i=new iv(By);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.tn(n,t)])},(function(e,r){i=i.add(new jy(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"un",value:function(e,t){var n=new iv(By),r=this.Ze(t,e);if(null==r)return n;var i=Kp(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Dp(a)){var o,u=le(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new jy(t.indexId,e.key,this.Je(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new jy(t.indexId,e.key,Gy,r));return n}},{key:"an",value:function(e,t,n,r,i){var a=this;Ch("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=ov(a),s=ov(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=ov(o)):l?(i(u),u=ov(a)):(u=ov(a),s=ov(o))}}(r,i,By,(function(r){o.push(a.cn(e,t,n,r))}),(function(r){o.push(a.hn(e,t,n,r))})),ey.waitFor(o)}},{key:"rn",value:function(e){var t=1;return $y(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return By(e,t)})).filter((function(e,t,n){return!t||0!==By(e,n[t-1])}));var r=[];r.push(e);var i,a=le(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=By(o,e),s=By(o,t);if(0===u)r[0]=e.ke();else if(u>0&&s<0)r.push(o),r.push(o.ke());else if(s>0)break}}catch(f){a.e(f)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2)c.push(IDBKeyRange.bound([r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Gy,[]],[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Gy,[]]));return c}},{key:"getMinOffset",value:function(e,t){var n,r=this;return ey.forEach(this.Qe(t),(function(t){return r.je(e,t).next((function(e){e?(!n||ev(e.indexState.offset,n)<0)&&(n=e.indexState.offset):n=Zp.min()}))})).next((function(){return n}))}}]),e}();function Ky(e){return fy(e,"collectionParents")}function Qy(e){return fy(e,"indexEntries")}function Yy(e){return fy(e,"indexConfiguration")}function $y(e){return fy(e,"indexState")}var Xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Jy=function(){function e(t,n,r){pe(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return me(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Zy(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Wt({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Dh(1===u)})));var c,l=[],f=le(n.mutations);try{for(f.s();!(c=f.n()).done;){var d=c.value,h=Pg(t,d.key.path,n.batchId);a.push(i.delete(h)),l.push(d.key)}}catch(p){f.e(p)}finally{f.f()}return ey.waitFor(a).next((function(){return l}))}function eb(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Ph();t=e.noDocument}return JSON.stringify(t).length}Jy.DEFAULT_COLLECTION_PERCENTILE=10,Jy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jy.DEFAULT=new Jy(41943040,Jy.DEFAULT_COLLECTION_PERCENTILE,Jy.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jy.DISABLED=new Jy(-1,0,0);var tb=function(){function e(t,n,r,i){pe(this,e),this.userId=t,this.M=n,this.indexManager=r,this.referenceDelegate=i,this.ln={}}return me(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rb(e).Wt({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=ib(e),o=rb(e);return o.add({}).next((function(u){Dh("number"==typeof u);var s,c=new dy(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return dg(e.Jt,t)})),i=n.mutations.map((function(t){return dg(e.Jt,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.M,i.userId,c),f=[],d=new iv((function(e,t){return Yh(e.canonicalString(),t.canonicalString())})),h=le(r);try{for(h.s();!(s=h.n()).done;){var p=s.value,v=Pg(i.userId,p.key.path,u);d=d.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,Dg))}}catch(m){h.e(m)}finally{h.f()}return d.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.ln[u]=c.keys()})),ey.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return rb(e).get(t).next((function(e){return e?(Dh(e.userId===n.userId),wy(n.M,e)):null}))}},{key:"fn",value:function(e,t){var n=this;return this.ln[t]?ey.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.ln[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return rb(e).Wt({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Dh(t.batchId>=r),a=wy(n.M,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return rb(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rb(e).qt("userMutationsIndex",n).next((function(e){return e.map((function(e){return wy(t.M,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Rg(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return ib(e).Wt({range:i},(function(r,i,o){var u=f(r,3),s=u[0],c=u[1],l=u[2],d=Ng(c);if(s===n.userId&&t.path.isEqual(d))return rb(e).get(l).next((function(e){if(!e)throw Ph();Dh(e.userId===n.userId),a.push(wy(n.M,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new iv(Yh),i=[];return t.forEach((function(t){var a=Rg(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=ib(e).Wt({range:o},(function(e,i,a){var o=f(e,3),u=o[0],s=o[1],c=o[2],l=Ng(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),ey.waitFor(i).next((function(){return n.dn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Rg(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new iv(Yh);return ib(e).Wt({range:o},(function(e,t,a){var o=f(e,3),s=o[0],c=o[1],l=o[2],d=Ng(c);s===n.userId&&r.isPrefixOf(d)?d.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.dn(e,u)}))}},{key:"dn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(rb(e).get(t).next((function(e){if(null===e)throw Ph();Dh(e.userId===n.userId),r.push(wy(n.M,e))})))})),ey.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Zy(e.Ht,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n._n(t.batchId)})),ey.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"_n",value:function(e){delete this.ln[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ey.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return ib(e).Wt({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Ng(e[1]);i.push(a)}else r.done()})).next((function(){Dh(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return nb(e,this.userId,t)}},{key:"wn",value:function(e){var t=this;return ab(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Yt",value:function(t,n,r,i){return Dh(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function nb(e,t,n){var r=Rg(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return ib(e).Wt({range:a,jt:!0},(function(e,n,r){var a=f(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function rb(e){return fy(e,"mutations")}function ib(e){return fy(e,"documentMutations")}function ab(e){return fy(e,"mutationQueues")}var ob=function(){function e(t){pe(this,e),this.mn=t}return me(e,[{key:"next",value:function(){return this.mn+=2,this.mn}}],[{key:"gn",value:function(){return new e(0)}},{key:"yn",value:function(){return new e(-1)}}]),e}(),ub=function(){function e(t,n){pe(this,e),this.referenceDelegate=t,this.M=n}return me(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.pn(e).next((function(n){var r=new ob(n.highestTargetId);return n.highestTargetId=r.next(),t.In(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.pn(e).next((function(e){return Zh.fromTimestamp(new Jh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.In(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Tn(e,t).next((function(){return n.pn(e).next((function(r){return r.targetCount+=1,n.En(t,r),n.In(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Tn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return sb(e).delete(t.targetId)})).next((function(){return n.pn(e)})).next((function(t){return Dh(t.targetCount>0),t.targetCount-=1,n.In(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return sb(e).Wt((function(o,u){var s=_y(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return ey.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return sb(e).Wt((function(e,n){var r=_y(n);t(r)}))}},{key:"pn",value:function(e){return cb(e).get("targetGlobalKey").next((function(e){return Dh(null!==e),e}))}},{key:"In",value:function(e,t){return cb(e).put("targetGlobalKey",t)}},{key:"Tn",value:function(e,t){return sb(e).put(xy(this.M,t))}},{key:"En",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=cv(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return sb(e).Wt({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=_y(n);lv(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=lb(e);return t.forEach((function(t){var o=Eg(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),ey.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=lb(e);return ey.forEach(t,(function(t){var a=Eg(t.path);return ey.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=lb(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=lb(e),i=Lm();return r.Wt({range:n,jt:!0},(function(e,t,n){var r=Ng(e[1]),a=new wp(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Eg(t.path),r=IDBKeyRange.bound([n],[Xh(n)],!1,!0),i=0;return lb(e).Wt({index:"documentTargetsIndex",jt:!0,range:r},(function(e,t,n){var r=f(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"Et",value:function(e,t){return sb(e).get(t).next((function(e){return e?_y(e):null}))}}]),e}();function sb(e){return fy(e,"targets")}function cb(e){return fy(e,"targetGlobal")}function lb(e){return fy(e,"targetDocuments")}function fb(e){return db.apply(this,arguments)}function db(){return db=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Mh.FAILED_PRECONDITION&&t.message===Jg){e.next=2;break}throw t;case 2:Ch("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),db.apply(this,arguments)}function hb(e,t){var n=f(e,2),r=n[0],i=n[1],a=f(t,2),o=a[0],u=a[1],s=Yh(r,o);return 0===s?Yh(i,u):s}var pb=function(){function e(t){pe(this,e),this.An=t,this.buffer=new iv(hb),this.Rn=0}return me(e,[{key:"bn",value:function(){return++this.Rn}},{key:"Pn",value:function(e){var t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();hb(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),vb=function(){function e(t,n){pe(this,e),this.garbageCollector=t,this.asyncQueue=n,this.Vn=!1,this.vn=null}return me(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}},{key:"stop",value:function(){this.vn&&(this.vn.cancel(),this.vn=null)}},{key:"started",get:function(){return null!==this.vn}},{key:"Sn",value:function(e){var t=this,n=this.Vn?3e5:6e4;Ch("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,he(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.vn=null,t.Vn=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!ay(n.t0)){n.next=12;break}Ch("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,fb(n.t0);case 14:return n.next=16,t.Sn(e);case 16:case"end":return n.stop()}}),n,null,[[1,6]])}))))}}]),e}(),mb=function(){function e(t,n){pe(this,e),this.Dn=t,this.params=n}return me(e,[{key:"calculateTargetCount",value:function(e,t){return this.Dn.Cn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return ey.resolve(Hh.A);var r=new pb(t);return this.Dn.forEachTarget(e,(function(e){return r.Pn(e.sequenceNumber)})).next((function(){return n.Dn.xn(e,(function(e){return r.Pn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Dn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Dn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Ch("LruGarbageCollector","Garbage collection skipped; disabled"),ey.resolve(Xy)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Ch("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Xy):n.Nn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Dn.getCacheSize(e)}},{key:"Nn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Ch("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Th()<=gt.DEBUG&&Ch("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),ey.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),gb=function(){function e(t,n){pe(this,e),this.db=t,this.garbageCollector=function(e,t){return new mb(e,t)}(this,n)}return me(e,[{key:"Cn",value:function(e){var t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"kn",value:function(e){var t=0;return this.xn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"xn",value:function(e,t){return this.Mn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return yb(e,n)}},{key:"removeReference",value:function(e,t,n){return yb(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return yb(e,t)}},{key:"On",value:function(e,t){return function(e,t){var n=!1;return ab(e).zt((function(r){return nb(e,r,t).next((function(e){return e&&(n=!0),ey.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Mn(e,(function(o,u){if(u<=t){var s=n.On(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Zh.min()),lb(e).delete([0,Eg(o.path)])}))}));i.push(s)}})).next((function(){return ey.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return yb(e,t)}},{key:"Mn",value:function(e,t){var n,r=lb(e),i=Hh.A;return r.Wt({index:"documentTargetsIndex"},(function(e,r){var a=f(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==Hh.A&&t(new wp(Ng(n)),i),i=s,n=u):i=Hh.A})).next((function(){i!==Hh.A&&t(new wp(Ng(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function yb(e,t){return lb(e).put(function(e,t){return{targetId:0,path:Eg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var bb=function(){function e(){pe(this,e),this.changes=new Cm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return me(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Gp.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ey.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),kb=function(){function e(t){pe(this,e),this.M=t}return me(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return xb(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return xb(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],yy(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Fn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Gp.newInvalidDocument(t);return xb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ib(t))},(function(e,i){r=n.$n(t,i)})).next((function(){return r}))}},{key:"Bn",value:function(e,t){var n=this,r={size:0,document:Gp.newInvalidDocument(t)};return xb(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Ib(t))},(function(e,i){r={document:n.$n(t,i),size:eb(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Am();return this.Ln(e,t,(function(e,t){var i=n.$n(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Un",value:function(e,t){var n=this,r=Am(),i=new tv(wp.comparator);return this.Ln(e,t,(function(e,t){var a=n.$n(e,t);r=r.insert(e,a),i=i.insert(e,eb(t))})).next((function(){return{documents:r,qn:i}}))}},{key:"Ln",value:function(e,t,n){if(t.isEmpty())return ey.resolve();var r=new iv(Eb);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Ib(r.first()),Ib(r.last())),a=r.getIterator(),o=a.getNext();return xb(e).Wt({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=wp.fromSegments([].concat(ye(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Eb(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.Ut(Ib(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),yy(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return xb(e).qt(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=Am(),i=le(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.$n(wp.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Am(),o=Sb(t,n),u=Sb(t,Zp.max());return xb(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.$n(wp.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new wb(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return _b(e).get("remoteDocumentGlobalKey").next((function(e){return Dh(!!e),e}))}},{key:"Fn",value:function(e,t){return _b(e).put("remoteDocumentGlobalKey",t)}},{key:"$n",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=lg(e.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=wp.fromSegments(t.noDocument.path),i=ky(t.noDocument.readTime);n=Gp.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ph();var a=wp.fromSegments(t.unknownDocument.path),o=ky(t.unknownDocument.version);n=Gp.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Jh(e[0],e[1]);return Zh.fromTimestamp(t)}(t.readTime)),n}(this.M,t);if(!n.isNoDocument()||!n.version.isEqual(Zh.min()))return n}return Gp.newInvalidDocument(e)}}]),e}(),wb=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this)).Kn=e,i.trackRemovals=r,i.Gn=new Cm((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return me(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new iv((function(e,t){return Yh(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Gn.get(a);if(n.push(t.Kn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=gy(t.Kn.M,o);i=i.add(a.path.popLast());var c=eb(s);r+=c-u.size,n.push(t.Kn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=gy(t.Kn.M,o.convertToNoDocument(Zh.min()));n.push(t.Kn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Kn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Kn.updateMetadata(e,r)),ey.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Kn.Bn(e,t).next((function(e){return n.Gn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Kn.Un(e,t).next((function(e){var t=e.documents;return e.qn.forEach((function(e,r){n.Gn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(bb);function _b(e){return fy(e,"remoteDocumentGlobal")}function xb(e){return fy(e,"remoteDocumentsV14")}function Ib(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Sb(e,t){var n=t.documentKey.path.toArray();return[e,yy(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Eb(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Yh(n[a],r[a]))return i;return(i=Yh(n.length,r.length))||((i=Yh(n[n.length-2],r[r.length-2]))||Yh(n[n.length-1],r[r.length-1]))}var Tb=function(){function e(t){pe(this,e),this.M=t}return me(e,[{key:"kt",value:function(e,t,n,r){var i=this,a=new ty("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ag,{unique:!0}),e.createObjectStore("documentMutations")}(e),Cb(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=ey.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Cb(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").qt().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ag,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return ey.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Qn(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.jn(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Wn(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.zn(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Hn(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Gg});t.createIndex("collectionPathOverlayIndex",Hg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Kg,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Og});t.createIndex("documentKeyIndex",Mg),t.createIndex("collectionGroupIndex",Lg)}(e)})).next((function(){return i.Jn(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){!function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Vg}).createIndex("sequenceNumberIndex",qg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:zg}).createIndex("documentKeyIndex",Wg,{unique:!1})}(e)}))),o}},{key:"jn",value:function(e){var t=0;return e.store("remoteDocuments").Wt((function(e,n){t+=eb(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Qn",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.qt().next((function(n){return ey.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",i).next((function(r){return ey.forEach(r,(function(r){Dh(r.userId===n.userId);var i=wy(t.M,r);return Zy(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Wn",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Wt((function(n,i){var a=new ip(n),o=function(e){return[0,Eg(e)]}(a);r.push(t.get(o).next((function(n){return n?ey.resolve():function(n){return t.put({targetId:0,path:Eg(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return ey.waitFor(r)}))}))}},{key:"zn",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Bg});var n=t.store("collectionParents"),r=new Wy,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Eg(i)})}};return t.store("remoteDocuments").Wt({jt:!0},(function(e,t){var n=new ip(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Wt({jt:!0},(function(e,t){var n=f(e,3),r=(n[0],n[1]),a=(n[2],Ng(r));return i(a.popLast())}))}))}},{key:"Hn",value:function(e){var t=this,n=e.store("targets");return n.Wt((function(e,r){var i=_y(r),a=xy(t.M,i);return n.put(a)}))}},{key:"Jn",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Wt((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new wp(ip.fromString(i.document.name).popFirst(5)):i.noDocument?wp.fromSegments(i.noDocument.path):i.unknownDocument?wp.fromSegments(i.unknownDocument.path):Ph()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return ey.waitFor(r)}))}}]),e}();function Cb(e){e.createObjectStore("targetDocuments",{keyPath:Ug}).createIndex("documentTargetsIndex",jg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Fg,{unique:!0}),e.createObjectStore("targetGlobal")}var Nb="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ab=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:13;if(pe(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Yn=a,this.window=o,this.document=u,this.Xn=c,this.Zn=l,this.ts=f,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=function(e){return Promise.resolve()},!e.vt())throw new Lh(Mh.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new gb(this,i),this.hs=n+"main",this.M=new my(s),this.ls=new ny(this.hs,this.ts,new Tb(this.M)),this.fs=new ub(this.referenceDelegate,this.M),this.ds=function(e){return new kb(e)}(this.M),this._s=new Ty,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===l&&Nh("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return me(e,[{key:"start",value:function(){var e=this;return this.gs().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Lh(Mh.FAILED_PRECONDITION,Nb);return e.ys(),e.ps(),e.Is(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.fs.getHighestSequenceNumber(t)}))})).then((function(t){e.es=new Hh(t,e.Xn)})).then((function(){e.ns=!0})).catch((function(t){return e.ls&&e.ls.close(),Promise.reject(t)}))}},{key:"Ts",value:function(e){var t=this;return this.cs=function(){var n=he(fe().mark((function n(r){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ls.Ot(function(){var t=he(fe().mark((function t(n){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget(he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.gs();case 4:case"end":return e.stop()}}),e)})))))}},{key:"gs",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Pb(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.Es(t).next((function(t){t||(e.isPrimary=!1,e.Yn.enqueueRetryable((function(){return e.cs(!1)})))}))})).next((function(){return e.As(t)})).next((function(n){return e.isPrimary&&!n?e.Rs(t).next((function(){return!1})):!!n&&e.bs(t).next((function(){return!0}))}))})).catch((function(t){if(ay(t))return Ch("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Ch("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Yn.enqueueRetryable((function(){return e.cs(t)})),e.isPrimary=t}))}},{key:"Es",value:function(e){var t=this;return Rb(e).get("owner").next((function(e){return ey.resolve(t.Ps(e))}))}},{key:"Vs",value:function(e){return Pb(e).delete(this.clientId)}},{key:"vs",value:function(){var e=he(fe().mark((function e(){var t,n,r,i,a=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.Ss(this.us,18e5)){e.next=6;break}return this.us=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=fy(e,"clientMetadata");return t.qt().next((function(e){var n=a.Ds(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ey.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ws){n=le(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ws.removeItem(this.Cs(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Is",value:function(){var e=this;this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.gs().then((function(){return e.vs()})).then((function(){return e.Is()}))}))}},{key:"Ps",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"As",value:function(e){var t=this;return this.Zn?ey.resolve(!0):Rb(e).get("owner").next((function(n){if(null!==n&&t.Ss(n.leaseTimestampMs,5e3)&&!t.xs(n.ownerId)){if(t.Ps(n)&&t.networkEnabled)return!0;if(!t.Ps(n)){if(!n.allowTabSynchronization)throw new Lh(Mh.FAILED_PRECONDITION,Nb);return!1}}return!(!t.networkEnabled||!t.inForeground)||Pb(e).qt().next((function(e){return void 0===t.Ds(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Ch("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=he(fe().mark((function e(){var t=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.ns=!1,this.Ns(),this.os&&(this.os.cancel(),this.os=null),this.ks(),this.Ms(),e.next=7,this.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new ly(e,Hh.A);return t.Rs(n).next((function(){return t.Vs(n)}))}));case 7:this.ls.close(),this.Os();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ds",value:function(e,t){var n=this;return e.filter((function(e){return n.Ss(e.updateTimeMs,t)&&!n.xs(e.clientId)}))}},{key:"Fs",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Pb(t).qt().next((function(t){return e.Ds(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.ns}},{key:"getMutationQueue",value:function(e,t){return tb.Yt(e,this.M,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getIndexManager",value:function(e){return new Hy(e,this.M.Jt.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Ay.Yt(this.M,e)}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Ch("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=14===(i=this.ts)?Xg:13===i?$g:12===i?Yg:11===i?Qg:void Ph();return this.ls.runTransaction(e,o,u,(function(i){return a=new ly(i,r.es?r.es.next():Hh.A),"readwrite-primary"===t?r.Es(a).next((function(e){return!!e||r.As(a)})).next((function(t){if(!t)throw Nh("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Yn.enqueueRetryable((function(){return r.cs(!1)})),new Lh(Mh.FAILED_PRECONDITION,Jg);return n(a)})).next((function(e){return r.bs(a).next((function(){return e}))})):r.$s(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"$s",value:function(e){var t=this;return Rb(e).get("owner").next((function(e){if(null!==e&&t.Ss(e.leaseTimestampMs,5e3)&&!t.xs(e.ownerId)&&!t.Ps(e)&&!(t.Zn||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Lh(Mh.FAILED_PRECONDITION,Nb)}))}},{key:"bs",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Rb(e).put("owner",t)}},{key:"Rs",value:function(e){var t=this,n=Rb(e);return n.get("owner").next((function(e){return t.Ps(e)?(Ch("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):ey.resolve()}))}},{key:"Ss",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Nh("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ys",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=function(){e.Yn.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.gs()}))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}},{key:"ks",value:function(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}},{key:"ps",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=function(){t.Ns(),!Fe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Yn.enterRestrictedMode(!0),t.Yn.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.ss))}},{key:"Ms",value:function(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}},{key:"xs",value:function(e){var t;try{var n=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Ch("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Nh("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ns",value:function(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(xc){Nh("Failed to set zombie client id.",xc)}}},{key:"Os",value:function(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(xc){}}},{key:"Cs",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"vt",value:function(){return ny.vt()}}]),e}();function Rb(e){return fy(e,"owner")}function Pb(e){return fy(e,"clientMetadata")}function Db(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Ob=function(){function e(t,n,r){pe(this,e),this.ds=t,this.Bs=n,this.indexManager=r}return me(e,[{key:"Ls",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.Us(e,t,r)}))}},{key:"Us",value:function(e,t,n){return this.ds.getEntry(e,t).next((function(e){var t,r=le(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e}))}},{key:"qs",value:function(e,t){e.forEach((function(e,n){var r,i=le(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(a){i.e(a)}finally{i.f()}}))}},{key:"Ks",value:function(e,t){var n=this;return this.ds.getEntries(e,t).next((function(t){return n.Gs(e,t).next((function(){return t}))}))}},{key:"Gs",value:function(e,t){var n=this;return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){return n.qs(t,e)}))}},{key:"Qs",value:function(e,t,n){return function(e){return wp.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.js(e,t.path):Ov(t)?this.Ws(e,t,n):this.zs(e,t,n)}},{key:"js",value:function(e,t){return this.Ls(e,new wp(t)).next((function(e){var t=Pm();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"Ws",value:function(e,t,n){var r=this,i=t.collectionGroup,a=Pm();return this.indexManager.getCollectionParents(e,i).next((function(o){return ey.forEach(o,(function(o){var u=function(e,t){return new Nv(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.zs(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"zs",value:function(e,t,n){var r,i=this;return this.ds.getAllFromCollection(e,t.path,n).next((function(n){return r=n,i.Bs.getAllMutationBatchesAffectingQuery(e,t)})).next((function(e){var t,n=le(e);try{for(n.s();!(t=n.n()).done;){var i,a=t.value,o=le(a.mutations);try{for(o.s();!(i=o.n()).done;){var u=i.value,s=u.key,c=r.get(s);null==c&&(c=Gp.newInvalidDocument(s),r=r.insert(s,c)),dm(u,c,a.localWriteTime),c.isFoundDocument()||(r=r.remove(s))}}catch(l){o.e(l)}finally{o.f()}}}catch(l){n.e(l)}finally{n.f()}})).next((function(){return r.forEach((function(e,n){Vv(t,n)||(r=r.remove(e))})),r}))}}]),e}(),Mb=function(){function e(t,n,r,i){pe(this,e),this.targetId=t,this.fromCache=n,this.Hs=r,this.Js=i}return me(e,null,[{key:"Ys",value:function(t,n){var r,i=Lm(),a=Lm(),o=le(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Lb=function(){function e(){pe(this,e),this.Xs=!1}return me(e,[{key:"initialize",value:function(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}},{key:"Qs",value:function(e,t,n,r){var i=this;return this.ti(e,t).next((function(a){return a||i.ei(e,t,r,n)})).next((function(n){return n||i.ni(e,t)}))}},{key:"ti",value:function(e,t){return ey.resolve(null)}},{key:"ei",value:function(e,t,n,r){var i=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||r.isEqual(Zh.min())?this.ni(e,t):this.Zs.Ks(e,n).next((function(a){var o=i.si(t,a);return i.ii(t,o,n,r)?i.ni(e,t):(Th()<=gt.DEBUG&&Ch("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bv(t)),i.ri(e,o,t,Xp(r,-1)))}))}},{key:"si",value:function(e,t){var n=new iv(zv(e));return t.forEach((function(t,r){Vv(e,r)&&(n=n.add(r))})),n}},{key:"ii",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"ni",value:function(e,t){return Th()<=gt.DEBUG&&Ch("QueryEngine","Using full collection scan to execute query:",Bv(t)),this.Zs.Qs(e,t,Zp.min())}},{key:"ri",value:function(e,t,n,r){return this.Zs.Qs(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Fb=function(){function e(t,n,r,i){pe(this,e),this.persistence=t,this.oi=n,this.M=i,this.ui=new tv(Yh),this.ai=new Cm((function(e){return cv(e)}),lv),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(r)}return me(e,[{key:"li",value:function(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new Ob(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.ui)}))}}]),e}();function Ub(e,t,n,r){return new Fb(e,t,n,r)}function jb(e,t){return Bb.apply(this,arguments)}function Bb(){return Bb=he(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oh(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.Bs.getAllMutationBatches(e).next((function(i){return t=i,r.li(n),r.Bs.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Lm(),s=le(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=le(c.mutations);try{for(f.s();!(l=f.n()).done;){var d=l.value;u=u.add(d.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var h,p=le(n);try{for(p.s();!(h=p.n()).done;){var v=h.value;o.push(v.batchId);var m,g=le(v.mutations);try{for(g.s();!(m=g.n()).done;){var y=m.value;u=u.add(y.key)}}catch(b){g.e(b)}finally{g.f()}}}catch(b){p.e(b)}finally{p.f()}return r.fi.Ks(e,u).next((function(e){return{di:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Bb.apply(this,arguments)}function Vb(e,t){var n=Oh(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.hi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=ey.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Dh(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.Bs.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}function qb(e){var t=Oh(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.fs.getLastRemoteSnapshotVersion(e)}))}function zb(e,t){var n=Oh(e),r=t.snapshotVersion,i=n.ui;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.hi.newChangeBuffer({trackRemovals:!0});i=n.ui;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.fs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.fs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(sp.EMPTY_BYTE_STRING,Zh.min()).withLastLimboFreeSnapshotVersion(Zh.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.fs.updateTargetData(e,c))}}));var u=Am();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Wb(e,a,t.documentUpdates).next((function(e){u=e}))),!r.isEqual(Zh.min())){var s=n.fs.getLastRemoteSnapshotVersion(e).next((function(t){return n.fs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(s)}return ey.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.fi.Gs(e,u)})).next((function(){return u}))})).then((function(e){return n.ui=i,e}))}function Wb(e,t,n){var r=Lm();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Am();return n.forEach((function(n,i){var a=e.get(n);i.isNoDocument()&&i.version.isEqual(Zh.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Ch("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)})),r}))}function Gb(e,t){var n=Oh(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Bs.getNextMutationBatchAfterBatchId(e,t)}))}function Hb(e,t){var n=Oh(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.fs.getTargetData(e,t).next((function(i){return i?(r=i,ey.resolve(r)):n.fs.allocateTargetId(e).next((function(i){return r=new vy(t,i,0,e.currentSequenceNumber),n.fs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.ui.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ui=n.ui.insert(e.targetId,e),n.ai.set(t,e.targetId)),e}))}function Kb(e,t,n){return Qb.apply(this,arguments)}function Qb(){return Qb=he(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Oh(t),a=i.ui.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ay(e.t1)){e.next=12;break}throw e.t1;case 12:Ch("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.ui=i.ui.remove(n),i.ai.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Qb.apply(this,arguments)}function Yb(e,t,n){var r=Oh(e),i=Zh.min(),a=Lm();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Oh(e),i=r.ai.get(n);return void 0!==i?ey.resolve(r.ui.get(i)):r.fs.getTargetData(t,n)}(r,e,Lv(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.oi.Qs(e,t,n?i:Zh.min(),n?a:Lm())})).next((function(e){return Jb(r,qv(t),e),{documents:e,_i:a}}))}))}function $b(e,t){var n=Oh(e),r=Oh(n.fs),i=n.ui.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.Et(e,t).next((function(e){return e?e.target:null}))}))}function Xb(e,t){var n=Oh(e),r=n.ci.get(t)||Zh.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.hi.getAllFromCollectionGroup(e,t,Xp(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Jb(n,t,e),e}))}function Jb(e,t,n){var r=Zh.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ci.set(t,r)}function Zb(e,t,n,r){return ek.apply(this,arguments)}function ek(){return ek=he(fe().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,d,h,p;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Oh(t),o=Lm(),u=Am(),s=le(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.wi(l.metadata.name),l.document&&(o=o.add(f)),(d=n.mi(l)).setReadTime(n.gi(l.metadata.readTime)),u=u.insert(f,d)}catch(v){s.e(v)}finally{s.f()}return h=a.hi.newChangeBuffer({trackRemovals:!0}),e.next=7,Hb(a,function(e){return Lv(Rv(ip.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Wb(e,h,u).next((function(t){return h.apply(e),t})).next((function(t){return a.fs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.fs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.fi.Gs(e,t)})).next((function(){return t}))}))})));case 9:case"end":return e.stop()}}),e)}))),ek.apply(this,arguments)}function tk(e,t){return nk.apply(this,arguments)}function nk(){return nk=he(fe().mark((function e(t,n){var r,i,a,o=arguments;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:Lm(),e.next=3,Hb(t,Lv(Iy(n.bundledQuery)));case 3:return i=e.sent,a=Oh(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=eg(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a._s.saveNamedQuery(e,n);var o=i.withResumeToken(sp.EMPTY_BYTE_STRING,t);return a.ui=a.ui.insert(o.targetId,o),a.fs.updateTargetData(e,o).next((function(){return a.fs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.fs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a._s.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),nk.apply(this,arguments)}var rk=function(){function e(t){pe(this,e),this.M=t,this.yi=new Map,this.pi=new Map}return me(e,[{key:"getBundleMetadata",value:function(e,t){return ey.resolve(this.yi.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.yi.set(t.id,{id:(n=t).id,version:n.version,createTime:eg(n.createTime)}),ey.resolve()}},{key:"getNamedQuery",value:function(e,t){return ey.resolve(this.pi.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.pi.set(t.name,function(e){return{name:e.name,query:Iy(e.bundledQuery),readTime:eg(e.readTime)}}(t)),ey.resolve()}}]),e}(),ik=function(){function e(){pe(this,e),this.overlays=new tv(wp.comparator),this.Ii=new Map}return me(e,[{key:"getOverlay",value:function(e,t){return ey.resolve(this.overlays.get(t))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.Xt(e,t,i)})),ey.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Ii.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Ii.delete(n)),ey.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Dm(),i=t.length+1,a=new wp(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return ey.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new tv((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Dm(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Dm(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return ey.resolve(s)}},{key:"Xt",value:function(e,t,n){if(null!==n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Ii.get(r.largestBatchId).delete(n.key);this.Ii.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new py(t,n));var a=this.Ii.get(t);void 0===a&&(a=Lm(),this.Ii.set(t,a)),this.Ii.set(t,a.add(n.key))}}}]),e}(),ak=function(){function e(){pe(this,e),this.Ti=new iv(ok.Ei),this.Ai=new iv(ok.Ri)}return me(e,[{key:"isEmpty",value:function(){return this.Ti.isEmpty()}},{key:"addReference",value:function(e,t){var n=new ok(e,t);this.Ti=this.Ti.add(n),this.Ai=this.Ai.add(n)}},{key:"bi",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Pi(new ok(e,t))}},{key:"Vi",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"vi",value:function(e){var t=this,n=new wp(new ip([])),r=new ok(n,e),i=new ok(n,e+1),a=[];return this.Ai.forEachInRange([r,i],(function(e){t.Pi(e),a.push(e.key)})),a}},{key:"Si",value:function(){var e=this;this.Ti.forEach((function(t){return e.Pi(t)}))}},{key:"Pi",value:function(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}},{key:"Di",value:function(e){var t=new wp(new ip([])),n=new ok(t,e),r=new ok(t,e+1),i=Lm();return this.Ai.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new ok(e,0),n=this.Ti.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),ok=function(){function e(t,n){pe(this,e),this.key=t,this.Ci=n}return me(e,null,[{key:"Ei",value:function(e,t){return wp.comparator(e.key,t.key)||Yh(e.Ci,t.Ci)}},{key:"Ri",value:function(e,t){return Yh(e.Ci,t.Ci)||wp.comparator(e.key,t.key)}}]),e}(),uk=function(){function e(t,n){pe(this,e),this.indexManager=t,this.referenceDelegate=n,this.Bs=[],this.xi=1,this.Ni=new iv(ok.Ei)}return me(e,[{key:"checkEmpty",value:function(e){return ey.resolve(0===this.Bs.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.xi;this.xi++,this.Bs.length>0&&this.Bs[this.Bs.length-1];var a=new dy(i,t,n,r);this.Bs.push(a);var o,u=le(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Ni=this.Ni.add(new ok(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return ey.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return ey.resolve(this.ki(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Mi(n),i=r<0?0:r;return ey.resolve(this.Bs.length>i?this.Bs[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return ey.resolve(0===this.Bs.length?-1:this.xi-1)}},{key:"getAllMutationBatches",value:function(e){return ey.resolve(this.Bs.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new ok(t,0),i=new ok(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],(function(e){var t=n.ki(e.Ci);a.push(t)})),ey.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new iv(Yh);return t.forEach((function(e){var t=new ok(e,0),i=new ok(e,Number.POSITIVE_INFINITY);n.Ni.forEachInRange([t,i],(function(e){r=r.add(e.Ci)}))})),ey.resolve(this.Oi(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;wp.isDocumentKey(i)||(i=i.child(""));var a=new ok(new wp(i),0),o=new iv(Yh);return this.Ni.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Ci)),!0)}),a),ey.resolve(this.Oi(o))}},{key:"Oi",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ki(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Dh(0===this.Fi(t.batchId,"removed")),this.Bs.shift();var r=this.Ni;return ey.forEach(t.mutations,(function(i){var a=new ok(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Ni=r}))}},{key:"_n",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new ok(t,0),r=this.Ni.firstAfterOrEqual(n);return ey.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.Bs.length,ey.resolve()}},{key:"Fi",value:function(e,t){return this.Mi(e)}},{key:"Mi",value:function(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}},{key:"ki",value:function(e){var t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}]),e}(),sk=function(){function e(t){pe(this,e),this.$i=t,this.docs=new tv(wp.comparator),this.size=0}return me(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.$i(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return ey.resolve(n?n.document.mutableCopy():Gp.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Am();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Gp.newInvalidDocument(e))})),ey.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=Am(),i=new wp(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||ev(Jp(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return ey.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Ph()}},{key:"Bi",value:function(e,t){return ey.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new ck(this)}},{key:"getSize",value:function(e){return ey.resolve(this.size)}}]),e}(),ck=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).Kn=e,r}return me(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Kn.addEntry(e,i)):t.Kn.removeEntry(r)})),ey.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Kn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Kn.getEntries(e,t)}}]),n}(bb),lk=function(){function e(t){pe(this,e),this.persistence=t,this.Li=new Cm((function(e){return cv(e)}),lv),this.lastRemoteSnapshotVersion=Zh.min(),this.highestTargetId=0,this.Ui=0,this.qi=new ak,this.targetCount=0,this.Ki=ob.gn()}return me(e,[{key:"forEachTarget",value:function(e,t){return this.Li.forEach((function(e,n){return t(n)})),ey.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return ey.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return ey.resolve(this.Ui)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ki.next(),ey.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ui&&(this.Ui=t),ey.resolve()}},{key:"Tn",value:function(e){this.Li.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ki=new ob(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Tn(t),this.targetCount+=1,ey.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Tn(t),ey.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,ey.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Li.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Li.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),ey.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return ey.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Li.get(t)||null;return ey.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.qi.bi(t,n),ey.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.qi.Vi(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ey.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.qi.vi(t),ey.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.qi.Di(t);return ey.resolve(n)}},{key:"containsKey",value:function(e,t){return ey.resolve(this.qi.containsKey(t))}}]),e}(),fk=function(){function e(t,n){var r=this;pe(this,e),this.Gi={},this.overlays={},this.es=new Hh(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new lk(this),this.indexManager=new zy,this.ds=new sk((function(e){return r.referenceDelegate.Qi(e)})),this.M=new my(n),this._s=new rk(this.M)}return me(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.ns=!1,Promise.resolve()}},{key:"started",get:function(){return this.ns}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new ik,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Gi[e.toKey()];return n||(n=new uk(t,this.referenceDelegate),this.Gi[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.fs}},{key:"getRemoteDocumentCache",value:function(){return this.ds}},{key:"getBundleCache",value:function(){return this._s}},{key:"runTransaction",value:function(e,t,n){var r=this;Ch("MemoryPersistence","Starting transaction:",e);var i=new dk(this.es.next());return this.referenceDelegate.ji(),n(i).next((function(e){return r.referenceDelegate.Wi(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zi",value:function(e,t){return ey.or(Object.values(this.Gi).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),dk=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return me(n)}(Zg),hk=function(){function e(t){pe(this,e),this.persistence=t,this.Hi=new ak,this.Ji=null}return me(e,[{key:"Xi",get:function(){if(this.Ji)return this.Ji;throw Ph()}},{key:"addReference",value:function(e,t,n){return this.Hi.addReference(n,t),this.Xi.delete(n.toString()),ey.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Hi.removeReference(n,t),this.Xi.add(n.toString()),ey.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Xi.add(t.toString()),ey.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Hi.vi(t.targetId).forEach((function(e){return n.Xi.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Xi.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ji",value:function(){this.Ji=new Set}},{key:"Wi",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ey.forEach(this.Xi,(function(r){var i=wp.fromPath(r);return t.Zi(e,i).next((function(e){e||n.removeEntry(i,Zh.min())}))})).next((function(){return t.Ji=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zi(e,t).next((function(e){e?n.Xi.delete(t.toString()):n.Xi.add(t.toString())}))}},{key:"Qi",value:function(e){return 0}},{key:"Zi",value:function(e,t){var n=this;return ey.or([function(){return ey.resolve(n.Hi.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zi(e,t)}])}}],[{key:"Yi",value:function(t){return new e(t)}}]),e}();function pk(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function vk(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function mk(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var gk=function(){function e(t,n,r,i){pe(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return me(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Lh(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Nh("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),yk=function(){function e(t,n,r){pe(this,e),this.targetId=t,this.state=n,this.error=r}return me(e,[{key:"er",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"tr",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Lh(i.error.code,i.error.message))),a?new e(t,i.state,r):(Nh("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),bk=function(){function e(t,n){pe(this,e),this.clientId=t,this.activeTargetIds=n}return me(e,null,[{key:"tr",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Um(),o=0;i&&o<r.activeTargetIds.length;++o)i=kp(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Nh("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),kk=function(){function e(t,n){pe(this,e),this.clientId=t,this.onlineState=n}return me(e,null,[{key:"tr",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Nh("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),wk=function(){function e(){pe(this,e),this.activeTargetIds=Um()}return me(e,[{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"sr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"er",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),_k=function(){function e(t,n,r,i,a){pe(this,e),this.window=t,this.Yn=n,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new tv(Yh),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=pk(this.persistenceKey,this.ir),this.lr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ar=this.ar.insert(this.ir,new wk),this.dr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this._r=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.wr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.mr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.gr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}return me(e,[{key:"start",value:function(){var e=he(fe().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,d=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.Fs();case 2:t=e.sent,n=le(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.ir){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(pk(this.persistenceKey,i)))&&(o=bk.tr(i,a))&&(this.ar=this.ar.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.yr(),(u=this.storage.getItem(this.mr))&&(s=this.pr(u))&&this.Ir(s),c=le(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ur(f)}catch(h){c.e(h)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.lr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Tr(this.ar)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ar.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Er(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Er(e,t,n),this.Ar(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(mk(this.persistenceKey,e));if(n){var r=yk.tr(e,n);r&&(t=r.state)}}return this.Rr.nr(e),this.yr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Rr.sr(e),this.yr()}},{key:"isLocalQueryTarget",value:function(e){return this.Rr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(mk(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.br(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Ar(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Pr(e)}},{key:"notifyBundleLoaded",value:function(e){this.Vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Ch("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Ch("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Ch("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ur",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Ch("SharedClientState","EVENT",n.key,n.newValue),n.key===this.hr)return void Nh("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable(he(fe().mark((function e(){var r,i,a,o,u,s,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.dr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Sr(r,null));case 6:if(!(i=t.Dr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Sr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t._r.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Cr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Nr(a));case 16:e.next=41;break;case 18:if(!t.wr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.kr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Mr(o));case 23:e.next=41;break;case 25:if(n.key!==t.mr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.pr(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ir(u));case 30:e.next=41;break;case 32:if(n.key!==t.lr){e.next=37;break}s=function(e){var t=Hh.A;if(null!=e)try{var n=JSON.parse(e);Dh("number"==typeof n),t=n}catch(e){Nh("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Hh.A&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.gr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Fr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Rr",get:function(){return this.ar.get(this.ir)}},{key:"yr",value:function(){this.setItem(this.hr,this.Rr.er())}},{key:"Er",value:function(e,t,n){var r=new gk(this.currentUser,e,t,n),i=vk(this.persistenceKey,this.currentUser,e);this.setItem(i,r.er())}},{key:"Ar",value:function(e){var t=vk(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Pr",value:function(e){var t={clientId:this.ir,onlineState:e};this.storage.setItem(this.mr,JSON.stringify(t))}},{key:"br",value:function(e,t,n){var r=mk(this.persistenceKey,e),i=new yk(e,t,n);this.setItem(r,i.er())}},{key:"Vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}},{key:"vr",value:function(e){var t=this.dr.exec(e);return t?t[1]:null}},{key:"Dr",value:function(e,t){var n=this.vr(e);return bk.tr(n,t)}},{key:"Cr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return gk.tr(new Ih(i),r,t)}},{key:"kr",value:function(e,t){var n=this.wr.exec(e),r=Number(n[1]);return yk.tr(r,t)}},{key:"pr",value:function(e){return kk.tr(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Nr",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:Ch("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Mr",value:function(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}},{key:"Sr",value:function(e,t){var n=this,r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Lr(o,u).then((function(){n.ar=r}))}},{key:"Ir",value:function(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Tr",value:function(e){var t=Um();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"vt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),xk=function(){function e(){pe(this,e),this.Ur=new wk,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return me(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Ur.nr(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Ur.sr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Ur.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Ur.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Ur=new wk,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Ik=function(){function e(){pe(this,e)}return me(e,[{key:"Kr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Sk=function(){function e(){var t=this;pe(this,e),this.Gr=function(){return t.Qr()},this.jr=function(){return t.Wr()},this.zr=[],this.Hr()}return me(e,[{key:"Kr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}},{key:"Hr",value:function(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}},{key:"Qr",value:function(){Ch("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=le(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Wr",value:function(){Ch("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=le(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"vt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Ek={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Tk=function(){function e(t){pe(this,e),this.Jr=t.Jr,this.Yr=t.Yr}return me(e,[{key:"Xr",value:function(e){this.Zr=e}},{key:"eo",value:function(e){this.no=e}},{key:"onMessage",value:function(e){this.so=e}},{key:"close",value:function(){this.Yr()}},{key:"send",value:function(e){this.Jr(e)}},{key:"io",value:function(){this.Zr()}},{key:"ro",value:function(e){this.no(e)}},{key:"oo",value:function(e){this.so(e)}}]),e}(),Ck=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return me(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new _h;o.listenOnce(gh.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case mh.NO_ERROR:var t=o.getResponseJson();Ch("Connection","XHR received:",JSON.stringify(t)),i(t);break;case mh.TIMEOUT:Ch("Connection",'RPC "'+e+'" timed out'),a(new Lh(Mh.DEADLINE_EXCEEDED,"Request time out"));break;case mh.HTTP_ERROR:var n=o.getStatus();if(Ch("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Mh).indexOf(t)>=0?t:Mh.UNKNOWN}(r.status);a(new Lh(u,r.message))}else a(new Lh(Mh.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Lh(Mh.UNAVAILABLE,"Connection failed."));break;default:Ph()}}finally{Ch("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=ph(),a=vh(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new kh({})),this.lo(o.initMessageHeaders,t,n),Le()||je()||Me().indexOf("Electron/")>=0||Be()||Me().indexOf("MSAppHost/")>=0||Ue()||(o.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Ch("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new Tk({Jr:function(e){l?Ch("Connection","Not sending because WebChannel is closed:",e):(c||(Ch("Connection","Opening WebChannel transport."),s.open(),c=!0),Ch("Connection","WebChannel sending:",e),s.send(e))},Yr:function(){return s.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(s,wh.EventType.OPEN,(function(){l||Ch("Connection","WebChannel transport opened.")})),d(s,wh.EventType.CLOSE,(function(){l||(l=!0,Ch("Connection","WebChannel transport closed"),f.ro())})),d(s,wh.EventType.ERROR,(function(e){l||(l=!0,Ah("Connection","WebChannel transport errored:",e),f.ro(new Lh(Mh.UNAVAILABLE,"The operation could not be completed")))})),d(s,wh.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];Dh(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Ch("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=wm[e];if(void 0!==t)return Tm(t)}(a),u=i.message;void 0===o&&(o=Mh.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.ro(new Lh(o,u)),s.close()}else Ch("Connection","WebChannel received:",n),f.oo(n)}})),d(a,yh.STAT_EVENT,(function(e){e.stat===bh.PROXY?Ch("Connection","Detected buffering proxy"):e.stat===bh.NOPROXY&&Ch("Connection","Detected no buffering proxy")})),setTimeout((function(){f.io()}),0),f}}]),n}(function(){function e(t){pe(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.uo=n+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return me(e,[{key:"co",value:function(e,t,n,r,i){var a=this.ho(e,t);Ch("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return Ch("RestConnection","Received: ",e),e}),(function(t){throw Ah("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i){return this.co(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Sh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=Ek[e];return"".concat(this.uo,"/v1/").concat(t,":").concat(n)}}]),e}());function Nk(){return"undefined"!=typeof window?window:null}function Ak(){return"undefined"!=typeof document?document:null}function Rk(e){return new $m(e,!0)}var Pk=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;pe(this,e),this.Yn=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return me(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&Ch("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),Dk=function(){function e(t,n,r,i,a,o,u,s){pe(this,e),this.Yn=t,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new Pk(t,n)}return me(e,[{key:"ko",value:function(){return 1===this.state||5===this.state||this.Mo()}},{key:"Mo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.ko(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fo",value:function(){this.state=0,this.No.reset()}},{key:"$o",value:function(){var e=this;this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,(function(){return e.Bo()})))}},{key:"Lo",value:function(e){this.Uo(),this.stream.send(e)}},{key:"Bo",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Mo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"qo",value:function(){this.xo&&(this.xo.cancel(),this.xo=null)}},{key:"close",value:function(){var e=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Uo(),this.qo(),this.No.cancel(),this.Do++,4!==t?this.No.reset():n&&n.code===Mh.RESOURCE_EXHAUSTED?(Nh(n.toString()),Nh("Using maximum backoff delay to prevent overloading the backend."),this.No.Ao()):n&&n.code===Mh.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Ko(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Ko",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Go(this.Do),n=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=f(t,2),i=r[0],a=r[1];e.Do===n&&e.Qo(i,a)}),(function(n){t((function(){var t=new Lh(Mh.UNKNOWN,"Fetching auth token failed: "+n.message);return e.jo(t)}))}))}},{key:"Qo",value:function(e,t){var n=this,r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr((function(){r((function(){return n.state=2,n.xo=n.Yn.enqueueAfterDelay(n.vo,1e4,(function(){return n.Mo()&&(n.state=3),Promise.resolve()})),n.listener.Xr()}))})),this.stream.eo((function(e){r((function(){return n.jo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.No.Ro(he(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"jo",value:function(e){return Ch("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Go",value:function(e){var t=this;return function(n){t.Yn.enqueueAndForget((function(){return t.Do===e?n():(Ch("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Ok=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o,u){var s;return pe(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).M=o,s}return me(n,[{key:"Wo",value:function(e,t){return this.So.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.No.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ph()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.N?(Dh(void 0===t||"string"==typeof t),sp.fromBase64String(t||"")):(Dh(void 0===t||t instanceof Uint8Array),sp.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Mh.UNKNOWN:Tm(e.code);return new Lh(t,e.message||"")}(o);n=new zm(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=ig(e,s.document.name),l=eg(s.document.updateTime),f=new zp({mapValue:{fields:s.document.fields}}),d=Gp.newFoundDocument(c,l,f),h=s.targetIds||[],p=s.removedTargetIds||[];n=new Vm(h,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var v=t.documentDelete;v.document;var m=ig(e,v.document),g=v.readTime?eg(v.readTime):Zh.min(),y=Gp.newNoDocument(m,g),b=v.removedTargetIds||[];n=new Vm([],b,y.key,y)}else if("documentRemove"in t){t.documentRemove;var k=t.documentRemove;k.document;var w=ig(e,k.document),_=k.removedTargetIds||[];n=new Vm([],_,w,null)}else{if(!("filter"in t))return Ph();t.filter;var x=t.filter;x.targetId;var I=x.count||0,S=new Sm(I),E=x.targetId;n=new qm(E,S)}return n}(this.M,e),n=function(e){if(!("targetChange"in e))return Zh.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Zh.min():t.readTime?eg(t.readTime):Zh.min()}(e);return this.listener.zo(t,n)}},{key:"Ho",value:function(e){var t={};t.database=ug(this.M),t.addTarget=function(e,t){var n,r=t.target;return(n=fv(r)?{documents:pg(e,r)}:{query:vg(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Jm(e,t.resumeToken):t.snapshotVersion.compareTo(Zh.min())>0&&(n.readTime=Xm(e,t.snapshotVersion.toTimestamp())),n}(this.M,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ph()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.M,e);n&&(t.labels=n),this.Lo(t)}},{key:"Jo",value:function(e){var t={};t.database=ug(this.M),t.removeTarget=e,this.Lo(t)}}]),n}(Dk),Mk=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o,u){var s;return pe(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).M=o,s.Yo=!1,s}return me(n,[{key:"Xo",get:function(){return this.Yo}},{key:"start",value:function(){this.Yo=!1,this.lastStreamToken=void 0,ne(ee(n.prototype),"start",this).call(this)}},{key:"Ko",value:function(){this.Yo&&this.Zo([])}},{key:"Wo",value:function(e,t){return this.So.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Dh(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();var t=function(e,t){return e&&e.length>0?(Dh(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?eg(e.updateTime):eg(t);return n.isEqual(Zh.min())&&(n=eg(t)),new um(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=eg(e.commitTime);return this.listener.tu(n,t)}return Dh(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}},{key:"nu",value:function(){var e={};e.database=ug(this.M),this.Lo(e)}},{key:"Zo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return dg(t.M,e)}))};this.Lo(n)}}]),n}(Dk),Lk=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a){var o;return pe(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.So=i,o.M=a,o.su=!1,o}return me(n,[{key:"iu",value:function(){if(this.su)throw new Lh(Mh.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],u=a[1];return r.So.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Mh.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Lh(Mh.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n){var r=this;return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=f(i,2),o=a[0],u=a[1];return r.So._o(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Mh.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Lh(Mh.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.su=!0}}]),n}(function(){return me((function e(){pe(this,e)}))}()),Fk=function(){function e(t,n){pe(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}return me(e,[{key:"au",value:function(){var e=this;0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ou=null,e.hu("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"lu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"hu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.uu?(Nh(t),this.uu=!1):Ch("OnlineStateTracker",t)}},{key:"fu",value:function(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}]),e}(),Uk=me((function e(t,n,r,i,a){var o=this;pe(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr((function(e){r.enqueueAndForget(he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Yk(o),!e.t0){e.next=5;break}return Ch("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Oh(t)).wu.add(4),e.next=4,Vk(n);case 4:return n.yu.set("Unknown"),n.wu.delete(4),e.next=8,jk(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.yu=new Fk(r,i)}));function jk(e){return Bk.apply(this,arguments)}function Bk(){return Bk=he(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Yk(t)){e.next=18;break}n=le(t.mu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Bk.apply(this,arguments)}function Vk(e){return qk.apply(this,arguments)}function qk(){return qk=he(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=le(t.mu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),qk.apply(this,arguments)}function zk(e,t){var n=Oh(e);n._u.has(t.targetId)||(n._u.set(t.targetId,t),Qk(n)?Kk(n):Iw(n).Mo()&&Gk(n,t))}function Wk(e,t){var n=Oh(e),r=Iw(n);n._u.delete(t),r.Mo()&&Hk(n,t),0===n._u.size&&(r.Mo()?r.$o():Yk(n)&&n.yu.set("Unknown"))}function Gk(e,t){e.pu.Z(t.targetId),Iw(e).Ho(t)}function Hk(e,t){e.pu.Z(t),Iw(e).Jo(t)}function Kk(e){e.pu=new Gm({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e._u.get(t)||null}}),Iw(e).start(),e.yu.au()}function Qk(e){return Yk(e)&&!Iw(e).ko()&&e._u.size>0}function Yk(e){return 0===Oh(e).wu.size}function $k(e){e.pu=void 0}function Xk(e){return Jk.apply(this,arguments)}function Jk(){return Jk=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t._u.forEach((function(e,n){Gk(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Jk.apply(this,arguments)}function Zk(e,t){return ew.apply(this,arguments)}function ew(){return ew=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$k(t),Qk(t)?(t.yu.lu(n),Kk(t)):t.yu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),ew.apply(this,arguments)}function tw(e,t,n){return nw.apply(this,arguments)}function nw(){return nw=he(fe().mark((function e(t,n,r){var i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.yu.set("Online"),!(n instanceof zm&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=he(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=le(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t._u.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t._u.delete(o),t.pu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Ch("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,rw(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Vm?t.pu.ut(n):n instanceof qm?t.pu._t(n):t.pu.ht(n),r.isEqual(Zh.min())){e.next=29;break}return e.prev=14,e.next=17,qb(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.pu.yt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e._u.get(r);i&&e._u.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e._u.get(t);if(n){e._u.set(t,n.withResumeToken(sp.EMPTY_BYTE_STRING,n.snapshotVersion)),Hk(e,t);var r=new vy(n.target,t,1,n.sequenceNumber);Gk(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Ch("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,rw(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),nw.apply(this,arguments)}function rw(e,t,n){return iw.apply(this,arguments)}function iw(){return iw=he(fe().mark((function e(t,n,r){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ay(n)){e.next=2;break}throw n;case 2:return t.wu.add(1),e.next=5,Vk(t);case 5:t.yu.set("Offline"),r||(r=function(){return qb(t.localStore)}),t.asyncQueue.enqueueRetryable(he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ch("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.wu.delete(1),e.next=6,jk(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),iw.apply(this,arguments)}function aw(e,t){return t().catch((function(n){return rw(e,n,t)}))}function ow(e){return uw.apply(this,arguments)}function uw(){return uw=he(fe().mark((function e(t){var n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Oh(t),r=Sw(n),i=n.du.length>0?n.du[n.du.length-1].batchId:-1;case 2:if(!sw(n)){e.next=19;break}return e.prev=3,e.next=6,Gb(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.du.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,cw(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,rw(n,e.t0);case 17:e.next=2;break;case 19:lw(n)&&fw(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),uw.apply(this,arguments)}function sw(e){return Yk(e)&&e.du.length<10}function cw(e,t){e.du.push(t);var n=Sw(e);n.Mo()&&n.Xo&&n.Zo(t.mutations)}function lw(e){return Yk(e)&&!Sw(e).ko()&&e.du.length>0}function fw(e){Sw(e).start()}function dw(e){return hw.apply(this,arguments)}function hw(){return hw=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Sw(t).nu();case 1:case"end":return e.stop()}}),e)}))),hw.apply(this,arguments)}function pw(e){return vw.apply(this,arguments)}function vw(){return vw=he(fe().mark((function e(t){var n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Sw(t),r=le(t.du);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Zo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),vw.apply(this,arguments)}function mw(e,t,n){return gw.apply(this,arguments)}function gw(){return gw=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.du.shift(),a=hy.from(i,n,r),e.next=3,aw(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,ow(t);case 5:case"end":return e.stop()}}),e)}))),gw.apply(this,arguments)}function yw(e,t){return bw.apply(this,arguments)}function bw(){return bw=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Sw(t).Xo,!e.t0){e.next=4;break}return e.next=4,function(){var e=he(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Em(i=n.code)||i===Mh.ABORTED){e.next=7;break}return r=t.du.shift(),Sw(t).Fo(),e.next=5,aw(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,ow(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:lw(t)&&fw(t);case 5:case"end":return e.stop()}}),e)}))),bw.apply(this,arguments)}function kw(e,t){return ww.apply(this,arguments)}function ww(){return ww=he(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Oh(t)).asyncQueue.verifyOperationInProgress(),Ch("RemoteStore","RemoteStore received new credentials"),i=Yk(r),r.wu.add(3),e.next=6,Vk(r);case 6:return i&&r.yu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.wu.delete(3),e.next=12,jk(r);case 12:case"end":return e.stop()}}),e)}))),ww.apply(this,arguments)}function _w(e,t){return xw.apply(this,arguments)}function xw(){return xw=he(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Oh(t),!n){e.next=7;break}return r.wu.delete(2),e.next=5,jk(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.wu.add(2),e.next=12,Vk(r);case 12:r.yu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),xw.apply(this,arguments)}function Iw(e){return e.Iu||(e.Iu=function(e,t,n){var r=Oh(e);return r.iu(),new Ok(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:Xk.bind(null,e),eo:Zk.bind(null,e),zo:tw.bind(null,e)}),e.mu.push(function(){var t=he(fe().mark((function t(n){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Iu.Fo(),Qk(e)?Kk(e):e.yu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Iu.stop();case 6:$k(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}function Sw(e){return e.Tu||(e.Tu=function(e,t,n){var r=Oh(e);return r.iu(),new Mk(t,r.So,r.authCredentials,r.appCheckCredentials,r.M,n)}(e.datastore,e.asyncQueue,{Xr:dw.bind(null,e),eo:yw.bind(null,e),eu:pw.bind(null,e),tu:mw.bind(null,e)}),e.mu.push(function(){var t=he(fe().mark((function t(n){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Tu.Fo(),t.next=4,ow(e);case 4:t.next=9;break;case 6:return t.next=8,e.Tu.stop();case 8:e.du.length>0&&(Ch("RemoteStore","Stopping write stream with ".concat(e.du.length," pending writes")),e.du=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Tu}var Ew=function(){function e(t,n,r,i,a){pe(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Fh,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return me(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Lh(Mh.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Tw(e,t){if(Nh("AsyncQueue","".concat(t,": ").concat(e)),ay(e))return new Lh(Mh.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var Cw=function(){function e(t){pe(this,e),this.comparator=t?function(e,n){return t(e,n)||wp.comparator(e.key,n.key)}:function(e,t){return wp.comparator(e.key,t.key)},this.keyedMap=Pm(),this.sortedSet=new tv(this.comparator)}return me(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),Nw=function(){function e(){pe(this,e),this.Eu=new tv(wp.comparator)}return me(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Eu.get(t);n?0!==e.type&&3===n.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==n.type?this.Eu=this.Eu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Eu=this.Eu.remove(t):1===e.type&&2===n.type?this.Eu=this.Eu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):Ph():this.Eu=this.Eu.insert(t,e)}},{key:"Au",value:function(){var e=[];return this.Eu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),Aw=function(){function e(t,n,r,i,a,o,u,s){pe(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s}return me(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uv(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var a=[];return n.forEach((function(e){a.push({type:0,doc:e})})),new e(t,n,Cw.emptySet(n),a,r,i,!0,!1)}}]),e}(),Rw=me((function e(){pe(this,e),this.Ru=void 0,this.listeners=[]})),Pw=me((function e(){pe(this,e),this.queries=new Cm((function(e){return jv(e)}),Uv),this.onlineState="Unknown",this.bu=new Set}));function Dw(e,t){return Ow.apply(this,arguments)}function Ow(){return Ow=he(fe().mark((function e(t,n){var r,i,a,o,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Oh(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new Rw),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Ru=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=Tw(e.t0,"Initialization of query '".concat(Bv(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Pu(r.onlineState),o.Ru&&n.Vu(o.Ru)&&jw(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Ow.apply(this,arguments)}function Mw(e,t){return Lw.apply(this,arguments)}function Lw(){return Lw=he(fe().mark((function e(t,n){var r,i,a,o,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Oh(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Lw.apply(this,arguments)}function Fw(e,t){var n,r=Oh(e),i=!1,a=le(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=le(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Ru=o}}}catch(f){a.e(f)}finally{a.f()}i&&jw(r)}function Uw(e,t,n){var r=Oh(e),i=r.queries.get(t);if(i){var a,o=le(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function jw(e){e.bu.forEach((function(e){e.next()}))}var Bw=function(){function e(t,n,r){pe(this,e),this.query=t,this.vu=n,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}return me(e,[{key:"Vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=le(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new Aw(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var a=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),a=!0):this.xu(e,this.onlineState)&&(this.Nu(e),a=!0),this.Du=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"Pu",value:function(e){this.onlineState=e;var t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}},{key:"xu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.ku||!n)&&(!e.docs.isEmpty()||"Offline"===t)}},{key:"Cu",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Nu",value:function(e){e=Aw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}]),e}(),Vw=function(){function e(t,n){pe(this,e),this.payload=t,this.byteLength=n}return me(e,[{key:"Mu",value:function(){return"metadata"in this.payload}}]),e}(),qw=function(){function e(t){pe(this,e),this.M=t}return me(e,[{key:"wi",value:function(e){return ig(this.M,e)}},{key:"mi",value:function(e){return e.metadata.exists?lg(this.M,e.document,!1):Gp.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}},{key:"gi",value:function(e){return eg(e)}}]),e}(),zw=function(){function e(t,n,r){pe(this,e),this.Ou=t,this.localStore=n,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ww(t)}return me(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;var n=ip.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new qw(this.M),i=le(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.wi(a.metadata.name),s=le(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Lm()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=he(fe().mark((function e(){var t,n,r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zb(this.localStore,new qw(this.M),this.documents,this.Ou.id);case 2:t=e.sent,n=this.$u(this.documents),r=le(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,tk(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ww(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Gw=me((function e(t){pe(this,e),this.key=t})),Hw=me((function e(t){pe(this,e),this.key=t})),Kw=function(){function e(t,n){pe(this,e),this.query=t,this.Uu=n,this.qu=null,this.current=!1,this.Ku=Lm(),this.mutatedKeys=Lm(),this.Gu=zv(t),this.Qu=new Cw(this.Gu)}return me(e,[{key:"ju",get:function(){return this.Uu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new Nw,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Vv(n.query,t)?t:null,d=!!l&&n.mutatedKeys.has(l.key),h=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?d!==h&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=h?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,ii:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Au();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ph()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new Aw(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1),Xu:o}:{Xu:o}}},{key:"Pu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Nw,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Uu=t.Uu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Uu=t.Uu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=Lm(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new Hw(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new Gw(e))})),n}},{key:"ta",value:function(e){this.Uu=e._i,this.Ku=Lm();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ea",value:function(){return Aw.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}]),e}(),Qw=me((function e(t,n,r){pe(this,e),this.query=t,this.targetId=n,this.view=r})),Yw=me((function e(t){pe(this,e),this.key=t,this.na=!1})),$w=function(){function e(t,n,r,i,a,o){pe(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sa={},this.ia=new Cm((function(e){return jv(e)}),Uv),this.ra=new Map,this.oa=new Set,this.ua=new tv(wp.comparator),this.aa=new Map,this.ca=new ak,this.ha={},this.la=new Map,this.fa=ob.yn(),this.onlineState="Unknown",this.da=void 0}return me(e,[{key:"isPrimaryClient",get:function(){return!0===this.da}}]),e}();function Xw(e,t){return Jw.apply(this,arguments)}function Jw(){return Jw=he(fe().mark((function e(t,n){var r,i,a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=W_(t),!(o=r.ia.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ea(),e.next=15;break;case 6:return e.next=8,Hb(r.localStore,Lv(n));case 8:return u=e.sent,r.isPrimaryClient&&zk(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Zw(r,n,i,"current"===s);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Jw.apply(this,arguments)}function Zw(e,t,n,r){return e_.apply(this,arguments)}function e_(){return e_=he(fe().mark((function e(t,n,r,i){var a,o,u,s,c,l;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._a=function(e,n,r){return function(){var e=he(fe().mark((function e(t,n,r,i){var a,o,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.ii,!e.t0){e.next=6;break}return e.next=5,Yb(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(k_(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Yb(t.localStore,n,!0);case 3:return a=e.sent,o=new Kw(n,a._i),u=o.Wu(a.documents),s=Bm.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=o.applyChanges(u,t.isPrimaryClient,s),k_(t,r,c.Xu),l=new Qw(n,r,o),e.abrupt("return",(t.ia.set(n,l),t.ra.has(r)?t.ra.get(r).push(n):t.ra.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}}),e)}))),e_.apply(this,arguments)}function t_(e,t){return n_.apply(this,arguments)}function n_(){return n_=he(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Oh(t),i=r.ia.get(n),!((a=r.ra.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ra.set(i.targetId,a.filter((function(e){return!Uv(e,n)}))),void r.ia.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Kb(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Wk(r.remoteStore,i.targetId),y_(r,i.targetId)})).catch(fb);case 9:e.next=14;break;case 11:return y_(r,i.targetId),e.next=14,Kb(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),n_.apply(this,arguments)}function r_(e,t,n){return i_.apply(this,arguments)}function i_(){return i_=he(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=G_(t),e.prev=1,e.next=4,function(e,t){var n,r=Oh(e),i=Jh.now(),a=t.reduce((function(e,t){return e.add(t.key)}),Lm());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.fi.Ks(e,a).next((function(a){n=a;var o,u=[],s=le(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=hm(c,n.get(c.key));null!=l&&u.push(new gm(c.key,l,Wp(l.value.mapValue),sm.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return r.Bs.addMutationBatch(e,i,u,t)}))})).then((function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ha[e.currentUser.toKey()];r||(r=new tv(Yh)),r=r.insert(t,n),e.ha[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,x_(i,a.changes);case 9:return e.next=11,ow(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=Tw(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),i_.apply(this,arguments)}function a_(e,t){return o_.apply(this,arguments)}function o_(){return o_=he(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oh(t),e.prev=1,e.next=4,zb(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.aa.get(t);n&&(Dh(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.na=!0:e.modifiedDocuments.size>0?Dh(n.na):e.removedDocuments.size>0&&(Dh(n.na),n.na=!1))})),e.next=8,x_(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,fb(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),o_.apply(this,arguments)}function u_(e,t,n){var r=Oh(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ia.forEach((function(e,n){var r=n.view.Pu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Oh(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=le(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Pu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&jw(n)}(r.eventManager,t),i.length&&r.sa.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function s_(e,t,n){return c_.apply(this,arguments)}function c_(){return c_=he(fe().mark((function e(t,n,r){var i,a,o,u,s,c;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Oh(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.aa.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new tv(wp.comparator)).insert(o,Gp.newNoDocument(o,Zh.min())),s=Lm().add(o),c=new jm(Zh.min(),new Map,new iv(Yh),u,s),e.next=9,a_(i,c);case 9:i.ua=i.ua.remove(o),i.aa.delete(n),__(i),e.next=16;break;case 14:return e.next=16,Kb(i.localStore,n,!1).then((function(){return y_(i,n,r)})).catch(fb);case 16:case"end":return e.stop()}}),e)}))),c_.apply(this,arguments)}function l_(e,t){return f_.apply(this,arguments)}function f_(){return f_=he(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oh(t),i=n.batch.batchId,e.prev=1,e.next=4,Vb(r.localStore,n);case 4:return a=e.sent,g_(r,i,null),m_(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,x_(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,fb(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),f_.apply(this,arguments)}function d_(e,t,n){return h_.apply(this,arguments)}function h_(){return h_=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Oh(t),e.prev=1,e.next=4,function(e,t){var n=Oh(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Bs.lookupMutationBatch(e,t).next((function(t){return Dh(null!==t),r=t.keys(),n.Bs.removeMutationBatch(e,t)})).next((function(){return n.Bs.performConsistencyCheck(e)})).next((function(){return n.fi.Ks(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,g_(i,n,r),m_(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,x_(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,fb(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),h_.apply(this,arguments)}function p_(e,t){return v_.apply(this,arguments)}function v_(){return v_=he(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Yk((r=Oh(t)).remoteStore)||Ch("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Oh(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Bs.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.la.get(i)||[]).push(n),r.la.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=Tw(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),v_.apply(this,arguments)}function m_(e,t){(e.la.get(t)||[]).forEach((function(e){e.resolve()})),e.la.delete(t)}function g_(e,t,n){var r=Oh(e),i=r.ha[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ha[r.currentUser.toKey()]=i}}function y_(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=le(e.ra.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ia.delete(a),n&&e.sa.wa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ra.delete(t),e.isPrimaryClient&&e.ca.vi(t).forEach((function(t){e.ca.containsKey(t)||b_(e,t)}))}function b_(e,t){e.oa.delete(t.path.canonicalString());var n=e.ua.get(t);null!==n&&(Wk(e.remoteStore,n),e.ua=e.ua.remove(t),e.aa.delete(n),__(e))}function k_(e,t,n){var r,i=le(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Gw?(e.ca.addReference(a.key,t),w_(e,a)):a instanceof Hw?(Ch("SyncEngine","Document no longer in limbo: "+a.key),e.ca.removeReference(a.key,t),e.ca.containsKey(a.key)||b_(e,a.key)):Ph()}}catch(o){i.e(o)}finally{i.f()}}function w_(e,t){var n=t.key,r=n.path.canonicalString();e.ua.get(n)||e.oa.has(r)||(Ch("SyncEngine","New document in limbo: "+n),e.oa.add(r),__(e))}function __(e){for(;e.oa.size>0&&e.ua.size<e.maxConcurrentLimboResolutions;){var t=e.oa.values().next().value;e.oa.delete(t);var n=new wp(ip.fromString(t)),r=e.fa.next();e.aa.set(r,new Yw(n)),e.ua=e.ua.insert(n,r),zk(e.remoteStore,new vy(Lv(Rv(n.path)),r,2,Hh.A))}}function x_(e,t,n){return I_.apply(this,arguments)}function I_(){return I_=he(fe().mark((function e(t,n,r){var i,a,o,u;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Oh(t),a=[],o=[],u=[],e.t0=i.ia.isEmpty(),e.t0){e.next=9;break}return i.ia.forEach((function(e,t){u.push(i._a(t,n,r).then((function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),a.push(e);var n=Mb.Ys(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sa.zo(a),e.next=9,function(){var e=he(fe().mark((function e(t,n){var r,i,a,o,u,s,c,l;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oh(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ey.forEach(n,(function(t){return ey.forEach(t.Hs,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return ey.forEach(t.Js,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ay(e.t0)){e.next=10;break}throw e.t0;case 10:Ch("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=le(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.ui.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.ui=r.ui.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),I_.apply(this,arguments)}function S_(e,t){return E_.apply(this,arguments)}function E_(){return E_=he(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Oh(t)).currentUser.isEqual(n)){e.next=11;break}return Ch("SyncEngine","User change. New user:",n.toKey()),e.next=5,jb(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.la.forEach((function(e){e.forEach((function(e){e.reject(new Lh(Mh.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.la.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,x_(r,i.di);case 11:case"end":return e.stop()}}),e)}))),E_.apply(this,arguments)}function T_(e,t){var n=Oh(e),r=n.aa.get(t);if(r&&r.na)return Lm().add(r.key);var i=Lm(),a=n.ra.get(t);if(!a)return i;var o,u=le(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ia.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function C_(e,t){return N_.apply(this,arguments)}function N_(){return N_=he(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oh(t),e.next=3,Yb(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.ta(i),e.abrupt("return",(r.isPrimaryClient&&k_(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),N_.apply(this,arguments)}function A_(e,t){return R_.apply(this,arguments)}function R_(){return R_=he(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oh(t),e.abrupt("return",Xb(r.localStore,n).then((function(e){return x_(r,e)})));case 2:case"end":return e.stop()}}),e)}))),R_.apply(this,arguments)}function P_(e,t,n,r){return D_.apply(this,arguments)}function D_(){return D_=he(fe().mark((function e(t,n,r,i){var a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Oh(t),e.next=3,function(e,t){var n=Oh(e),r=Oh(n.Bs);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.fn(e,t).next((function(t){return t?n.fi.Ks(e,t):ey.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,ow(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(g_(a,n,i||null),m_(a,n),function(e,t){Oh(Oh(e).Bs)._n(t)}(a.localStore,n)):Ph();case 11:return e.next=13,x_(a,o);case 13:e.next=16;break;case 15:Ch("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),D_.apply(this,arguments)}function O_(e,t){return M_.apply(this,arguments)}function M_(){return M_=he(fe().mark((function e(t,n){var r,i,a,o,u,s,c,l;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W_(r=Oh(t)),G_(r),!0!==n||!0===r.da){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,L_(r,i.toArray());case 5:return a=e.sent,r.da=!0,e.next=9,_w(r.remoteStore,!0);case 9:o=le(a);try{for(o.s();!(u=o.n()).done;)s=u.value,zk(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.da){e.next=25;break}return c=[],l=Promise.resolve(),r.ra.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return y_(r,t),Kb(r.localStore,t,!0)})),Wk(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,L_(r,c);case 21:return function(e){var t=Oh(e);t.aa.forEach((function(e,n){Wk(t.remoteStore,n)})),t.ca.Si(),t.aa=new Map,t.ua=new tv(wp.comparator)}(r),r.da=!1,e.next=25,_w(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),M_.apply(this,arguments)}function L_(e,t,n){return F_.apply(this,arguments)}function F_(){return F_=he(fe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d,h,p,v,m,g;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Oh(t),a=[],o=[],u=le(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ra.get(c))||0===f.length){e.next=34;break}return e.next=11,Hb(i.localStore,Lv(f[0]));case 11:l=e.sent,d=le(f),e.prev=13,d.s();case 15:if((h=d.n()).done){e.next=24;break}return p=h.value,v=i.ia.get(p),e.next=20,C_(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,$b(i.localStore,c);case 36:return g=e.sent,e.next=39,Hb(i.localStore,g);case 39:return l=e.sent,e.next=42,Zw(i,U_(g),c,!1);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sa.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),F_.apply(this,arguments)}function U_(e){return Av(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function j_(e){var t=Oh(e);return Oh(Oh(t.localStore).persistence).Fs()}function B_(e,t,n,r){return V_.apply(this,arguments)}function V_(){return V_=he(fe().mark((function e(t,n,r,i){var a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Oh(t)).da){e.next=3;break}return e.abrupt("return",void Ch("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ra.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Xb(a.localStore,qv(o[0]));case 10:return u=e.sent,s=jm.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=14,x_(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Kb(a.localStore,n,!0);case 17:return y_(a,n,i),e.abrupt("break",20);case 19:Ph();case 20:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}function q_(e,t,n){return z_.apply(this,arguments)}function z_(){return z_=he(fe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=W_(t)).da){e.next=45;break}a=le(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ra.has(u)){e.next=10;break}return Ch("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,$b(i.localStore,u);case 12:return s=e.sent,e.next=15,Hb(i.localStore,s);case 15:return c=e.sent,e.next=18,Zw(i,U_(s),c.targetId,!1);case 18:zk(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=le(r),e.prev=30,d=fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ra.has(t),!e.t0){e.next=5;break}return e.next=5,Kb(i.localStore,t,!1).then((function(){Wk(i.remoteStore,t),y_(i,t)})).catch(fb);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),z_.apply(this,arguments)}function W_(e){var t=Oh(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=a_.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=T_.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=s_.bind(null,t),t.sa.zo=Fw.bind(null,t.eventManager),t.sa.wa=Uw.bind(null,t.eventManager),t}function G_(e){var t=Oh(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=l_.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=d_.bind(null,t),t}function H_(e,t,n){var r=Oh(e);(function(){var e=he(fe().mark((function e(t,n,r){var i,a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Oh(e),r=eg(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n._s.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Ww(i)),a=new zw(i,t.localStore,n.M),e.next=15,n.ma();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.ma();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,x_(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=Oh(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n._s.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ah("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var K_=function(){function e(){pe(this,e),this.synchronizeTabs=!1}return me(e,[{key:"initialize",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.M=Rk(t.databaseInfo.databaseId),this.sharedClientState=this.ga(t),this.persistence=this.ya(t),e.next=5,this.persistence.start();case 5:this.gcScheduler=this.pa(t),this.localStore=this.Ia(t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pa",value:function(e){return null}},{key:"Ia",value:function(e){return Ub(this.persistence,new Lb,e.initialUser,this.M)}},{key:"ya",value:function(e){return new fk(hk.Yi,this.M)}},{key:"ga",value:function(e){return new xk}},{key:"terminate",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Q_=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).Ta=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return me(n,[{key:"initialize",value:function(){var e=he(fe().mark((function e(t){var r=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(ee(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ta.initialize(this,t);case 4:return e.next=6,G_(this.Ta.syncEngine);case 6:return e.next=8,ow(this.Ta.remoteStore);case 8:return e.next=10,this.persistence.Ts((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ia",value:function(e){return Ub(this.persistence,new Lb,e.initialUser,this.M)}},{key:"pa",value:function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new vb(t,e.asyncQueue)}},{key:"ya",value:function(e){var t=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Jy.withCacheSize(this.cacheSizeBytes):Jy.DEFAULT;return new Ab(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Nk(),Ak(),this.M,this.sharedClientState,!!this.forceOwnership)}},{key:"ga",value:function(e){return new xk}}]),n}(K_),Y_=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,r,!1)).Ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return me(n,[{key:"initialize",value:function(){var e=he(fe().mark((function e(t){var r,i=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne(ee(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ta.syncEngine,e.t0=this.sharedClientState instanceof _k,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:P_.bind(null,r),Br:B_.bind(null,r),Lr:q_.bind(null,r),Fs:j_.bind(null,r),Fr:A_.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.Ts(function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O_(i.Ta.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):t||i.gcScheduler.stop());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ga",value:function(e){var t=Nk();if(!_k.vt(t))throw new Lh(Mh.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Db(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _k(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Q_),$_=function(){function e(){pe(this,e)}return me(e,[{key:"initialize",value:function(){var e=he(fe().mark((function e(t,n){var r=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return u_(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=S_.bind(null,this.syncEngine),e.next=12,_w(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Pw}},{key:"createDatastore",value:function(e){var t,n=Rk(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new Ck(t));return function(e,t,n,r){return new Lk(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return u_(o.syncEngine,e,0)},a=Sk.vt()?new Sk:new Ik,new Uk(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new $w(e,t,n,r,i,a);return o&&(u.da=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Oh(t),Ch("RemoteStore","RemoteStore shutting down."),n.wu.add(5),e.next=5,Vk(n);case 5:n.gu.shutdown(),n.yu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function X_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return he(fe().mark((function r(){var i;return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var J_=function(){function e(t){pe(this,e),this.observer=t,this.muted=!1}return me(e,[{key:"next",value:function(e){this.observer.next&&this.Ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"Aa",value:function(){this.muted=!0}},{key:"Ea",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Z_=function(){function e(t,n){var r=this;pe(this,e),this.Ra=t,this.M=n,this.metadata=new Fh,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then((function(e){e&&e.Mu()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))}),(function(e){return r.metadata.reject(e)}))}return me(e,[{key:"close",value:function(){return this.Ra.cancel()}},{key:"getMetadata",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ma",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Pa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Pa",value:function(){var e=he(fe().mark((function e(){var t,n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Va();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.ba.decode(t),r=Number(n),isNaN(r)&&this.va("length string (".concat(n,") is not valid number")),e.next=9,this.Sa(r);case 9:return i=e.sent,e.abrupt("return",new Vw(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Da",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Va",value:function(){var e=he(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Da()<0)){e.next=7;break}return e.next=3,this.Ca();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Da())<0&&this.va("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Sa",value:function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ca();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.va("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.ba.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"va",value:function(e){throw this.Ra.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ca",value:function(){var e=he(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ra.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ex=function(){function e(t){pe(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return me(e,[{key:"lookup",value:function(){var e=he(fe().mark((function e(t){var n,r=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Lh(Mh.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=he(fe().mark((function e(t,n){var r,i,a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oh(t),i=ug(r.M)+"/documents",a={documents:n.map((function(e){return rg(r.M,e)}))},e.next=5,r._o("BatchGetDocuments",i,a);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=fg(r.M,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Dh(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new xm(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=he(fe().mark((function e(){var t,n=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=wp.fromPath(t);n.mutations.push(new Im(r,n.precondition(r)))})),e.next=7,function(){var e=he(fe().mark((function e(t,n){var r,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oh(t),i=ug(r.M)+"/documents",a={writes:n.map((function(e){return dg(r.M,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ph();t=Zh.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Lh(Mh.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?sm.updateTime(t):sm.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zh.min()))throw new Lh(Mh.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sm.updateTime(t)}return sm.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),tx=function(){function e(t,n,r,i,a){pe(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new Pk(this.asyncQueue,"transaction_retry")}return me(e,[{key:"run",value:function(){this.xa-=1,this.Na()}},{key:"Na",value:function(){var e=this;this.No.Ro(he(fe().mark((function t(){var n,r;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new ex(e.datastore),(r=e.ka(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ma(t)}))}))})).catch((function(t){e.Ma(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"ka",value:function(e){try{var t=this.updateFunction(e);return!yp(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ma",value:function(e){var t=this;this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget((function(){return t.Na(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Oa",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Em(t)}return!1}}]),e}(),nx=function(){function e(t,n,r,i){var a=this;pe(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ih.UNAUTHENTICATED,this.clientId=Qh.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ch("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Ch("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return me(e,[{key:"getConfiguration",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Lh(Mh.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Fh;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(he(fe().mark((function n(){var r;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Tw(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=he(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Ch("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,jb(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(e,t){return ox.apply(this,arguments)}function ox(){return ox=he(fe().mark((function e(t,n){var r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,ux(t);case 3:return r=e.sent,Ch("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return kw(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return kw(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function ux(e){return sx.apply(this,arguments)}function sx(){return sx=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Ch("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,rx(t,new K_);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(e){return lx.apply(this,arguments)}function lx(){return lx=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Ch("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,ax(t,new $_);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e){return ux(e).then((function(e){return e.persistence}))}function dx(e){return ux(e).then((function(e){return e.localStore}))}function hx(e){return cx(e).then((function(e){return e.remoteStore}))}function px(e){return cx(e).then((function(e){return e.syncEngine}))}function vx(e){return mx.apply(this,arguments)}function mx(){return mx=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cx(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Xw.bind(null,n.syncEngine),r.onUnlisten=t_.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),mx.apply(this,arguments)}function gx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fh;return e.asyncQueue.enqueueAndForget(he(fe().mark((function i(){return fe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new J_({next:function(a){t.enqueueAndForget((function(){return Mw(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Lh(Mh.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Lh(Mh.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Bw(Rv(n.path),a,{includeMetadataChanges:!0,ku:!0});return Dw(e,o)},i.next=3,vx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function yx(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Fh;return e.asyncQueue.enqueueAndForget(he(fe().mark((function i(){return fe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new J_({next:function(n){t.enqueueAndForget((function(){return Mw(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Lh(Mh.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Bw(n,a,{includeMetadataChanges:!0,ku:!0});return Dw(e,o)},i.next=3,vx(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var bx=new Map;function kx(e,t,n){if(!n)throw new Lh(Mh.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function wx(e,t,n,r){if(!0===t&&!0===r)throw new Lh(Mh.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function _x(e){if(!wp.isDocumentKey(e))throw new Lh(Mh.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function xx(e){if(wp.isDocumentKey(e))throw new Lh(Mh.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Ix(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Ph()}function Sx(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Lh(Mh.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Ix(e);throw new Lh(Mh.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function Ex(e,t){if(t<=0)throw new Lh(Mh.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var Tx=function(){function e(t){var n;if(pe(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Lh(Mh.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Lh(Mh.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,wx("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return me(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),Cx=function(){function e(t,n,r){pe(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tx({}),this._settingsFrozen=!1,t instanceof gp?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Lh(Mh.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gp(e.options.projectId)}(t))}return me(e,[{key:"app",get:function(){if(!this._app)throw new Lh(Mh.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Lh(Mh.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tx(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new jh;switch(e.type){case"gapi":var t=e.client;return Dh(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new zh(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Lh(Mh.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=bx.get(e);t&&(Ch("ComponentProvider","Removing Datastore"),bx.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function Nx(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=Sx(e,Cx))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ah("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Ih.MOCK_USER;else{o=Oe(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Lh(Mh.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Ih(s)}e._authCredentials=new Bh(new Uh(o,u))}}var Ax=function(){function e(t,n,r){pe(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return me(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Px(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Rx=function(){function e(t,n,r){pe(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return me(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Px=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this,e,r,Rv(i)))._path=i,a.type="collection",a}return me(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ax(this.firestore,null,new wp(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Rx);function Dx(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ft(e),kx("collection","path",t),e instanceof Cx){var a=ip.fromString.apply(ip,[t].concat(r));return xx(a),new Px(e,null,a)}if(!(e instanceof Ax||e instanceof Px))throw new Lh(Mh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ip.fromString.apply(ip,[t].concat(r)));return xx(o),new Px(e.firestore,null,o)}function Ox(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ft(e),1===arguments.length&&(t=Qh.R()),kx("doc","path",t),e instanceof Cx){var a=ip.fromString.apply(ip,[t].concat(r));return _x(a),new Ax(e,null,new wp(a))}if(!(e instanceof Ax||e instanceof Px))throw new Lh(Mh.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(ip.fromString.apply(ip,[t].concat(r)));return _x(o),new Ax(e.firestore,e instanceof Px?e.converter:null,new wp(o))}function Mx(e,t){return e=ft(e),t=ft(t),(e instanceof Ax||e instanceof Px)&&(t instanceof Ax||t instanceof Px)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Lx(e,t){return e=ft(e),t=ft(t),e instanceof Rx&&t instanceof Rx&&e.firestore===t.firestore&&Uv(e._query,t._query)&&e.converter===t.converter}var Fx=function(){function e(){var t=this;pe(this,e),this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new Pk(this,"async_queue_retry"),this.Qa=function(){var e=Ak();e&&Ch("AsyncQueue","Visibility state changed to "+e.visibilityState),t.No.Po()};var n=Ak();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Qa)}return me(e,[{key:"isShuttingDown",get:function(){return this.Ba}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.ja(),this.Wa(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;var t=Ak();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}},{key:"enqueue",value:function(e){var t=this;if(this.ja(),this.Ba)return new Promise((function(){}));var n=new Fh;return this.Wa((function(){return t.Ba&&t.Ka?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.$a.push(e),t.za()}))}},{key:"za",value:function(){var e=he(fe().mark((function e(){var t=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.$a.length){e.next=14;break}return e.prev=1,e.next=4,this.$a[0]();case 4:this.$a.shift(),this.No.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),ay(e.t0)){e.next=12;break}throw e.t0;case 12:Ch("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.$a.length>0&&this.No.Ro((function(){return t.za()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(e){var t=this,n=this.Fa.then((function(){return t.qa=!0,e().catch((function(e){t.Ua=e,t.qa=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Nh("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.qa=!1,e}))}));return this.Fa=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.ja(),this.Ga.indexOf(e)>-1&&(t=0);var i=Ew.createAndSchedule(this,e,t,n,(function(e){return r.Ha(e)}));return this.La.push(i),i}},{key:"ja",value:function(){this.Ua&&Ph()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Ja",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Fa,e.next=3,t;case 3:if(t!==this.Fa){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ya",value:function(e){var t,n=le(this.La);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Xa",value:function(e){var t=this;return this.Ja().then((function(){t.La.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=le(t.La);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Ja()}))}},{key:"Za",value:function(e){this.Ga.push(e)}},{key:"Ha",value:function(e){var t=this.La.indexOf(e);this.La.splice(t,1)}}]),e}();function Ux(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=le(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var jx=function(){function e(){pe(this,e),this._progressObserver={},this._taskCompletionResolver=new Fh,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return me(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Bx=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this,e,r,i)).type="firestore",a._queue=new Fx,a._persistenceKey="name"in e?e.name:"[DEFAULT]",a}return me(n,[{key:"_terminate",value:function(){return this._firestoreClient||qx(this),this._firestoreClient.terminate()}}]),n}(Cx);function Vx(e){return e._firestoreClient||qx(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function qx(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new mp(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new nx(e._authCredentials,e._appCheckCredentials,e._queue,r)}function zx(e,t,n){var r=new Fh;return e.asyncQueue.enqueue(he(fe().mark((function i(){return fe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,rx(e,n);case 3:return i.next=5,ax(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===Mh.FAILED_PRECONDITION||e.code===Mh.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(i.t0)){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Wx(e){return function(e){return e.asyncQueue.enqueue(he(fe().mark((function t(){var n,r;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fx(e);case 2:return n=t.sent,t.next=5,hx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Oh(e);return t.wu.delete(0),jk(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Vx(e=Sx(e,Bx)))}function Gx(e){return function(e){return e.asyncQueue.enqueue(he(fe().mark((function t(){var n,r;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fx(e);case 2:return n=t.sent,t.next=5,hx(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Oh(t)).wu.add(0),e.next=4,Vk(n);case 4:n.yu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Vx(e=Sx(e,Bx)))}function Hx(e,t){var n=Vx(e=Sx(e,Bx)),r=new jx;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Z_(e,t)}(function(e,t){if(e instanceof Uint8Array)return X_(e,t);if(e instanceof ArrayBuffer)return X_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,Rk(t));e.asyncQueue.enqueueAndForget(he(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=H_,t.next=3,px(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Kx(e,t){return function(e,t){return e.asyncQueue.enqueue(he(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Oh(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n._s.getNamedQuery(e,t)}))},n.next=3,dx(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Vx(e=Sx(e,Bx)),t).then((function(t){return t?new Rx(e,null,t.query):null}))}function Qx(e){if(e._initialized||e._terminated)throw new Lh(Mh.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Yx=function(){function e(){pe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new op(n)}return me(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var $x=function(){function e(t){pe(this,e),this._byteString=t}return me(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(sp.fromBase64String(t))}catch(t){throw new Lh(Mh.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(sp.fromUint8Array(t))}}]),e}(),Xx=me((function e(t){pe(this,e),this._methodName=t})),Jx=function(){function e(t,n){if(pe(this,e),!isFinite(t)||t<-90||t>90)throw new Lh(Mh.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Lh(Mh.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return me(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Yh(this._lat,e._lat)||Yh(this._long,e._long)}}]),e}(),Zx=/^__.*__$/,eI=function(){function e(t,n,r){pe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return me(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new gm(e,this.data,this.fieldMask,t,this.fieldTransforms):new mm(e,this.data,t,this.fieldTransforms)}}]),e}(),tI=function(){function e(t,n,r){pe(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return me(e,[{key:"toMutation",value:function(e,t){return new gm(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function nI(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ph()}}var rI=function(){function e(t,n,r,i,a,o){pe(this,e),this.settings=t,this.databaseId=n,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return me(e,[{key:"path",get:function(){return this.settings.path}},{key:"ec",get:function(){return this.settings.ec}},{key:"nc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"sc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.rc(e),r}},{key:"oc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.nc({path:n,ic:!1});return r.tc(),r}},{key:"uc",value:function(e){return this.nc({path:void 0,ic:!0})}},{key:"ac",value:function(e){return xI(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"tc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.rc(this.path.get(e))}},{key:"rc",value:function(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(nI(this.ec)&&Zx.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}]),e}(),iI=function(){function e(t,n,r){pe(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.M=r||Rk(t)}return me(e,[{key:"lc",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new rI({ec:e,methodName:t,hc:n,path:op.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}]),e}();function aI(e){var t=e._freezeSettings(),n=Rk(e._databaseId);return new iI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function oI(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.lc(a.merge||a.mergeFields?2:0,t,n,i);bI("Data must be an object, but it was:",o,r);var u,s,c=gI(r,o);if(a.merge)u=new up(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],d=le(a.mergeFields);try{for(d.s();!(l=d.n()).done;){var h=l.value,p=kI(t,h,n);if(!o.contains(p))throw new Lh(Mh.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));II(f,p)||f.push(p)}}catch(v){d.e(v)}finally{d.f()}u=new up(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new eI(new zp(c),u,s)}var uI=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.ec)throw 1===e.ec?e.ac("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ac("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Xx);function sI(e,t,n){return new rI({ec:3,hc:t.settings.hc,methodName:e._methodName,ic:n},t.databaseId,t.M,t.ignoreUndefinedProperties)}var cI=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"_toFieldTransform",value:function(e){return new om(e.path,new Jv)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Xx),lI=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e)).fc=r,i}return me(n,[{key:"_toFieldTransform",value:function(e){var t=sI(this,e,!0),n=this.fc.map((function(e){return mI(e,t)})),r=new Zv(n);return new om(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Xx),fI=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e)).fc=r,i}return me(n,[{key:"_toFieldTransform",value:function(e){var t=sI(this,e,!0),n=this.fc.map((function(e){return mI(e,t)})),r=new tm(n);return new om(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Xx),dI=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e)).dc=r,i}return me(n,[{key:"_toFieldTransform",value:function(e){var t=new rm(e.M,Kv(e.M,this.dc));return new om(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Xx);function hI(e,t,n,r){var i=e.lc(1,t,n);bI("Data must be an object, but it was:",i,r);var a=[],o=zp.empty();tp(r,(function(e,r){var u=_I(t,e,n);r=ft(r);var s=i.oc(u);if(r instanceof uI)a.push(u);else{var c=mI(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new up(a);return new tI(o,u,i.fieldTransforms)}function pI(e,t,n,r,i,a){var o=e.lc(1,t,n),u=[kI(t,r,n)],s=[i];if(a.length%2!=0)throw new Lh(Mh.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(kI(t,a[c])),s.push(a[c+1]);for(var l=[],f=zp.empty(),d=u.length-1;d>=0;--d)if(!II(l,u[d])){var h=u[d],p=s[d];p=ft(p);var v=o.oc(h);if(p instanceof uI)l.push(h);else{var m=mI(p,v);null!=m&&(l.push(h),f.set(h,m))}}var g=new up(l);return new tI(f,g,o.fieldTransforms)}function vI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mI(n,e.lc(r?4:3,t))}function mI(e,t){if(yI(e=ft(e)))return bI("Unsupported field value:",t,e),gI(e,t);if(e instanceof Xx)return function(e,t){if(!nI(t.ec))throw t.ac("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ac("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=le(e);try{for(a.s();!(n=a.n()).done;){var o=mI(n.value,t.uc(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ft(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Kv(t.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Jh.fromDate(e);return{timestampValue:Xm(t.M,n)}}if(e instanceof Jh){var r=new Jh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Xm(t.M,r)}}if(e instanceof Jx)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof $x)return{bytesValue:Jm(t.M,e._byteString)};if(e instanceof Ax){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ac("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:tg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ac("Unsupported field value: ".concat(Ix(e)))}(e,t)}function gI(e,t){var n={};return np(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):tp(e,(function(e,r){var i=mI(r,t.sc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function yI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Jh||e instanceof Jx||e instanceof $x||e instanceof Ax||e instanceof Xx)}function bI(e,t,n){if(!yI(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Ix(n);throw"an object"===r?t.ac(e+" a custom object"):t.ac(e+" "+r)}}function kI(e,t,n){if((t=ft(t))instanceof Yx)return t._internalPath;if("string"==typeof t)return _I(e,t);throw xI("Field path arguments must be of type string or ",e,!1,void 0,n)}var wI=new RegExp("[~\\*/\\[\\]]");function _I(e,t,n){if(t.search(wI)>=0)throw xI("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return ke(Yx,ye(t.split(".")))._internalPath}catch(r){throw xI("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function xI(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Lh(Mh.INVALID_ARGUMENT,u+e+s)}function II(e,t){return e.some((function(e){return e.isEqual(t)}))}var SI=function(){function e(t,n,r,i,a){pe(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return me(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Ax(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new EI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(TI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),EI=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"data",value:function(){return ne(ee(n.prototype),"data",this).call(this)}}]),n}(SI);function TI(e,t){return"string"==typeof t?_I(e,t):t instanceof Yx?t._internalPath:t._delegate._internalPath}var CI=function(){function e(t,n){pe(this,e),this.hasPendingWrites=t,this.fromCache=n}return me(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),NI=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o,u){var s;return pe(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return me(n,[{key:"exists",value:function(){return ne(ee(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new AI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(TI("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(SI),AI=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ne(ee(n.prototype),"data",this).call(this,e)}}]),n}(NI),RI=function(){function e(t,n,r,i){pe(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new CI(i.hasPendingWrites,i.fromCache),this.query=r}return me(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new AI(n._firestore,n._userDataWriter,r.key,r,new CI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Lh(Mh.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){return{type:"added",doc:new AI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new CI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new AI(e._firestore,e._userDataWriter,t.doc.key,t.doc,new CI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:PI(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function PI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ph()}}function DI(e,t){return e instanceof NI&&t instanceof NI?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof RI&&t instanceof RI&&e._firestore===t._firestore&&Lx(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function OI(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Lh(Mh.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var MI=me((function e(){pe(this,e)}));function LI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=o._apply(e)}return e}var FI=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this))._c=e,a.wc=r,a.mc=i,a.type="where",a}return me(n,[{key:"_apply",value:function(e){var t=aI(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){QI(o,a);var s,c=[],l=le(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(KI(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=KI(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||QI(o,a),u=vI(n,"where",o,"in"===a||"not-in"===a);var d=vv.create(i,a,u);return function(e,t){if(t.S()){var n=Dv(e);if(null!==n&&!n.isEqual(t.field))throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Pv(e);null!==r&&YI(e,t.field,r)}var i=function(e,t){var n,r=le(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(h){r.e(h)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new Lh(Mh.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Lh(Mh.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new Rx(e.firestore,e.converter,function(e,t){var n=e.filters.concat([t]);return new Nv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}]),n}(MI);var UI=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this))._c=e,i.gc=r,i.type="orderBy",i}return me(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Sv(t,n);return function(e,t){if(null===Pv(e)){var n=Dv(e);null!==n&&YI(e,n,t.field)}}(e,r),r}(e._query,this._c,this.gc);return new Rx(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Nv(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}]),n}(MI);var jI=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).type=e,a.yc=r,a.Ic=i,a}return me(n,[{key:"_apply",value:function(e){return new Rx(e.firestore,e.converter,Fv(e._query,this.yc,this.Ic))}}]),n}(MI);var BI=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return me(n,[{key:"_apply",value:function(e){var t=HI(e,this.type,this.Tc,this.Ec);return new Rx(e.firestore,e.converter,function(e,t){return new Nv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}]),n}(MI);function VI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BI("startAt",t,!0)}function qI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new BI("startAfter",t,!1)}var zI=function(e){ae(n,e);var t=ce(n);function n(e,r,i){var a;return pe(this,n),(a=t.call(this)).type=e,a.Tc=r,a.Ec=i,a}return me(n,[{key:"_apply",value:function(e){var t=HI(e,this.type,this.Tc,this.Ec);return new Rx(e.firestore,e.converter,function(e,t){return new Nv(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}]),n}(MI);function WI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zI("endBefore",t,!1)}function GI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new zI("endAt",t,!0)}function HI(e,t,n,r){if(n[0]=ft(n[0]),n[0]instanceof SI)return function(e,t,n,r,i){if(!r)throw new Lh(Mh.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=le(Mv(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Rp(t,r.key));else{var c=r.data.field(s.field);if(hp(c))throw new Lh(Mh.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Iv(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=aI(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Lh(Mh.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Ov(e)&&-1!==c.indexOf("/"))throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(ip.fromString(c));if(!wp.isDocumentKey(l))throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new wp(l);u.push(Rp(t,f))}else{var d=vI(n,r,c);u.push(d)}}return new Iv(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function KI(e,t,n){if("string"==typeof(n=ft(n))){if(""===n)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ov(t)&&-1!==n.indexOf("/"))throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(ip.fromString(n));if(!wp.isDocumentKey(r))throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Rp(e,new wp(r))}if(n instanceof Ax)return Rp(e,n._key);throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ix(n),"."))}function QI(e,t){if(!Array.isArray(e)||0===e.length)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function YI(e,t,n){if(!n.isEqual(t))throw new Lh(Mh.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var $I={maxAttempts:5},XI=function(){function e(){pe(this,e)}return me(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ip(e)){case 0:return null;case 1:return e.booleanValue;case 2:return fp(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dp(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ph()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return tp(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Jx(fp(e.latitude),fp(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=pp(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(vp(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=lp(e);return new Jh(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=ip.fromString(e);Dh(Sg(n));var r=new gp(n.get(1),n.get(3)),i=new wp(n.popFirst(5));return r.isEqual(t)||Nh("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function JI(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var ZI=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).firestore=e,r}return me(n,[{key:"convertBytes",value:function(e){return new $x(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ax(this.firestore,null,t)}}]),n}(XI),eS=function(){function e(t,n){pe(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=aI(t)}return me(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=tS(e,this._firestore),i=JI(r.converter,t,n),a=oI(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,sm.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=tS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ft(t))||t instanceof Yx?pI(this._dataReader,"WriteBatch.update",i._key,t,n,o):hI(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,sm.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=tS(e,this._firestore);return this._mutations=this._mutations.concat(new xm(t._key,sm.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Lh(Mh.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function tS(e,t){if((e=ft(e)).firestore!==t)throw new Lh(Mh.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var nS=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).firestore=e,r}return me(n,[{key:"convertBytes",value:function(e){return new $x(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ax(this.firestore,null,t)}}]),n}(XI);function rS(e){e=Sx(e,Ax);var t=Sx(e.firestore,Bx),n=Vx(t),r=new nS(t);return function(e,t){var n=new Fh;return e.asyncQueue.enqueueAndForget(he(fe().mark((function r(){return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=he(fe().mark((function e(t,n,r){var i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Oh(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.fi.Ls(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Lh(Mh.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=Tw(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,dx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new NI(t,r,e._key,n,new CI(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function iS(e){e=Sx(e,Rx);var t=Sx(e.firestore,Bx),n=Vx(t),r=new nS(t);return function(e,t){var n=new Fh;return e.asyncQueue.enqueueAndForget(he(fe().mark((function r(){return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=he(fe().mark((function e(t,n,r){var i,a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yb(t,n,!0);case 3:i=e.sent,a=new Kw(n,i._i),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=Tw(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,dx(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new RI(t,r,e,n)}))}function aS(e,t,n){e=Sx(e,Ax);var r=Sx(e.firestore,Bx),i=JI(e.converter,t,n);return cS(r,[oI(aI(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,sm.none())])}function oS(e,t,n){e=Sx(e,Ax);for(var r=Sx(e.firestore,Bx),i=aI(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return cS(r,[("string"==typeof(t=ft(t))||t instanceof Yx?pI(i,"updateDoc",e._key,t,n,o):hI(i,"updateDoc",e._key,t)).toMutation(e._key,sm.exists(!0))])}function uS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=ft(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Ux(n[s])||(u=n[s],s++);var c,l,f,d={includeMetadataChanges:u.includeMetadataChanges};if(Ux(n[s])){var h=n[s];n[s]=null===(i=h.next)||void 0===i?void 0:i.bind(h),n[s+1]=null===(a=h.error)||void 0===a?void 0:a.bind(h),n[s+2]=null===(o=h.complete)||void 0===o?void 0:o.bind(h)}if(e instanceof Ax)l=Sx(e.firestore,Bx),f=Rv(e._key.path),c={next:function(t){n[s]&&n[s](lS(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=Sx(e,Rx);l=Sx(p.firestore,Bx),f=p._query;var v=new nS(l);c={next:function(e){n[s]&&n[s](new RI(l,v,p,e))},error:n[s+1],complete:n[s+2]},OI(e._query)}return function(e,t,n,r){var i=new J_(r),a=new Bw(t,i,n);return e.asyncQueue.enqueueAndForget(he(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Dw,t.next=3,vx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.Aa(),e.asyncQueue.enqueueAndForget(he(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Mw,t.next=3,vx(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Vx(l),f,d,c)}function sS(e,t){return function(e,t){var n=new J_(t);return e.asyncQueue.enqueueAndForget(he(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Oh(e).bu.add(t),t.next()},t.next=3,vx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.Aa(),e.asyncQueue.enqueueAndForget(he(fe().mark((function t(){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Oh(e).bu.delete(t)},t.next=3,vx(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Vx(e=Sx(e,Bx)),Ux(t)?t:{next:t})}function cS(e,t){return function(e,t){var n=new Fh;return e.asyncQueue.enqueueAndForget(he(fe().mark((function r(){return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=r_,r.next=3,px(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Vx(e),t)}function lS(e,t,n){var r=n.docs.get(t._key),i=new nS(e);return new NI(e,i,t._key,r,new CI(n.hasPendingWrites,n.fromCache),t.converter)}var fS=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,r))._firestore=e,i}return me(n,[{key:"get",value:function(e){var t=this,r=tS(e,this._firestore),i=new nS(this._firestore);return ne(ee(n.prototype),"get",this).call(this,e).then((function(e){return new NI(t._firestore,i,r._key,e._document,new CI(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){pe(this,e),this._firestore=t,this._transaction=n,this._dataReader=aI(t)}return me(e,[{key:"get",value:function(e){var t=this,n=tS(e,this._firestore),r=new ZI(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Ph();var i=e[0];if(i.isFoundDocument())return new SI(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new SI(t._firestore,r,n._key,null,n.converter);throw Ph()}))}},{key:"set",value:function(e,t,n){var r=tS(e,this._firestore),i=JI(r.converter,t,n),a=oI(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=tS(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ft(t))||t instanceof Yx?pI(this._dataReader,"Transaction.update",i._key,t,n,o):hI(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=tS(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function dS(e,t,n){e=Sx(e,Bx);var r=Object.assign(Object.assign({},$I),n);return function(e){if(e.maxAttempts<1)throw new Lh(Mh.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Fh;return e.asyncQueue.enqueueAndForget(he(fe().mark((function i(){var a;return fe().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,function(e){return cx(e).then((function(e){return e.datastore}))}(e);case 2:a=i.sent,new tx(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Vx(e),(function(n){return t(new fS(e,n))}),r)}function hS(){return new cI("serverTimestamp")}function pS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new lI("arrayUnion",t)}function vS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new fI("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Sh=e}(ln),nn(new dt("firestore",(function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),a=new Bx(i,new Vh(e.getProvider("auth-internal")),new Gh(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a}),"PUBLIC")),mn(xh,"3.4.9",e),mn(xh,"3.4.9","esm2017")}();var mS=function(){return mS=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},mS.apply(this,arguments)},gS=function(e){return{loading:void 0===e||null===e,value:e}},yS=function(e){var t=e?e():void 0,n=(0,i.useReducer)((function(e,t){switch(t.type){case"error":return mS(mS({},e),{error:t.error,loading:!1,value:void 0});case"reset":return gS(t.defaultValue);case"value":return mS(mS({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),gS(t)),r=n[0],a=n[1],o=function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})},u=function(e){a({type:"error",error:e})},s=function(e){a({type:"value",value:e})};return(0,i.useMemo)((function(){return{error:r.error,loading:r.loading,reset:o,setError:u,setValue:s,value:r.value}}),[r.error,r.loading,o,u,s,r.value])},bS=function(e,t,n){var r=(0,i.useRef)(e);return(0,i.useEffect)((function(){t(e,r.current)||(r.current=e,n&&n())})),r},kS=function(e,t){var n=!e&&!t,r=!!e&&!!t&&Mx(e,t);return n||r},wS=function(e,t){return bS(e,kS,t)},_S=function(e,t){var n=null===t||void 0===t?void 0:t.snapshotOptions,r=function(e,t){var n=yS(),r=n.error,a=n.loading,o=n.reset,u=n.setError,s=n.setValue,c=n.value,l=wS(e,o);(0,i.useEffect)((function(){if(l.current){var e=(null===t||void 0===t?void 0:t.snapshotListenOptions)?uS(l.current,t.snapshotListenOptions,s,u):uS(l.current,s,u);return function(){e()}}s(void 0)}),[l.current]);var f=[c,a,r];return(0,i.useMemo)((function(){return f}),f)}(e,t),a=r[0],o=r[1],u=r[2],s=[(0,i.useMemo)((function(){return null===a||void 0===a?void 0:a.data(n)}),[a,n]),o,u,a];return(0,i.useMemo)((function(){return s}),s)};function xS(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,ie(e,t)}function IS(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var SS="function"===typeof Symbol&&Symbol.observable||"@@observable",ES=function(){return Math.random().toString(36).substring(7).split("").join(".")},TS={INIT:"@@redux/INIT"+ES(),REPLACE:"@@redux/REPLACE"+ES(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ES()}};function CS(e){if("object"!==typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function NS(e,t,n){var r;if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(IS(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(IS(1));return n(NS)(e,t)}if("function"!==typeof e)throw new Error(IS(2));var i=e,a=t,o=[],u=o,s=!1;function c(){u===o&&(u=o.slice())}function l(){if(s)throw new Error(IS(3));return a}function f(e){if("function"!==typeof e)throw new Error(IS(4));if(s)throw new Error(IS(5));var t=!0;return c(),u.push(e),function(){if(t){if(s)throw new Error(IS(6));t=!1,c();var n=u.indexOf(e);u.splice(n,1),o=null}}}function d(e){if(!CS(e))throw new Error(IS(7));if("undefined"===typeof e.type)throw new Error(IS(8));if(s)throw new Error(IS(9));try{s=!0,a=i(a,e)}finally{s=!1}for(var t=o=u,n=0;n<t.length;n++){(0,t[n])()}return e}function h(e){if("function"!==typeof e)throw new Error(IS(10));i=e,d({type:TS.REPLACE})}function p(){var e,t=f;return(e={subscribe:function(e){if("object"!==typeof e||null===e)throw new Error(IS(11));function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[SS]=function(){return this},e}return d({type:TS.INIT}),(r={dispatch:d,subscribe:f,getState:l,replaceReducer:h})[SS]=p,r}function AS(e,t){return function(){return t(e.apply(this,arguments))}}function RS(e,t){if("function"===typeof e)return AS(e,t);if("object"!==typeof e||null===e)throw new Error(IS(16));var n={};for(var r in e){var i=e[r];"function"===typeof i&&(n[r]=AS(i,t))}return n}function PS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}var DS=i.createContext(null);var OS=function(e){e()},MS=function(){return OS};var LS={notify:function(){},get:function(){return[]}};function FS(e,t){var n,r=LS;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=function(){var e=MS(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=LS)},getListeners:function(){return r}};return o}var US="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?i.useLayoutEffect:i.useEffect;var jS=function(e){var t=e.store,n=e.context,r=e.children,a=(0,i.useMemo)((function(){var e=FS(t);return{store:t,subscription:e}}),[t]),o=(0,i.useMemo)((function(){return t.getState()}),[t]);US((function(){var e=a.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[a,o]);var u=n||DS;return i.createElement(u.Provider,{value:a},r)},BS=n(110),VS=n.n(BS),qS=n(441),zS=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],WS=["reactReduxForwardedRef"],GS=[],HS=[null,null];function KS(e,t){var n=e[1];return[t.payload,n+1]}function QS(e,t,n){US((function(){return e.apply(void 0,t)}),n)}function YS(e,t,n,r,i,a,o){e.current=r,t.current=i,n.current=!1,a.current&&(a.current=null,o())}function $S(e,t,n,r,i,a,o,u,s,c){if(e){var l=!1,f=null,d=function(){if(!l){var e,n,d=t.getState();try{e=r(d,i.current)}catch(h){n=h,f=h}n||(f=null),e===a.current?o.current||s():(a.current=e,u.current=e,o.current=!0,c({type:"STORE_UPDATED",payload:{error:n}}))}};n.onStateChange=d,n.trySubscribe(),d();return function(){if(l=!0,n.tryUnsubscribe(),n.onStateChange=null,f)throw f}}}var XS=function(){return[null,0]};function JS(e,t){void 0===t&&(t={});var n=t,r=n.getDisplayName,a=void 0===r?function(e){return"ConnectAdvanced("+e+")"}:r,o=n.methodName,u=void 0===o?"connectAdvanced":o,s=n.renderCountProp,c=void 0===s?void 0:s,l=n.shouldHandleStateChanges,f=void 0===l||l,h=n.storeKey,p=void 0===h?"store":h,v=(n.withRef,n.forwardRef),m=void 0!==v&&v,g=n.context,y=void 0===g?DS:g,b=Xs(n,zS),k=y;return function(t){var n=t.displayName||t.name||"Component",r=a(n),o=d({},b,{getDisplayName:a,methodName:u,renderCountProp:c,shouldHandleStateChanges:f,storeKey:p,displayName:r,wrappedComponentName:n,WrappedComponent:t}),s=b.pure;var l=s?i.useMemo:function(e){return e()};function h(n){var r=(0,i.useMemo)((function(){var e=n.reactReduxForwardedRef,t=Xs(n,WS);return[n.context,e,t]}),[n]),a=r[0],u=r[1],s=r[2],c=(0,i.useMemo)((function(){return a&&a.Consumer&&(0,qS.isContextConsumer)(i.createElement(a.Consumer,null))?a:k}),[a,k]),h=(0,i.useContext)(c),p=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(h)&&Boolean(h.store);var v=p?n.store:h.store,m=(0,i.useMemo)((function(){return function(t){return e(t.dispatch,o)}(v)}),[v]),g=(0,i.useMemo)((function(){if(!f)return HS;var e=FS(v,p?null:h.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[v,p,h]),y=g[0],b=g[1],w=(0,i.useMemo)((function(){return p?h:d({},h,{subscription:y})}),[p,h,y]),_=(0,i.useReducer)(KS,GS,XS),x=_[0][0],I=_[1];if(x&&x.error)throw x.error;var S=(0,i.useRef)(),E=(0,i.useRef)(s),T=(0,i.useRef)(),C=(0,i.useRef)(!1),N=l((function(){return T.current&&s===E.current?T.current:m(v.getState(),s)}),[v,x,s]);QS(YS,[E,S,C,s,N,T,b]),QS($S,[f,v,y,m,E,S,C,T,b,I],[v,y,m]);var A=(0,i.useMemo)((function(){return i.createElement(t,d({},N,{ref:u}))}),[u,t,N]);return(0,i.useMemo)((function(){return f?i.createElement(c.Provider,{value:w},A):A}),[c,A,w])}var v=s?i.memo(h):h;if(v.WrappedComponent=t,v.displayName=h.displayName=r,m){var g=i.forwardRef((function(e,t){return i.createElement(v,d({},e,{reactReduxForwardedRef:t}))}));return g.displayName=r,g.WrappedComponent=t,VS()(g,t)}return VS()(v,t)}}function ZS(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function eE(e,t){if(ZS(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!ZS(e[n[i]],t[n[i]]))return!1;return!0}function tE(e){return function(t,n){var r=e(t,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function nE(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function rE(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=nE(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=nE(i),i=r(t,n)),i},r}}var iE=[function(e){return"function"===typeof e?rE(e):void 0},function(e){return e?void 0:tE((function(e){return{dispatch:e}}))},function(e){return e&&"object"===typeof e?tE((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):void 0}];var aE=[function(e){return"function"===typeof e?rE(e):void 0},function(e){return e?void 0:tE((function(){return{}}))}];function oE(e,t,n){return d({},n,e,t)}var uE=[function(e){return"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.pure,a=n.areMergedPropsEqual,o=!1;return function(t,n,u){var s=e(t,n,u);return o?i&&a(s,r)||(r=s):(o=!0,r=s),r}}}(e):void 0},function(e){return e?void 0:function(){return oE}}],sE=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function cE(e,t,n,r){return function(i,a){return n(e(i,a),t(r,a),a)}}function lE(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,d=i.areStatePropsEqual,h=!1;function p(i,h){var p=!f(h,o),v=!l(i,a);return a=i,o=h,p&&v?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?function(){var t=e(a,o),r=!d(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return h?p(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),h=!0,c)}}function fE(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=Xs(t,sE),o=n(e,a),u=r(e,a),s=i(e,a);return(a.pure?lE:cE)(o,u,s,e,a)}var dE=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function hE(e,t,n){for(var r=t.length-1;r>=0;r--){var i=t[r](e);if(i)return i}return function(t,r){throw new Error("Invalid value of type "+typeof e+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function pE(e,t){return e===t}function vE(e){var t=void 0===e?{}:e,n=t.connectHOC,r=void 0===n?JS:n,i=t.mapStateToPropsFactories,a=void 0===i?aE:i,o=t.mapDispatchToPropsFactories,u=void 0===o?iE:o,s=t.mergePropsFactories,c=void 0===s?uE:s,l=t.selectorFactory,f=void 0===l?fE:l;return function(e,t,n,i){void 0===i&&(i={});var o=i,s=o.pure,l=void 0===s||s,h=o.areStatesEqual,p=void 0===h?pE:h,v=o.areOwnPropsEqual,m=void 0===v?eE:v,g=o.areStatePropsEqual,y=void 0===g?eE:g,b=o.areMergedPropsEqual,k=void 0===b?eE:b,w=Xs(o,dE),_=hE(e,a,"mapStateToProps"),x=hE(t,u,"mapDispatchToProps"),I=hE(n,c,"mergeProps");return r(f,d({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:_,initMapDispatchToProps:x,initMergeProps:I,pure:l,areStatesEqual:p,areOwnPropsEqual:m,areStatePropsEqual:y,areMergedPropsEqual:k},w))}}var mE=vE();var gE,yE=n(164);function bE(e,t){var n=(0,i.useState)((function(){return{inputs:t,result:e()}}))[0],r=(0,i.useRef)(!0),a=(0,i.useRef)(n),o=r.current||Boolean(t&&a.current.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,a.current.inputs))?a.current:{inputs:t,result:e()};return(0,i.useEffect)((function(){r.current=!1,a.current=o}),[o]),o.result}gE=yE.unstable_batchedUpdates,OS=gE;var kE=bE,wE=function(e,t){return bE((function(){return e}),t)},_E="Invariant failed";var xE=function(e){var t=e.top,n=e.right,r=e.bottom,i=e.left;return{top:t,right:n,bottom:r,left:i,width:n-i,height:r-t,x:i,y:t,center:{x:(n+i)/2,y:(r+t)/2}}},IE=function(e,t){return{top:e.top-t.top,left:e.left-t.left,bottom:e.bottom+t.bottom,right:e.right+t.right}},SE=function(e,t){return{top:e.top+t.top,left:e.left+t.left,bottom:e.bottom-t.bottom,right:e.right-t.right}},EE={top:0,right:0,bottom:0,left:0},TE=function(e){var t=e.borderBox,n=e.margin,r=void 0===n?EE:n,i=e.border,a=void 0===i?EE:i,o=e.padding,u=void 0===o?EE:o,s=xE(IE(t,r)),c=xE(SE(t,a)),l=xE(SE(c,u));return{marginBox:s,borderBox:xE(t),paddingBox:c,contentBox:l,margin:r,border:a,padding:u}},CE=function(e){var t=e.slice(0,-2);if("px"!==e.slice(-2))return 0;var n=Number(t);return isNaN(n)&&function(e,t){if(!e)throw new Error(_E)}(!1),n},NE=function(e,t){var n,r,i=e.borderBox,a=e.border,o=e.margin,u=e.padding,s=(r=t,{top:(n=i).top+r.y,left:n.left+r.x,bottom:n.bottom+r.y,right:n.right+r.x});return TE({borderBox:s,border:a,margin:o,padding:u})},AE=function(e,t){return void 0===t&&(t={x:window.pageXOffset,y:window.pageYOffset}),NE(e,t)},RE=function(e,t){var n={top:CE(t.marginTop),right:CE(t.marginRight),bottom:CE(t.marginBottom),left:CE(t.marginLeft)},r={top:CE(t.paddingTop),right:CE(t.paddingRight),bottom:CE(t.paddingBottom),left:CE(t.paddingLeft)},i={top:CE(t.borderTopWidth),right:CE(t.borderRightWidth),bottom:CE(t.borderBottomWidth),left:CE(t.borderLeftWidth)};return TE({borderBox:e,margin:n,padding:r,border:i})},PE=function(e){var t=e.getBoundingClientRect(),n=window.getComputedStyle(e);return RE(t,n)},DE=Number.isNaN||function(e){return"number"===typeof e&&e!==e};function OE(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(r=e[n],i=t[n],!(r===i||DE(r)&&DE(i)))return!1;var r,i;return!0}var ME=function(e,t){var n;void 0===t&&(t=OE);var r,i=[],a=!1;return function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];return a&&n===this&&t(o,i)||(r=e.apply(this,o),a=!0,n=this,i=o),r}},LE=function(e){var t=[],n=null,r=function(){for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];t=i,n||(n=requestAnimationFrame((function(){n=null,e.apply(void 0,t)})))};return r.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},r};function FE(e,t){}FE.bind(null,"warn"),FE.bind(null,"error");function UE(){}function jE(e,t,n){var r=t.map((function(t){var r=function(e,t){return d({},e,{},t)}(n,t.options);return e.addEventListener(t.eventName,t.fn,r),function(){e.removeEventListener(t.eventName,t.fn,r)}}));return function(){r.forEach((function(e){e()}))}}var BE="Invariant failed";function VE(e){this.message=e}function qE(e,t){if(!e)throw new VE(BE)}VE.prototype.toString=function(){return this.message};var zE=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).callbacks=null,t.unbind=UE,t.onWindowError=function(e){var n=t.getCallbacks();n.isDragging()&&n.tryAbort(),e.error instanceof VE&&e.preventDefault()},t.getCallbacks=function(){if(!t.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return t.callbacks},t.setCallbacks=function(e){t.callbacks=e},t}xS(t,e);var n=t.prototype;return n.componentDidMount=function(){this.unbind=jE(window,[{eventName:"error",fn:this.onWindowError}])},n.componentDidCatch=function(e){if(!(e instanceof VE))throw e;this.setState({})},n.componentWillUnmount=function(){this.unbind()},n.render=function(){return this.props.children(this.setCallbacks)},t}(i.Component),WE=function(e){return e+1},GE=function(e,t){var n=e.droppableId===t.droppableId,r=WE(e.index),i=WE(t.index);return n?"\n      You have moved the item from position "+r+"\n      to position "+i+"\n    ":"\n    You have moved the item from position "+r+"\n    in list "+e.droppableId+"\n    to list "+t.droppableId+"\n    in position "+i+"\n  "},HE=function(e,t,n){return t.droppableId===n.droppableId?"\n      The item "+e+"\n      has been combined with "+n.draggableId:"\n      The item "+e+"\n      in list "+t.droppableId+"\n      has been combined with "+n.draggableId+"\n      in list "+n.droppableId+"\n    "},KE=function(e){return"\n  The item has returned to its starting position\n  of "+WE(e.index)+"\n"},QE="\n  Press space bar to start a drag.\n  When dragging you can use the arrow keys to move the item around and escape to cancel.\n  Some screen readers may require you to be in focus mode or to use your pass through key\n",YE=function(e){return"\n  You have lifted an item in position "+WE(e.source.index)+"\n"},$E=function(e){var t=e.destination;if(t)return GE(e.source,t);var n=e.combine;return n?HE(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},XE=function(e){if("CANCEL"===e.reason)return"\n      Movement cancelled.\n      "+KE(e.source)+"\n    ";var t=e.destination,n=e.combine;return t?"\n      You have dropped the item.\n      "+GE(e.source,t)+"\n    ":n?"\n      You have dropped the item.\n      "+HE(e.draggableId,e.source,n)+"\n    ":"\n    The item has been dropped while not over a drop area.\n    "+KE(e.source)+"\n  "},JE={x:0,y:0},ZE=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},eT=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},tT=function(e,t){return e.x===t.x&&e.y===t.y},nT=function(e){return{x:0!==e.x?-e.x:0,y:0!==e.y?-e.y:0}},rT=function(e,t,n){var r;return void 0===n&&(n=0),(r={})[e]=t,r["x"===e?"y":"x"]=n,r},iT=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},aT=function(e,t){return Math.min.apply(Math,t.map((function(t){return iT(e,t)})))},oT=function(e){return function(t){return{x:e(t.x),y:e(t.y)}}},uT=function(e,t){return{top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}},sT=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},cT=function(e,t){return t&&t.shouldClipSubject?function(e,t){var n=xE({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n}(t.pageMarginBox,e):xE(e)},lT=function(e){var t=e.page,n=e.withPlaceholder,r=e.axis,i=e.frame,a=function(e,t){return t?uT(e,t.scroll.diff.displacement):e}(t.marginBox,i),o=function(e,t,n){var r;return n&&n.increasedBy?d({},e,((r={})[t.end]=e[t.end]+n.increasedBy[t.line],r)):e}(a,r,n);return{page:t,withPlaceholder:n,active:cT(o,i)}},fT=function(e,t){e.frame||qE(!1);var n=e.frame,r=eT(t,n.scroll.initial),i=nT(r),a=d({},n,{scroll:{initial:n.scroll.initial,current:t,diff:{value:r,displacement:i},max:n.scroll.max}});return d({},e,{frame:a,subject:lT({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a})})};function dT(e){return Object.values?Object.values(e):Object.keys(e).map((function(t){return e[t]}))}function hT(e,t){if(e.findIndex)return e.findIndex(t);for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}function pT(e,t){if(e.find)return e.find(t);var n=hT(e,t);return-1!==n?e[n]:void 0}function vT(e){return Array.prototype.slice.call(e)}var mT=ME((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),gT=ME((function(e){return e.reduce((function(e,t){return e[t.descriptor.id]=t,e}),{})})),yT=ME((function(e){return dT(e)})),bT=ME((function(e){return dT(e)})),kT=ME((function(e,t){var n=bT(t).filter((function(t){return e===t.descriptor.droppableId})).sort((function(e,t){return e.descriptor.index-t.descriptor.index}));return n}));function wT(e){return e.at&&"REORDER"===e.at.type?e.at.destination:null}function _T(e){return e.at&&"COMBINE"===e.at.type?e.at.combine:null}var xT=ME((function(e,t){return t.filter((function(t){return t.descriptor.id!==e.descriptor.id}))})),IT=function(e,t){return e.descriptor.droppableId===t.descriptor.id},ST={point:JE,value:0},ET={invisible:{},visible:{},all:[]},TT={displaced:ET,displacedBy:ST,at:null},CT=function(e,t){return function(n){return e<=n&&n<=t}},NT=function(e){var t=CT(e.top,e.bottom),n=CT(e.left,e.right);return function(r){if(t(r.top)&&t(r.bottom)&&n(r.left)&&n(r.right))return!0;var i=t(r.top)||t(r.bottom),a=n(r.left)||n(r.right);if(i&&a)return!0;var o=r.top<e.top&&r.bottom>e.bottom,u=r.left<e.left&&r.right>e.right;return!(!o||!u)||(o&&a||u&&i)}},AT=function(e){var t=CT(e.top,e.bottom),n=CT(e.left,e.right);return function(e){return t(e.top)&&t(e.bottom)&&n(e.left)&&n(e.right)}},RT={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},PT={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},DT=function(e){var t=e.target,n=e.destination,r=e.viewport,i=e.withDroppableDisplacement,a=e.isVisibleThroughFrameFn,o=i?function(e,t){var n=t.frame?t.frame.scroll.diff.displacement:JE;return uT(e,n)}(t,n):t;return function(e,t,n){return!!t.subject.active&&n(t.subject.active)(e)}(o,n,a)&&function(e,t,n){return n(t)(e)}(o,r,a)},OT=function(e){return DT(d({},e,{isVisibleThroughFrameFn:NT}))},MT=function(e){return DT(d({},e,{isVisibleThroughFrameFn:AT}))};function LT(e){var t=e.afterDragging,n=e.destination,r=e.displacedBy,i=e.viewport,a=e.forceShouldAnimate,o=e.last;return t.reduce((function(e,t){var u=function(e,t){var n=e.page.marginBox,r={top:t.point.y,right:0,bottom:0,left:t.point.x};return xE(IE(n,r))}(t,r),s=t.descriptor.id;if(e.all.push(s),!OT({target:u,destination:n,viewport:i,withDroppableDisplacement:!0}))return e.invisible[t.descriptor.id]=!0,e;var c=function(e,t,n){if("boolean"===typeof n)return n;if(!t)return!0;var r=t.invisible,i=t.visible;if(r[e])return!1;var a=i[e];return!a||a.shouldAnimate}(s,o,a),l={draggableId:s,shouldAnimate:c};return e.visible[s]=l,e}),{all:[],visible:{},invisible:{}})}function FT(e){var t=e.insideDestination,n=e.inHomeList,r=e.displacedBy,i=e.destination,a=function(e,t){if(!e.length)return 0;var n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}(t,{inHomeList:n});return{displaced:ET,displacedBy:r,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:a}}}}function UT(e){var t=e.draggable,n=e.insideDestination,r=e.destination,i=e.viewport,a=e.displacedBy,o=e.last,u=e.index,s=e.forceShouldAnimate,c=IT(t,r);if(null==u)return FT({insideDestination:n,inHomeList:c,displacedBy:a,destination:r});var l=pT(n,(function(e){return e.descriptor.index===u}));if(!l)return FT({insideDestination:n,inHomeList:c,displacedBy:a,destination:r});var f=xT(t,n),d=n.indexOf(l);return{displaced:LT({afterDragging:f.slice(d),destination:r,displacedBy:a,last:o,viewport:i.frame,forceShouldAnimate:s}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:u}}}}function jT(e,t){return Boolean(t.effected[e])}var BT=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.draggable,i=e.draggables,a=e.destination,o=e.insideDestination,u=e.previousImpact,s=e.viewport,c=e.afterCritical,l=u.at;if(l||qE(!1),"REORDER"===l.type){var f=function(e){var t=e.isMovingForward,n=e.isInHomeList,r=e.insideDestination,i=e.location;if(!r.length)return null;var a=i.index,o=t?a+1:a-1,u=r[0].descriptor.index,s=r[r.length-1].descriptor.index;return o<u||o>(n?s:s+1)?null:o}({isMovingForward:t,isInHomeList:n,location:l.destination,insideDestination:o});return null==f?null:UT({draggable:r,insideDestination:o,destination:a,viewport:s,last:u.displaced,displacedBy:u.displacedBy,index:f})}var d=function(e){var t=e.isMovingForward,n=e.destination,r=e.draggables,i=e.combine,a=e.afterCritical;if(!n.isCombineEnabled)return null;var o=i.draggableId,u=r[o].descriptor.index;return jT(o,a)?t?u:u-1:t?u+1:u}({isMovingForward:t,destination:a,displaced:u.displaced,draggables:i,combine:l.combine,afterCritical:c});return null==d?null:UT({draggable:r,insideDestination:o,destination:a,viewport:s,last:u.displaced,displacedBy:u.displacedBy,index:d})},VT=function(e){var t=e.afterCritical,n=e.impact,r=e.draggables,i=_T(n);i||qE(!1);var a=i.draggableId,o=r[a].page.borderBox.center,u=function(e){var t=e.displaced,n=e.afterCritical,r=e.combineWith,i=e.displacedBy,a=Boolean(t.visible[r]||t.invisible[r]);return jT(r,n)?a?JE:nT(i.point):a?i.point:JE}({displaced:n.displaced,afterCritical:t,combineWith:a,displacedBy:n.displacedBy});return ZE(o,u)},qT=function(e,t){return t.margin[e.start]+t.borderBox[e.size]/2},zT=function(e,t,n){return t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2},WT=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return rT(t.line,n.marginBox[t.end]+qT(t,r),zT(t,n.marginBox,r))},GT=function(e){var t=e.axis,n=e.moveRelativeTo,r=e.isMoving;return rT(t.line,n.marginBox[t.start]-function(e,t){return t.margin[e.end]+t.borderBox[e.size]/2}(t,r),zT(t,n.marginBox,r))},HT=function(e){var t=e.impact,n=e.draggable,r=e.draggables,i=e.droppable,a=e.afterCritical,o=kT(i.descriptor.id,r),u=n.page,s=i.axis;if(!o.length)return function(e){var t=e.axis,n=e.moveInto,r=e.isMoving;return rT(t.line,n.contentBox[t.start]+qT(t,r),zT(t,n.contentBox,r))}({axis:s,moveInto:i.page,isMoving:u});var c=t.displaced,l=t.displacedBy,f=c.all[0];if(f){var d=r[f];if(jT(f,a))return GT({axis:s,moveRelativeTo:d.page,isMoving:u});var h=NE(d.page,l.point);return GT({axis:s,moveRelativeTo:h,isMoving:u})}var p=o[o.length-1];if(p.descriptor.id===n.descriptor.id)return u.borderBox.center;if(jT(p.descriptor.id,a)){var v=NE(p.page,nT(a.displacedBy.point));return WT({axis:s,moveRelativeTo:v,isMoving:u})}return WT({axis:s,moveRelativeTo:p.page,isMoving:u})},KT=function(e,t){var n=e.frame;return n?ZE(t,n.scroll.diff.displacement):t},QT=function(e){var t=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,a=e.afterCritical,o=n.page.borderBox.center,u=t.at;return r&&u?"REORDER"===u.type?HT({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:a}):VT({impact:t,draggables:i,afterCritical:a}):o}(e),n=e.droppable;return n?KT(n,t):t},YT=function(e,t){var n=eT(t,e.scroll.initial),r=nT(n);return{frame:xE({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:r}}}};function $T(e,t){return e.map((function(e){return t[e]}))}var XT=function(e){var t=e.pageBorderBoxCenter,n=e.draggable,r=function(e,t){return ZE(e.scroll.diff.displacement,t)}(e.viewport,t),i=eT(r,n.page.borderBox.center);return ZE(n.client.borderBox.center,i)},JT=function(e){var t=e.draggable,n=e.destination,r=e.newPageBorderBoxCenter,i=e.viewport,a=e.withDroppableDisplacement,o=e.onlyOnMainAxis,u=void 0!==o&&o,s=eT(r,t.page.borderBox.center),c={target:uT(t.page.borderBox,s),destination:n,withDroppableDisplacement:a,viewport:i};return u?function(e){return DT(d({},e,{isVisibleThroughFrameFn:(t=e.destination.axis,function(e){var n=CT(e.top,e.bottom),r=CT(e.left,e.right);return function(e){return t===RT?n(e.top)&&n(e.bottom):r(e.left)&&r(e.right)}})}));var t}(c):MT(c)},ZT=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.draggables,a=e.previousImpact,o=e.viewport,u=e.previousPageBorderBoxCenter,s=e.previousClientSelection,c=e.afterCritical;if(!r.isEnabled)return null;var l=kT(r.descriptor.id,i),f=IT(n,r),h=function(e){var t=e.isMovingForward,n=e.draggable,r=e.destination,i=e.insideDestination,a=e.previousImpact;if(!r.isCombineEnabled)return null;if(!wT(a))return null;function o(e){var t={type:"COMBINE",combine:{draggableId:e,droppableId:r.descriptor.id}};return d({},a,{at:t})}var u=a.displaced.all,s=u.length?u[0]:null;if(t)return s?o(s):null;var c=xT(n,i);if(!s)return c.length?o(c[c.length-1].descriptor.id):null;var l=hT(c,(function(e){return e.descriptor.id===s}));-1===l&&qE(!1);var f=l-1;return f<0?null:o(c[f].descriptor.id)}({isMovingForward:t,draggable:n,destination:r,insideDestination:l,previousImpact:a})||BT({isMovingForward:t,isInHomeList:f,draggable:n,draggables:i,destination:r,insideDestination:l,previousImpact:a,viewport:o,afterCritical:c});if(!h)return null;var p=QT({impact:h,draggable:n,droppable:r,draggables:i,afterCritical:c});if(JT({draggable:n,destination:r,newPageBorderBoxCenter:p,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:XT({pageBorderBoxCenter:p,draggable:n,viewport:o}),impact:h,scrollJumpRequest:null};var v=eT(p,u),m=function(e){var t=e.impact,n=e.viewport,r=e.destination,i=e.draggables,a=e.maxScrollChange,o=YT(n,ZE(n.scroll.current,a)),u=r.frame?fT(r,ZE(r.frame.scroll.current,a)):r,s=t.displaced,c=LT({afterDragging:$T(s.all,i),destination:r,displacedBy:t.displacedBy,viewport:o.frame,last:s,forceShouldAnimate:!1}),l=LT({afterDragging:$T(s.all,i),destination:u,displacedBy:t.displacedBy,viewport:n.frame,last:s,forceShouldAnimate:!1}),f={},h={},p=[s,c,l];return s.all.forEach((function(e){var t=function(e,t){for(var n=0;n<t.length;n++){var r=t[n].visible[e];if(r)return r}return null}(e,p);t?h[e]=t:f[e]=!0})),d({},t,{displaced:{all:s.all,invisible:f,visible:h}})}({impact:h,viewport:o,destination:r,draggables:i,maxScrollChange:v});return{clientSelection:s,impact:m,scrollJumpRequest:v}},eC=function(e){var t=e.subject.active;return t||qE(!1),t},tC=function(e,t){var n=e.page.borderBox.center;return jT(e.descriptor.id,t)?eT(n,t.displacedBy.point):n},nC=function(e,t){var n=e.page.borderBox;return jT(e.descriptor.id,t)?uT(n,nT(t.displacedBy.point)):n},rC=ME((function(e,t){var n=t[e.line];return{value:n,point:rT(e.line,n)}})),iC=function(e,t){return d({},e,{scroll:d({},e.scroll,{max:t})})},aC=function(e,t,n){var r=e.frame;IT(t,e)&&qE(!1),e.subject.withPlaceholder&&qE(!1);var i=rC(e.axis,t.displaceBy).point,a=function(e,t,n){var r=e.axis;if("virtual"===e.descriptor.mode)return rT(r.line,t[r.line]);var i=e.subject.page.contentBox[r.size],a=kT(e.descriptor.id,n).reduce((function(e,t){return e+t.client.marginBox[r.size]}),0)+t[r.line]-i;return a<=0?null:rT(r.line,a)}(e,i,n),o={placeholderSize:i,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!r)return d({},e,{subject:lT({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame})});var u=a?ZE(r.scroll.max,a):r.scroll.max,s=iC(r,u);return d({},e,{subject:lT({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:s}),frame:s})},oC=function(e){var t=e.isMovingForward,n=e.previousPageBorderBoxCenter,r=e.draggable,i=e.isOver,a=e.draggables,o=e.droppables,u=e.viewport,s=e.afterCritical,c=function(e){var t=e.isMovingForward,n=e.pageBorderBoxCenter,r=e.source,i=e.droppables,a=e.viewport,o=r.subject.active;if(!o)return null;var u=r.axis,s=CT(o[u.start],o[u.end]),c=yT(i).filter((function(e){return e!==r})).filter((function(e){return e.isEnabled})).filter((function(e){return Boolean(e.subject.active)})).filter((function(e){return NT(a.frame)(eC(e))})).filter((function(e){var n=eC(e);return t?o[u.crossAxisEnd]<n[u.crossAxisEnd]:n[u.crossAxisStart]<o[u.crossAxisStart]})).filter((function(e){var t=eC(e),n=CT(t[u.start],t[u.end]);return s(t[u.start])||s(t[u.end])||n(o[u.start])||n(o[u.end])})).sort((function(e,n){var r=eC(e)[u.crossAxisStart],i=eC(n)[u.crossAxisStart];return t?r-i:i-r})).filter((function(e,t,n){return eC(e)[u.crossAxisStart]===eC(n[0])[u.crossAxisStart]}));if(!c.length)return null;if(1===c.length)return c[0];var l=c.filter((function(e){return CT(eC(e)[u.start],eC(e)[u.end])(n[u.line])}));return 1===l.length?l[0]:l.length>1?l.sort((function(e,t){return eC(e)[u.start]-eC(t)[u.start]}))[0]:c.sort((function(e,t){var r=aT(n,sT(eC(e))),i=aT(n,sT(eC(t)));return r!==i?r-i:eC(e)[u.start]-eC(t)[u.start]}))[0]}({isMovingForward:t,pageBorderBoxCenter:n,source:i,droppables:o,viewport:u});if(!c)return null;var l=kT(c.descriptor.id,a),f=function(e){var t=e.pageBorderBoxCenter,n=e.viewport,r=e.destination,i=e.insideDestination,a=e.afterCritical,o=i.filter((function(e){return MT({target:nC(e,a),destination:r,viewport:n.frame,withDroppableDisplacement:!0})})).sort((function(e,n){var i=iT(t,KT(r,tC(e,a))),o=iT(t,KT(r,tC(n,a)));return i<o?-1:o<i?1:e.descriptor.index-n.descriptor.index}));return o[0]||null}({pageBorderBoxCenter:n,viewport:u,destination:c,insideDestination:l,afterCritical:s}),d=function(e){var t=e.previousPageBorderBoxCenter,n=e.moveRelativeTo,r=e.insideDestination,i=e.draggable,a=e.draggables,o=e.destination,u=e.viewport,s=e.afterCritical;if(!n){if(r.length)return null;var c={displaced:ET,displacedBy:ST,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},l=QT({impact:c,draggable:i,droppable:o,draggables:a,afterCritical:s}),f=IT(i,o)?o:aC(o,i,a);return JT({draggable:i,destination:f,newPageBorderBoxCenter:l,viewport:u.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?c:null}var d=Boolean(t[o.axis.line]<=n.page.borderBox.center[o.axis.line]),h=function(){var e=n.descriptor.index;return n.descriptor.id===i.descriptor.id||d?e:e+1}(),p=rC(o.axis,i.displaceBy);return UT({draggable:i,insideDestination:r,destination:o,viewport:u,displacedBy:p,last:ET,index:h})}({previousPageBorderBoxCenter:n,destination:c,draggable:r,draggables:a,moveRelativeTo:f,insideDestination:l,viewport:u,afterCritical:s});if(!d)return null;var h=QT({impact:d,draggable:r,droppable:c,draggables:a,afterCritical:s});return{clientSelection:XT({pageBorderBoxCenter:h,draggable:r,viewport:u}),impact:d,scrollJumpRequest:null}},uC=function(e){var t=e.at;return t?"REORDER"===t.type?t.destination.droppableId:t.combine.droppableId:null},sC=function(e){var t=e.state,n=e.type,r=function(e,t){var n=uC(e);return n?t[n]:null}(t.impact,t.dimensions.droppables),i=Boolean(r),a=t.dimensions.droppables[t.critical.droppable.id],o=r||a,u=o.axis.direction,s="vertical"===u&&("MOVE_UP"===n||"MOVE_DOWN"===n)||"horizontal"===u&&("MOVE_LEFT"===n||"MOVE_RIGHT"===n);if(s&&!i)return null;var c="MOVE_DOWN"===n||"MOVE_RIGHT"===n,l=t.dimensions.draggables[t.critical.draggable.id],f=t.current.page.borderBoxCenter,d=t.dimensions,h=d.draggables,p=d.droppables;return s?ZT({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:l,destination:o,draggables:h,viewport:t.viewport,previousClientSelection:t.current.client.selection,previousImpact:t.impact,afterCritical:t.afterCritical}):oC({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:l,isOver:o,draggables:h,droppables:p,viewport:t.viewport,afterCritical:t.afterCritical})};function cC(e){return"DRAGGING"===e.phase||"COLLECTING"===e.phase}function lC(e){var t=CT(e.top,e.bottom),n=CT(e.left,e.right);return function(e){return t(e.y)&&n(e.x)}}function fC(e){var t=e.pageBorderBox,n=e.draggable,r=e.droppables,i=yT(r).filter((function(e){if(!e.isEnabled)return!1;var n,r,i=e.subject.active;if(!i)return!1;if(r=i,!((n=t).left<r.right&&n.right>r.left&&n.top<r.bottom&&n.bottom>r.top))return!1;if(lC(i)(t.center))return!0;var a=e.axis,o=i.center[a.crossAxisLine],u=t[a.crossAxisStart],s=t[a.crossAxisEnd],c=CT(i[a.crossAxisStart],i[a.crossAxisEnd]),l=c(u),f=c(s);return!l&&!f||(l?u<o:s>o)}));return i.length?1===i.length?i[0].descriptor.id:function(e){var t=e.pageBorderBox,n=e.draggable,r=e.candidates,i=n.page.borderBox.center,a=r.map((function(e){var n=e.axis,r=rT(e.axis.line,t.center[n.line],e.page.borderBox.center[n.crossAxisLine]);return{id:e.descriptor.id,distance:iT(i,r)}})).sort((function(e,t){return t.distance-e.distance}));return a[0]?a[0].id:null}({pageBorderBox:t,draggable:n,candidates:i}):null}var dC=function(e,t){return xE(uT(e,t))};function hC(e){var t=e.displaced,n=e.id;return Boolean(t.visible[n]||t.invisible[n])}var pC=function(e){var t=e.pageOffset,n=e.draggable,r=e.draggables,i=e.droppables,a=e.previousImpact,o=e.viewport,u=e.afterCritical,s=dC(n.page.borderBox,t),c=fC({pageBorderBox:s,draggable:n,droppables:i});if(!c)return TT;var l=i[c],f=kT(l.descriptor.id,r),d=function(e,t){var n=e.frame;return n?dC(t,n.scroll.diff.value):t}(l,s);return function(e){var t=e.draggable,n=e.pageBorderBoxWithDroppableScroll,r=e.previousImpact,i=e.destination,a=e.insideDestination,o=e.afterCritical;if(!i.isCombineEnabled)return null;var u=i.axis,s=rC(i.axis,t.displaceBy),c=s.value,l=n[u.start],f=n[u.end],d=pT(xT(t,a),(function(e){var t=e.descriptor.id,n=e.page.borderBox,i=n[u.size]/4,a=jT(t,o),s=hC({displaced:r.displaced,id:t});return a?s?f>n[u.start]+i&&f<n[u.end]-i:l>n[u.start]-c+i&&l<n[u.end]-c-i:s?f>n[u.start]+c+i&&f<n[u.end]+c-i:l>n[u.start]+i&&l<n[u.end]-i}));return d?{displacedBy:s,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:d.descriptor.id,droppableId:i.descriptor.id}}}:null}({pageBorderBoxWithDroppableScroll:d,draggable:n,previousImpact:a,destination:l,insideDestination:f,afterCritical:u})||function(e){var t=e.pageBorderBoxWithDroppableScroll,n=e.draggable,r=e.destination,i=e.insideDestination,a=e.last,o=e.viewport,u=e.afterCritical,s=r.axis,c=rC(r.axis,n.displaceBy),l=c.value,f=t[s.start],d=t[s.end],h=pT(xT(n,i),(function(e){var t=e.descriptor.id,n=e.page.borderBox.center[s.line],r=jT(t,u),i=hC({displaced:a,id:t});return r?i?d<=n:f<n-l:i?d<=n+l:f<n})),p=function(e){var t=e.draggable,n=e.closest,r=e.inHomeList;return n?r&&n.descriptor.index>t.descriptor.index?n.descriptor.index-1:n.descriptor.index:null}({draggable:n,closest:h,inHomeList:IT(n,r)});return UT({draggable:n,insideDestination:i,destination:r,viewport:o,last:a,displacedBy:c,index:p})}({pageBorderBoxWithDroppableScroll:d,draggable:n,destination:l,insideDestination:f,last:a.displaced,viewport:o,afterCritical:u})},vC=function(e,t){var n;return d({},e,((n={})[t.descriptor.id]=t,n))},mC=function(e){var t=e.previousImpact,n=e.impact,r=e.droppables,i=uC(t),a=uC(n);if(!i)return r;if(i===a)return r;var o=r[i];if(!o.subject.withPlaceholder)return r;var u=function(e){var t=e.subject.withPlaceholder;t||qE(!1);var n=e.frame;if(!n)return d({},e,{subject:lT({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null})});var r=t.oldFrameMaxScroll;r||qE(!1);var i=iC(n,r);return d({},e,{subject:lT({page:e.subject.page,axis:e.axis,frame:i,withPlaceholder:null}),frame:i})}(o);return vC(r,u)},gC=function(e){var t=e.state,n=e.clientSelection,r=e.dimensions,i=e.viewport,a=e.impact,o=e.scrollJumpRequest,u=i||t.viewport,s=r||t.dimensions,c=n||t.current.client.selection,l=eT(c,t.initial.client.selection),f={offset:l,selection:c,borderBoxCenter:ZE(t.initial.client.borderBoxCenter,l)},h={selection:ZE(f.selection,u.scroll.current),borderBoxCenter:ZE(f.borderBoxCenter,u.scroll.current),offset:ZE(f.offset,u.scroll.diff.value)},p={client:f,page:h};if("COLLECTING"===t.phase)return d({phase:"COLLECTING"},t,{dimensions:s,viewport:u,current:p});var v=s.draggables[t.critical.draggable.id],m=a||pC({pageOffset:h.offset,draggable:v,draggables:s.draggables,droppables:s.droppables,previousImpact:t.impact,viewport:u,afterCritical:t.afterCritical}),g=function(e){var t=e.draggable,n=e.draggables,r=e.droppables,i=e.previousImpact,a=e.impact,o=mC({previousImpact:i,impact:a,droppables:r}),u=uC(a);if(!u)return o;var s=r[u];if(IT(t,s))return o;if(s.subject.withPlaceholder)return o;var c=aC(s,t,n);return vC(o,c)}({draggable:v,impact:m,previousImpact:t.impact,draggables:s.draggables,droppables:s.droppables});return d({},t,{current:p,dimensions:{draggables:s.draggables,droppables:g},impact:m,viewport:u,scrollJumpRequest:o||null,forceShouldAnimate:!o&&null})};var yC=function(e){var t=e.impact,n=e.viewport,r=e.draggables,i=e.destination,a=e.forceShouldAnimate,o=t.displaced,u=function(e,t){return e.map((function(e){return t[e]}))}(o.all,r);return d({},t,{displaced:LT({afterDragging:u,destination:i,displacedBy:t.displacedBy,viewport:n.frame,forceShouldAnimate:a,last:o})})},bC=function(e){var t=e.impact,n=e.draggable,r=e.droppable,i=e.draggables,a=e.viewport,o=e.afterCritical,u=QT({impact:t,draggable:n,draggables:i,droppable:r,afterCritical:o});return XT({pageBorderBoxCenter:u,draggable:n,viewport:a})},kC=function(e){var t=e.state,n=e.dimensions,r=e.viewport;"SNAP"!==t.movementMode&&qE(!1);var i=t.impact,a=r||t.viewport,o=n||t.dimensions,u=o.draggables,s=o.droppables,c=u[t.critical.draggable.id],l=uC(i);l||qE(!1);var f=s[l],d=yC({impact:i,viewport:a,destination:f,draggables:u}),h=bC({impact:d,draggable:c,droppable:f,draggables:u,viewport:a,afterCritical:t.afterCritical});return gC({impact:d,clientSelection:h,state:t,dimensions:o,viewport:a})},wC=function(e){var t=e.draggable,n=e.home,r=e.draggables,i=e.viewport,a=rC(n.axis,t.displaceBy),o=kT(n.descriptor.id,r),u=o.indexOf(t);-1===u&&qE(!1);var s,c=o.slice(u+1),l=c.reduce((function(e,t){return e[t.descriptor.id]=!0,e}),{}),f={inVirtualList:"virtual"===n.descriptor.mode,displacedBy:a,effected:l};return{impact:{displaced:LT({afterDragging:c,destination:n,displacedBy:a,last:null,viewport:i.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:(s=t.descriptor,{index:s.index,droppableId:s.droppableId})}},afterCritical:f}},_C=function(e){0},xC=function(e){0},IC=function(e){var t=e.additions,n=e.updatedDroppables,r=e.viewport,i=r.scroll.diff.value;return t.map((function(e){var t=e.descriptor.droppableId,a=function(e){var t=e.frame;return t||qE(!1),t}(n[t]),o=a.scroll.diff.value,u=function(e){var t=e.draggable,n=e.offset,r=e.initialWindowScroll,i=NE(t.client,n),a=AE(i,r);return d({},t,{placeholder:d({},t.placeholder,{client:i}),client:i,page:a})}({draggable:e,offset:ZE(i,o),initialWindowScroll:r.scroll.initial});return u}))},SC=function(e){return"SNAP"===e.movementMode},EC=function(e,t,n){var r=function(e,t){return{draggables:e.draggables,droppables:vC(e.droppables,t)}}(e.dimensions,t);return!SC(e)||n?gC({state:e,dimensions:r}):kC({state:e,dimensions:r})};function TC(e){return e.isDragging&&"SNAP"===e.movementMode?d({phase:"DRAGGING"},e,{scrollJumpRequest:null}):e}var CC={phase:"IDLE",completed:null,shouldFlush:!1},NC=function(e,t){if(void 0===e&&(e=CC),"FLUSH"===t.type)return d({},CC,{shouldFlush:!0});if("INITIAL_PUBLISH"===t.type){"IDLE"!==e.phase&&qE(!1);var n=t.payload,r=n.critical,i=n.clientSelection,a=n.viewport,o=n.dimensions,u=n.movementMode,s=o.draggables[r.draggable.id],c=o.droppables[r.droppable.id],l={selection:i,borderBoxCenter:s.client.borderBox.center,offset:JE},f={client:l,page:{selection:ZE(l.selection,a.scroll.initial),borderBoxCenter:ZE(l.selection,a.scroll.initial),offset:ZE(l.selection,a.scroll.diff.value)}},h=yT(o.droppables).every((function(e){return!e.isFixedOnPage})),p=wC({draggable:s,home:c,draggables:o.draggables,viewport:a}),v=p.impact;return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:u,dimensions:o,initial:f,current:f,isWindowScrollAllowed:h,impact:v,afterCritical:p.afterCritical,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if("COLLECTION_STARTING"===t.type)return"COLLECTING"===e.phase||"DROP_PENDING"===e.phase?e:("DRAGGING"!==e.phase&&qE(!1),d({phase:"COLLECTING"},e,{phase:"COLLECTING"}));if("PUBLISH_WHILE_DRAGGING"===t.type)return"COLLECTING"!==e.phase&&"DROP_PENDING"!==e.phase&&qE(!1),function(e){var t=e.state,n=e.published;_C();var r=n.modified.map((function(e){var n=t.dimensions.droppables[e.droppableId];return fT(n,e.scroll)})),i=d({},t.dimensions.droppables,{},mT(r)),a=gT(IC({additions:n.additions,updatedDroppables:i,viewport:t.viewport})),o=d({},t.dimensions.draggables,{},a);n.removals.forEach((function(e){delete o[e]}));var u={droppables:i,draggables:o},s=uC(t.impact),c=s?u.droppables[s]:null,l=u.draggables[t.critical.draggable.id],f=u.droppables[t.critical.droppable.id],h=wC({draggable:l,home:f,draggables:o,viewport:t.viewport}),p=h.impact,v=h.afterCritical,m=c&&c.isCombineEnabled?t.impact:p,g=pC({pageOffset:t.current.page.offset,draggable:u.draggables[t.critical.draggable.id],draggables:u.draggables,droppables:u.droppables,previousImpact:m,viewport:t.viewport,afterCritical:v});xC();var y=d({phase:"DRAGGING"},t,{phase:"DRAGGING",impact:g,onLiftImpact:p,dimensions:u,afterCritical:v,forceShouldAnimate:!1});return"COLLECTING"===t.phase?y:d({phase:"DROP_PENDING"},y,{phase:"DROP_PENDING",reason:t.reason,isWaiting:!1})}({state:e,published:t.payload});if("MOVE"===t.type){if("DROP_PENDING"===e.phase)return e;cC(e)||qE(!1);var m=t.payload.client;return tT(m,e.current.client.selection)?e:gC({state:e,clientSelection:m,impact:SC(e)?e.impact:null})}if("UPDATE_DROPPABLE_SCROLL"===t.type){if("DROP_PENDING"===e.phase)return TC(e);if("COLLECTING"===e.phase)return TC(e);cC(e)||qE(!1);var g=t.payload,y=g.id,b=g.newScroll,k=e.dimensions.droppables[y];if(!k)return e;var w=fT(k,b);return EC(e,w,!1)}if("UPDATE_DROPPABLE_IS_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;cC(e)||qE(!1);var _=t.payload,x=_.id,I=_.isEnabled,S=e.dimensions.droppables[x];S||qE(!1),S.isEnabled===I&&qE(!1);var E=d({},S,{isEnabled:I});return EC(e,E,!0)}if("UPDATE_DROPPABLE_IS_COMBINE_ENABLED"===t.type){if("DROP_PENDING"===e.phase)return e;cC(e)||qE(!1);var T=t.payload,C=T.id,N=T.isCombineEnabled,A=e.dimensions.droppables[C];A||qE(!1),A.isCombineEnabled===N&&qE(!1);var R=d({},A,{isCombineEnabled:N});return EC(e,R,!0)}if("MOVE_BY_WINDOW_SCROLL"===t.type){if("DROP_PENDING"===e.phase||"DROP_ANIMATING"===e.phase)return e;cC(e)||qE(!1),e.isWindowScrollAllowed||qE(!1);var P=t.payload.newScroll;if(tT(e.viewport.scroll.current,P))return TC(e);var D=YT(e.viewport,P);return SC(e)?kC({state:e,viewport:D}):gC({state:e,viewport:D})}if("UPDATE_VIEWPORT_MAX_SCROLL"===t.type){if(!cC(e))return e;var O=t.payload.maxScroll;if(tT(O,e.viewport.scroll.max))return e;var M=d({},e.viewport,{scroll:d({},e.viewport.scroll,{max:O})});return d({phase:"DRAGGING"},e,{viewport:M})}if("MOVE_UP"===t.type||"MOVE_DOWN"===t.type||"MOVE_LEFT"===t.type||"MOVE_RIGHT"===t.type){if("COLLECTING"===e.phase||"DROP_PENDING"===e.phase)return e;"DRAGGING"!==e.phase&&qE(!1);var L=sC({state:e,type:t.type});return L?gC({state:e,impact:L.impact,clientSelection:L.clientSelection,scrollJumpRequest:L.scrollJumpRequest}):e}if("DROP_PENDING"===t.type){var F=t.payload.reason;return"COLLECTING"!==e.phase&&qE(!1),d({phase:"DROP_PENDING"},e,{phase:"DROP_PENDING",isWaiting:!0,reason:F})}if("DROP_ANIMATE"===t.type){var U=t.payload,j=U.completed,B=U.dropDuration,V=U.newHomeClientOffset;return"DRAGGING"!==e.phase&&"DROP_PENDING"!==e.phase&&qE(!1),{phase:"DROP_ANIMATING",completed:j,dropDuration:B,newHomeClientOffset:V,dimensions:e.dimensions}}return"DROP_COMPLETE"===t.type?{phase:"IDLE",completed:t.payload.completed,shouldFlush:!1}:e},AC=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},RC=function(){return{type:"COLLECTION_STARTING",payload:null}},PC=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},DC=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},OC=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},MC=function(e){return{type:"MOVE",payload:e}},LC=function(){return{type:"MOVE_UP",payload:null}},FC=function(){return{type:"MOVE_DOWN",payload:null}},UC=function(){return{type:"MOVE_RIGHT",payload:null}},jC=function(){return{type:"MOVE_LEFT",payload:null}},BC=function(e){return{type:"DROP_COMPLETE",payload:e}},VC=function(e){return{type:"DROP",payload:e}},qC=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}};var zC="cubic-bezier(.2,1,.1,1)",WC={drop:0,combining:.7},GC={drop:.75},HC=.2+"s "+"cubic-bezier(0.2, 0, 0, 1)",KC={fluid:"opacity "+HC,snap:"transform "+HC+", opacity "+HC,drop:function(e){var t=e+"s "+zC;return"transform "+t+", opacity "+t},outOfTheWay:"transform "+HC,placeholder:"height "+HC+", width "+HC+", margin "+HC},QC=function(e){return tT(e,JE)?null:"translate("+e.x+"px, "+e.y+"px)"},YC=QC,$C=function(e,t){var n=QC(e);return n?t?n+" scale("+GC.drop+")":n:null},XC=.33,JC=.55,ZC=JC-XC,eN=function(e){var t=e.getState,n=e.dispatch;return function(e){return function(r){if("DROP"===r.type){var i=t(),a=r.payload.reason;if("COLLECTING"!==i.phase){if("IDLE"!==i.phase){"DROP_PENDING"===i.phase&&i.isWaiting&&qE(!1),"DRAGGING"!==i.phase&&"DROP_PENDING"!==i.phase&&qE(!1);var o=i.critical,u=i.dimensions,s=u.draggables[i.critical.draggable.id],c=function(e){var t=e.draggables,n=e.reason,r=e.lastImpact,i=e.home,a=e.viewport,o=e.onLiftImpact;return r.at&&"DROP"===n?"REORDER"===r.at.type?{impact:r,didDropInsideDroppable:!0}:{impact:d({},r,{displaced:ET}),didDropInsideDroppable:!0}:{impact:yC({draggables:t,impact:o,destination:i,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}}({reason:a,lastImpact:i.impact,afterCritical:i.afterCritical,onLiftImpact:i.onLiftImpact,home:i.dimensions.droppables[i.critical.droppable.id],viewport:i.viewport,draggables:i.dimensions.draggables}),l=c.impact,f=c.didDropInsideDroppable,h=f?wT(l):null,p=f?_T(l):null,v={index:o.draggable.index,droppableId:o.droppable.id},m={draggableId:s.descriptor.id,type:s.descriptor.type,source:v,reason:a,mode:i.movementMode,destination:h,combine:p},g=function(e){var t=e.impact,n=e.draggable,r=e.dimensions,i=e.viewport,a=e.afterCritical,o=r.draggables,u=r.droppables,s=uC(t),c=s?u[s]:null,l=u[n.descriptor.droppableId],f=bC({impact:t,draggable:n,draggables:o,afterCritical:a,droppable:c||l,viewport:i});return eT(f,n.client.borderBox.center)}({impact:l,draggable:s,dimensions:u,viewport:i.viewport,afterCritical:i.afterCritical}),y={critical:i.critical,afterCritical:i.afterCritical,result:m,impact:l};if(!tT(i.current.client.offset,g)||Boolean(m.combine)){var b=function(e){var t=e.current,n=e.destination,r=e.reason,i=iT(t,n);if(i<=0)return XC;if(i>=1500)return JC;var a=XC+ZC*(i/1500);return Number(("CANCEL"===r?.6*a:a).toFixed(2))}({current:i.current.client.offset,destination:g,reason:a});n(function(e){return{type:"DROP_ANIMATE",payload:e}}({newHomeClientOffset:g,dropDuration:b,completed:y}))}else n(BC({completed:y}))}}else n(function(e){return{type:"DROP_PENDING",payload:e}}({reason:a}))}else e(r)}}},tN=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function nN(e){var t=e.onWindowScroll;var n=LE((function(){t(tN())})),r=function(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(t){t.target!==window&&t.target!==window.document||e()}}}(n),i=UE;function a(){return i!==UE}return{start:function(){a()&&qE(!1),i=jE(window,[r])},stop:function(){a()||qE(!1),n.cancel(),i(),i=UE},isActive:a}}var rN=function(e){var t=nN({onWindowScroll:function(t){e.dispatch({type:"MOVE_BY_WINDOW_SCROLL",payload:{newScroll:t}})}});return function(e){return function(n){t.isActive()||"INITIAL_PUBLISH"!==n.type||t.start(),t.isActive()&&function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(n)&&t.stop(),e(n)}}},iN=function(){var e=[];return{add:function(t){var n=setTimeout((function(){return function(t){var n=hT(e,(function(e){return e.timerId===t}));-1===n&&qE(!1),e.splice(n,1)[0].callback()}(n)})),r={timerId:n,callback:t};e.push(r)},flush:function(){if(e.length){var t=[].concat(e);e.length=0,t.forEach((function(e){clearTimeout(e.timerId),e.callback()}))}}}},aN=function(e,t){_C(),t(),xC()},oN=function(e,t){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t}},uN=function(e,t,n,r){if(e){var i=function(e){var t=!1,n=!1,r=setTimeout((function(){n=!0})),i=function(i){t||n||(t=!0,e(i),clearTimeout(r))};return i.wasCalled=function(){return t},i}(n);e(t,{announce:i}),i.wasCalled()||n(r(t))}else n(r(t))},sN=function(e,t){var n=function(e,t){var n=iN(),r=null,i=function(n){r||qE(!1),r=null,aN(0,(function(){return uN(e().onDragEnd,n,t,XE)}))};return{beforeCapture:function(t,n){r&&qE(!1),aN(0,(function(){var r=e().onBeforeCapture;r&&r({draggableId:t,mode:n})}))},beforeStart:function(t,n){r&&qE(!1),aN(0,(function(){var r=e().onBeforeDragStart;r&&r(oN(t,n))}))},start:function(i,a){r&&qE(!1);var o=oN(i,a);r={mode:a,lastCritical:i,lastLocation:o.source,lastCombine:null},n.add((function(){aN(0,(function(){return uN(e().onDragStart,o,t,YE)}))}))},update:function(i,a){var o=wT(a),u=_T(a);r||qE(!1);var s=!function(e,t){if(e===t)return!0;var n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,r=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&r}(i,r.lastCritical);s&&(r.lastCritical=i);var c,l,f=(l=o,!(null==(c=r.lastLocation)&&null==l||null!=c&&null!=l&&c.droppableId===l.droppableId&&c.index===l.index));f&&(r.lastLocation=o);var h=!function(e,t){return null==e&&null==t||null!=e&&null!=t&&e.draggableId===t.draggableId&&e.droppableId===t.droppableId}(r.lastCombine,u);if(h&&(r.lastCombine=u),s||f||h){var p=d({},oN(i,r.mode),{combine:u,destination:o});n.add((function(){aN(0,(function(){return uN(e().onDragUpdate,p,t,$E)}))}))}},flush:function(){r||qE(!1),n.flush()},drop:i,abort:function(){if(r){var e=d({},oN(r.lastCritical,r.mode),{combine:null,destination:null,reason:"CANCEL"});i(e)}}}}(e,t);return function(e){return function(t){return function(r){if("BEFORE_INITIAL_CAPTURE"!==r.type){if("INITIAL_PUBLISH"===r.type){var i=r.payload.critical;return n.beforeStart(i,r.payload.movementMode),t(r),void n.start(i,r.payload.movementMode)}if("DROP_COMPLETE"===r.type){var a=r.payload.completed.result;return n.flush(),t(r),void n.drop(a)}if(t(r),"FLUSH"!==r.type){var o=e.getState();"DRAGGING"===o.phase&&n.update(o.critical,o.impact)}else n.abort()}else n.beforeCapture(r.payload.draggableId,r.payload.movementMode)}}}},cN=function(e){return function(t){return function(n){if("DROP_ANIMATION_FINISHED"===n.type){var r=e.getState();"DROP_ANIMATING"!==r.phase&&qE(!1),e.dispatch(BC({completed:r.completed}))}else t(n)}}},lN=function(e){var t=null,n=null;return function(r){return function(i){if("FLUSH"!==i.type&&"DROP_COMPLETE"!==i.type&&"DROP_ANIMATION_FINISHED"!==i.type||(n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)),r(i),"DROP_ANIMATE"===i.type){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){"DROP_ANIMATING"===e.getState().phase&&e.dispatch({type:"DROP_ANIMATION_FINISHED",payload:null})}};n=requestAnimationFrame((function(){n=null,t=jE(window,[a])}))}}}},fN=function(e){return function(t){return function(n){if(t(n),"PUBLISH_WHILE_DRAGGING"===n.type){var r=e.getState();"DROP_PENDING"===r.phase&&(r.isWaiting||e.dispatch(VC({reason:r.reason})))}}}},dN=PS,hN=function(e){var t,n=e.dimensionMarshal,r=e.focusMarshal,i=e.styleMarshal,a=e.getResponders,o=e.announce,u=e.autoScroller;return NS(NC,dN(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(IS(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},a=t.map((function(e){return e(i)}));return r=PS.apply(void 0,a)(n.dispatch),Et(Et({},n),{},{dispatch:r})}}}((t=i,function(){return function(e){return function(n){"INITIAL_PUBLISH"===n.type&&t.dragging(),"DROP_ANIMATE"===n.type&&t.dropping(n.payload.completed.result.reason),"FLUSH"!==n.type&&"DROP_COMPLETE"!==n.type||t.resting(),e(n)}}}),function(e){return function(){return function(t){return function(n){"DROP_COMPLETE"!==n.type&&"FLUSH"!==n.type&&"DROP_ANIMATE"!==n.type||e.stopPublishing(),t(n)}}}}(n),function(e){return function(t){var n=t.getState,r=t.dispatch;return function(t){return function(i){if("LIFT"===i.type){var a=i.payload,o=a.id,u=a.clientSelection,s=a.movementMode,c=n();"DROP_ANIMATING"===c.phase&&r(BC({completed:c.completed})),"IDLE"!==n().phase&&qE(!1),r({type:"FLUSH",payload:null}),r({type:"BEFORE_INITIAL_CAPTURE",payload:{draggableId:o,movementMode:s}});var l={draggableId:o,scrollOptions:{shouldPublishImmediately:"SNAP"===s}},f=e.startPublishing(l),d=f.critical,h=f.dimensions,p=f.viewport;r({type:"INITIAL_PUBLISH",payload:{critical:d,dimensions:h,clientSelection:u,movementMode:s,viewport:p}})}else t(i)}}}}(n),eN,cN,lN,fN,function(e){return function(t){return function(n){return function(r){if(function(e){return"DROP_COMPLETE"===e.type||"DROP_ANIMATE"===e.type||"FLUSH"===e.type}(r))return e.stop(),void n(r);if("INITIAL_PUBLISH"===r.type){n(r);var i=t.getState();return"DRAGGING"!==i.phase&&qE(!1),void e.start(i)}n(r),e.scroll(t.getState())}}}}(u),rN,function(e){var t=!1;return function(){return function(n){return function(r){if("INITIAL_PUBLISH"===r.type)return t=!0,e.tryRecordFocus(r.payload.critical.draggable.id),n(r),void e.tryRestoreFocusRecorded();if(n(r),t){if("FLUSH"===r.type)return t=!1,void e.tryRestoreFocusRecorded();if("DROP_COMPLETE"===r.type){t=!1;var i=r.payload.completed.result;i.combine&&e.tryShiftRecord(i.draggableId,i.combine.draggableId),e.tryRestoreFocusRecorded()}}}}}}(r),sN(a,o))))};var pN=function(e){var t=e.scrollHeight,n=e.scrollWidth,r=e.height,i=e.width,a=eT({x:n,y:t},{x:i,y:r});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},vN=function(){var e=document.documentElement;return e||qE(!1),e},mN=function(){var e=vN();return pN({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},gN=function(e){var t=e.critical,n=e.scrollOptions,r=e.registry;_C();var i=function(){var e=tN(),t=mN(),n=e.y,r=e.x,i=vN(),a=i.clientWidth,o=i.clientHeight;return{frame:xE({top:n,left:r,right:r+a,bottom:n+o}),scroll:{initial:e,current:e,max:t,diff:{value:JE,displacement:JE}}}}(),a=i.scroll.current,o=t.droppable,u=r.droppable.getAllByType(o.type).map((function(e){return e.callbacks.getDimensionAndWatchScroll(a,n)})),s=r.draggable.getAllByType(t.draggable.type).map((function(e){return e.getDimension(a)})),c={draggables:gT(s),droppables:mT(u)};return xC(),{dimensions:c,critical:t,viewport:i}};function yN(e,t,n){return n.descriptor.id!==t.id&&(n.descriptor.type===t.type&&"virtual"===e.droppable.getById(n.descriptor.droppableId).descriptor.mode)}var bN=function(e,t){var n=null,r=function(e){var t=e.registry,n=e.callbacks,r={additions:{},removals:{},modified:{}},i=null,a=function(){i||(n.collectionStarting(),i=requestAnimationFrame((function(){i=null,_C();var e=r,a=e.additions,o=e.removals,u=e.modified,s=Object.keys(a).map((function(e){return t.draggable.getById(e).getDimension(JE)})).sort((function(e,t){return e.descriptor.index-t.descriptor.index})),c=Object.keys(u).map((function(e){return{droppableId:e,scroll:t.droppable.getById(e).callbacks.getScrollWhileDragging()}})),l={additions:s,removals:Object.keys(o),modified:c};r={additions:{},removals:{},modified:{}},xC(),n.publish(l)})))};return{add:function(e){var t=e.descriptor.id;r.additions[t]=e,r.modified[e.descriptor.droppableId]=!0,r.removals[t]&&delete r.removals[t],a()},remove:function(e){var t=e.descriptor;r.removals[t.id]=!0,r.modified[t.droppableId]=!0,r.additions[t.id]&&delete r.additions[t.id],a()},stop:function(){i&&(cancelAnimationFrame(i),i=null,r={additions:{},removals:{},modified:{}})}}}({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),i=function(t){n||qE(!1);var i=n.critical.draggable;"ADDITION"===t.type&&yN(e,i,t.value)&&r.add(t.value),"REMOVAL"===t.type&&yN(e,i,t.value)&&r.remove(t.value)},a={updateDroppableIsEnabled:function(r,i){e.droppable.exists(r)||qE(!1),n&&t.updateDroppableIsEnabled({id:r,isEnabled:i})},updateDroppableIsCombineEnabled:function(r,i){n&&(e.droppable.exists(r)||qE(!1),t.updateDroppableIsCombineEnabled({id:r,isCombineEnabled:i}))},scrollDroppable:function(t,r){n&&e.droppable.getById(t).callbacks.scroll(r)},updateDroppableScroll:function(r,i){n&&(e.droppable.exists(r)||qE(!1),t.updateDroppableScroll({id:r,newScroll:i}))},startPublishing:function(t){n&&qE(!1);var r=e.draggable.getById(t.draggableId),a=e.droppable.getById(r.descriptor.droppableId),o={draggable:r.descriptor,droppable:a.descriptor},u=e.subscribe(i);return n={critical:o,unsubscribe:u},gN({critical:o,registry:e,scrollOptions:t.scrollOptions})},stopPublishing:function(){if(n){r.stop();var t=n.critical.droppable;e.droppable.getAllByType(t.type).forEach((function(e){return e.callbacks.dragStopped()})),n.unsubscribe(),n=null}}};return a},kN=function(e,t){return"IDLE"===e.phase||"DROP_ANIMATING"===e.phase&&(e.completed.result.draggableId!==t&&"DROP"===e.completed.result.reason)},wN=function(e){window.scrollBy(e.x,e.y)},_N=ME((function(e){return yT(e).filter((function(e){return!!e.isEnabled&&!!e.frame}))})),xN=function(e){var t=e.center,n=e.destination,r=e.droppables;if(n){var i=r[n];return i.frame?i:null}var a=function(e,t){var n=pT(_N(t),(function(t){return t.frame||qE(!1),lC(t.frame.pageMarginBox)(e)}));return n}(t,r);return a},IN=.25,SN=.05,EN=28,TN=function(e){return Math.pow(e,2)},CN={stopDampeningAt:1200,accelerateAt:360},NN=function(e){var t=e.startOfRange,n=e.endOfRange,r=e.current,i=n-t;return 0===i?0:(r-t)/i},AN=CN.accelerateAt,RN=CN.stopDampeningAt,PN=function(e){var t=e.distanceToEdge,n=e.thresholds,r=e.dragStartTime,i=e.shouldUseTimeDampening,a=function(e,t){if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return EN;if(e===t.startScrollingFrom)return 1;var n=NN({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),r=EN*TN(1-n);return Math.ceil(r)}(t,n);return 0===a?0:i?Math.max(function(e,t){var n=t,r=RN,i=Date.now()-n;if(i>=RN)return e;if(i<AN)return 1;var a=NN({startOfRange:AN,endOfRange:r,current:i}),o=e*TN(a);return Math.ceil(o)}(a,r),1):a},DN=function(e){var t=e.container,n=e.distanceToEdges,r=e.dragStartTime,i=e.axis,a=e.shouldUseTimeDampening,o=function(e,t){return{startScrollingFrom:e[t.size]*IN,maxScrollValueAt:e[t.size]*SN}}(t,i);return n[i.end]<n[i.start]?PN({distanceToEdge:n[i.end],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a}):-1*PN({distanceToEdge:n[i.start],thresholds:o,dragStartTime:r,shouldUseTimeDampening:a})},ON=oT((function(e){return 0===e?0:e})),MN=function(e){var t=e.dragStartTime,n=e.container,r=e.subject,i=e.center,a=e.shouldUseTimeDampening,o={top:i.y-n.top,right:n.right-i.x,bottom:n.bottom-i.y,left:i.x-n.left},u=DN({container:n,distanceToEdges:o,dragStartTime:t,axis:RT,shouldUseTimeDampening:a}),s=DN({container:n,distanceToEdges:o,dragStartTime:t,axis:PT,shouldUseTimeDampening:a}),c=ON({x:s,y:u});if(tT(c,JE))return null;var l=function(e){var t=e.container,n=e.subject,r=e.proposedScroll,i=n.height>t.height,a=n.width>t.width;return a||i?a&&i?null:{x:a?0:r.x,y:i?0:r.y}:r}({container:n,subject:r,proposedScroll:c});return l?tT(l,JE)?null:l:null},LN=oT((function(e){return 0===e?0:e>0?1:-1})),FN=function(){var e=function(e,t){return e<0?e:e>t?e-t:0};return function(t){var n=t.current,r=t.max,i=t.change,a=ZE(n,i),o={x:e(a.x,r.x),y:e(a.y,r.y)};return tT(o,JE)?null:o}}(),UN=function(e){var t=e.max,n=e.current,r=e.change,i={x:Math.max(n.x,t.x),y:Math.max(n.y,t.y)},a=LN(r),o=FN({max:i,current:n,change:a});return!o||(0!==a.x&&0===o.x||0!==a.y&&0===o.y)},jN=function(e,t){return UN({current:e.scroll.current,max:e.scroll.max,change:t})},BN=function(e,t){var n=e.frame;return!!n&&UN({current:n.scroll.current,max:n.scroll.max,change:t})},VN=function(e){var t=e.state,n=e.dragStartTime,r=e.shouldUseTimeDampening,i=e.scrollWindow,a=e.scrollDroppable,o=t.current.page.borderBoxCenter,u=t.dimensions.draggables[t.critical.draggable.id].page.marginBox;if(t.isWindowScrollAllowed){var s=function(e){var t=e.viewport,n=e.subject,r=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,o=MN({dragStartTime:i,container:t.frame,subject:n,center:r,shouldUseTimeDampening:a});return o&&jN(t,o)?o:null}({dragStartTime:n,viewport:t.viewport,subject:u,center:o,shouldUseTimeDampening:r});if(s)return void i(s)}var c=xN({center:o,destination:uC(t.impact),droppables:t.dimensions.droppables});if(c){var l=function(e){var t=e.droppable,n=e.subject,r=e.center,i=e.dragStartTime,a=e.shouldUseTimeDampening,o=t.frame;if(!o)return null;var u=MN({dragStartTime:i,container:o.pageMarginBox,subject:n,center:r,shouldUseTimeDampening:a});return u&&BN(t,u)?u:null}({dragStartTime:n,droppable:c,subject:u,center:o,shouldUseTimeDampening:r});l&&a(c.descriptor.id,l)}},qN=function(e){var t=e.move,n=e.scrollDroppable,r=e.scrollWindow,i=function(e,t){if(!BN(e,t))return t;var r=function(e,t){var n=e.frame;return n&&BN(e,t)?FN({current:n.scroll.current,max:n.scroll.max,change:t}):null}(e,t);if(!r)return n(e.descriptor.id,t),null;var i=eT(t,r);return n(e.descriptor.id,i),eT(t,i)},a=function(e,t,n){if(!e)return n;if(!jN(t,n))return n;var i=function(e,t){if(!jN(e,t))return null;var n=e.scroll.max,r=e.scroll.current;return FN({current:r,max:n,change:t})}(t,n);if(!i)return r(n),null;var a=eT(n,i);return r(a),eT(n,a)};return function(e){var n=e.scrollJumpRequest;if(n){var r=uC(e.impact);r||qE(!1);var o=i(e.dimensions.droppables[r],n);if(o){var u=e.viewport,s=a(e.isWindowScrollAllowed,u,o);s&&function(e,n){var r=ZE(e.current.client.selection,n);t({client:r})}(e,s)}}}},zN=function(e){var t=e.scrollDroppable,n=e.scrollWindow,r=e.move,i=function(e){var t=e.scrollWindow,n=e.scrollDroppable,r=LE(t),i=LE(n),a=null,o=function(e){a||qE(!1);var t=a,n=t.shouldUseTimeDampening,o=t.dragStartTime;VN({state:e,scrollWindow:r,scrollDroppable:i,dragStartTime:o,shouldUseTimeDampening:n})};return{start:function(e){_C(),a&&qE(!1);var t=Date.now(),n=!1,r=function(){n=!0};VN({state:e,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:r,scrollDroppable:r}),a={dragStartTime:t,shouldUseTimeDampening:n},xC(),n&&o(e)},stop:function(){a&&(r.cancel(),i.cancel(),a=null)},scroll:o}}({scrollWindow:n,scrollDroppable:t}),a=qN({move:r,scrollWindow:n,scrollDroppable:t});return{scroll:function(e){"DRAGGING"===e.phase&&("FLUID"!==e.movementMode?e.scrollJumpRequest&&a(e):i.scroll(e))},start:i.start,stop:i.stop}},WN=function(){var e="data-rbd-drag-handle";return{base:e,draggableId:e+"-draggable-id",contextId:e+"-context-id"}}(),GN=function(){var e="data-rbd-draggable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),HN=function(){var e="data-rbd-droppable";return{base:e,contextId:e+"-context-id",id:e+"-id"}}(),KN={contextId:"data-rbd-scroll-container-context-id"},QN=function(e,t){return e.map((function(e){var n=e.styles[t];return n?e.selector+" { "+n+" }":""})).join(" ")},YN="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement?i.useLayoutEffect:i.useEffect,$N=function(){var e=document.querySelector("head");return e||qE(!1),e},XN=function(e){var t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function JN(e,t){var n=kE((function(){return function(e){var t,n=(t=e,function(e){return"["+e+'="'+t+'"]'}),r=function(){var e="\n      cursor: -webkit-grab;\n      cursor: grab;\n    ";return{selector:n(WN.contextId),styles:{always:"\n          -webkit-touch-callout: none;\n          -webkit-tap-highlight-color: rgba(0,0,0,0);\n          touch-action: manipulation;\n        ",resting:e,dragging:"pointer-events: none;",dropAnimating:e}}}(),i=[function(){var e="\n      transition: "+KC.outOfTheWay+";\n    ";return{selector:n(GN.contextId),styles:{dragging:e,dropAnimating:e,userCancel:e}}}(),r,{selector:n(HN.contextId),styles:{always:"overflow-anchor: none;"}},{selector:"body",styles:{dragging:"\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n        user-select: none;\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        overflow-anchor: none;\n      "}}];return{always:QN(i,"always"),resting:QN(i,"resting"),dragging:QN(i,"dragging"),dropAnimating:QN(i,"dropAnimating"),userCancel:QN(i,"userCancel")}}(e)}),[e]),r=(0,i.useRef)(null),a=(0,i.useRef)(null),o=wE(ME((function(e){var t=a.current;t||qE(!1),t.textContent=e})),[]),u=wE((function(e){var t=r.current;t||qE(!1),t.textContent=e}),[]);YN((function(){(r.current||a.current)&&qE(!1);var i=XN(t),s=XN(t);return r.current=i,a.current=s,i.setAttribute("data-rbd-always",e),s.setAttribute("data-rbd-dynamic",e),$N().appendChild(i),$N().appendChild(s),u(n.always),o(n.resting),function(){var e=function(e){var t=e.current;t||qE(!1),$N().removeChild(t),e.current=null};e(r),e(a)}}),[t,u,o,n.always,n.resting,e]);var s=wE((function(){return o(n.dragging)}),[o,n.dragging]),c=wE((function(e){o("DROP"!==e?n.userCancel:n.dropAnimating)}),[o,n.dropAnimating,n.userCancel]),l=wE((function(){a.current&&o(n.resting)}),[o,n.resting]);return kE((function(){return{dragging:s,dropping:c,resting:l}}),[s,c,l])}var ZN=function(e){return e&&e.ownerDocument?e.ownerDocument.defaultView:window};function eA(e){return e instanceof ZN(e).HTMLElement}function tA(e,t){var n="["+WN.contextId+'="'+e+'"]',r=vT(document.querySelectorAll(n));if(!r.length)return null;var i=pT(r,(function(e){return e.getAttribute(WN.draggableId)===t}));return i&&eA(i)?i:null}function nA(){var e={draggables:{},droppables:{}},t=[];function n(e){t.length&&t.forEach((function(t){return t(e)}))}function r(t){return e.draggables[t]||null}var i={register:function(t){e.draggables[t.descriptor.id]=t,n({type:"ADDITION",value:t})},update:function(t,n){var r=e.draggables[n.descriptor.id];r&&r.uniqueId===t.uniqueId&&(delete e.draggables[n.descriptor.id],e.draggables[t.descriptor.id]=t)},unregister:function(t){var i=t.descriptor.id,a=r(i);a&&t.uniqueId===a.uniqueId&&(delete e.draggables[i],n({type:"REMOVAL",value:t}))},getById:function(e){var t=r(e);return t||qE(!1),t},findById:r,exists:function(e){return Boolean(r(e))},getAllByType:function(t){return dT(e.draggables).filter((function(e){return e.descriptor.type===t}))}};function a(t){return e.droppables[t]||null}var o={register:function(t){e.droppables[t.descriptor.id]=t},unregister:function(t){var n=a(t.descriptor.id);n&&t.uniqueId===n.uniqueId&&delete e.droppables[t.descriptor.id]},getById:function(e){var t=a(e);return t||qE(!1),t},findById:a,exists:function(e){return Boolean(a(e))},getAllByType:function(t){return dT(e.droppables).filter((function(e){return e.descriptor.type===t}))}};return{draggable:i,droppable:o,subscribe:function(e){return t.push(e),function(){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},clean:function(){e.draggables={},e.droppables={},t.length=0}}}var rA=i.createContext(null),iA=function(){var e=document.body;return e||qE(!1),e},aA={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"};var oA=0,uA={separator:"::"};function sA(e,t){return void 0===t&&(t=uA),kE((function(){return""+e+t.separator+oA++}),[t.separator,e])}var cA=i.createContext(null);function lA(e){0}function fA(e,t){lA()}function dA(){fA()}function hA(e){var t=(0,i.useRef)(e);return(0,i.useEffect)((function(){t.current=e})),t}var pA,vA=((pA={})[13]=!0,pA[9]=!0,pA),mA=function(e){vA[e.keyCode]&&e.preventDefault()},gA=function(){var e="visibilitychange";return"undefined"===typeof document?e:pT([e,"ms"+e,"webkit"+e,"moz"+e,"o"+e],(function(e){return"on"+e in document}))||e}();var yA,bA={type:"IDLE"};function kA(e){var t=e.cancel,n=e.completed,r=e.getPhase,i=e.setPhase;return[{eventName:"mousemove",fn:function(e){var t=e.button,n=e.clientX,a=e.clientY;if(0===t){var o={x:n,y:a},u=r();if("DRAGGING"===u.type)return e.preventDefault(),void u.actions.move(o);"PENDING"!==u.type&&qE(!1);var s=u.point;if(c=s,l=o,Math.abs(l.x-c.x)>=5||Math.abs(l.y-c.y)>=5){var c,l;e.preventDefault();var f=u.actions.fluidLift(o);i({type:"DRAGGING",actions:f})}}}},{eventName:"mouseup",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"mousedown",fn:function(e){"DRAGGING"===r().type&&e.preventDefault(),t()}},{eventName:"keydown",fn:function(e){if("PENDING"!==r().type)return 27===e.keyCode?(e.preventDefault(),void t()):void mA(e);t()}},{eventName:"resize",fn:t},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){"PENDING"===r().type&&t()}},{eventName:"webkitmouseforcedown",fn:function(e){var n=r();"IDLE"===n.type&&qE(!1),n.actions.shouldRespectForcePress()?t():e.preventDefault()}},{eventName:gA,fn:t}]}function wA(){}var _A=((yA={})[34]=!0,yA[33]=!0,yA[36]=!0,yA[35]=!0,yA);function xA(e,t){function n(){t(),e.cancel()}return[{eventName:"keydown",fn:function(r){return 27===r.keyCode?(r.preventDefault(),void n()):32===r.keyCode?(r.preventDefault(),t(),void e.drop()):40===r.keyCode?(r.preventDefault(),void e.moveDown()):38===r.keyCode?(r.preventDefault(),void e.moveUp()):39===r.keyCode?(r.preventDefault(),void e.moveRight()):37===r.keyCode?(r.preventDefault(),void e.moveLeft()):void(_A[r.keyCode]?r.preventDefault():mA(r))}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:gA,fn:n}]}var IA={type:"IDLE"};var SA={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function EA(e,t){if(null==t)return!1;if(Boolean(SA[t.tagName.toLowerCase()]))return!0;var n=t.getAttribute("contenteditable");return"true"===n||""===n||t!==e&&EA(e,t.parentElement)}function TA(e,t){var n=t.target;return!!eA(n)&&EA(e,n)}var CA=function(e){return xE(e.getBoundingClientRect()).center};var NA=function(){var e="matches";return"undefined"===typeof document?e:pT([e,"msMatchesSelector","webkitMatchesSelector"],(function(e){return e in Element.prototype}))||e}();function AA(e,t){return null==e?null:e[NA](t)?e:AA(e.parentElement,t)}function RA(e,t){return e.closest?e.closest(t):AA(e,t)}function PA(e,t){var n=t.target;if(!function(e){return e instanceof ZN(e).Element}(n))return null;var r=function(e){return"["+WN.contextId+'="'+e+'"]'}(e),i=RA(n,r);return i&&eA(i)?i:null}function DA(e){e.preventDefault()}function OA(e){var t=e.expected,n=e.phase,r=e.isLockActive;e.shouldWarn;return!!r()&&t===n}function MA(e){var t=e.lockAPI,n=e.store,r=e.registry,i=e.draggableId;if(t.isClaimed())return!1;var a=r.draggable.findById(i);return!!a&&(!!a.options.isEnabled&&!!kN(n.getState(),i))}function LA(e){var t=e.lockAPI,n=e.contextId,r=e.store,i=e.registry,a=e.draggableId,o=e.forceSensorStop,u=e.sourceEvent;if(!MA({lockAPI:t,store:r,registry:i,draggableId:a}))return null;var s=i.draggable.getById(a),c=function(e,t){var n="["+GN.contextId+'="'+e+'"]',r=pT(vT(document.querySelectorAll(n)),(function(e){return e.getAttribute(GN.id)===t}));return r&&eA(r)?r:null}(n,s.descriptor.id);if(!c)return null;if(u&&!s.options.canDragInteractiveElements&&TA(c,u))return null;var l=t.claim(o||UE),f="PRE_DRAG";function h(){return s.options.shouldRespectForcePress}function p(){return t.isActive(l)}var v=function(e,t){OA({expected:e,phase:f,isLockActive:p,shouldWarn:!0})&&r.dispatch(t())}.bind(null,"DRAGGING");function m(e){function n(){t.release(),f="COMPLETED"}function i(t,i){if(void 0===i&&(i={shouldBlockNextClick:!1}),e.cleanup(),i.shouldBlockNextClick){var a=jE(window,[{eventName:"click",fn:DA,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(a)}n(),r.dispatch(VC({reason:t}))}return"PRE_DRAG"!==f&&(n(),"PRE_DRAG"!==f&&qE(!1)),r.dispatch(function(e){return{type:"LIFT",payload:e}}(e.liftActionArgs)),f="DRAGGING",d({isActive:function(){return OA({expected:"DRAGGING",phase:f,isLockActive:p,shouldWarn:!1})},shouldRespectForcePress:h,drop:function(e){return i("DROP",e)},cancel:function(e){return i("CANCEL",e)}},e.actions)}var g={isActive:function(){return OA({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!1})},shouldRespectForcePress:h,fluidLift:function(e){var t=LE((function(e){v((function(){return MC({client:e})}))}));return d({},m({liftActionArgs:{id:a,clientSelection:e,movementMode:"FLUID"},cleanup:function(){return t.cancel()},actions:{move:t}}),{move:t})},snapLift:function(){var e={moveUp:function(){return v(LC)},moveRight:function(){return v(UC)},moveDown:function(){return v(FC)},moveLeft:function(){return v(jC)}};return m({liftActionArgs:{id:a,clientSelection:CA(c),movementMode:"SNAP"},cleanup:UE,actions:e})},abort:function(){OA({expected:"PRE_DRAG",phase:f,isLockActive:p,shouldWarn:!0})&&t.release()}};return g}var FA=[function(e){var t=(0,i.useRef)(bA),n=(0,i.useRef)(UE),r=kE((function(){return{eventName:"mousedown",fn:function(t){if(!t.defaultPrevented&&0===t.button&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,u,{sourceEvent:t});if(i){t.preventDefault();var a={x:t.clientX,y:t.clientY};n.current(),l(i,a)}}}}}}),[e]),a=kE((function(){return{eventName:"webkitmouseforcewillbegin",fn:function(t){if(!t.defaultPrevented){var n=e.findClosestDraggableId(t);if(n){var r=e.findOptionsForDraggable(n);r&&(r.shouldRespectForcePress||e.canGetLock(n)&&t.preventDefault())}}}}}),[e]),o=wE((function(){n.current=jE(window,[a,r],{passive:!1,capture:!0})}),[a,r]),u=wE((function(){"IDLE"!==t.current.type&&(t.current=bA,n.current(),o())}),[o]),s=wE((function(){var e=t.current;u(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[u]),c=wE((function(){var e=kA({cancel:s,completed:u,getPhase:function(){return t.current},setPhase:function(e){t.current=e}});n.current=jE(window,e,{capture:!0,passive:!1})}),[s,u]),l=wE((function(e,n){"IDLE"!==t.current.type&&qE(!1),t.current={type:"PENDING",point:n,actions:e},c()}),[c]);YN((function(){return o(),function(){n.current()}}),[o])},function(e){var t=(0,i.useRef)(wA),n=kE((function(){return{eventName:"keydown",fn:function(n){if(!n.defaultPrevented&&32===n.keyCode){var i=e.findClosestDraggableId(n);if(i){var a=e.tryGetLock(i,s,{sourceEvent:n});if(a){n.preventDefault();var o=!0,u=a.snapLift();t.current(),t.current=jE(window,xA(u,s),{capture:!0,passive:!1})}}}function s(){o||qE(!1),o=!1,t.current(),r()}}}}),[e]),r=wE((function(){t.current=jE(window,[n],{passive:!1,capture:!0})}),[n]);YN((function(){return r(),function(){t.current()}}),[r])},function(e){var t=(0,i.useRef)(IA),n=(0,i.useRef)(UE),r=wE((function(){return t.current}),[]),a=wE((function(e){t.current=e}),[]),o=kE((function(){return{eventName:"touchstart",fn:function(t){if(!t.defaultPrevented){var r=e.findClosestDraggableId(t);if(r){var i=e.tryGetLock(r,s,{sourceEvent:t});if(i){var a=t.touches[0],o={x:a.clientX,y:a.clientY};n.current(),d(i,o)}}}}}}),[e]),u=wE((function(){n.current=jE(window,[o],{capture:!0,passive:!1})}),[o]),s=wE((function(){var e=t.current;"IDLE"!==e.type&&("PENDING"===e.type&&clearTimeout(e.longPressTimerId),a(IA),n.current(),u())}),[u,a]),c=wE((function(){var e=t.current;s(),"DRAGGING"===e.type&&e.actions.cancel({shouldBlockNextClick:!0}),"PENDING"===e.type&&e.actions.abort()}),[s]),l=wE((function(){var e={capture:!0,passive:!1},t={cancel:c,completed:s,getPhase:r},i=jE(window,function(e){var t=e.cancel,n=e.completed,r=e.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(e){var n=r();if("DRAGGING"===n.type){n.hasMoved=!0;var i=e.touches[0],a={x:i.clientX,y:i.clientY};e.preventDefault(),n.actions.move(a)}else t()}},{eventName:"touchend",fn:function(e){var i=r();"DRAGGING"===i.type?(e.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),n()):t()}},{eventName:"touchcancel",fn:function(e){"DRAGGING"===r().type?(e.preventDefault(),t()):t()}},{eventName:"touchforcechange",fn:function(e){var n=r();"IDLE"===n.type&&qE(!1);var i=e.touches[0];if(i&&i.force>=.15){var a=n.actions.shouldRespectForcePress();if("PENDING"!==n.type)return a?n.hasMoved?void e.preventDefault():void t():void e.preventDefault();a&&t()}}},{eventName:gA,fn:t}]}(t),e),a=jE(window,function(e){var t=e.cancel,n=e.getPhase;return[{eventName:"orientationchange",fn:t},{eventName:"resize",fn:t},{eventName:"contextmenu",fn:function(e){e.preventDefault()}},{eventName:"keydown",fn:function(e){"DRAGGING"===n().type?(27===e.keyCode&&e.preventDefault(),t()):t()}},{eventName:gA,fn:t}]}(t),e);n.current=function(){i(),a()}}),[c,r,s]),f=wE((function(){var e=r();"PENDING"!==e.type&&qE(!1);var t=e.actions.fluidLift(e.point);a({type:"DRAGGING",actions:t,hasMoved:!1})}),[r,a]),d=wE((function(e,t){"IDLE"!==r().type&&qE(!1);var n=setTimeout(f,120);a({type:"PENDING",point:t,actions:e,longPressTimerId:n}),l()}),[l,r,a,f]);YN((function(){return u(),function(){n.current();var e=r();"PENDING"===e.type&&(clearTimeout(e.longPressTimerId),a(IA))}}),[r,u,a]),YN((function(){return jE(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}])}),[])}];function UA(e){var t=e.contextId,n=e.store,r=e.registry,a=e.customSensors,o=e.enableDefaultSensors,u=[].concat(o?FA:[],a||[]),s=(0,i.useState)((function(){return function(){var e=null;function t(){e||qE(!1),e=null}return{isClaimed:function(){return Boolean(e)},isActive:function(t){return t===e},claim:function(t){e&&qE(!1);var n={abandon:t};return e=n,n},release:t,tryAbandon:function(){e&&(e.abandon(),t())}}}()}))[0],c=wE((function(e,t){e.isDragging&&!t.isDragging&&s.tryAbandon()}),[s]);YN((function(){var e=n.getState();return n.subscribe((function(){var t=n.getState();c(e,t),e=t}))}),[s,n,c]),YN((function(){return s.tryAbandon}),[s.tryAbandon]);var l=wE((function(e){return MA({lockAPI:s,registry:r,store:n,draggableId:e})}),[s,r,n]),f=wE((function(e,i,a){return LA({lockAPI:s,registry:r,contextId:t,store:n,draggableId:e,forceSensorStop:i,sourceEvent:a&&a.sourceEvent?a.sourceEvent:null})}),[t,s,r,n]),d=wE((function(e){return function(e,t){var n=PA(e,t);return n?n.getAttribute(WN.draggableId):null}(t,e)}),[t]),h=wE((function(e){var t=r.draggable.findById(e);return t?t.options:null}),[r.draggable]),p=wE((function(){s.isClaimed()&&(s.tryAbandon(),"IDLE"!==n.getState().phase&&n.dispatch({type:"FLUSH",payload:null}))}),[s,n]),v=wE(s.isClaimed,[s]),m=kE((function(){return{canGetLock:l,tryGetLock:f,findClosestDraggableId:d,findOptionsForDraggable:h,tryReleaseLock:p,isLockClaimed:v}}),[l,f,d,h,p,v]);lA();for(var g=0;g<u.length;g++)u[g](m)}function jA(e){return e.current||qE(!1),e.current}function BA(e){var t=e.contextId,n=e.setCallbacks,r=e.sensors,a=e.nonce,o=e.dragHandleUsageInstructions,u=(0,i.useRef)(null);dA();var s=hA(e),c=wE((function(){return function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}}(s.current)}),[s]),l=function(e){var t=kE((function(){return function(e){return"rbd-announcement-"+e}(e)}),[e]),n=(0,i.useRef)(null);(0,i.useEffect)((function(){var e=document.createElement("div");return n.current=e,e.id=t,e.setAttribute("aria-live","assertive"),e.setAttribute("aria-atomic","true"),d(e.style,aA),iA().appendChild(e),function(){setTimeout((function(){var t=iA();t.contains(e)&&t.removeChild(e),e===n.current&&(n.current=null)}))}}),[t]);var r=wE((function(e){var t=n.current;t&&(t.textContent=e)}),[]);return r}(t),f=function(e){var t=e.contextId,n=e.text,r=sA("hidden-text",{separator:"-"}),a=kE((function(){return"rbd-hidden-text-"+(e={contextId:t,uniqueId:r}).contextId+"-"+e.uniqueId;var e}),[r,t]);return(0,i.useEffect)((function(){var e=document.createElement("div");return e.id=a,e.textContent=n,e.style.display="none",iA().appendChild(e),function(){var t=iA();t.contains(e)&&t.removeChild(e)}}),[a,n]),a}({contextId:t,text:o}),h=JN(t,a),p=wE((function(e){jA(u).dispatch(e)}),[]),v=kE((function(){return RS({publishWhileDragging:AC,updateDroppableScroll:PC,updateDroppableIsEnabled:DC,updateDroppableIsCombineEnabled:OC,collectionStarting:RC},p)}),[p]),m=function(){var e=kE(nA,[]);return(0,i.useEffect)((function(){return function(){requestAnimationFrame(e.clean)}}),[e]),e}(),g=kE((function(){return bN(m,v)}),[m,v]),y=kE((function(){return zN(d({scrollWindow:wN,scrollDroppable:g.scrollDroppable},RS({move:MC},p)))}),[g.scrollDroppable,p]),b=function(e){var t=(0,i.useRef)({}),n=(0,i.useRef)(null),r=(0,i.useRef)(null),a=(0,i.useRef)(!1),o=wE((function(e,n){var r={id:e,focus:n};return t.current[e]=r,function(){var n=t.current;n[e]!==r&&delete n[e]}}),[]),u=wE((function(t){var n=tA(e,t);n&&n!==document.activeElement&&n.focus()}),[e]),s=wE((function(e,t){n.current===e&&(n.current=t)}),[]),c=wE((function(){r.current||a.current&&(r.current=requestAnimationFrame((function(){r.current=null;var e=n.current;e&&u(e)})))}),[u]),l=wE((function(e){n.current=null;var t=document.activeElement;t&&t.getAttribute(WN.draggableId)===e&&(n.current=e)}),[]);return YN((function(){return a.current=!0,function(){a.current=!1;var e=r.current;e&&cancelAnimationFrame(e)}}),[]),kE((function(){return{register:o,tryRecordFocus:l,tryRestoreFocusRecorded:c,tryShiftRecord:s}}),[o,l,c,s])}(t),k=kE((function(){return hN({announce:l,autoScroller:y,dimensionMarshal:g,focusMarshal:b,getResponders:c,styleMarshal:h})}),[l,y,g,b,c,h]);u.current=k;var w=wE((function(){var e=jA(u);"IDLE"!==e.getState().phase&&e.dispatch({type:"FLUSH",payload:null})}),[]),_=wE((function(){var e=jA(u).getState();return e.isDragging||"DROP_ANIMATING"===e.phase}),[]);n(kE((function(){return{isDragging:_,tryAbort:w}}),[_,w]));var x=wE((function(e){return kN(jA(u).getState(),e)}),[]),I=wE((function(){return cC(jA(u).getState())}),[]),S=kE((function(){return{marshal:g,focus:b,contextId:t,canLift:x,isMovementAllowed:I,dragHandleUsageInstructionsId:f,registry:m}}),[t,g,f,b,x,I,m]);return UA({contextId:t,store:k,registry:m,customSensors:r,enableDefaultSensors:!1!==e.enableDefaultSensors}),(0,i.useEffect)((function(){return w}),[w]),i.createElement(cA.Provider,{value:S},i.createElement(jS,{context:rA,store:k},e.children))}var VA=0;function qA(e){var t=kE((function(){return""+VA++}),[]),n=e.dragHandleUsageInstructions||QE;return i.createElement(zE,null,(function(r){return i.createElement(BA,{nonce:e.nonce,contextId:t,setCallbacks:r,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd},e.children)}))}var zA=function(e){return function(t){return e===t}},WA=zA("scroll"),GA=zA("auto"),HA=(zA("visible"),function(e,t){return t(e.overflowX)||t(e.overflowY)}),KA=function(e){var t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return HA(n,WA)||HA(n,GA)},QA=function e(t){return null==t||t===document.body||t===document.documentElement?null:KA(t)?t:e(t.parentElement)},YA=function(e){return{x:e.scrollLeft,y:e.scrollTop}},$A=function e(t){return!!t&&("fixed"===window.getComputedStyle(t).position||e(t.parentElement))},XA=function(e){return{closestScrollable:QA(e),isFixedOnPage:$A(e)}},JA=function(e){var t=e.ref,n=e.descriptor,r=e.env,i=e.windowScroll,a=e.direction,o=e.isDropDisabled,u=e.isCombineEnabled,s=e.shouldClipSubject,c=r.closestScrollable,l=function(e,t){var n=PE(e);if(!t)return n;if(e!==t)return n;var r=n.paddingBox.top-t.scrollTop,i=n.paddingBox.left-t.scrollLeft,a=r+t.scrollHeight,o=i+t.scrollWidth,u=IE({top:r,right:o,bottom:a,left:i},n.border);return TE({borderBox:u,margin:n.margin,border:n.border,padding:n.padding})}(t,c),f=AE(l,i),d=function(){if(!c)return null;var e=PE(c),t={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:e,page:AE(e,i),scroll:YA(c),scrollSize:t,shouldClipSubject:s}}(),h=function(e){var t=e.descriptor,n=e.isEnabled,r=e.isCombineEnabled,i=e.isFixedOnPage,a=e.direction,o=e.client,u=e.page,s=e.closest,c=function(){if(!s)return null;var e=s.scrollSize,t=s.client,n=pN({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,height:t.paddingBox.height,width:t.paddingBox.width});return{pageMarginBox:s.page.marginBox,frameClient:t,scrollSize:e,shouldClipSubject:s.shouldClipSubject,scroll:{initial:s.scroll,current:s.scroll,max:n,diff:{value:JE,displacement:JE}}}}(),l="vertical"===a?RT:PT;return{descriptor:t,isCombineEnabled:r,isFixedOnPage:i,axis:l,isEnabled:n,client:o,page:u,frame:c,subject:lT({page:u,withPlaceholder:null,axis:l,frame:c})}}({descriptor:n,isEnabled:!o,isCombineEnabled:u,isFixedOnPage:r.isFixedOnPage,direction:a,client:l,page:f,closest:d});return h},ZA={passive:!1},eR={passive:!0},tR=function(e){return e.shouldPublishImmediately?ZA:eR};function nR(e){var t=(0,i.useContext)(e);return t||qE(!1),t}var rR=function(e){return e&&e.env.closestScrollable||null};function iR(){}var aR={width:0,height:0,margin:{top:0,right:0,bottom:0,left:0}},oR=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate,i=function(e){var t=e.isAnimatingOpenOnMount,n=e.placeholder,r=e.animate;return t||"close"===r?aR:{height:n.client.borderBox.height,width:n.client.borderBox.width,margin:n.client.margin}}({isAnimatingOpenOnMount:t,placeholder:n,animate:r});return{display:n.display,boxSizing:"border-box",width:i.width,height:i.height,marginTop:i.margin.top,marginRight:i.margin.right,marginBottom:i.margin.bottom,marginLeft:i.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:"none"!==r?KC.placeholder:null}};var uR=i.memo((function(e){var t=(0,i.useRef)(null),n=wE((function(){t.current&&(clearTimeout(t.current),t.current=null)}),[]),r=e.animate,a=e.onTransitionEnd,o=e.onClose,u=e.contextId,s=(0,i.useState)("open"===e.animate),c=s[0],l=s[1];(0,i.useEffect)((function(){return c?"open"!==r?(n(),l(!1),iR):t.current?iR:(t.current=setTimeout((function(){t.current=null,l(!1)})),n):iR}),[r,c,n]);var f=wE((function(e){"height"===e.propertyName&&(a(),"close"===r&&o())}),[r,o,a]),d=oR({isAnimatingOpenOnMount:c,animate:e.animate,placeholder:e.placeholder});return i.createElement(e.placeholder.tagName,{style:d,"data-rbd-placeholder-context-id":u,onTransitionEnd:f,ref:e.innerRef})})),sR=i.createContext(null);var cR=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).state={isVisible:Boolean(t.props.on),data:t.props.on,animate:t.props.shouldAnimate&&t.props.on?"open":"none"},t.onClose=function(){"close"===t.state.animate&&t.setState({isVisible:!1})},t}return xS(t,e),t.getDerivedStateFromProps=function(e,t){return e.shouldAnimate?e.on?{isVisible:!0,data:e.on,animate:"open"}:t.isVisible?{isVisible:!0,data:t.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:Boolean(e.on),data:e.on,animate:"none"}},t.prototype.render=function(){if(!this.state.isVisible)return null;var e={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(e)},t}(i.PureComponent),lR=5e3,fR=4500,dR=function(e,t){return t?KC.drop(t.duration):e?KC.snap:KC.fluid},hR=function(e,t){return e?t?WC.drop:WC.combining:null};function pR(e){return"DRAGGING"===e.type?function(e){var t=e.dimension.client,n=e.offset,r=e.combineWith,i=e.dropping,a=Boolean(r),o=function(e){return null!=e.forceShouldAnimate?e.forceShouldAnimate:"SNAP"===e.mode}(e),u=Boolean(i),s=u?$C(n,a):YC(n);return{position:"fixed",top:t.marginBox.top,left:t.marginBox.left,boxSizing:"border-box",width:t.borderBox.width,height:t.borderBox.height,transition:dR(o,i),transform:s,opacity:hR(a,u),zIndex:u?fR:lR,pointerEvents:"none"}}(e):{transform:YC((t=e).offset),transition:t.shouldAnimateDisplacement?null:"none"};var t}function vR(e){var t=sA("draggable"),n=e.descriptor,r=e.registry,a=e.getDraggableRef,o=e.canDragInteractiveElements,u=e.shouldRespectForcePress,s=e.isEnabled,c=kE((function(){return{canDragInteractiveElements:o,shouldRespectForcePress:u,isEnabled:s}}),[o,s,u]),l=wE((function(e){var t=a();return t||qE(!1),function(e,t,n){void 0===n&&(n=JE);var r=window.getComputedStyle(t),i=t.getBoundingClientRect(),a=RE(i,r),o=AE(a,n);return{descriptor:e,placeholder:{client:a,tagName:t.tagName.toLowerCase(),display:r.display},displaceBy:{x:a.marginBox.width,y:a.marginBox.height},client:a,page:o}}(n,t,e)}),[n,a]),f=kE((function(){return{uniqueId:t,descriptor:n,options:c,getDimension:l}}),[n,l,c,t]),d=(0,i.useRef)(f),h=(0,i.useRef)(!0);YN((function(){return r.draggable.register(d.current),function(){return r.draggable.unregister(d.current)}}),[r.draggable]),YN((function(){if(h.current)h.current=!1;else{var e=d.current;d.current=f,r.draggable.update(f,e)}}),[f,r.draggable])}function mR(e,t,n){fA()}function gR(e){e.preventDefault()}var yR=function(e,t){return e===t},bR=function(e){var t=e.combine,n=e.destination;return n?n.droppableId:t?t.droppableId:null};function kR(e){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}var wR={mapped:{type:"SECONDARY",offset:JE,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:kR(null)}};var _R=mE((function(){var e=function(){var e=ME((function(e,t){return{x:e,y:t}})),t=ME((function(e,t,n,r,i){return{isDragging:!0,isClone:t,isDropAnimating:Boolean(i),dropAnimation:i,mode:e,draggingOver:n,combineWith:r,combineTargetFor:null}})),n=ME((function(e,n,r,i,a,o,u){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:a,combineWith:o,mode:n,offset:e,dimension:r,forceShouldAnimate:u,snapshot:t(n,i,a,o,null)}}}));return function(r,i){if(r.isDragging){if(r.critical.draggable.id!==i.draggableId)return null;var a=r.current.client.offset,o=r.dimensions.draggables[i.draggableId],u=uC(r.impact),s=(l=r.impact).at&&"COMBINE"===l.at.type?l.at.combine.draggableId:null,c=r.forceShouldAnimate;return n(e(a.x,a.y),r.movementMode,o,i.isClone,u,s,c)}var l;if("DROP_ANIMATING"===r.phase){var f=r.completed;if(f.result.draggableId!==i.draggableId)return null;var d=i.isClone,h=r.dimensions.draggables[i.draggableId],p=f.result,v=p.mode,m=bR(p),g=function(e){return e.combine?e.combine.draggableId:null}(p),y={duration:r.dropDuration,curve:zC,moveTo:r.newHomeClientOffset,opacity:g?WC.drop:null,scale:g?GC.drop:null};return{mapped:{type:"DRAGGING",offset:r.newHomeClientOffset,dimension:h,dropping:y,draggingOver:m,combineWith:g,mode:v,forceShouldAnimate:null,snapshot:t(v,d,m,g,y)}}}return null}}(),t=function(){var e=ME((function(e,t){return{x:e,y:t}})),t=ME(kR),n=ME((function(e,n,r){return void 0===n&&(n=null),{mapped:{type:"SECONDARY",offset:e,combineTargetFor:n,shouldAnimateDisplacement:r,snapshot:t(n)}}})),r=function(e){return e?n(JE,e,!0):null},i=function(t,i,a,o){var u=a.displaced.visible[t],s=Boolean(o.inVirtualList&&o.effected[t]),c=_T(a),l=c&&c.draggableId===t?i:null;if(!u){if(!s)return r(l);if(a.displaced.invisible[t])return null;var f=nT(o.displacedBy.point),d=e(f.x,f.y);return n(d,l,!0)}if(s)return r(l);var h=a.displacedBy.point,p=e(h.x,h.y);return n(p,l,u.shouldAnimate)};return function(e,t){if(e.isDragging)return e.critical.draggable.id===t.draggableId?null:i(t.draggableId,e.critical.draggable.id,e.impact,e.afterCritical);if("DROP_ANIMATING"===e.phase){var n=e.completed;return n.result.draggableId===t.draggableId?null:i(t.draggableId,n.result.draggableId,n.impact,n.afterCritical)}return null}}();return function(n,r){return e(n,r)||t(n,r)||wR}}),{dropAnimationFinished:qC},null,{context:rA,pure:!0,areStatePropsEqual:yR})((function(e){var t=(0,i.useRef)(null),n=wE((function(e){t.current=e}),[]),r=wE((function(){return t.current}),[]),a=nR(cA),o=a.contextId,u=a.dragHandleUsageInstructionsId,s=a.registry,c=nR(sR),l=c.type,f=c.droppableId,d=kE((function(){return{id:e.draggableId,index:e.index,type:l,droppableId:f}}),[e.draggableId,e.index,l,f]),h=e.children,p=e.draggableId,v=e.isEnabled,m=e.shouldRespectForcePress,g=e.canDragInteractiveElements,y=e.isClone,b=e.mapped,k=e.dropAnimationFinished;mR(),lA(),y||vR(kE((function(){return{descriptor:d,registry:s,getDraggableRef:r,canDragInteractiveElements:g,shouldRespectForcePress:m,isEnabled:v}}),[d,s,r,g,m,v]));var w=kE((function(){return v?{tabIndex:0,role:"button","aria-describedby":u,"data-rbd-drag-handle-draggable-id":p,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:gR}:null}),[o,u,p,v]),_=wE((function(e){"DRAGGING"===b.type&&b.dropping&&"transform"===e.propertyName&&k()}),[k,b]),x=kE((function(){var e=pR(b),t="DRAGGING"===b.type&&b.dropping?_:null;return{innerRef:n,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":p,style:e,onTransitionEnd:t},dragHandleProps:w}}),[o,w,p,b,_,n]),I=kE((function(){return{draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}}),[d.droppableId,d.id,d.index,d.type]);return h(x,b.snapshot,I)}));function xR(e){return nR(sR).isUsingCloneFor!==e.draggableId||e.isClone?i.createElement(_R,e):null}function IR(e){var t="boolean"!==typeof e.isDragDisabled||!e.isDragDisabled,n=Boolean(e.disableInteractiveElementBlocking),r=Boolean(e.shouldRespectForcePress);return i.createElement(xR,d({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:r}))}var SR=function(e,t){return e===t.droppable.type},ER=function(e,t){return t.draggables[e.draggable.id]};var TR={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:function(){return document.body||qE(!1),document.body}},CR=mE((function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t=d({},e,{shouldAnimatePlaceholder:!1}),n=ME((function(e){return{draggableId:e.id,type:e.type,source:{index:e.index,droppableId:e.droppableId}}})),r=ME((function(r,i,a,o,u,s){var c=u.descriptor.id;if(u.descriptor.droppableId===r){var l=s?{render:s,dragging:n(u.descriptor)}:null,f={isDraggingOver:a,draggingOverWith:a?c:null,draggingFromThisWith:c,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!1,snapshot:f,useClone:l}}if(!i)return t;if(!o)return e;var d={isDraggingOver:a,draggingOverWith:c,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:u.placeholder,shouldAnimatePlaceholder:!0,snapshot:d,useClone:null}}));return function(n,i){var a=i.droppableId,o=i.type,u=!i.isDropDisabled,s=i.renderClone;if(n.isDragging){var c=n.critical;if(!SR(o,c))return t;var l=ER(c,n.dimensions),f=uC(n.impact)===a;return r(a,u,f,f,l,s)}if("DROP_ANIMATING"===n.phase){var d=n.completed;if(!SR(o,d.critical))return t;var h=ER(d.critical,n.dimensions);return r(a,u,bR(d.result)===a,uC(d.impact)===a,h,s)}if("IDLE"===n.phase&&n.completed&&!n.shouldFlush){var p=n.completed;if(!SR(o,p.critical))return t;var v=uC(p.impact)===a,m=Boolean(p.impact.at&&"COMBINE"===p.impact.at.type),g=p.critical.droppable.id===a;return v?m?e:t:g?e:t}return t}}),{updateViewportMaxScroll:function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}}},null,{context:rA,pure:!0,areStatePropsEqual:yR})((function(e){var t=(0,i.useContext)(cA);t||qE(!1);var n=t.contextId,r=t.isMovementAllowed,a=(0,i.useRef)(null),o=(0,i.useRef)(null),u=e.children,s=e.droppableId,c=e.type,l=e.mode,f=e.direction,d=e.ignoreContainerClipping,h=e.isDropDisabled,p=e.isCombineEnabled,v=e.snapshot,m=e.useClone,g=e.updateViewportMaxScroll,y=e.getContainerForClone,b=wE((function(){return a.current}),[]),k=wE((function(e){a.current=e}),[]),w=(wE((function(){return o.current}),[]),wE((function(e){o.current=e}),[]));fA();var _=wE((function(){r()&&g({maxScroll:mN()})}),[r,g]);!function(e){var t=(0,i.useRef)(null),n=nR(cA),r=sA("droppable"),a=n.registry,o=n.marshal,u=hA(e),s=kE((function(){return{id:e.droppableId,type:e.type,mode:e.mode}}),[e.droppableId,e.mode,e.type]),c=(0,i.useRef)(s),l=kE((function(){return ME((function(e,n){t.current||qE(!1);var r={x:e,y:n};o.updateDroppableScroll(s.id,r)}))}),[s.id,o]),f=wE((function(){var e=t.current;return e&&e.env.closestScrollable?YA(e.env.closestScrollable):JE}),[]),d=wE((function(){var e=f();l(e.x,e.y)}),[f,l]),h=kE((function(){return LE(d)}),[d]),p=wE((function(){var e=t.current,n=rR(e);e&&n||qE(!1),e.scrollOptions.shouldPublishImmediately?d():h()}),[h,d]),v=wE((function(e,r){t.current&&qE(!1);var i=u.current,a=i.getDroppableRef();a||qE(!1);var o=XA(a),c={ref:a,descriptor:s,env:o,scrollOptions:r};t.current=c;var l=JA({ref:a,descriptor:s,env:o,windowScroll:e,direction:i.direction,isDropDisabled:i.isDropDisabled,isCombineEnabled:i.isCombineEnabled,shouldClipSubject:!i.ignoreContainerClipping}),f=o.closestScrollable;return f&&(f.setAttribute(KN.contextId,n.contextId),f.addEventListener("scroll",p,tR(c.scrollOptions))),l}),[n.contextId,s,p,u]),m=wE((function(){var e=t.current,n=rR(e);return e&&n||qE(!1),YA(n)}),[]),g=wE((function(){var e=t.current;e||qE(!1);var n=rR(e);t.current=null,n&&(h.cancel(),n.removeAttribute(KN.contextId),n.removeEventListener("scroll",p,tR(e.scrollOptions)))}),[p,h]),y=wE((function(e){var n=t.current;n||qE(!1);var r=rR(n);r||qE(!1),r.scrollTop+=e.y,r.scrollLeft+=e.x}),[]),b=kE((function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:m,dragStopped:g,scroll:y}}),[g,v,m,y]),k=kE((function(){return{uniqueId:r,descriptor:s,callbacks:b}}),[b,s,r]);YN((function(){return c.current=k.descriptor,a.droppable.register(k),function(){t.current&&g(),a.droppable.unregister(k)}}),[b,s,g,k,o,a.droppable]),YN((function(){t.current&&o.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)}),[e.isDropDisabled,o]),YN((function(){t.current&&o.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)}),[e.isCombineEnabled,o])}({droppableId:s,type:c,mode:l,direction:f,isDropDisabled:h,isCombineEnabled:p,ignoreContainerClipping:d,getDroppableRef:b});var x=i.createElement(cR,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},(function(e){var t=e.onClose,r=e.data,a=e.animate;return i.createElement(uR,{placeholder:r,onClose:t,innerRef:w,animate:a,contextId:n,onTransitionEnd:_})})),I=kE((function(){return{innerRef:k,placeholder:x,droppableProps:{"data-rbd-droppable-id":s,"data-rbd-droppable-context-id":n}}}),[n,s,x,k]),S=m?m.dragging.draggableId:null,E=kE((function(){return{droppableId:s,type:c,isUsingCloneFor:S}}),[s,S,c]);return i.createElement(sR.Provider,{value:E},u(I,v),function(){if(!m)return null;var e=m.dragging,t=m.render,n=i.createElement(xR,{draggableId:e.draggableId,index:e.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(function(n,r){return t(n,r,e)}));return yE.createPortal(n,y())}())}));CR.defaultProps=TR;var NR=["children","tasks","task","step","handleDelete"],AR=function(e){var t=e.children,n=e.tasks,r=e.task,a=e.step,o=e.handleDelete,u=(Js(e,NR),(0,uc.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",children:(0,uc.jsx)("path",{fill:"#494C6B",fillRule:"evenodd",d:"M16.97 0l.708.707L9.546 8.84l8.132 8.132-.707.707-8.132-8.132-8.132 8.132L0 16.97l8.132-8.132L0 .707.707 0 8.84 8.132 16.971 0z"})})),s=(0,i.useContext)(xY),c=s.auth,l=s.firestore,d=f(Ys(c),1)[0].uid,h=Ox(l,"users","".concat(d)),p=f(_S(h),4),v=p[0];p[1],p[2],p[3];return(0,uc.jsx)(IR,{draggableId:"".concat(r.id),index:a,children:function(e){return(0,uc.jsxs)("div",Et(Et(Et({className:ec},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef,children:[(0,uc.jsx)(cc,{isActive:r.isActive,onClick:function(){return function(){var e=ye(n);console.log(e),e[a]=Et(Et({},r),{},{isActive:!r.isActive});var t=Et(Et({},v),{},{tasks:e});aS(h,t)}()},className:ac}),(0,uc.jsx)("div",{style:r.isActive?{}:{textDecoration:"solid line-through grey 1.5px"},className:rc,children:t}),(0,uc.jsx)("button",{className:ic,onClick:function(){return o(a)},children:u})]}))}})},RR=KR(),PR=function(e){return zR(e,RR)},DR=KR();PR.write=function(e){return zR(e,DR)};var OR=KR();PR.onStart=function(e){return zR(e,OR)};var MR=KR();PR.onFrame=function(e){return zR(e,MR)};var LR=KR();PR.onFinish=function(e){return zR(e,LR)};var FR=[];PR.setTimeout=function(e,t){var n=PR.now()+t,r={time:n,handler:e,cancel:function e(){var t=FR.findIndex((function(t){return t.cancel==e}));~t&&FR.splice(t,1),VR-=~t?1:0}};return FR.splice(UR(n),0,r),VR+=1,WR(),r};var UR=function(e){return~(~FR.findIndex((function(t){return t.time>e}))||~FR.length)};PR.cancel=function(e){OR.delete(e),MR.delete(e),RR.delete(e),DR.delete(e),LR.delete(e)},PR.sync=function(e){qR=!0,PR.batchedUpdates(e),qR=!1},PR.throttle=function(e){var t;function n(){try{e.apply(void 0,ye(t))}finally{t=null}}function r(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t=r,PR.onStart(n)}return r.handler=e,r.cancel=function(){OR.delete(n),t=null},r};var jR="undefined"!=typeof window?window.requestAnimationFrame:function(){};PR.use=function(e){return jR=e},PR.now="undefined"!=typeof performance?function(){return performance.now()}:Date.now,PR.batchedUpdates=function(e){return e()},PR.catch=console.error,PR.frameLoop="always",PR.advance=function(){"demand"!==PR.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):HR()};var BR=-1,VR=0,qR=!1;function zR(e,t){qR?(t.delete(e),e(0)):(t.add(e),WR())}function WR(){BR<0&&(BR=0,"demand"!==PR.frameLoop&&jR(GR))}function GR(){~BR&&(jR(GR),PR.batchedUpdates(HR))}function HR(){var e=BR;BR=PR.now();var t=UR(BR);t&&(QR(FR.splice(0,t),(function(e){return e.handler()})),VR-=t),OR.flush(),RR.flush(e?Math.min(64,BR-e):16.667),MR.flush(),DR.flush(),LR.flush(),VR||(BR=-1)}function KR(){var e=new Set,t=e;return{add:function(n){VR+=t!=e||e.has(n)?0:1,e.add(n)},delete:function(n){return VR-=t==e&&e.has(n)?1:0,e.delete(n)},flush:function(n){t.size&&(e=new Set,VR-=t.size,QR(t,(function(t){return t(n)&&e.add(t)})),VR+=e.size,t=e)}}}function QR(e,t){e.forEach((function(e){try{t(e)}catch(n){PR.catch(n)}}))}function YR(){}var $R={arr:Array.isArray,obj:function(e){return!!e&&"Object"===e.constructor.name},fun:function(e){return"function"===typeof e},str:function(e){return"string"===typeof e},num:function(e){return"number"===typeof e},und:function(e){return void 0===e}};function XR(e,t){if($R.arr(e)){if(!$R.arr(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var JR=function(e,t){return e.forEach(t)};function ZR(e,t,n){if($R.arr(e))for(var r=0;r<e.length;r++)t.call(n,e[r],"".concat(r));else for(var i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i)}var eP=function(e){return $R.und(e)?[]:$R.arr(e)?e:[e]};function tP(e,t){if(e.size){var n=Array.from(e);e.clear(),JR(n,t)}}var nP,rP,iP=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return tP(e,(function(e){return e.apply(void 0,n)}))},aP=function(){return"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)},oP=null,uP=!1,sP=YR,cP=Object.freeze({__proto__:null,get createStringInterpolator(){return nP},get to(){return rP},get colors(){return oP},get skipAnimation(){return uP},get willAdvance(){return sP},assign:function(e){e.to&&(rP=e.to),e.now&&(PR.now=e.now),void 0!==e.colors&&(oP=e.colors),null!=e.skipAnimation&&(uP=e.skipAnimation),e.createStringInterpolator&&(nP=e.createStringInterpolator),e.requestAnimationFrame&&PR.use(e.requestAnimationFrame),e.batchedUpdates&&(PR.batchedUpdates=e.batchedUpdates),e.willAdvance&&(sP=e.willAdvance),e.frameLoop&&(PR.frameLoop=e.frameLoop)}}),lP=new Set,fP=[],dP=[],hP=0,pP={get idle(){return!lP.size&&!fP.length},start:function(e){hP>e.priority?(lP.add(e),PR.onStart(vP)):(mP(e),PR(yP))},advance:yP,sort:function(e){if(hP)PR.onFrame((function(){return pP.sort(e)}));else{var t=fP.indexOf(e);~t&&(fP.splice(t,1),gP(e))}},clear:function(){fP=[],lP.clear()}};function vP(){lP.forEach(mP),lP.clear(),PR(yP)}function mP(e){fP.includes(e)||gP(e)}function gP(e){fP.splice(function(e,t){var n=e.findIndex(t);return n<0?e.length:n}(fP,(function(t){return t.priority>e.priority})),0,e)}function yP(e){for(var t=dP,n=0;n<fP.length;n++){var r=fP[n];hP=r.priority,r.idle||(sP(r),r.advance(e),r.idle||t.push(r))}return hP=0,(dP=fP).length=0,(fP=t).length>0}var bP="[-+]?\\d*\\.?\\d+",kP=bP+"%";function wP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var _P=new RegExp("rgb"+wP(bP,bP,bP)),xP=new RegExp("rgba"+wP(bP,bP,bP,bP)),IP=new RegExp("hsl"+wP(bP,kP,kP)),SP=new RegExp("hsla"+wP(bP,kP,kP,bP)),EP=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,TP=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,CP=/^#([0-9a-fA-F]{6})$/,NP=/^#([0-9a-fA-F]{8})$/;function AP(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function RP(e,t,n){var r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,a=AP(i,r,e+1/3),o=AP(i,r,e),u=AP(i,r,e-1/3);return Math.round(255*a)<<24|Math.round(255*o)<<16|Math.round(255*u)<<8}function PP(e){var t=parseInt(e,10);return t<0?0:t>255?255:t}function DP(e){return(parseFloat(e)%360+360)%360/360}function OP(e){var t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function MP(e){var t=parseFloat(e);return t<0?0:t>100?1:t/100}function LP(e){var t=function(e){var t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=CP.exec(e))?parseInt(t[1]+"ff",16)>>>0:oP&&void 0!==oP[e]?oP[e]:(t=_P.exec(e))?(PP(t[1])<<24|PP(t[2])<<16|PP(t[3])<<8|255)>>>0:(t=xP.exec(e))?(PP(t[1])<<24|PP(t[2])<<16|PP(t[3])<<8|OP(t[4]))>>>0:(t=EP.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=NP.exec(e))?parseInt(t[1],16)>>>0:(t=TP.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=IP.exec(e))?(255|RP(DP(t[1]),MP(t[2]),MP(t[3])))>>>0:(t=SP.exec(e))?(RP(DP(t[1]),MP(t[2]),MP(t[3]))|OP(t[4]))>>>0:null}(e);if(null===t)return e;var n=(16711680&(t=t||0))>>>16,r=(65280&t)>>>8,i=(255&t)/255;return"rgba(".concat((4278190080&t)>>>24,", ").concat(n,", ").concat(r,", ").concat(i,")")}var FP=function e(t,n,r){if($R.fun(t))return t;if($R.arr(t))return e({range:t,output:n,extrapolate:r});if($R.str(t.output[0]))return nP(t);var i=t,a=i.output,o=i.range||[0,1],u=i.extrapolateLeft||i.extrapolate||"extend",s=i.extrapolateRight||i.extrapolate||"extend",c=i.easing||function(e){return e};return function(e){var t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,o);return function(e,t,n,r,i,a,o,u,s){var c=s?s(e):e;if(c<t){if("identity"===o)return c;"clamp"===o&&(c=t)}if(c>n){if("identity"===u)return c;"clamp"===u&&(c=n)}if(r===i)return r;if(t===n)return e<=t?r:i;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=a(c),r===-1/0?c=-c:i===1/0?c+=r:c=c*(i-r)+r;return c}(e,o[t],o[t+1],a[t],a[t+1],c,u,s,i.map)}};function UP(){return UP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UP.apply(this,arguments)}var jP=Symbol.for("FluidValue.get"),BP=Symbol.for("FluidValue.observers"),VP=function(e){return Boolean(e&&e[jP])},qP=function(e){return e&&e[jP]?e[jP]():e},zP=function(e){return e[BP]||null};function WP(e,t){var n=e[BP];n&&n.forEach((function(e){!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var GP=me((function e(t){if(pe(this,e),this[jP]=void 0,this[BP]=void 0,!t&&!(t=this.get))throw Error("Unknown getter");HP(this,t)})),HP=function(e,t){return $P(e,jP,t)};function KP(e,t){if(e[jP]){var n=e[BP];n||$P(e,BP,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function QP(e,t){var n=e[BP];if(n&&n.has(t)){var r=n.size-1;r?n.delete(t):e[BP]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var YP,$P=function(e,t,n){return Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})},XP=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,JP=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ZP=new RegExp("(".concat(XP.source,")(%|[a-z]+)"),"i"),eD=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,tD=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,nD=function e(t){var n=f(rD(t),2),r=n[0],i=n[1];if(!r||aP())return t;var a=window.getComputedStyle(document.documentElement).getPropertyValue(r);if(a)return a.trim();if(i&&i.startsWith("--")){var o=window.getComputedStyle(document.documentElement).getPropertyValue(i);return o||t}return i&&tD.test(i)?e(i):i||t},rD=function(e){var t=tD.exec(e);if(!t)return[,];var n=f(t,3);return[n[1],n[2]]},iD=function(e,t,n,r,i){return"rgba(".concat(Math.round(t),", ").concat(Math.round(n),", ").concat(Math.round(r),", ").concat(i,")")},aD=function(e){YP||(YP=oP?new RegExp("(".concat(Object.keys(oP).join("|"),")(?!\\w)"),"g"):/^\b$/);var t=e.output.map((function(e){return qP(e).replace(tD,nD).replace(JP,LP).replace(YP,LP)})),n=t.map((function(e){return e.match(XP).map(Number)})),r=n[0].map((function(e,t){return n.map((function(e){if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]}))})),i=r.map((function(t){return FP(UP({},e,{output:t}))}));return function(e){var n,r=!ZP.test(t[0])&&(null==(n=t.find((function(e){return ZP.test(e)})))?void 0:n.replace(XP,"")),a=0;return t[0].replace(XP,(function(){return"".concat(i[a++](e)).concat(r||"")})).replace(eD,iD)}},oD="react-spring: ",uD=function(e){var t=e,n=!1;if("function"!=typeof t)throw new TypeError("".concat(oD,"once requires a function parameter"));return function(){n||(t.apply(void 0,arguments),n=!0)}},sD=uD(console.warn);function cD(){sD("".concat(oD,'The "interpolate" function is deprecated in v9 (use "to" instead)'))}var lD=uD(console.warn);function fD(e){return $R.str(e)&&("#"==e[0]||/\d/.test(e)||!aP()&&tD.test(e)||e in(oP||{}))}var dD="undefined"!==typeof window&&window.document&&window.document.createElement?i.useLayoutEffect:i.useEffect;function hD(){var e=(0,i.useState)()[1],t=function(){var e=(0,i.useRef)(!1);return dD((function(){return e.current=!0,function(){e.current=!1}}),[]),e}();return function(){t.current&&e(Math.random())}}var pD=function(e){return(0,i.useEffect)(e,vD)},vD=[];function mD(e){var t=(0,i.useRef)();return(0,i.useEffect)((function(){t.current=e})),t.current}var gD=["isDarkTheme","userData"],yD=function(e){var t=e.isDarkTheme,n=e.userData,r=(Js(e,gD),(0,i.useContext)(xY)),a=r.auth,o=r.firestore,u=f(Ys(a),1)[0],s=(hS(),f((0,i.useState)(""),2)),c=s[0],l=s[1];function d(){return d=he(fe().mark((function e(){var t,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(c.length),0!=c.length){e.next=6;break}return alert("0!"),e.abrupt("return");case 6:return t=Et(Et({},n),{},{tasks:[].concat(ye(n.tasks),[{id:Date.now(),text:c,isActive:!0}])}),r=u.uid,i=Ox(o,"users","".concat(r)),l(""),e.next=12,aS(i,t);case 12:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}return(0,uc.jsxs)("div",{className:t?tc:tc+" "+nc,style:{marginBottom:"20px"},children:[(0,uc.jsx)("input",{onChange:function(e){l(e.target.value)},value:c}),(0,uc.jsx)(cc,{className:ac,onClick:function(){return function(){return d.apply(this,arguments)}()}})]})},bD=n(248),kD=n(327);var wD=function(e){e()},_D=i.createContext(null);var xD=function(){throw new Error("uSES not initialized!")};var ID=n(900),SD=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function ED(e,t,n,r,i){var a,o,u,s,c,l=i.areStatesEqual,f=i.areOwnPropsEqual,d=i.areStatePropsEqual,h=!1;function p(i,h){var p=!f(h,o),v=!l(i,a);return a=i,o=h,p&&v?(u=e(a,o),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):p?(e.dependsOnOwnProps&&(u=e(a,o)),t.dependsOnOwnProps&&(s=t(r,o)),c=n(u,s,o)):v?function(){var t=e(a,o),r=!d(t,u);return u=t,r&&(c=n(u,s,o)),c}():c}return function(i,l){return h?p(i,l):(u=e(a=i,o=l),s=t(r,o),c=n(u,s,o),h=!0,c)}}function TD(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,a=Xs(t,SD);return ED(n(e,a),r(e,a),i(e,a),e,a)}function CD(e){return function(t){var n=e(t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function ND(e){return e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function AD(e,t){return function(t,n){n.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e,void 0)};return r.dependsOnOwnProps=!0,r.mapToProps=function(t,n){r.mapToProps=e,r.dependsOnOwnProps=ND(e);var i=r(t,n);return"function"===typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=ND(i),i=r(t,n)),i},r}}function RD(e,t){return function(n,r){throw new Error("Invalid value of type ".concat(typeof e," for ").concat(t," argument when connecting component ").concat(r.wrappedComponentName,"."))}}function PD(e){return e&&"object"===typeof e?CD((function(t){return function(e,t){var n={},r=function(r){var i=e[r];"function"===typeof i&&(n[r]=function(){return t(i.apply(void 0,arguments))})};for(var i in e)r(i);return n}(e,t)})):e?"function"===typeof e?AD(e):RD(e,"mapDispatchToProps"):CD((function(e){return{dispatch:e}}))}function DD(e){return e?"function"===typeof e?AD(e):RD(e,"mapStateToProps"):CD((function(){return{}}))}function OD(e,t,n){return d({},n,e,t)}function MD(e){return e?"function"===typeof e?function(e){return function(t,n){n.displayName;var r,i=n.areMergedPropsEqual,a=!1;return function(t,n,o){var u=e(t,n,o);return a?i(u,r)||(r=u):(a=!0,r=u),r}}}(e):RD(e,"mergeProps"):function(){return OD}}function LD(){var e=wD,t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,i=n={callback:e,next:null,prev:n};return i.prev?i.prev.next=i:t=i,function(){r&&null!==t&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var FD={notify:function(){},get:function(){return[]}};function UD(e,t){var n,r=FD;function i(){o.onStateChange&&o.onStateChange()}function a(){n||(n=t?t.addNestedSub(i):e.subscribe(i),r=LD())}var o={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:i,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=FD)},getListeners:function(){return r}};return o}var jD=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement)?i.useLayoutEffect:i.useEffect;function BD(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function VD(e,t){if(BD(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(t,n[i])||!BD(e[n[i]],t[n[i]]))return!1;return!0}var qD=["reactReduxForwardedRef"],zD=xD,WD=[null,null];function GD(e,t,n){jD((function(){return e.apply(void 0,ye(t))}),n)}function HD(e,t,n,r,i,a){e.current=r,n.current=!1,i.current&&(i.current=null,a())}function KD(e,t,n,r,i,a,o,u,s,c,l){if(!e)return function(){};var f=!1,d=null,h=function(){if(!f&&u.current){var e,n,h=t.getState();try{e=r(h,i.current)}catch(p){n=p,d=p}n||(d=null),e===a.current?o.current||c():(a.current=e,s.current=e,o.current=!0,l())}};n.onStateChange=h,n.trySubscribe(),h();return function(){if(f=!0,n.tryUnsubscribe(),n.onStateChange=null,d)throw d}}function QD(e,t){return e===t}var YD=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(r.pure,r.areStatesEqual),o=void 0===a?QD:a,u=r.areOwnPropsEqual,s=void 0===u?VD:u,c=r.areStatePropsEqual,l=void 0===c?VD:c,h=r.areMergedPropsEqual,p=void 0===h?VD:h,v=r.forwardRef,m=void 0!==v&&v,g=r.context,y=void 0===g?_D:g,b=y,k=DD(e),w=PD(t),_=MD(n),x=Boolean(e),I=function(e){var t=e.displayName||e.name||"Component",n="Connect(".concat(t,")"),r={shouldHandleStateChanges:x,displayName:n,wrappedComponentName:t,WrappedComponent:e,initMapStateToProps:k,initMapDispatchToProps:w,initMergeProps:_,areStatesEqual:o,areStatePropsEqual:l,areOwnPropsEqual:s,areMergedPropsEqual:p};function a(t){var n=(0,i.useMemo)((function(){var e=t.reactReduxForwardedRef,n=Xs(t,qD);return[t.context,e,n]}),[t]),a=f(n,3),o=a[0],u=a[1],s=a[2],c=(0,i.useMemo)((function(){return o&&o.Consumer&&(0,ID.isContextConsumer)(i.createElement(o.Consumer,null))?o:b}),[o,b]),l=(0,i.useContext)(c),h=Boolean(t.store)&&Boolean(t.store.getState)&&Boolean(t.store.dispatch),p=Boolean(l)&&Boolean(l.store);var v=h?t.store:l.store,m=p?l.getServerState:v.getState,g=(0,i.useMemo)((function(){return TD(v.dispatch,r)}),[v]),y=(0,i.useMemo)((function(){if(!x)return WD;var e=UD(v,h?void 0:l.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]}),[v,h,l]),k=f(y,2),w=k[0],_=k[1],I=(0,i.useMemo)((function(){return h?l:d({},l,{subscription:w})}),[h,l,w]),S=(0,i.useRef)(),E=(0,i.useRef)(s),T=(0,i.useRef)(),C=(0,i.useRef)(!1),N=((0,i.useRef)(!1),(0,i.useRef)(!1)),A=(0,i.useRef)();jD((function(){return N.current=!0,function(){N.current=!1}}),[]);var R,P=(0,i.useMemo)((function(){return function(){return T.current&&s===E.current?T.current:g(v.getState(),s)}}),[v,s]),D=(0,i.useMemo)((function(){return function(e){return w?KD(x,v,w,g,E,S,C,N,T,_,e):function(){}}}),[w]);GD(HD,[E,S,C,s,T,_]);try{R=zD(D,P,m?function(){return g(m(),s)}:P)}catch(M){throw A.current&&(M.message+="\nThe error may be correlated with this previous error:\n".concat(A.current.stack,"\n\n")),M}jD((function(){A.current=void 0,T.current=void 0,S.current=R}));var O=(0,i.useMemo)((function(){return i.createElement(e,d({},R,{ref:u}))}),[u,e,R]);return(0,i.useMemo)((function(){return x?i.createElement(c.Provider,{value:I},O):O}),[c,O,I])}var u=i.memo(a);if(u.WrappedComponent=e,u.displayName=a.displayName=n,m){var c=i.forwardRef((function(e,t){return i.createElement(u,d({},e,{reactReduxForwardedRef:t}))})),h=c;return h.displayName=n,h.WrappedComponent=e,VS()(h,e)}return VS()(u,e)};return I};var $D=function(e){var t=e.store,n=e.context,r=e.children,a=e.serverState,o=(0,i.useMemo)((function(){var e=UD(t);return{store:t,subscription:e,getServerState:a?function(){return a}:void 0}}),[t,a]),u=(0,i.useMemo)((function(){return t.getState()}),[t]);jD((function(){var e=o.subscription;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),u!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=void 0}}),[o,u]);var s=n||_D;return i.createElement(s.Provider,{value:o},r)};!function(e){e}(kD.useSyncExternalStoreWithSelector),function(e){zD=e}(bD.useSyncExternalStore),function(e){wD=e}(yE.unstable_batchedUpdates);var XD="Loader_loaderContainer__TddIx",JD="Loader_ldio-q7pgiuqi4y8__FTY15",ZD="Loader_loadingio-spinner-dual-ball-rhjg227ofs__HfdqA",eO=function(){return(0,uc.jsx)("div",{className:XD,children:(0,uc.jsx)("div",{className:ZD,children:(0,uc.jsxs)("div",{className:JD,children:[(0,uc.jsx)("div",{}),(0,uc.jsx)("div",{}),(0,uc.jsx)("div",{})]})})})},tO="ModalDialog_modalDialog__FnbF+",nO="ModalDialog_visible__CybqB",rO="ModalDialog_content__eiwJE",iO="ModalDialog_btns__MJSxE",aO=["modalVisible","setModalVisible","clearCompleted","eng"],oO=function(e){var t=e.modalVisible,n=e.setModalVisible,r=e.clearCompleted,i=e.eng;Js(e,aO);return(0,uc.jsx)("div",{className:t?tO+" "+nO:tO,onClick:function(){return n((function(e){return!e}))},children:(0,uc.jsxs)("div",{className:rO,onClick:function(e){e.stopPropagation()},children:[(0,uc.jsx)("div",{children:i?"Are you sure?":"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b"}),(0,uc.jsxs)("div",{className:iO,children:[(0,uc.jsx)("button",{onClick:function(){n(!1),r()},children:i?"Yes":"\u0414\u0430"}),(0,uc.jsx)("button",{onClick:function(){n(!1)},children:i?"No":"\u041d\u0435\u0442"})]})]})})};var uO,sO=YD((function(e){return{lang:e.lang.lang,isDarkTheme:e.theme.isDarkTheme}}))((function(e){var t=(0,i.useContext)(xY),n=t.auth,r=t.firestore,a=f(Ys(n),1)[0].uid,o=f((0,i.useState)([]),2),u=(o[0],o[1],Ox(r,"users","".concat(a))),s=f(_S(u),4),c=s[0],l=(s[1],s[2],s[3],f((0,i.useState)("all"),2)),d=l[0],h=l[1],p=function(e){var t=ye(c.tasks);t.splice(e,1);var n=Et(Et({},c),{},{tasks:t});aS(u,n),console.log(n)},v={};e.isDarkTheme||(v={backgroundColor:"white",color:"hsl(235, 24%, 19%)"});var m=f((0,i.useState)(!1),2),g=m[0],y=m[1];return c?(0,uc.jsxs)("div",{className:$s.tasks,children:[(0,uc.jsx)(oO,{clearCompleted:function(){var e=Et(Et({},c),{},{tasks:c.tasks.filter((function(e){return e.isActive}))});aS(u,e)},eng:e.lang,modalVisible:g,setModalVisible:y}),(0,uc.jsx)(yD,{isDarkTheme:e.isDarkTheme,userData:c}),(0,uc.jsx)("div",{style:v,className:$s.tasksWindow,children:(0,uc.jsx)(qA,{onDragEnd:function(e){if(e.destination){var t=function(e,t,n){var r=Array.from(e),i=f(r.splice(t,1),1)[0];return r.splice(n,0,i),r}(c.tasks,e.source.index,e.destination.index),n=Et(Et({},c),{},{tasks:t});aS(u,n)}},children:(0,uc.jsx)(CR,{droppableId:"0",children:function(e){return(0,uc.jsxs)("div",Et(Et({style:v,className:$s.tasksList,ref:e.innerRef},e.droppableProps),{},{children:["active"==d?c.tasks.map((function(e,t){if(e.isActive)return(0,uc.jsx)(AR,{step:t,handleDelete:p,tasks:c.tasks,task:e,children:e.text},e.id)})):"completed"==d?c.tasks.map((function(e,t){if(!e.isActive)return(0,uc.jsx)(AR,{step:t,handleDelete:p,tasks:c.tasks,task:e,children:e.text},e.id)})):c.tasks.map((function(e,t){return(0,uc.jsx)(AR,{step:t,handleDelete:p,tasks:c.tasks,task:e,children:e.text},e.id)})),e.placeholder]}))}})})}),(0,uc.jsxs)("div",{style:v,className:$s.queries,children:[c.tasks!=={}?(0,uc.jsxs)("div",{children:[c.tasks.filter((function(e){return e.isActive})).length," ",e.lang?"items left":"\u0437\u0430\u0434\u0430\u043d\u0438(\u0439/\u044f/\u0435)"]}):"",(0,uc.jsxs)("div",{className:$s.activity,children:[(0,uc.jsx)("button",{style:v,onClick:function(){return h("all")},children:e.lang?"All":"\u0412\u0441\u0435"}),(0,uc.jsx)("button",{style:v,onClick:function(){return h("active")},children:e.lang?"Active":"\u0412 \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435"}),(0,uc.jsx)("button",{style:v,onClick:function(){return h("completed")},children:e.lang?"Completed":"\u0417\u0430\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u044b\u0435"})]}),(0,uc.jsx)("button",{onClick:function(){return y(!0)},style:v,children:e.lang?"Clear completed":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u0432\u0435\u0440\u0448\u0451\u043d\u043d\u044b\u0435"})]})]}):(0,uc.jsx)(eO,{})})),cO={loginContainer:"Login_loginContainer__R3q0o",login:"Login_login__z24MN",title:"Login_title__1MgD2",next:"Login_next__CmYMl",content:"Login_content__pcMw7",active:"Login_active__7-01s",contentInner:"Login_contentInner__jV8Xq"},lO=function(){function e(t,n){var r=this;pe(this,e),this._delegate=t,this.firebase=n,en(t,new dt("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return me(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),pn(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$t;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){en(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){tn(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),fO=(be(uO={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),be(uO,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),uO),dO=new We("app-compat","Firebase",fO);var hO=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=fn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if($e(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:mn,setLogLevel:yn,onLog:gn,apps:null,SDK_VERSION:ln,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(nn(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw dO.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&Pe(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!$e(n,e=e||$t))throw dO.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(lO);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Pe(n,e)},createSubscribe:ot,ErrorFactory:We,deepExtend:Pe}),n}(),pO=new It("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){pO.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var vO=self.firebase.SDK_VERSION;vO&&vO.indexOf("LITE")>=0&&pO.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var mO=hO;!function(e){mn("@firebase/app-compat","0.1.26",e)}();mO.registerVersion("firebase","9.8.2","app-compat");var gO={myinput:"MyInput_myinput__APJYA",clicked:"MyInput_clicked__IXeg1"},yO=["visible","label"],bO=function(e){e.visible;var t=e.label,n=Js(e,yO),r=f((0,i.useState)(!0),2),a=r[0],o=r[1],u=f((0,i.useState)(""),2),s=(u[0],u[1],[gO.myinput]);return a&&s.push(gO.clicked),(0,uc.jsxs)("div",{className:s.join(" "),children:[(0,uc.jsx)("label",{htmlFor:gO.idd,children:t}),(0,uc.jsx)("input",Et(Et({},n),{},{id:gO.idd,onFocus:function(e){return o(!0)},onBlur:function(e){e.target.value||o(!1)}}))]})};function kO(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=kO(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var wO=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=kO(e))&&(r&&(r+=" "),r+=t);return r};function _O(e,t,n){var r={};return Object.keys(e).forEach((function(i){r[i]=e[i].reduce((function(e,r){return r&&(n&&n[r]&&e.push(n[r]),e.push(t(r))),e}),[]).join(" ")})),r}function xO(e){for(var t="https://mui.com/production-error/?code="+e,n=1;n<arguments.length;n+=1)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function IO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(t,e),n)}function SO(e){if(e.type)return e;if("#"===e.charAt(0))return SO(function(e){e=e.slice(1);var t=new RegExp(".{1,".concat(e.length>=6?2:1,"}"),"g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map((function(e){return e+e}))),n?"rgb".concat(4===n.length?"a":"","(").concat(n.map((function(e,t){return t<3?parseInt(e,16):Math.round(parseInt(e,16)/255*1e3)/1e3})).join(", "),")"):""}(e));var t=e.indexOf("("),n=e.substring(0,t);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(n))throw new Error(xO(9,e));var r,i=e.substring(t+1,e.length-1);if("color"===n){if(r=(i=i.split(" ")).shift(),4===i.length&&"/"===i[3].charAt(0)&&(i[3]=i[3].slice(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(r))throw new Error(xO(10,r))}else i=i.split(",");return{type:n,values:i=i.map((function(e){return parseFloat(e)})),colorSpace:r}}function EO(e){var t=e.type,n=e.colorSpace,r=e.values;return-1!==t.indexOf("rgb")?r=r.map((function(e,t){return t<3?parseInt(e,10):e})):-1!==t.indexOf("hsl")&&(r[1]="".concat(r[1],"%"),r[2]="".concat(r[2],"%")),r=-1!==t.indexOf("color")?"".concat(n," ").concat(r.join(" ")):"".concat(r.join(", ")),"".concat(t,"(").concat(r,")")}function TO(e){var t="hsl"===(e=SO(e)).type?SO(function(e){var t=(e=SO(e)).values,n=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+n/30)%12;return i-a*Math.max(Math.min(t-3,9-t,1),-1)},u="rgb",s=[Math.round(255*o(0)),Math.round(255*o(8)),Math.round(255*o(4))];return"hsla"===e.type&&(u+="a",s.push(t[3])),EO({type:u,values:s})}(e)).values:e.values;return t=t.map((function(t){return"color"!==e.type&&(t/=255),t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)})),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function CO(e,t){return e=SO(e),t=IO(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),"color"===e.type?e.values[3]="/".concat(t):e.values[3]=t,EO(e)}function NO(e,t){if(e=SO(e),t=IO(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb")||-1!==e.type.indexOf("color"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return EO(e)}function AO(e,t){if(e=SO(e),t=IO(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;else if(-1!==e.type.indexOf("color"))for(var r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return EO(e)}var RO=function(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}},PO=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,DO=RO((function(e){return PO.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91}));var OO=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),MO=Math.abs,LO=String.fromCharCode,FO=Object.assign;function UO(e){return e.trim()}function jO(e,t,n){return e.replace(t,n)}function BO(e,t){return e.indexOf(t)}function VO(e,t){return 0|e.charCodeAt(t)}function qO(e,t,n){return e.slice(t,n)}function zO(e){return e.length}function WO(e){return e.length}function GO(e,t){return t.push(e),e}var HO=1,KO=1,QO=0,YO=0,$O=0,XO="";function JO(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:HO,column:KO,length:o,return:""}}function ZO(e,t){return FO(JO("",null,null,"",null,null,0),e,{length:-e.length},t)}function eM(){return $O=YO>0?VO(XO,--YO):0,KO--,10===$O&&(KO=1,HO--),$O}function tM(){return $O=YO<QO?VO(XO,YO++):0,KO++,10===$O&&(KO=1,HO++),$O}function nM(){return VO(XO,YO)}function rM(){return YO}function iM(e,t){return qO(XO,e,t)}function aM(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function oM(e){return HO=KO=1,QO=zO(XO=e),YO=0,[]}function uM(e){return XO="",e}function sM(e){return UO(iM(YO-1,fM(91===e?e+2:40===e?e+1:e)))}function cM(e){for(;($O=nM())&&$O<33;)tM();return aM(e)>2||aM($O)>3?"":" "}function lM(e,t){for(;--t&&tM()&&!($O<48||$O>102||$O>57&&$O<65||$O>70&&$O<97););return iM(e,rM()+(t<6&&32==nM()&&32==tM()))}function fM(e){for(;tM();)switch($O){case e:return YO;case 34:case 39:34!==e&&39!==e&&fM($O);break;case 40:41===e&&fM(e);break;case 92:tM()}return YO}function dM(e,t){for(;tM()&&e+$O!==57&&(e+$O!==84||47!==nM()););return"/*"+iM(t,YO-1)+"*"+LO(47===e?e:tM())}function hM(e){for(;!aM(nM());)tM();return iM(e,YO)}var pM="-ms-",vM="-moz-",mM="-webkit-",gM="comm",yM="rule",bM="decl",kM="@keyframes";function wM(e,t){for(var n="",r=WO(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function _M(e,t,n,r){switch(e.type){case"@import":case bM:return e.return=e.return||e.value;case gM:return"";case kM:return e.return=e.value+"{"+wM(e.children,r)+"}";case yM:e.value=e.props.join(",")}return zO(n=wM(e.children,r))?e.return=e.value+"{"+n+"}":""}function xM(e,t){switch(function(e,t){return(((t<<2^VO(e,0))<<2^VO(e,1))<<2^VO(e,2))<<2^VO(e,3)}(e,t)){case 5103:return mM+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return mM+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return mM+e+vM+e+pM+e+e;case 6828:case 4268:return mM+e+pM+e+e;case 6165:return mM+e+pM+"flex-"+e+e;case 5187:return mM+e+jO(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return mM+e+pM+"flex-item-"+jO(e,/flex-|-self/,"")+e;case 4675:return mM+e+pM+"flex-line-pack"+jO(e,/align-content|flex-|-self/,"")+e;case 5548:return mM+e+pM+jO(e,"shrink","negative")+e;case 5292:return mM+e+pM+jO(e,"basis","preferred-size")+e;case 6060:return mM+"box-"+jO(e,"-grow","")+mM+e+pM+jO(e,"grow","positive")+e;case 4554:return mM+jO(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return jO(jO(jO(e,/(zoom-|grab)/,mM+"$1"),/(image-set)/,mM+"$1"),e,"")+e;case 5495:case 3959:return jO(e,/(image-set\([^]*)/,mM+"$1$`$1");case 4968:return jO(jO(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+mM+e+e;case 4095:case 3583:case 4068:case 2532:return jO(e,/(.+)-inline(.+)/,mM+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zO(e)-1-t>6)switch(VO(e,t+1)){case 109:if(45!==VO(e,t+4))break;case 102:return jO(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+vM+(108==VO(e,t+3)?"$3":"$2-$3"))+e;case 115:return~BO(e,"stretch")?xM(jO(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==VO(e,t+1))break;case 6444:switch(VO(e,zO(e)-3-(~BO(e,"!important")&&10))){case 107:return jO(e,":",":"+mM)+e;case 101:return jO(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+mM+(45===VO(e,14)?"inline-":"")+"box$3$1"+mM+"$2$3$1"+pM+"$2box$3")+e}break;case 5936:switch(VO(e,t+11)){case 114:return mM+e+pM+jO(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return mM+e+pM+jO(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return mM+e+pM+jO(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return mM+e+pM+e+e}return e}function IM(e){return function(t){t.root||(t=t.return)&&e(t)}}function SM(e){return uM(EM("",null,null,null,[""],e=oM(e),0,[0],e))}function EM(e,t,n,r,i,a,o,u,s){for(var c=0,l=0,f=o,d=0,h=0,p=0,v=1,m=1,g=1,y=0,b="",k=i,w=a,_=r,x=b;m;)switch(p=y,y=tM()){case 40:if(108!=p&&58==x.charCodeAt(f-1)){-1!=BO(x+=jO(sM(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:x+=sM(y);break;case 9:case 10:case 13:case 32:x+=cM(p);break;case 92:x+=lM(rM()-1,7);continue;case 47:switch(nM()){case 42:case 47:GO(CM(dM(tM(),rM()),t,n),s);break;default:x+="/"}break;case 123*v:u[c++]=zO(x)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+l:h>0&&zO(x)-f&&GO(h>32?NM(x+";",r,n,f-1):NM(jO(x," ","")+";",r,n,f-2),s);break;case 59:x+=";";default:if(GO(_=TM(x,t,n,c,l,i,u,b,k=[],w=[],f),a),123===y)if(0===l)EM(x,t,_,_,k,a,f,u,w);else switch(d){case 100:case 109:case 115:EM(e,_,_,r&&GO(TM(e,_,_,0,0,i,u,b,i,k=[],f),w),i,w,f,u,r?k:w);break;default:EM(x,_,_,_,[""],w,0,u,w)}}c=l=h=0,v=g=1,b=x="",f=o;break;case 58:f=1+zO(x),h=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==eM())continue;switch(x+=LO(y),y*v){case 38:g=l>0?1:(x+="\f",-1);break;case 44:u[c++]=(zO(x)-1)*g,g=1;break;case 64:45===nM()&&(x+=sM(tM())),d=nM(),l=f=zO(b=x+=hM(rM())),y++;break;case 45:45===p&&2==zO(x)&&(v=0)}}return a}function TM(e,t,n,r,i,a,o,u,s,c,l){for(var f=i-1,d=0===i?a:[""],h=WO(d),p=0,v=0,m=0;p<r;++p)for(var g=0,y=qO(e,f+1,f=MO(v=o[p])),b=e;g<h;++g)(b=UO(v>0?d[g]+" "+y:jO(y,/&\f/g,d[g])))&&(s[m++]=b);return JO(e,t,n,0===i?yM:u,s,c,l)}function CM(e,t,n){return JO(e,t,n,gM,LO($O),qO(e,2,-2),0)}function NM(e,t,n,r){return JO(e,t,n,bM,qO(e,0,r),qO(e,r+1,-1),r)}var AM=function(e,t,n){for(var r=0,i=0;r=i,i=nM(),38===r&&12===i&&(t[n]=1),!aM(i);)tM();return iM(e,YO)},RM=function(e,t){return uM(function(e,t){var n=-1,r=44;do{switch(aM(r)){case 0:38===r&&12===nM()&&(t[n]=1),e[n]+=AM(YO-1,t,n);break;case 2:e[n]+=sM(r);break;case 4:if(44===r){e[++n]=58===nM()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=LO(r)}}while(r=tM());return e}(oM(e),t))},PM=new WeakMap,DM=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||PM.get(n))&&!r){PM.set(e,!0);for(var i=[],a=RM(t,i),o=n.props,u=0,s=0;u<a.length;u++)for(var c=0;c<o.length;c++,s++)e.props[s]=i[u]?a[u].replace(/&\f/g,o[c]):o[c]+" "+a[u]}}},OM=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},MM=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case bM:e.return=xM(e.value,e.length);break;case kM:return wM([ZO(e,{value:jO(e.value,"@","@"+mM)})],r);case yM:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return wM([ZO(e,{props:[jO(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return wM([ZO(e,{props:[jO(t,/:(plac\w+)/,":-webkit-input-$1")]}),ZO(e,{props:[jO(t,/:(plac\w+)/,":-moz-$1")]}),ZO(e,{props:[jO(t,/:(plac\w+)/,pM+"input-$1")]})],r)}return""}))}}],LM=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||MM;var i,a,o={},u=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;u.push(e)}));var s=[DM,OM];var c,l=[_M,IM((function(e){c.insert(e)}))],f=function(e){var t=WO(e);return function(n,r,i,a){for(var o="",u=0;u<t;u++)o+=e[u](n,r,i,a)||"";return o}}(s.concat(r,l));a=function(e,t,n,r){c=n,wM(SM(e?e+"{"+t.styles+"}":t.styles),f),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new OO({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:a};return d.sheet.hydrate(u),d};var FM=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)},UM={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jM=/[A-Z]|^ms/g,BM=/_EMO_([^_]+?)_([^]*?)_EMO_/g,VM=function(e){return 45===e.charCodeAt(1)},qM=function(e){return null!=e&&"boolean"!==typeof e},zM=RO((function(e){return VM(e)?e:e.replace(jM,"-$&").toLowerCase()})),WM=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(BM,(function(e,t,n){return HM={name:t,styles:n,next:HM},t}))}return 1===UM[e]||VM(e)||"number"!==typeof t||0===t?t:t+"px"};function GM(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return HM={name:n.name,styles:n.styles,next:HM},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)HM={name:r.name,styles:r.styles,next:HM},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=GM(e,t,n[i])+";";else for(var a in n){var o=n[a];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=a+"{"+t[o]+"}":qM(o)&&(r+=zM(a)+":"+WM(a,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var u=GM(e,t,o);switch(a){case"animation":case"animationName":r+=zM(a)+":"+u+";";break;default:r+=a+"{"+u+"}"}}else for(var s=0;s<o.length;s++)qM(o[s])&&(r+=zM(a)+":"+WM(a,o[s])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=HM,a=n(e);return HM=i,GM(e,t,a)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var HM,KM=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var QM=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";HM=void 0;var a=e[0];null==a||void 0===a.raw?(r=!1,i+=GM(n,t,a)):i+=a[0];for(var o=1;o<e.length;o++)i+=GM(n,t,e[o]),r&&(i+=a[o]);KM.lastIndex=0;for(var u,s="";null!==(u=KM.exec(i));)s+="-"+u[1];return{name:FM(i)+s,styles:i,next:HM}},YM=(0,i.createContext)("undefined"!==typeof HTMLElement?LM({key:"css"}):null);YM.Provider;var $M=function(e){return(0,i.forwardRef)((function(t,n){var r=(0,i.useContext)(YM);return e(t,r,n)}))},XM=(0,i.createContext)({});a.useInsertionEffect&&a.useInsertionEffect;function JM(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var ZM=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},eL=DO,tL=function(e){return"theme"!==e},nL=function(e){return"string"===typeof e&&e.charCodeAt(0)>96?eL:tL},rL=function(e,t,n){var r;if(t){var i=t.shouldForwardProp;r=e.__emotion_forwardProp&&i?function(t){return e.__emotion_forwardProp(t)&&i(t)}:i}return"function"!==typeof r&&n&&(r=e.__emotion_forwardProp),r},iL=a.useInsertionEffect?a.useInsertionEffect:function(e){e()};var aL=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;ZM(t,n,r);!function(e){iL(e)}((function(){return function(e,t,n){ZM(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)}));return null},oL=function e(t,n){var r,a,o=t.__emotion_real===t,u=o&&t.__emotion_base||t;void 0!==n&&(r=n.label,a=n.target);var s=rL(t,n,o),c=s||nL(u),l=!c("as");return function(){var f=arguments,h=o&&void 0!==t.__emotion_styles?t.__emotion_styles.slice(0):[];if(void 0!==r&&h.push("label:"+r+";"),null==f[0]||void 0===f[0].raw)h.push.apply(h,f);else{0,h.push(f[0][0]);for(var p=f.length,v=1;v<p;v++)h.push(f[v],f[0][v])}var m=$M((function(e,t,n){var r=l&&e.as||u,o="",f=[],d=e;if(null==e.theme){for(var p in d={},e)d[p]=e[p];d.theme=(0,i.useContext)(XM)}"string"===typeof e.className?o=JM(t.registered,f,e.className):null!=e.className&&(o=e.className+" ");var v=QM(h.concat(f),t.registered,d);o+=t.key+"-"+v.name,void 0!==a&&(o+=" "+a);var m=l&&void 0===s?nL(r):c,g={};for(var y in e)l&&"as"===y||m(y)&&(g[y]=e[y]);return g.className=o,g.ref=n,(0,i.createElement)(i.Fragment,null,(0,i.createElement)(aL,{cache:t,serialized:v,isStringTag:"string"===typeof r}),(0,i.createElement)(r,g))}));return m.displayName=void 0!==r?r:"Styled("+("string"===typeof u?u:u.displayName||u.name||"Component")+")",m.defaultProps=t.defaultProps,m.__emotion_real=m,m.__emotion_base=u,m.__emotion_styles=h,m.__emotion_forwardProp=s,Object.defineProperty(m,"toString",{value:function(){return"."+a}}),m.withComponent=function(t,r){return e(t,d({},n,r,{shouldForwardProp:rL(m,r,!0)})).apply(void 0,h)},m}},uL=oL.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(e){uL[e]=uL(e)}));var sL=uL;function cL(e,t){return sL(e,t)}function lL(e){return null!==e&&"object"===typeof e&&e.constructor===Object}function fL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},r=n.clone?d({},e):e;return lL(e)&&lL(t)&&Object.keys(t).forEach((function(i){"__proto__"!==i&&(lL(t[i])&&i in e&&lL(e[i])?r[i]=fL(e[i],t[i],n):r[i]=t[i])})),r}var dL=["values","unit","step"];function hL(e){var t=e.values,n=void 0===t?{xs:0,sm:600,md:900,lg:1200,xl:1536}:t,r=e.unit,i=void 0===r?"px":r,a=e.step,o=void 0===a?5:a,u=Xs(e,dL),s=function(e){var t=Object.keys(e).map((function(t){return{key:t,val:e[t]}}))||[];return t.sort((function(e,t){return e.val-t.val})),t.reduce((function(e,t){return d({},e,be({},t.key,t.val))}),{})}(n),c=Object.keys(s);function l(e){var t="number"===typeof n[e]?n[e]:e;return"@media (min-width:".concat(t).concat(i,")")}function f(e){var t="number"===typeof n[e]?n[e]:e;return"@media (max-width:".concat(t-o/100).concat(i,")")}function h(e,t){var r=c.indexOf(t);return"@media (min-width:".concat("number"===typeof n[e]?n[e]:e).concat(i,") and ")+"(max-width:".concat((-1!==r&&"number"===typeof n[c[r]]?n[c[r]]:t)-o/100).concat(i,")")}return d({keys:c,values:s,up:l,down:f,between:h,only:function(e){return c.indexOf(e)+1<c.length?h(e,c[c.indexOf(e)+1]):l(e)},not:function(e){var t=c.indexOf(e);return 0===t?l(c[1]):t===c.length-1?f(c[t]):h(e,c[c.indexOf(e)+1]).replace("@media","@media not all and")},unit:i},u)}var pL={borderRadius:4},vL={xs:0,sm:600,md:900,lg:1200,xl:1536},mL={keys:["xs","sm","md","lg","xl"],up:function(e){return"@media (min-width:".concat(vL[e],"px)")}};function gL(e,t,n){var r=e.theme||{};if(Array.isArray(t)){var i=r.breakpoints||mL;return t.reduce((function(e,r,a){return e[i.up(i.keys[a])]=n(t[a]),e}),{})}if("object"===typeof t){var a=r.breakpoints||mL;return Object.keys(t).reduce((function(e,r){if(-1!==Object.keys(a.values||vL).indexOf(r)){e[a.up(r)]=n(t[r],r)}else{var i=r;e[i]=t[i]}return e}),{})}return n(t)}function yL(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=null==(e=t.keys)?void 0:e.reduce((function(e,n){return e[t.up(n)]={},e}),{});return n||{}}function bL(e,t){return e.reduce((function(e,t){var n=e[t];return(!n||0===Object.keys(n).length)&&delete e[t],e}),t)}function kL(e){if("string"!==typeof e)throw new Error(xO(7));return e.charAt(0).toUpperCase()+e.slice(1)}function wL(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t||"string"!==typeof t)return null;if(e&&e.vars&&n){var r="vars.".concat(t).split(".").reduce((function(e,t){return e&&e[t]?e[t]:null}),e);if(null!=r)return r}return t.split(".").reduce((function(e,t){return e&&null!=e[t]?e[t]:null}),e)}function _L(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return r="function"===typeof e?e(n):Array.isArray(e)?e[n]||i:wL(e,n)||i,t&&(r=t(r)),r}var xL=function(e){var t=e.prop,n=e.cssProperty,r=void 0===n?e.prop:n,i=e.themeKey,a=e.transform,o=function(e){if(null==e[t])return null;var n=e[t],o=wL(e.theme,i)||{};return gL(e,n,(function(e){var n=_L(o,a,e);return e===n&&"string"===typeof e&&(n=_L(o,a,"".concat(t).concat("default"===e?"":kL(e)),e)),!1===r?n:be({},r,n)}))};return o.propTypes={},o.filterProps=[t],o};var IL=function(e,t){return t?fL(e,t,{clone:!1}):e};var SL={m:"margin",p:"padding"},EL={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},TL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},CL=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}((function(e){if(e.length>2){if(!TL[e])return[e];e=TL[e]}var t=f(e.split(""),2),n=t[0],r=t[1],i=SL[n],a=EL[r]||"";return Array.isArray(a)?a.map((function(e){return i+e})):[i+a]})),NL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],AL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],RL=[].concat(NL,AL);function PL(e,t,n,r){var i,a=null!=(i=wL(e,t,!1))?i:n;return"number"===typeof a?function(e){return"string"===typeof e?e:a*e}:Array.isArray(a)?function(e){return"string"===typeof e?e:a[e]}:"function"===typeof a?a:function(){}}function DL(e){return PL(e,"spacing",8)}function OL(e,t){if("string"===typeof t||null==t)return t;var n=e(Math.abs(t));return t>=0?n:"number"===typeof n?-n:"-".concat(n)}function ML(e,t,n,r){if(-1===t.indexOf(n))return null;var i=function(e,t){return function(n){return e.reduce((function(e,r){return e[r]=OL(t,n),e}),{})}}(CL(n),r);return gL(e,e[n],i)}function LL(e,t){var n=DL(e.theme);return Object.keys(e).map((function(r){return ML(e,t,r,n)})).reduce(IL,{})}function FL(e){return LL(e,NL)}function UL(e){return LL(e,AL)}function jL(e){return LL(e,RL)}FL.propTypes={},FL.filterProps=NL,UL.propTypes={},UL.filterProps=AL,jL.propTypes={},jL.filterProps=RL;var BL=jL;function VL(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(e.mui)return e;var t=DL({spacing:e}),n=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=0===n.length?[1]:n;return i.map((function(e){var n=t(e);return"number"===typeof n?"".concat(n,"px"):n})).join(" ")};return n.mui=!0,n}var qL=["breakpoints","palette","spacing","shape"];var zL=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.breakpoints,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.spacing,o=e.shape,u=void 0===o?{}:o,s=Xs(e,qL),c=hL(n),l=VL(a),f=fL({breakpoints:c,direction:"ltr",components:{},palette:d({mode:"light"},i),spacing:l,shape:d({},pL,u)},s),h=arguments.length,p=new Array(h>1?h-1:0),v=1;v<h;v++)p[v-1]=arguments[v];return f=p.reduce((function(e,t){return fL(e,t)}),f)},WL=["variant"];function GL(e){return 0===e.length}function HL(e){var t=e.variant,n=Xs(e,WL),r=t||"";return Object.keys(n).sort().forEach((function(t){r+="color"===t?GL(r)?e[t]:kL(e[t]):"".concat(GL(r)?t:kL(t)).concat(kL(e[t].toString()))})),r}var KL=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return t.filterProps.forEach((function(n){e[n]=t})),e}),{}),i=function(e){return Object.keys(e).reduce((function(t,n){return r[n]?IL(t,r[n](e)):t}),{})};return i.propTypes={},i.filterProps=t.reduce((function(e,t){return e.concat(t.filterProps)}),[]),i};function QL(e){return"number"!==typeof e?e:"".concat(e,"px solid")}var YL=xL({prop:"border",themeKey:"borders",transform:QL}),$L=xL({prop:"borderTop",themeKey:"borders",transform:QL}),XL=xL({prop:"borderRight",themeKey:"borders",transform:QL}),JL=xL({prop:"borderBottom",themeKey:"borders",transform:QL}),ZL=xL({prop:"borderLeft",themeKey:"borders",transform:QL}),eF=xL({prop:"borderColor",themeKey:"palette"}),tF=xL({prop:"borderTopColor",themeKey:"palette"}),nF=xL({prop:"borderRightColor",themeKey:"palette"}),rF=xL({prop:"borderBottomColor",themeKey:"palette"}),iF=xL({prop:"borderLeftColor",themeKey:"palette"}),aF=function(e){if(void 0!==e.borderRadius&&null!==e.borderRadius){var t=PL(e.theme,"shape.borderRadius",4);return gL(e,e.borderRadius,(function(e){return{borderRadius:OL(t,e)}}))}return null};aF.propTypes={},aF.filterProps=["borderRadius"];var oF=KL(YL,$L,XL,JL,ZL,eF,tF,nF,rF,iF,aF),uF=KL(xL({prop:"displayPrint",cssProperty:!1,transform:function(e){return{"@media print":{display:e}}}}),xL({prop:"display"}),xL({prop:"overflow"}),xL({prop:"textOverflow"}),xL({prop:"visibility"}),xL({prop:"whiteSpace"})),sF=KL(xL({prop:"flexBasis"}),xL({prop:"flexDirection"}),xL({prop:"flexWrap"}),xL({prop:"justifyContent"}),xL({prop:"alignItems"}),xL({prop:"alignContent"}),xL({prop:"order"}),xL({prop:"flex"}),xL({prop:"flexGrow"}),xL({prop:"flexShrink"}),xL({prop:"alignSelf"}),xL({prop:"justifyItems"}),xL({prop:"justifySelf"})),cF=function(e){if(void 0!==e.gap&&null!==e.gap){var t=PL(e.theme,"spacing",8);return gL(e,e.gap,(function(e){return{gap:OL(t,e)}}))}return null};cF.propTypes={},cF.filterProps=["gap"];var lF=function(e){if(void 0!==e.columnGap&&null!==e.columnGap){var t=PL(e.theme,"spacing",8);return gL(e,e.columnGap,(function(e){return{columnGap:OL(t,e)}}))}return null};lF.propTypes={},lF.filterProps=["columnGap"];var fF=function(e){if(void 0!==e.rowGap&&null!==e.rowGap){var t=PL(e.theme,"spacing",8);return gL(e,e.rowGap,(function(e){return{rowGap:OL(t,e)}}))}return null};fF.propTypes={},fF.filterProps=["rowGap"];var dF=KL(cF,lF,fF,xL({prop:"gridColumn"}),xL({prop:"gridRow"}),xL({prop:"gridAutoFlow"}),xL({prop:"gridAutoColumns"}),xL({prop:"gridAutoRows"}),xL({prop:"gridTemplateColumns"}),xL({prop:"gridTemplateRows"}),xL({prop:"gridTemplateAreas"}),xL({prop:"gridArea"})),hF=KL(xL({prop:"position"}),xL({prop:"zIndex",themeKey:"zIndex"}),xL({prop:"top"}),xL({prop:"right"}),xL({prop:"bottom"}),xL({prop:"left"})),pF=KL(xL({prop:"color",themeKey:"palette"}),xL({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),xL({prop:"backgroundColor",themeKey:"palette"})),vF=xL({prop:"boxShadow",themeKey:"shadows"});function mF(e){return e<=1&&0!==e?"".concat(100*e,"%"):e}var gF=xL({prop:"width",transform:mF}),yF=function(e){if(void 0!==e.maxWidth&&null!==e.maxWidth){return gL(e,e.maxWidth,(function(t){var n,r,i;return{maxWidth:(null==(n=e.theme)||null==(r=n.breakpoints)||null==(i=r.values)?void 0:i[t])||vL[t]||mF(t)}}))}return null};yF.filterProps=["maxWidth"];var bF=xL({prop:"minWidth",transform:mF}),kF=xL({prop:"height",transform:mF}),wF=xL({prop:"maxHeight",transform:mF}),_F=xL({prop:"minHeight",transform:mF}),xF=(xL({prop:"size",cssProperty:"width",transform:mF}),xL({prop:"size",cssProperty:"height",transform:mF}),KL(gF,yF,bF,kF,wF,_F,xL({prop:"boxSizing"}))),IF=xL({prop:"fontFamily",themeKey:"typography"}),SF=xL({prop:"fontSize",themeKey:"typography"}),EF=xL({prop:"fontStyle",themeKey:"typography"}),TF=xL({prop:"fontWeight",themeKey:"typography"}),CF=xL({prop:"letterSpacing"}),NF=xL({prop:"textTransform"}),AF=xL({prop:"lineHeight"}),RF=xL({prop:"textAlign"}),PF=KL(xL({prop:"typography",cssProperty:!1,themeKey:"typography"}),IF,SF,EF,TF,CF,AF,RF,NF),DF={borders:oF.filterProps,display:uF.filterProps,flexbox:sF.filterProps,grid:dF.filterProps,positions:hF.filterProps,palette:pF.filterProps,shadows:vF.filterProps,sizing:xF.filterProps,spacing:BL.filterProps,typography:PF.filterProps},OF={borders:oF,display:uF,flexbox:sF,grid:dF,positions:hF,palette:pF,shadows:vF,sizing:xF,spacing:BL,typography:PF};Object.keys(DF).reduce((function(e,t){return DF[t].forEach((function(n){e[n]=OF[t]})),e}),{});function MF(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.reduce((function(e,t){return e.concat(Object.keys(t))}),[]),i=new Set(r);return t.every((function(e){return i.size===Object.keys(e).length}))}function LF(e,t){return"function"===typeof e?e(t):e}var FF=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:OF,t=Object.keys(e).reduce((function(t,n){return e[n].filterProps.forEach((function(r){t[r]=e[n]})),t}),{});function n(e,n,r){var i,a=(be(i={},e,n),be(i,"theme",r),i),o=t[e];return o?o(a):be({},e,n)}function r(e){var i=e||{},a=i.sx,o=i.theme,u=void 0===o?{}:o;if(!a)return null;function s(e){var i=e;if("function"===typeof e)i=e(u);else if("object"!==typeof e)return e;if(!i)return null;var a=yL(u.breakpoints),o=Object.keys(a),s=a;return Object.keys(i).forEach((function(e){var a=LF(i[e],u);if(null!==a&&void 0!==a)if("object"===typeof a)if(t[e])s=IL(s,n(e,a,u));else{var o=gL({theme:u},a,(function(t){return be({},e,t)}));MF(o,a)?s[e]=r({sx:a,theme:u}):s=IL(s,o)}else s=IL(s,n(e,a,u))})),bL(o,s)}return Array.isArray(a)?a.map(s):s(a)}return r}();FF.filterProps=["sx"];var UF=FF,jF=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],BF=["theme"],VF=["theme"];function qF(e){return 0===Object.keys(e).length}var zF=function(e,t){return t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null},WF=function(e,t){var n=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(n=t.components[e].variants);var r={};return n.forEach((function(e){var t=HL(e.props);r[t]=e.style})),r},GF=function(e,t,n,r){var i,a,o=e.ownerState,u=void 0===o?{}:o,s=[],c=null==n||null==(i=n.components)||null==(a=i[r])?void 0:a.variants;return c&&c.forEach((function(n){var r=!0;Object.keys(n.props).forEach((function(t){u[t]!==n.props[t]&&e[t]!==n.props[t]&&(r=!1)})),r&&s.push(t[HL(n.props)])})),s};function HF(e){return"ownerState"!==e&&"theme"!==e&&"sx"!==e&&"as"!==e}var KF=zL();function QF(e,t){var n;return d({toolbar:(n={minHeight:56},be(n,e.up("xs"),{"@media (orientation: landscape)":{minHeight:48}}),be(n,e.up("sm"),{minHeight:64}),n)},t)}var YF={black:"#000",white:"#fff"},$F={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},XF={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},JF={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ZF={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},eU={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},tU={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},nU={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},rU=["mode","contrastThreshold","tonalOffset"],iU={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:YF.white,default:YF.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},aU={text:{primary:YF.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:YF.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function oU(e,t,n,r){var i=r.light||r,a=r.dark||1.5*r;e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=AO(e.main,i):"dark"===t&&(e.dark=NO(e.main,a)))}function uU(e){var t=e.mode,n=void 0===t?"light":t,r=e.contrastThreshold,i=void 0===r?3:r,a=e.tonalOffset,o=void 0===a?.2:a,u=Xs(e,rU),s=e.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:eU[200],light:eU[50],dark:eU[400]}:{main:eU[700],light:eU[400],dark:eU[800]}}(n),c=e.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:XF[200],light:XF[50],dark:XF[400]}:{main:XF[500],light:XF[300],dark:XF[700]}}(n),l=e.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:JF[500],light:JF[300],dark:JF[700]}:{main:JF[700],light:JF[400],dark:JF[800]}}(n),f=e.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:tU[400],light:tU[300],dark:tU[700]}:{main:tU[700],light:tU[500],dark:tU[900]}}(n),h=e.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:nU[400],light:nU[300],dark:nU[700]}:{main:nU[800],light:nU[500],dark:nU[900]}}(n),p=e.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:ZF[400],light:ZF[300],dark:ZF[700]}:{main:"#ed6c02",light:ZF[500],dark:ZF[900]}}(n);function v(e){var t=function(e,t){var n=TO(e),r=TO(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}(e,aU.text.primary)>=i?aU.text.primary:iU.text.primary;return t}var m=function(e){var t=e.color,n=e.name,r=e.mainShade,i=void 0===r?500:r,a=e.lightShade,u=void 0===a?300:a,s=e.darkShade,c=void 0===s?700:s;if(!(t=d({},t)).main&&t[i]&&(t.main=t[i]),!t.hasOwnProperty("main"))throw new Error(xO(11,n?" (".concat(n,")"):"",i));if("string"!==typeof t.main)throw new Error(xO(12,n?" (".concat(n,")"):"",JSON.stringify(t.main)));return oU(t,"light",u,o),oU(t,"dark",c,o),t.contrastText||(t.contrastText=v(t.main)),t},g={dark:aU,light:iU};return fL(d({common:d({},YF),mode:n,primary:m({color:s,name:"primary"}),secondary:m({color:c,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:m({color:l,name:"error"}),warning:m({color:p,name:"warning"}),info:m({color:f,name:"info"}),success:m({color:h,name:"success"}),grey:$F,contrastThreshold:i,getContrastText:v,augmentColor:m,tonalOffset:o},g[n]),u)}var sU=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var cU={textTransform:"uppercase"},lU='"Roboto", "Helvetica", "Arial", sans-serif';function fU(e,t){var n="function"===typeof t?t(e):t,r=n.fontFamily,i=void 0===r?lU:r,a=n.fontSize,o=void 0===a?14:a,u=n.fontWeightLight,s=void 0===u?300:u,c=n.fontWeightRegular,l=void 0===c?400:c,f=n.fontWeightMedium,h=void 0===f?500:f,p=n.fontWeightBold,v=void 0===p?700:p,m=n.htmlFontSize,g=void 0===m?16:m,y=n.allVariants,b=n.pxToRem,k=Xs(n,sU);var w=o/14,_=b||function(e){return"".concat(e/g*w,"rem")},x=function(e,t,n,r,a){return d({fontFamily:i,fontWeight:e,fontSize:_(t),lineHeight:n},i===lU?{letterSpacing:"".concat((o=r/t,Math.round(1e5*o)/1e5),"em")}:{},a,y);var o},I={h1:x(s,96,1.167,-1.5),h2:x(s,60,1.2,-.5),h3:x(l,48,1.167,0),h4:x(l,34,1.235,.25),h5:x(l,24,1.334,0),h6:x(h,20,1.6,.15),subtitle1:x(l,16,1.75,.15),subtitle2:x(h,14,1.57,.1),body1:x(l,16,1.5,.15),body2:x(l,14,1.43,.15),button:x(h,14,1.75,.4,cU),caption:x(l,12,1.66,.4),overline:x(l,12,2.66,1,cU)};return fL(d({htmlFontSize:g,pxToRem:_,fontFamily:i,fontSize:o,fontWeightLight:s,fontWeightRegular:l,fontWeightMedium:h,fontWeightBold:v},I),k,{clone:!1})}function dU(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var hU=["none",dU(0,2,1,-1,0,1,1,0,0,1,3,0),dU(0,3,1,-2,0,2,2,0,0,1,5,0),dU(0,3,3,-2,0,3,4,0,0,1,8,0),dU(0,2,4,-1,0,4,5,0,0,1,10,0),dU(0,3,5,-1,0,5,8,0,0,1,14,0),dU(0,3,5,-1,0,6,10,0,0,1,18,0),dU(0,4,5,-2,0,7,10,1,0,2,16,1),dU(0,5,5,-3,0,8,10,1,0,3,14,2),dU(0,5,6,-3,0,9,12,1,0,3,16,2),dU(0,6,6,-3,0,10,14,1,0,4,18,3),dU(0,6,7,-4,0,11,15,1,0,4,20,3),dU(0,7,8,-4,0,12,17,2,0,5,22,4),dU(0,7,8,-4,0,13,19,2,0,5,24,4),dU(0,7,9,-4,0,14,21,2,0,5,26,4),dU(0,8,9,-5,0,15,22,2,0,6,28,5),dU(0,8,10,-5,0,16,24,2,0,6,30,5),dU(0,8,11,-5,0,17,26,2,0,6,32,5),dU(0,9,11,-5,0,18,28,2,0,7,34,6),dU(0,9,12,-6,0,19,29,2,0,7,36,6),dU(0,10,13,-6,0,20,31,3,0,8,38,7),dU(0,10,13,-6,0,21,33,3,0,8,40,7),dU(0,10,14,-6,0,22,35,3,0,8,42,7),dU(0,11,14,-7,0,23,36,3,0,9,44,8),dU(0,11,15,-7,0,24,38,3,0,9,46,8)],pU=["duration","easing","delay"],vU={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},mU={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function gU(e){return"".concat(Math.round(e),"ms")}function yU(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}function bU(e){var t=d({},vU,e.easing),n=d({},mU,e.duration);return d({getAutoHeightDuration:yU,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.duration,a=void 0===i?n.standard:i,o=r.easing,u=void 0===o?t.easeInOut:o,s=r.delay,c=void 0===s?0:s;Xs(r,pU);return(Array.isArray(e)?e:[e]).map((function(e){return"".concat(e," ").concat("string"===typeof a?a:gU(a)," ").concat(u," ").concat("string"===typeof c?c:gU(c))})).join(",")}},e,{easing:t,duration:n})}var kU={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},wU=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function _U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mixins,n=void 0===t?{}:t,r=e.palette,i=void 0===r?{}:r,a=e.transitions,o=void 0===a?{}:a,u=e.typography,s=void 0===u?{}:u,c=Xs(e,wU),l=uU(i),f=zL(e),h=fL(f,{mixins:QF(f.breakpoints,n),palette:l,shadows:hU.slice(),typography:fU(l,s),transitions:bU(o),zIndex:d({},kU)});h=fL(h,c);for(var p=arguments.length,v=new Array(p>1?p-1:0),m=1;m<p;m++)v[m-1]=arguments[m];return h=v.reduce((function(e,t){return fL(e,t)}),h)}var xU=_U(),IU=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.defaultTheme,n=void 0===t?KF:t,r=e.rootShouldForwardProp,i=void 0===r?HF:r,a=e.slotShouldForwardProp,o=void 0===a?HF:a,u=e.styleFunctionSx,s=void 0===u?UF:u;return function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r.name,u=r.slot,c=r.skipVariantsResolver,l=r.skipSx,h=r.overridesResolver,p=Xs(r,jF),v=void 0!==c?c:u&&"Root"!==u||!1,m=l||!1;var g=HF;"Root"===u?g=i:u&&(g=o);var y=cL(e,d({shouldForwardProp:g,label:t},p)),b=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var o=r?r.map((function(e){return"function"===typeof e&&e.__emotion_real!==e?function(t){var r=t.theme,i=Xs(t,BF);return e(d({theme:qF(r)?n:r},i))}:e})):[],u=e;a&&h&&o.push((function(e){var t=qF(e.theme)?n:e.theme,r=zF(a,t);if(r){var i={};return Object.entries(r).forEach((function(n){var r=f(n,2),a=r[0],o=r[1];i[a]="function"===typeof o?o(d({},e,{theme:t})):o})),h(e,i)}return null})),a&&!v&&o.push((function(e){var t=qF(e.theme)?n:e.theme;return GF(e,WF(a,t),t,a)})),m||o.push((function(e){var t=qF(e.theme)?n:e.theme;return s(d({},e,{theme:t}))}));var c=o.length-r.length;if(Array.isArray(e)&&c>0){var l=new Array(c).fill("");(u=[].concat(ye(e),ye(l))).raw=[].concat(ye(e.raw),ye(l))}else"function"===typeof e&&e.__emotion_real!==e&&(u=function(t){var r=t.theme,i=Xs(t,VF);return e(d({theme:qF(r)?n:r},i))});var p=y.apply(void 0,[u].concat(ye(o)));return p};return y.withConfig&&(b.withConfig=y.withConfig),b}}({defaultTheme:xU,rootShouldForwardProp:function(e){return HF(e)&&"classes"!==e}}),SU=IU;function EU(e){var t=e.theme,n=e.name,r=e.props;return t&&t.components&&t.components[n]&&t.components[n].defaultProps?function(e,t){var n=d({},t);return Object.keys(e).forEach((function(t){void 0===n[t]&&(n[t]=e[t])})),n}(t.components[n].defaultProps,r):r}var TU=i.createContext(null);function CU(){return i.useContext(TU)}function NU(e){return 0===Object.keys(e).length}var AU=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=CU();return!t||NU(t)?e:t},RU=zL();var PU=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RU;return AU(e)};function DU(e){return function(e){var t=e.props,n=e.name,r=e.defaultTheme;return EU({theme:PU(r),name:n,props:t})}({props:e.props,name:e.name,defaultTheme:xU})}var OU=kL,MU=function(e){return e},LU=function(){var e=MU;return{configure:function(t){e=t},generate:function(t){return e(t)},reset:function(){e=MU}}}(),FU={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function UU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r=FU[t];return r?"".concat(n,"-").concat(r):"".concat(LU.generate(e),"-").concat(t)}function jU(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Mui",r={};return t.forEach((function(t){r[t]=UU(e,t,n)})),r}function BU(e){return UU("MuiPaper",e)}jU("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var VU=["className","component","elevation","square","variant"],qU=function(e){return((e<1?5.11916*Math.pow(e,2):4.5*Math.log(e+1)+2)/100).toFixed(2)},zU=SU("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],!n.square&&t.rounded,"elevation"===n.variant&&t["elevation".concat(n.elevation)]]}})((function(e){var t,n=e.theme,r=e.ownerState;return d({backgroundColor:(n.vars||n).palette.background.paper,color:(n.vars||n).palette.text.primary,transition:n.transitions.create("box-shadow")},!r.square&&{borderRadius:n.shape.borderRadius},"outlined"===r.variant&&{border:"1px solid ".concat((n.vars||n).palette.divider)},"elevation"===r.variant&&d({boxShadow:(n.vars||n).shadows[r.elevation]},!n.vars&&"dark"===n.palette.mode&&{backgroundImage:"linear-gradient(".concat(CO("#fff",qU(r.elevation)),", ").concat(CO("#fff",qU(r.elevation)),")")},n.vars&&{backgroundImage:null==(t=n.vars.overlays)?void 0:t[r.elevation]}))})),WU=i.forwardRef((function(e,t){var n=DU({props:e,name:"MuiPaper"}),r=n.className,i=n.component,a=void 0===i?"div":i,o=n.elevation,u=void 0===o?1:o,s=n.square,c=void 0!==s&&s,l=n.variant,f=void 0===l?"elevation":l,h=Xs(n,VU),p=d({},n,{component:a,elevation:u,square:c,variant:f}),v=function(e){var t=e.square,n=e.elevation,r=e.variant,i=e.classes;return _O({root:["root",r,!t&&"rounded","elevation"===r&&"elevation".concat(n)]},BU,i)}(p);return(0,uc.jsx)(zU,d({as:a,ownerState:p,className:wO(v.root,r),ref:t},h))})),GU=WU;function HU(e){return UU("MuiAlert",e)}var KU=jU("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]);function QU(e,t){"function"===typeof e?e(t):e&&(e.current=t)}var YU=function(e,t){return i.useMemo((function(){return null==e&&null==t?null:function(n){QU(e,n),QU(t,n)}}),[e,t])},$U="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;var XU,JU=function(e){var t=i.useRef(e);return $U((function(){t.current=e})),i.useCallback((function(){return t.current.apply(void 0,arguments)}),[])},ZU=!0,ej=!1,tj={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function nj(e){e.metaKey||e.altKey||e.ctrlKey||(ZU=!0)}function rj(){ZU=!1}function ij(){"hidden"===this.visibilityState&&ej&&(ZU=!0)}function aj(e){var t=e.target;try{return t.matches(":focus-visible")}catch(n){}return ZU||function(e){var t=e.type,n=e.tagName;return!("INPUT"!==n||!tj[t]||e.readOnly)||"TEXTAREA"===n&&!e.readOnly||!!e.isContentEditable}(t)}var oj=function(){var e=i.useCallback((function(e){var t;null!=e&&((t=e.ownerDocument).addEventListener("keydown",nj,!0),t.addEventListener("mousedown",rj,!0),t.addEventListener("pointerdown",rj,!0),t.addEventListener("touchstart",rj,!0),t.addEventListener("visibilitychange",ij,!0))}),[]),t=i.useRef(!1);return{isFocusVisibleRef:t,onFocus:function(e){return!!aj(e)&&(t.current=!0,!0)},onBlur:function(){return!!t.current&&(ej=!0,window.clearTimeout(XU),XU=window.setTimeout((function(){ej=!1}),100),t.current=!1,!0)},ref:e}};function uj(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var sj=i.createContext(null);function cj(e,t){var n=Object.create(null);return e&&i.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,i.isValidElement)(e)?t(e):e}(e)})),n}function lj(e,t,n){return null!=n[t]?n[t]:e.props[t]}function fj(e,t,n){var r=cj(e.children),a=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),a=[];for(var o in e)o in t?a.length&&(i[o]=a,a=[]):a.push(o);var u={};for(var s in t){if(i[s])for(r=0;r<i[s].length;r++){var c=i[s][r];u[i[s][r]]=n(c)}u[s]=n(s)}for(r=0;r<a.length;r++)u[a[r]]=n(a[r]);return u}(t,r);return Object.keys(a).forEach((function(o){var u=a[o];if((0,i.isValidElement)(u)){var s=o in t,c=o in r,l=t[o],f=(0,i.isValidElement)(l)&&!l.props.in;!c||s&&!f?c||!s||f?c&&s&&(0,i.isValidElement)(l)&&(a[o]=(0,i.cloneElement)(u,{onExited:n.bind(null,u),in:l.props.in,exit:lj(u,"exit",e),enter:lj(u,"enter",e)})):a[o]=(0,i.cloneElement)(u,{in:!1}):a[o]=(0,i.cloneElement)(u,{onExited:n.bind(null,u),in:!0,exit:lj(u,"exit",e),enter:lj(u,"enter",e)})}})),a}var dj=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},hj=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(re(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}xS(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,a=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,cj(n.children,(function(e){return(0,i.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:lj(e,"appear",n),enter:lj(e,"enter",n),exit:lj(e,"exit",n)})}))):fj(e,a,o),firstRender:!1}},n.handleExited=function(e,t){var n=cj(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=d({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Xs(e,["component","childFactory"]),a=this.state.contextValue,o=dj(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?i.createElement(sj.Provider,{value:a},o):i.createElement(sj.Provider,{value:a},i.createElement(t,r,o))},t}(i.Component);hj.propTypes={},hj.defaultProps={component:"div",childFactory:function(e){return e}};var pj=hj;a.useInsertionEffect?a.useInsertionEffect:i.useLayoutEffect;function vj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return QM(t)}var mj=function(){var e=vj.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var gj=function(e){var t=e.className,n=e.classes,r=e.pulsate,a=void 0!==r&&r,o=e.rippleX,u=e.rippleY,s=e.rippleSize,c=e.in,l=e.onExited,d=e.timeout,h=f(i.useState(!1),2),p=h[0],v=h[1],m=wO(t,n.ripple,n.rippleVisible,a&&n.ripplePulsate),g={width:s,height:s,top:-s/2+u,left:-s/2+o},y=wO(n.child,p&&n.childLeaving,a&&n.childPulsate);return c||p||v(!0),i.useEffect((function(){if(!c&&null!=l){var e=setTimeout(l,d);return function(){clearTimeout(e)}}}),[l,c,d]),(0,uc.jsx)("span",{className:m,style:g,children:(0,uc.jsx)("span",{className:y})})};var yj,bj,kj,wj,_j,xj,Ij,Sj,Ej=jU("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Tj=["center","classes","className"],Cj=mj(_j||(_j=yj||(yj=uj(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),Nj=mj(xj||(xj=bj||(bj=uj(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),Aj=mj(Ij||(Ij=kj||(kj=uj(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),Rj=SU("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Pj=SU(gj,{name:"MuiTouchRipple",slot:"Ripple"})(Sj||(Sj=wj||(wj=uj(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),Ej.rippleVisible,Cj,550,(function(e){return e.theme.transitions.easing.easeInOut}),Ej.ripplePulsate,(function(e){return e.theme.transitions.duration.shorter}),Ej.child,Ej.childLeaving,Nj,550,(function(e){return e.theme.transitions.easing.easeInOut}),Ej.childPulsate,Aj,(function(e){return e.theme.transitions.easing.easeInOut})),Dj=i.forwardRef((function(e,t){var n=DU({props:e,name:"MuiTouchRipple"}),r=n.center,a=void 0!==r&&r,o=n.classes,u=void 0===o?{}:o,s=n.className,c=Xs(n,Tj),l=f(i.useState([]),2),h=l[0],p=l[1],v=i.useRef(0),m=i.useRef(null);i.useEffect((function(){m.current&&(m.current(),m.current=null)}),[h]);var g=i.useRef(!1),y=i.useRef(null),b=i.useRef(null),k=i.useRef(null);i.useEffect((function(){return function(){clearTimeout(y.current)}}),[]);var w=i.useCallback((function(e){var t=e.pulsate,n=e.rippleX,r=e.rippleY,i=e.rippleSize,a=e.cb;p((function(e){return[].concat(ye(e),[(0,uc.jsx)(Pj,{classes:{ripple:wO(u.ripple,Ej.ripple),rippleVisible:wO(u.rippleVisible,Ej.rippleVisible),ripplePulsate:wO(u.ripplePulsate,Ej.ripplePulsate),child:wO(u.child,Ej.child),childLeaving:wO(u.childLeaving,Ej.childLeaving),childPulsate:wO(u.childPulsate,Ej.childPulsate)},timeout:550,pulsate:t,rippleX:n,rippleY:r,rippleSize:i},v.current)])})),v.current+=1,m.current=a}),[u]),_=i.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=t.pulsate,i=void 0!==r&&r,o=t.center,u=void 0===o?a||t.pulsate:o,s=t.fakeElement,c=void 0!==s&&s;if("mousedown"===(null==e?void 0:e.type)&&g.current)g.current=!1;else{"touchstart"===(null==e?void 0:e.type)&&(g.current=!0);var l,f,d,h=c?null:k.current,p=h?h.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(u||void 0===e||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)l=Math.round(p.width/2),f=Math.round(p.height/2);else{var v=e.touches&&e.touches.length>0?e.touches[0]:e,m=v.clientX,_=v.clientY;l=Math.round(m-p.left),f=Math.round(_-p.top)}if(u)(d=Math.sqrt((2*Math.pow(p.width,2)+Math.pow(p.height,2))/3))%2===0&&(d+=1);else{var x=2*Math.max(Math.abs((h?h.clientWidth:0)-l),l)+2,I=2*Math.max(Math.abs((h?h.clientHeight:0)-f),f)+2;d=Math.sqrt(Math.pow(x,2)+Math.pow(I,2))}null!=e&&e.touches?null===b.current&&(b.current=function(){w({pulsate:i,rippleX:l,rippleY:f,rippleSize:d,cb:n})},y.current=setTimeout((function(){b.current&&(b.current(),b.current=null)}),80)):w({pulsate:i,rippleX:l,rippleY:f,rippleSize:d,cb:n})}}),[a,w]),x=i.useCallback((function(){_({},{pulsate:!0})}),[_]),I=i.useCallback((function(e,t){if(clearTimeout(y.current),"touchend"===(null==e?void 0:e.type)&&b.current)return b.current(),b.current=null,void(y.current=setTimeout((function(){I(e,t)})));b.current=null,p((function(e){return e.length>0?e.slice(1):e})),m.current=t}),[]);return i.useImperativeHandle(t,(function(){return{pulsate:x,start:_,stop:I}}),[x,_,I]),(0,uc.jsx)(Rj,d({className:wO(u.root,Ej.root,s),ref:k},c,{children:(0,uc.jsx)(pj,{component:null,exit:!0,children:h})}))})),Oj=Dj;function Mj(e){return UU("MuiButtonBase",e)}var Lj,Fj=jU("MuiButtonBase",["root","disabled","focusVisible"]),Uj=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],jj=SU("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(e,t){return t.root}})((be(Lj={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(Fj.disabled),{pointerEvents:"none",cursor:"default"}),be(Lj,"@media print",{colorAdjust:"exact"}),Lj)),Bj=i.forwardRef((function(e,t){var n=DU({props:e,name:"MuiButtonBase"}),r=n.action,a=n.centerRipple,o=void 0!==a&&a,u=n.children,s=n.className,c=n.component,l=void 0===c?"button":c,h=n.disabled,p=void 0!==h&&h,v=n.disableRipple,m=void 0!==v&&v,g=n.disableTouchRipple,y=void 0!==g&&g,b=n.focusRipple,k=void 0!==b&&b,w=n.LinkComponent,_=void 0===w?"a":w,x=n.onBlur,I=n.onClick,S=n.onContextMenu,E=n.onDragLeave,T=n.onFocus,C=n.onFocusVisible,N=n.onKeyDown,A=n.onKeyUp,R=n.onMouseDown,P=n.onMouseLeave,D=n.onMouseUp,O=n.onTouchEnd,M=n.onTouchMove,L=n.onTouchStart,F=n.tabIndex,U=void 0===F?0:F,j=n.TouchRippleProps,B=n.touchRippleRef,V=n.type,q=Xs(n,Uj),z=i.useRef(null),W=i.useRef(null),G=YU(W,B),H=oj(),K=H.isFocusVisibleRef,Q=H.onFocus,Y=H.onBlur,$=H.ref,X=f(i.useState(!1),2),J=X[0],Z=X[1];p&&J&&Z(!1),i.useImperativeHandle(r,(function(){return{focusVisible:function(){Z(!0),z.current.focus()}}}),[]);var ee=f(i.useState(!1),2),te=ee[0],ne=ee[1];i.useEffect((function(){ne(!0)}),[]);var re=te&&!m&&!p;function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;return JU((function(r){return t&&t(r),!n&&W.current&&W.current[e](r),!0}))}i.useEffect((function(){J&&k&&!m&&te&&W.current.pulsate()}),[m,k,J,te]);var ae=ie("start",R),oe=ie("stop",S),ue=ie("stop",E),se=ie("stop",D),ce=ie("stop",(function(e){J&&e.preventDefault(),P&&P(e)})),le=ie("start",L),fe=ie("stop",O),de=ie("stop",M),he=ie("stop",(function(e){Y(e),!1===K.current&&Z(!1),x&&x(e)}),!1),pe=JU((function(e){z.current||(z.current=e.currentTarget),Q(e),!0===K.current&&(Z(!0),C&&C(e)),T&&T(e)})),ve=function(){var e=z.current;return l&&"button"!==l&&!("A"===e.tagName&&e.href)},me=i.useRef(!1),ge=JU((function(e){k&&!me.current&&J&&W.current&&" "===e.key&&(me.current=!0,W.current.stop(e,(function(){W.current.start(e)}))),e.target===e.currentTarget&&ve()&&" "===e.key&&e.preventDefault(),N&&N(e),e.target===e.currentTarget&&ve()&&"Enter"===e.key&&!p&&(e.preventDefault(),I&&I(e))})),ye=JU((function(e){k&&" "===e.key&&W.current&&J&&!e.defaultPrevented&&(me.current=!1,W.current.stop(e,(function(){W.current.pulsate(e)}))),A&&A(e),I&&e.target===e.currentTarget&&ve()&&" "===e.key&&!e.defaultPrevented&&I(e)})),be=l;"button"===be&&(q.href||q.to)&&(be=_);var ke={};"button"===be?(ke.type=void 0===V?"button":V,ke.disabled=p):(q.href||q.to||(ke.role="button"),p&&(ke["aria-disabled"]=p));var we=YU($,z),_e=YU(t,we);var xe=d({},n,{centerRipple:o,component:l,disabled:p,disableRipple:m,disableTouchRipple:y,focusRipple:k,tabIndex:U,focusVisible:J}),Ie=function(e){var t=e.disabled,n=e.focusVisible,r=e.focusVisibleClassName,i=_O({root:["root",t&&"disabled",n&&"focusVisible"]},Mj,e.classes);return n&&r&&(i.root+=" ".concat(r)),i}(xe);return(0,uc.jsxs)(jj,d({as:be,className:wO(Ie.root,s),ownerState:xe,onBlur:he,onClick:I,onContextMenu:oe,onFocus:pe,onKeyDown:ge,onKeyUp:ye,onMouseDown:ae,onMouseLeave:ce,onMouseUp:se,onDragLeave:ue,onTouchEnd:fe,onTouchMove:de,onTouchStart:le,ref:_e,tabIndex:p?-1:U,type:V},ke,q,{children:[u,re?(0,uc.jsx)(Oj,d({ref:G,center:o},j)):null]}))})),Vj=Bj;function qj(e){return UU("MuiIconButton",e)}var zj=jU("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Wj=["edge","children","className","color","disabled","disableFocusRipple","size"],Gj=SU(Vj,{name:"MuiIconButton",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"default"!==n.color&&t["color".concat(OU(n.color))],n.edge&&t["edge".concat(OU(n.edge))],t["size".concat(OU(n.size))]]}})((function(e){var t=e.theme,n=e.ownerState;return d({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.active," / ").concat(t.vars.palette.action.hoverOpacity,")"):CO(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===n.edge&&{marginLeft:"small"===n.size?-3:-12},"end"===n.edge&&{marginRight:"small"===n.size?-3:-12})}),(function(e){var t=e.theme,n=e.ownerState;return d({},"inherit"===n.color&&{color:"inherit"},"inherit"!==n.color&&"default"!==n.color&&d({color:(t.vars||t).palette[n.color].main},!n.disableRipple&&{"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[n.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):CO(t.palette[n.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===n.size&&{padding:5,fontSize:t.typography.pxToRem(18)},"large"===n.size&&{padding:12,fontSize:t.typography.pxToRem(28)},be({},"&.".concat(zj.disabled),{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}))})),Hj=i.forwardRef((function(e,t){var n=DU({props:e,name:"MuiIconButton"}),r=n.edge,i=void 0!==r&&r,a=n.children,o=n.className,u=n.color,s=void 0===u?"default":u,c=n.disabled,l=void 0!==c&&c,f=n.disableFocusRipple,h=void 0!==f&&f,p=n.size,v=void 0===p?"medium":p,m=Xs(n,Wj),g=d({},n,{edge:i,color:s,disabled:l,disableFocusRipple:h,size:v}),y=function(e){var t=e.classes,n=e.disabled,r=e.color,i=e.edge,a=e.size;return _O({root:["root",n&&"disabled","default"!==r&&"color".concat(OU(r)),i&&"edge".concat(OU(i)),"size".concat(OU(a))]},qj,t)}(g);return(0,uc.jsx)(Gj,d({className:wO(y.root,o),centerRipple:!0,focusRipple:!h,disabled:l,ref:t,ownerState:g},m,{children:a}))})),Kj=Hj;function Qj(e){return UU("MuiSvgIcon",e)}jU("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var Yj=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],$j=SU("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,"inherit"!==n.color&&t["color".concat(OU(n.color))],t["fontSize".concat(OU(n.fontSize))]]}})((function(e){var t,n,r,i,a,o,u,s,c,l,f,d,h,p,v,m,g,y=e.theme,b=e.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(t=y.transitions)||null==(n=t.create)?void 0:n.call(t,"fill",{duration:null==(r=y.transitions)||null==(i=r.duration)?void 0:i.shorter}),fontSize:{inherit:"inherit",small:(null==(a=y.typography)||null==(o=a.pxToRem)?void 0:o.call(a,20))||"1.25rem",medium:(null==(u=y.typography)||null==(s=u.pxToRem)?void 0:s.call(u,24))||"1.5rem",large:(null==(c=y.typography)||null==(l=c.pxToRem)?void 0:l.call(c,35))||"2.1875"}[b.fontSize],color:null!=(f=null==(d=(y.vars||y).palette)||null==(h=d[b.color])?void 0:h.main)?f:{action:null==(p=(y.vars||y).palette)||null==(v=p.action)?void 0:v.active,disabled:null==(m=(y.vars||y).palette)||null==(g=m.action)?void 0:g.disabled,inherit:void 0}[b.color]}})),Xj=i.forwardRef((function(e,t){var n=DU({props:e,name:"MuiSvgIcon"}),r=n.children,i=n.className,a=n.color,o=void 0===a?"inherit":a,u=n.component,s=void 0===u?"svg":u,c=n.fontSize,l=void 0===c?"medium":c,f=n.htmlColor,h=n.inheritViewBox,p=void 0!==h&&h,v=n.titleAccess,m=n.viewBox,g=void 0===m?"0 0 24 24":m,y=Xs(n,Yj),b=d({},n,{color:o,component:s,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:p,viewBox:g}),k={};p||(k.viewBox=g);var w=function(e){var t=e.color,n=e.fontSize,r=e.classes;return _O({root:["root","inherit"!==t&&"color".concat(OU(t)),"fontSize".concat(OU(n))]},Qj,r)}(b);return(0,uc.jsxs)($j,d({as:s,className:wO(w.root,i),ownerState:b,focusable:"false",color:f,"aria-hidden":!v||void 0,role:v?"img":void 0,ref:t},k,y,{children:[r,v?(0,uc.jsx)("title",{children:v}):null]}))}));Xj.muiName="SvgIcon";var Jj=Xj;function Zj(e,t){var n=function(n,r){return(0,uc.jsx)(Jj,d({"data-testid":"".concat(t,"Icon"),ref:r},n,{children:e}))};return n.muiName=Jj.muiName,i.memo(i.forwardRef(n))}var eB,tB=Zj((0,uc.jsx)("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),nB=Zj((0,uc.jsx)("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),rB=Zj((0,uc.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),iB=Zj((0,uc.jsx)("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),aB=Zj((0,uc.jsx)("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),oB=["action","children","className","closeText","color","icon","iconMapping","onClose","role","severity","variant"],uB=SU(GU,{name:"MuiAlert",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t[n.variant],t["".concat(n.variant).concat(OU(n.color||n.severity))]]}})((function(e){var t=e.theme,n=e.ownerState,r="light"===t.palette.mode?NO:AO,i="light"===t.palette.mode?AO:NO,a=n.color||n.severity;return d({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},a&&"standard"===n.variant&&be({color:t.vars?t.vars.palette.Alert["".concat(a,"Color")]:r(t.palette[a].light,.6),backgroundColor:t.vars?t.vars.palette.Alert["".concat(a,"StandardBg")]:i(t.palette[a].light,.9)},"& .".concat(KU.icon),t.vars?{color:t.vars.palette.Alert["".concat(a,"IconColor")]}:{color:"dark"===t.palette.mode?t.palette[a].main:t.palette[a].light}),a&&"outlined"===n.variant&&be({color:t.vars?t.vars.palette.Alert["".concat(a,"Color")]:r(t.palette[a].light,.6),border:"1px solid ".concat((t.vars||t).palette[a].light)},"& .".concat(KU.icon),t.vars?{color:t.vars.palette.Alert["".concat(a,"IconColor")]}:{color:"dark"===t.palette.mode?t.palette[a].main:t.palette[a].light}),a&&"filled"===n.variant&&d({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert["".concat(a,"FilledColor")],backgroundColor:t.vars.palette.Alert["".concat(a,"FilledBg")]}:{backgroundColor:"dark"===t.palette.mode?t.palette[a].dark:t.palette[a].main,color:t.palette.getContrastText("dark"===t.palette.mode?t.palette[a].dark:t.palette[a].main)}))})),sB=SU("div",{name:"MuiAlert",slot:"Icon",overridesResolver:function(e,t){return t.icon}})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),cB=SU("div",{name:"MuiAlert",slot:"Message",overridesResolver:function(e,t){return t.message}})({padding:"8px 0",minWidth:0,overflow:"auto"}),lB=SU("div",{name:"MuiAlert",slot:"Action",overridesResolver:function(e,t){return t.action}})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),fB={success:(0,uc.jsx)(tB,{fontSize:"inherit"}),warning:(0,uc.jsx)(nB,{fontSize:"inherit"}),error:(0,uc.jsx)(rB,{fontSize:"inherit"}),info:(0,uc.jsx)(iB,{fontSize:"inherit"})},dB=i.forwardRef((function(e,t){var n=DU({props:e,name:"MuiAlert"}),r=n.action,i=n.children,a=n.className,o=n.closeText,u=void 0===o?"Close":o,s=n.color,c=n.icon,l=n.iconMapping,f=void 0===l?fB:l,h=n.onClose,p=n.role,v=void 0===p?"alert":p,m=n.severity,g=void 0===m?"success":m,y=n.variant,b=void 0===y?"standard":y,k=Xs(n,oB),w=d({},n,{color:s,severity:g,variant:b}),_=function(e){var t=e.variant,n=e.color,r=e.severity,i=e.classes;return _O({root:["root","".concat(t).concat(OU(n||r)),"".concat(t)],icon:["icon"],message:["message"],action:["action"]},HU,i)}(w);return(0,uc.jsxs)(uB,d({role:v,elevation:0,ownerState:w,className:wO(_.root,a),ref:t},k,{children:[!1!==c?(0,uc.jsx)(sB,{ownerState:w,className:_.icon,children:c||f[g]||fB[g]}):null,(0,uc.jsx)(cB,{ownerState:w,className:_.message,children:i}),null!=r?(0,uc.jsx)(lB,{ownerState:w,className:_.action,children:r}):null,null==r&&h?(0,uc.jsx)(lB,{ownerState:w,className:_.action,children:(0,uc.jsx)(Kj,{size:"small","aria-label":u,title:u,color:"inherit",onClick:h,children:eB||(eB=(0,uc.jsx)(aB,{fontSize:"small"}))})}):null]}))})),hB=dB;var pB=YD((function(e){return{lang:e.lang.lang,isDarkTheme:e.theme.isDarkTheme}}))((function(e){var t=f((0,i.useState)(!1),2),r=t[0],a=t[1],o=f((0,i.useState)({email:"",password:""}),2),u=o[0],s=o[1],c=(0,i.useContext)(xY),l=c.auth,d=(c.firestore,f((0,i.useState)(!1),2)),h=d[0],p=d[1];return(0,uc.jsx)("div",{className:cO.loginContainer,children:(0,uc.jsxs)("div",{className:cO.login,children:[r?(0,uc.jsx)(hB,{severity:"warning",children:r}):"",(0,uc.jsxs)("div",{className:cO.title,children:[(0,uc.jsx)("img",{src:n(137)}),(0,uc.jsx)("div",{children:e.lang?"Log in to TODO":"\u0417\u0430\u0439\u0442\u0438"})]}),(0,uc.jsxs)("form",{style:{display:"flex",textAlign:"center",flexDirection:"column",height:"auto",marginTop:"3px",justifyContent:"space-between"},children:[(0,uc.jsx)(bO,{onChange:function(e){return s((function(t){return Et(Et({},t),{},{email:e.target.value})}))},label:e.lang?"Email":"\u041f\u043e\u0447\u0442\u0430",type:"text"}),(0,uc.jsx)("div",{className:cO.accordion,children:(0,uc.jsx)("div",{className:cO.accordionItem,children:(0,uc.jsx)("div",{className:h?cO.content+" "+cO.active:cO.content,children:(0,uc.jsx)("div",{className:h?cO.contentInner+" "+cO.active:cO.contentInner,children:(0,uc.jsx)(bO,{onChange:function(e){return s((function(t){return Et(Et({},t),{},{password:e.target.value})}))},label:e.lang?"Password":"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password"})})})})}),(0,uc.jsx)("button",{onClick:function(e){e.preventDefault(),h?$a(l,u.email,u.password).then((function(e){e.user})).catch((function(e){e.code,e.message,a(e.message)})):p(!0)},className:cO.next,children:h?e.lang?"Sign In":"\u0417\u0430\u0439\u0442\u0438":e.lang?"Next":"\u0414\u0430\u043b\u044c\u0448\u0435"})]}),(0,uc.jsx)(Z,{style:{margin:"10px auto",fontSize:"12px"},to:"/signup",children:e.lang?"Still don't have an acc?":"\u0414\u043e \u0441\u0438\u0445 \u043f\u043e\u0440 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430?"})]})})})),vB="Signup_signUpContainer__6kpo4",mB="Signup_signup__SwcLr",gB="Signup_title__l1HbX",yB="Signup_btn__wZttF";var bB=YD((function(e){return{lang:e.lang.lang,isDarkTheme:e.theme.isDarkTheme}}))((function(e){var t=f((0,i.useState)({email:"",password:"",login:"",age:""}),2),r=t[0],a=t[1],o=f((0,i.useState)(""),2),u=(o[0],o[1]),s=(0,i.useContext)(xY),c=s.auth,l=s.firestore,d=function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Qa(c,r.email,r.password).then(function(){var e=he(fe().mark((function e(t){var n,i,a;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),n={name:r.login,email:r.email,uid:t.user.uid,age:r.age,phone:"",photo:"https://i.ibb.co/YRHhgDn/ava.png",tasks:[]},i=Ox(l,"users","".concat(t.user.uid)),e.next=5,aS(i,n);case 5:return a=Ox(l,"tasks","".concat(t.user.uid)),e.next=8,aS(a,[]);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),u(e.t0.message);case 8:a({email:"",password:"",login:""});case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}();return(0,uc.jsx)("div",{className:vB,children:(0,uc.jsxs)("div",{className:mB,children:[(0,uc.jsxs)("div",{className:gB,children:[(0,uc.jsx)("img",{src:n(137)}),(0,uc.jsx)("div",{children:e.lang?"Sign up for TODO":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),(0,uc.jsxs)("form",{style:{display:"flex",textAlign:"center",flexDirection:"column",height:"auto",marginTop:"3px",justifyContent:"space-between"},children:[(0,uc.jsx)(bO,{visible:!0,onChange:function(e){return a((function(t){return Et(Et({},t),{},{login:e.target.value})}))},label:e.lang?"Name":"\u0418\u043c\u044f",type:"text"}),(0,uc.jsx)(bO,{visible:!0,onChange:function(e){return a((function(t){return Et(Et({},t),{},{age:e.target.value})}))},label:e.lang?"Age":"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",type:"text"}),(0,uc.jsx)(bO,{visible:!0,onChange:function(e){return a((function(t){return Et(Et({},t),{},{email:e.target.value})}))},label:e.lang?"Email":"\u041f\u043e\u0447\u0442\u0430",type:"text"}),(0,uc.jsx)(bO,{visible:!0,onChange:function(e){return a((function(t){return Et(Et({},t),{},{password:e.target.value})}))},label:e.lang?"Password":"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password"}),(0,uc.jsx)("button",{onClick:function(e){e.preventDefault(),d()},className:yB,children:e.lang?"Sign Up":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),(0,uc.jsx)(Z,{style:{margin:"10px auto",fontSize:"12px"},to:"/login",children:e.lang?"I already have an acc":"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442"})]})})}));var kB=YD((function(e){return{lang:e.lang.lang,isDarkTheme:e.theme.isDarkTheme}}))((function(e){return(0,uc.jsx)("div",{children:(0,uc.jsxs)("div",{className:e.isDarkTheme?"attribution":"attribution lightAttr",children:[(0,uc.jsxs)("div",{children:["Challenge by ",(0,uc.jsx)("a",{href:"https://www.frontendmentor.io?ref=challenge",target:"_blank",children:"Frontend Mentor"}),". "]}),(0,uc.jsxs)("div",{children:["Coded by ",(0,uc.jsx)("a",{target:"_blank",href:"https://github.com/checkforants",children:"checkforants"})]}),(0,uc.jsxs)("div",{children:["Authentication & Database : ",(0,uc.jsx)("a",{target:"_blank",href:"https://firebase.google.com/",children:" firebase "})]}),(0,uc.jsx)("div",{children:(0,uc.jsx)("a",{target:"_blank",href:"https://www.flaticon.com/ru/free-icon/planner_7195709",title:"\u043f\u0440\u0430\u0432\u0434\u0430 \u0438\u043a\u043e\u043d\u043a\u0438",children:"Icon"})}),(0,uc.jsxs)("div",{children:[" ",(0,uc.jsx)("a",{target:"_blank",href:"https://github.com/atlassian/react-beautiful-dnd",children:"Drag engine"})," "]}),(0,uc.jsxs)("div",{children:[" ",(0,uc.jsx)("a",{target:"_blank",href:"https://jfelix.info/blog/using-react-spring-to-animate-svg-icons-dark-mode-toggle",children:"Dark Mode Toggle"})]})]})})})),wB=Symbol.for("Animated:node"),_B=function(e){return e&&e[wB]},xB=function(e,t){return n=e,r=wB,i=t,Object.defineProperty(n,r,{value:i,writable:!0,configurable:!0});var n,r,i},IB=function(e){return e&&e[wB]&&e[wB].getPayload()},SB=function(){function e(){pe(this,e),this.payload=void 0,xB(this,this)}return me(e,[{key:"getPayload",value:function(){return this.payload||[]}}]),e}(),EB=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).done=!0,r.elapsedTime=void 0,r.lastPosition=void 0,r.lastVelocity=void 0,r.v0=void 0,r.durationProgress=0,r._value=e,$R.num(r._value)&&(r.lastPosition=r._value),r}return me(n,[{key:"getPayload",value:function(){return[this]}},{key:"getValue",value:function(){return this._value}},{key:"setValue",value:function(e,t){return $R.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}},{key:"reset",value:function(){var e=this.done;this.done=!1,$R.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(SB),TB=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this,0))._string=null,r._toString=void 0,r._toString=FP({output:[e,e]}),r}return me(n,[{key:"getValue",value:function(){var e=this._string;return null==e?this._string=this._toString(this._value):e}},{key:"setValue",value:function(e){if($R.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!ne(ee(n.prototype),"setValue",this).call(this,e))return!1;this._string=null}return!0}},{key:"reset",value:function(e){e&&(this._toString=FP({output:[this.getValue(),e]})),this._value=0,ne(ee(n.prototype),"reset",this).call(this)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(EB),CB={dependencies:null},NB=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).source=e,r.setValue(e),r}return me(n,[{key:"getValue",value:function(e){var t={};return ZR(this.source,(function(n,r){var i;(i=n)&&i[wB]===i?t[r]=n.getValue(e):VP(n)?t[r]=qP(n):e||(t[r]=n)})),t}},{key:"setValue",value:function(e){this.source=e,this.payload=this._makePayload(e)}},{key:"reset",value:function(){this.payload&&JR(this.payload,(function(e){return e.reset()}))}},{key:"_makePayload",value:function(e){if(e){var t=new Set;return ZR(e,this._addToPayload,t),Array.from(t)}}},{key:"_addToPayload",value:function(e){var t=this;CB.dependencies&&VP(e)&&CB.dependencies.add(e);var n=IB(e);n&&JR(n,(function(e){return t.add(e)}))}}]),n}(SB),AB=function(e){ae(n,e);var t=ce(n);function n(e){return pe(this,n),t.call(this,e)}return me(n,[{key:"getValue",value:function(){return this.source.map((function(e){return e.getValue()}))}},{key:"setValue",value:function(e){var t=this.getPayload();return e.length==t.length?t.map((function(t,n){return t.setValue(e[n])})).some(Boolean):(ne(ee(n.prototype),"setValue",this).call(this,e.map(RB)),!0)}}],[{key:"create",value:function(e){return new n(e)}}]),n}(NB);function RB(e){return(fD(e)?TB:EB).create(e)}function PB(e){var t=_B(e);return t?t.constructor:$R.arr(e)?AB:fD(e)?TB:EB}function DB(){return DB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DB.apply(this,arguments)}var OB=function(e,t){var n=!$R.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,i.forwardRef)((function(r,a){var o=(0,i.useRef)(null),u=n&&(0,i.useCallback)((function(e){o.current=function(e,t){e&&($R.fun(e)?e(t):e.current=t);return t}(a,e)}),[a]),s=function(e,t){var n=new Set;CB.dependencies=n,e.style&&(e=DB({},e,{style:t.createAnimatedStyle(e.style)}));return e=new NB(e),CB.dependencies=null,[e,n]}(r,t),c=f(s,2),l=c[0],d=c[1],h=hD(),p=function(){var e=o.current;n&&!e||!1===(!!e&&t.applyAnimatedValues(e,l.getValue(!0)))&&h()},v=new MB(p,d),m=(0,i.useRef)();dD((function(){return m.current=v,JR(d,(function(e){return KP(e,v)})),function(){m.current&&(JR(m.current.deps,(function(e){return QP(e,m.current)})),PR.cancel(m.current.update))}})),(0,i.useEffect)(p,[]),pD((function(){return function(){var e=m.current;JR(e.deps,(function(t){return QP(t,e)}))}}));var g=t.getComponentProps(l.getValue());return i.createElement(e,DB({},g,{ref:u}))}))},MB=function(){function e(t,n){pe(this,e),this.update=t,this.deps=n}return me(e,[{key:"eventObserved",value:function(e){"change"==e.type&&PR.write(this.update)}}]),e}();var LB=Symbol.for("AnimatedComponent"),FB=function(e){return $R.str(e)?e:e&&$R.str(e.displayName)?e.displayName:$R.fun(e)&&e.name||null};function UB(){return UB=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UB.apply(this,arguments)}function jB(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $R.fun(e)?e.apply(void 0,n):e}var BB=function(e,t){return!0===e||!!(t&&e&&($R.fun(e)?e(t):eP(e).includes(t)))},VB=function(e,t){return $R.obj(e)?t&&e[t]:e},qB=function(e,t){return!0===e.default?e[t]:e.default?e.default[t]:void 0},zB=function(e){return e},WB=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zB,n=GB;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));var r,i={},a=le(n);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=t(e[o],o);$R.und(u)||(i[o]=u)}}catch(s){a.e(s)}finally{a.f()}return i},GB=["config","onProps","onStart","onChange","onPause","onResume","onRest"],HB={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function KB(e){var t=function(e){var t={},n=0;if(ZR(e,(function(e,r){HB[r]||(t[r]=e,n++)})),n)return t}(e);if(t){var n={to:t};return ZR(e,(function(e,r){return r in t||(n[r]=e)})),n}return UB({},e)}function QB(e){return e=qP(e),$R.arr(e)?e.map(QB):fD(e)?cP.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function YB(e){for(var t in e)return!0;return!1}function $B(e){return $R.fun(e)||$R.arr(e)&&$R.obj(e[0])}function XB(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}function JB(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}var ZB=1.70158,eV=1.525*ZB,tV=ZB+1,nV=2*Math.PI/3,rV=2*Math.PI/4.5,iV=function(e){var t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},aV={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return 1-(1-e)*(1-e)},easeInOutQuad:function(e){return e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1-Math.pow(1-e,3)},easeInOutCubic:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1-Math.pow(1-e,4)},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1-Math.pow(1-e,5)},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2},easeInSine:function(e){return 1-Math.cos(e*Math.PI/2)},easeOutSine:function(e){return Math.sin(e*Math.PI/2)},easeInOutSine:function(e){return-(Math.cos(Math.PI*e)-1)/2},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*e-10)},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2},easeInCirc:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2},easeInBack:function(e){return tV*e*e*e-ZB*e*e},easeOutBack:function(e){return 1+tV*Math.pow(e-1,3)+ZB*Math.pow(e-1,2)},easeInOutBack:function(e){return e<.5?Math.pow(2*e,2)*(7.189819*e-eV)/2:(Math.pow(2*e-2,2)*((eV+1)*(2*e-2)+eV)+2)/2},easeInElastic:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*nV)},easeOutElastic:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*nV)+1},easeInOutElastic:function(e){return 0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*rV)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*rV)/2+1},easeInBounce:function(e){return 1-iV(1-e)},easeOutBounce:iV,easeInOutBounce:function(e){return e<.5?(1-iV(1-2*e))/2:(1+iV(2*e-1))/2}},oV=UB({},{tension:170,friction:26},{mass:1,damping:1,easing:aV.linear,clamp:!1}),uV=me((function e(){pe(this,e),this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,oV)}));function sV(e,t){if($R.und(t.decay)){var n=!$R.und(t.tension)||!$R.und(t.friction);!n&&$R.und(t.frequency)&&$R.und(t.damping)&&$R.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var cV=[],lV=me((function e(){pe(this,e),this.changed=!1,this.values=cV,this.toValues=null,this.fromValues=cV,this.to=void 0,this.from=void 0,this.config=new uV,this.immediate=!1}));function fV(e,t){var n=t.key,r=t.props,i=t.defaultProps,a=t.state,o=t.actions;return new Promise((function(t,u){var s,c,l,f=BB(null!=(s=r.cancel)?s:null==i?void 0:i.cancel,n);if(f)v();else{$R.und(r.pause)||(a.paused=BB(r.pause,n));var d=null==i?void 0:i.pause;!0!==d&&(d=a.paused||BB(d,n)),c=jB(r.delay||0,n),d?(a.resumeQueue.add(p),o.pause()):(o.resume(),p())}function h(){a.resumeQueue.add(p),a.timeouts.delete(l),l.cancel(),c=l.time-PR.now()}function p(){c>0&&!cP.skipAnimation?(a.delayed=!0,l=PR.setTimeout(v,c),a.pauseQueue.add(h),a.timeouts.add(l)):v()}function v(){a.delayed&&(a.delayed=!1),a.pauseQueue.delete(h),a.timeouts.delete(l),e<=(a.cancelId||0)&&(f=!0);try{o.start(UB({},r,{callId:e,cancel:f}),t)}catch(n){u(n)}}}))}var dV=function(e,t){return 1==t.length?t[0]:t.some((function(e){return e.cancelled}))?vV(e.get()):t.every((function(e){return e.noop}))?hV(e.get()):pV(e.get(),t.every((function(e){return e.finished})))},hV=function(e){return{value:e,noop:!0,finished:!0,cancelled:!1}},pV=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{value:e,finished:t,cancelled:n}},vV=function(e){return{value:e,cancelled:!0,finished:!1}};function mV(e,t,n,r){var i=t.callId,a=t.parentId,o=t.onRest,u=n.asyncTo,s=n.promise;return a||e!==u||t.reset?n.promise=he(fe().mark((function c(){var l,f,d,h,p,v,m,g;return fe().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n.asyncId=i,n.asyncTo=e,l=WB(t,(function(e,t){return"onRest"===t?void 0:e})),h=new Promise((function(e,t){return f=e,d=t})),p=function(e){var t=i<=(n.cancelId||0)&&vV(r)||i!==n.asyncId&&pV(r,!1);if(t)throw e.result=t,d(e),e},v=function(e,t){var a=new yV,o=new bV;return he(fe().mark((function u(){var s,c;return fe().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(!cP.skipAnimation){u.next=5;break}throw gV(n),o.result=pV(r,!1),d(o),o;case 5:return p(a),(s=$R.obj(e)?UB({},e):UB({},t,{to:e})).parentId=i,ZR(l,(function(e,t){$R.und(s[t])&&(s[t]=e)})),u.next=11,r.start(s);case 11:if(c=u.sent,p(a),!n.paused){u.next=16;break}return u.next=16,new Promise((function(e){n.resumeQueue.add(e)}));case 16:return u.abrupt("return",c);case 17:case"end":return u.stop()}}),u)})))()},!cP.skipAnimation){c.next=9;break}return gV(n),c.abrupt("return",pV(r,!1));case 9:return c.prev=9,g=$R.arr(e)?function(){var e=he(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=le(t),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,v(i);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()(e):Promise.resolve(e(v,r.stop.bind(r))),c.next=13,Promise.all([g.then(f),h]);case 13:m=pV(r.get(),!0,!1),c.next=27;break;case 16:if(c.prev=16,c.t0=c.catch(9),!(c.t0 instanceof yV)){c.next=22;break}m=c.t0.result,c.next=27;break;case 22:if(!(c.t0 instanceof bV)){c.next=26;break}m=c.t0.result,c.next=27;break;case 26:throw c.t0;case 27:return c.prev=27,i==n.asyncId&&(n.asyncId=a,n.asyncTo=a?u:void 0,n.promise=a?s:void 0),c.finish(27);case 30:return $R.fun(o)&&PR.batchedUpdates((function(){o(m,r,r.item)})),c.abrupt("return",m);case 32:case"end":return c.stop()}}),c,null,[[9,16,27,30]])})))():s}function gV(e,t){tP(e.timeouts,(function(e){return e.cancel()})),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var yV=function(e){ae(n,e);var t=ce(n);function n(){var e;return pe(this,n),(e=t.call(this,"An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")).result=void 0,e}return me(n)}(we(Error)),bV=function(e){ae(n,e);var t=ce(n);function n(){var e;return pe(this,n),(e=t.call(this,"SkipAnimationSignal")).result=void 0,e}return me(n)}(we(Error)),kV=function(e){return e instanceof _V},wV=1,_V=function(e){ae(n,e);var t=ce(n);function n(){var e;pe(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).id=wV++,e.key=void 0,e._priority=0,e}return me(n,[{key:"priority",get:function(){return this._priority},set:function(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}},{key:"get",value:function(){var e=_B(this);return e&&e.getValue()}},{key:"to",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cP.to(this,t)}},{key:"interpolate",value:function(){cD();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return cP.to(this,t)}},{key:"toJSON",value:function(){return this.get()}},{key:"observerAdded",value:function(e){1==e&&this._attach()}},{key:"observerRemoved",value:function(e){0==e&&this._detach()}},{key:"_attach",value:function(){}},{key:"_detach",value:function(){}},{key:"_onChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];WP(this,{type:"change",parent:this,value:e,idle:t})}},{key:"_onPriorityChange",value:function(e){this.idle||pP.sort(this),WP(this,{type:"priority",parent:this,priority:e})}}]),n}(GP),xV=Symbol.for("SpringPhase"),IV=function(e){return(1&e[xV])>0},SV=function(e){return(2&e[xV])>0},EV=function(e){return(4&e[xV])>0},TV=function(e,t){return t?e[xV]|=3:e[xV]&=-3},CV=function(e,t){return t?e[xV]|=4:e[xV]&=-5},NV=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;if(pe(this,n),(i=t.call(this)).key=void 0,i.animation=new lV,i.queue=void 0,i.defaultProps={},i._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},i._pendingCalls=new Set,i._lastCallId=0,i._lastToId=0,i._memoizedDuration=0,!$R.und(e)||!$R.und(r)){var a=$R.obj(e)?UB({},e):UB({},r,{from:e});$R.und(a.default)&&(a.default=!0),i.start(a)}return i}return me(n,[{key:"idle",get:function(){return!(SV(this)||this._state.asyncTo)||EV(this)}},{key:"goal",get:function(){return qP(this.animation.to)}},{key:"velocity",get:function(){var e=_B(this);return e instanceof EB?e.lastVelocity||0:e.getPayload().map((function(e){return e.lastVelocity||0}))}},{key:"hasAnimated",get:function(){return IV(this)}},{key:"isAnimating",get:function(){return SV(this)}},{key:"isPaused",get:function(){return EV(this)}},{key:"isDelayed",get:function(){return this._state.delayed}},{key:"advance",value:function(e){var t=this,n=!0,r=!1,i=this.animation,a=i.config,o=i.toValues,u=IB(i.to);!u&&VP(i.to)&&(o=eP(qP(i.to))),i.values.forEach((function(s,c){if(!s.done){var l=s.constructor==TB?1:u?u[c].lastPosition:o[c],f=i.immediate,d=l;if(!f){if(d=s.lastPosition,a.tension<=0)return void(s.done=!0);var h,p=s.elapsedTime+=e,v=i.fromValues[c],m=null!=s.v0?s.v0:s.v0=$R.arr(a.velocity)?a.velocity[c]:a.velocity;if($R.und(a.duration))if(a.decay){var g=!0===a.decay?.998:a.decay,y=Math.exp(-(1-g)*p);d=v+m/(1-g)*(1-y),f=Math.abs(s.lastPosition-d)<.1,h=m*y}else{h=null==s.lastVelocity?m:s.lastVelocity;for(var b=a.precision||(v==l?.005:Math.min(1,.001*Math.abs(l-v))),k=a.restVelocity||b/10,w=a.clamp?0:a.bounce,_=!$R.und(w),x=v==l?s.v0>0:v<l,I=Math.ceil(e/1),S=0;S<I&&(Math.abs(h)>k||!(f=Math.abs(l-d)<=b));++S){_&&(d==l||d>l==x)&&(h=-h*w,d=l),d+=1*(h+=1*((1e-6*-a.tension*(d-l)+.001*-a.friction*h)/a.mass))}}else{var E=1;a.duration>0&&(t._memoizedDuration!==a.duration&&(t._memoizedDuration=a.duration,s.durationProgress>0&&(s.elapsedTime=a.duration*s.durationProgress,p=s.elapsedTime+=e)),E=(E=(a.progress||0)+p/t._memoizedDuration)>1?1:E<0?0:E,s.durationProgress=E),h=((d=v+a.easing(E)*(l-v))-s.lastPosition)/e,f=1==E}s.lastVelocity=h,Number.isNaN(d)&&(console.warn("Got NaN while animating:",t),f=!0)}u&&!u[c].done&&(f=!1),f?s.done=!0:n=!1,s.setValue(d,a.round)&&(r=!0)}}));var s=_B(this),c=s.getValue();if(n){var l=qP(i.to);c===l&&!r||a.decay?r&&a.decay&&this._onChange(c):(s.setValue(l),this._onChange(l)),this._stop()}else r&&this._onChange(c)}},{key:"set",value:function(e){var t=this;return PR.batchedUpdates((function(){t._stop(),t._focus(e),t._set(e)})),this}},{key:"pause",value:function(){this._update({pause:!0})}},{key:"resume",value:function(){this._update({pause:!1})}},{key:"finish",value:function(){var e=this;if(SV(this)){var t=this.animation,n=t.to,r=t.config;PR.batchedUpdates((function(){e._onStart(),r.decay||e._set(n,!1),e._stop()}))}return this}},{key:"update",value:function(e){return(this.queue||(this.queue=[])).push(e),this}},{key:"start",value:function(e,t){var n,r=this;return $R.und(e)?(n=this.queue||[],this.queue=[]):n=[$R.obj(e)?e:UB({},t,{to:e})],Promise.all(n.map((function(e){return r._update(e)}))).then((function(e){return dV(r,e)}))}},{key:"stop",value:function(e){var t=this,n=this.animation.to;return this._focus(this.get()),gV(this._state,e&&this._lastCallId),PR.batchedUpdates((function(){return t._stop(n,e)})),this}},{key:"reset",value:function(){this._update({reset:!0})}},{key:"eventObserved",value:function(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}},{key:"_prepareNode",value:function(e){var t=this.key||"",n=e.to,r=e.from;(null==(n=$R.obj(n)?n[t]:n)||$B(n))&&(n=void 0),null==(r=$R.obj(r)?r[t]:r)&&(r=void 0);var i={to:n,from:r};if(!IV(this)){if(e.reverse){var a=[r,n];n=a[0],r=a[1]}r=qP(r),$R.und(r)?_B(this)||this._set(n):this._set(r)}return i}},{key:"_update",value:function(e,t){var n=this,r=UB({},e),i=this.key,a=this.defaultProps;r.default&&Object.assign(a,WB(r,(function(e,t){return/^on/.test(t)?VB(e,i):e}))),LV(this,r,"onProps"),FV(this,"onProps",r,this);var o=this._prepareNode(r);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");var u=this._state;return fV(++this._lastCallId,{key:i,props:r,defaultProps:a,state:u,actions:{pause:function(){EV(n)||(CV(n,!0),iP(u.pauseQueue),FV(n,"onPause",pV(n,AV(n,n.animation.to)),n))},resume:function(){EV(n)&&(CV(n,!1),SV(n)&&n._resume(),iP(u.resumeQueue),FV(n,"onResume",pV(n,AV(n,n.animation.to)),n))},start:this._merge.bind(this,o)}}).then((function(e){if(r.loop&&e.finished&&(!t||!e.noop)){var i=RV(r);if(i)return n._update(i,!0)}return e}))}},{key:"_merge",value:function(e,t,n){var r=this;if(t.cancel)return this.stop(!0),n(vV(this));var i=!$R.und(e.to),a=!$R.und(e.from);if(i||a){if(!(t.callId>this._lastToId))return n(vV(this));this._lastToId=t.callId}var o=this.key,u=this.defaultProps,s=this.animation,c=s.to,l=s.from,f=e.to,d=void 0===f?c:f,h=e.from,p=void 0===h?l:h;if(!a||i||t.default&&!$R.und(d)||(d=p),t.reverse){var v=[p,d];d=v[0],p=v[1]}var m=!XR(p,l);m&&(s.from=p),p=qP(p);var g=!XR(d,c);g&&this._focus(d);var y=$B(t.to),b=s.config,k=b.decay,w=b.velocity;(i||a)&&(b.velocity=0),t.config&&!y&&function(e,t,n){for(var r in n&&(sV(n=UB({},n),t),t=UB({},n,t)),sV(e,t),Object.assign(e,t),oV)null==e[r]&&(e[r]=oV[r]);var i=e.mass,a=e.frequency,o=e.damping;$R.und(a)||(a<.01&&(a=.01),o<0&&(o=0),e.tension=Math.pow(2*Math.PI/a,2)*i,e.friction=4*Math.PI*o*i/a)}(b,jB(t.config,o),t.config!==u.config?jB(u.config,o):void 0);var _=_B(this);if(!_||$R.und(d))return n(pV(this,!0));var x=$R.und(t.reset)?a&&!t.default:!$R.und(p)&&BB(t.reset,o),I=x?p:this.get(),S=QB(d),E=$R.num(S)||$R.arr(S)||fD(S),T=!y&&(!E||BB(u.immediate||t.immediate,o));if(g){var C=PB(d);if(C!==_.constructor){if(!T)throw Error("Cannot animate between ".concat(_.constructor.name," and ").concat(C.name,', as the "to" prop suggests'));_=this._set(S)}}var N=_.constructor,A=VP(d),R=!1;if(!A){var P=x||!IV(this)&&m;(g||P)&&(A=!(R=XR(QB(I),S))),(XR(s.immediate,T)||T)&&XR(b.decay,k)&&XR(b.velocity,w)||(A=!0)}if(R&&SV(this)&&(s.changed&&!x?A=!0:A||this._stop(c)),!y&&((A||VP(c))&&(s.values=_.getPayload(),s.toValues=VP(d)?null:N==TB?[1]:eP(S)),s.immediate!=T&&(s.immediate=T,T||x||this._set(c)),A)){var D=s.onRest;JR(MV,(function(e){return LV(r,t,e)}));var O=pV(this,AV(this,c));iP(this._pendingCalls,O),this._pendingCalls.add(n),s.changed&&PR.batchedUpdates((function(){s.changed=!x,null==D||D(O,r),x?jB(u.onRest,O):null==s.onStart||s.onStart(O,r)}))}x&&this._set(I),y?n(mV(t.to,t,this._state,this)):A?this._start():SV(this)&&!g?this._pendingCalls.add(n):n(hV(I))}},{key:"_focus",value:function(e){var t=this.animation;e!==t.to&&(zP(this)&&this._detach(),t.to=e,zP(this)&&this._attach())}},{key:"_attach",value:function(){var e=0,t=this.animation.to;VP(t)&&(KP(t,this),kV(t)&&(e=t.priority+1)),this.priority=e}},{key:"_detach",value:function(){var e=this.animation.to;VP(e)&&QP(e,this)}},{key:"_set",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=qP(e);if(!$R.und(r)){var i=_B(this);if(!i||!XR(r,i.getValue())){var a=PB(r);i&&i.constructor==a?i.setValue(r):xB(this,a.create(r)),i&&PR.batchedUpdates((function(){t._onChange(r,n)}))}}return _B(this)}},{key:"_onStart",value:function(){var e=this.animation;e.changed||(e.changed=!0,FV(this,"onStart",pV(this,AV(this,e.to)),this))}},{key:"_onChange",value:function(e,t){t||(this._onStart(),jB(this.animation.onChange,e,this)),jB(this.defaultProps.onChange,e,this),ne(ee(n.prototype),"_onChange",this).call(this,e,t)}},{key:"_start",value:function(){var e=this.animation;_B(this).reset(qP(e.to)),e.immediate||(e.fromValues=e.values.map((function(e){return e.lastPosition}))),SV(this)||(TV(this,!0),EV(this)||this._resume())}},{key:"_resume",value:function(){cP.skipAnimation?this.finish():pP.start(this)}},{key:"_stop",value:function(e,t){if(SV(this)){TV(this,!1);var n=this.animation;JR(n.values,(function(e){e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),WP(this,{type:"idle",parent:this});var r=t?vV(this.get()):pV(this.get(),AV(this,null!=e?e:n.to));iP(this._pendingCalls,r),n.changed&&(n.changed=!1,FV(this,"onRest",r,this))}}}]),n}(_V);function AV(e,t){var n=QB(t);return XR(QB(e.get()),n)}function RV(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to,r=jB(t);if(r){var i=!0!==r&&KB(r),a=(i||e).reverse,o=!i||i.reset;return PV(UB({},e,{loop:t,default:!1,pause:void 0,to:!a||$B(n)?n:void 0,from:o?e.from:void 0,reset:o},i))}}function PV(e){var t=e=KB(e),n=t.to,r=t.from,i=new Set;return $R.obj(n)&&OV(n,i),$R.obj(r)&&OV(r,i),e.keys=i.size?Array.from(i):null,e}function DV(e){var t=PV(e);return $R.und(t.default)&&(t.default=WB(t)),t}function OV(e,t){ZR(e,(function(e,n){return null!=e&&t.add(n)}))}var MV=["onStart","onRest","onChange","onPause","onResume"];function LV(e,t,n){e.animation[n]=t[n]!==qB(t,n)?VB(t[n],e.key):void 0}function FV(e,t){for(var n,r,i,a,o,u,s=arguments.length,c=new Array(s>2?s-2:0),l=2;l<s;l++)c[l-2]=arguments[l];null==(i=(a=e.animation)[t])||(n=i).call.apply(n,[a].concat(c)),null==(o=(u=e.defaultProps)[t])||(r=o).call.apply(r,[u].concat(c))}var UV=["onStart","onChange","onRest"],jV=1,BV=function(){function e(t,n){pe(this,e),this.id=jV++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),n&&(this._flush=n),t&&this.start(UB({default:!0},t))}return me(e,[{key:"idle",get:function(){return!this._state.asyncTo&&Object.values(this.springs).every((function(e){return e.idle&&!e.isDelayed&&!e.isPaused}))}},{key:"item",get:function(){return this._item},set:function(e){this._item=e}},{key:"get",value:function(){var e={};return this.each((function(t,n){return e[n]=t.get()})),e}},{key:"set",value:function(e){for(var t in e){var n=e[t];$R.und(n)||this.springs[t].set(n)}}},{key:"update",value:function(e){return e&&this.queue.push(PV(e)),this}},{key:"start",value:function(e){var t=this.queue;return e?t=eP(e).map(PV):this.queue=[],this._flush?this._flush(this,t):(QV(this,t),VV(this,t))}},{key:"stop",value:function(e,t){if(e!==!!e&&(t=e),t){var n=this.springs;JR(eP(t),(function(t){return n[t].stop(!!e)}))}else gV(this._state,this._lastAsyncId),this.each((function(t){return t.stop(!!e)}));return this}},{key:"pause",value:function(e){if($R.und(e))this.start({pause:!0});else{var t=this.springs;JR(eP(e),(function(e){return t[e].pause()}))}return this}},{key:"resume",value:function(e){if($R.und(e))this.start({pause:!1});else{var t=this.springs;JR(eP(e),(function(e){return t[e].resume()}))}return this}},{key:"each",value:function(e){ZR(this.springs,e)}},{key:"_onFrame",value:function(){var e=this,t=this._events,n=t.onStart,r=t.onChange,i=t.onRest,a=this._active.size>0,o=this._changed.size>0;(a&&!this._started||o&&!this._started)&&(this._started=!0,tP(n,(function(t){var n=f(t,2),r=n[0],i=n[1];i.value=e.get(),r(i,e,e._item)})));var u=!a&&this._started,s=o||u&&i.size?this.get():null;o&&r.size&&tP(r,(function(t){var n=f(t,2),r=n[0],i=n[1];i.value=s,r(i,e,e._item)})),u&&(this._started=!1,tP(i,(function(t){var n=f(t,2),r=n[0],i=n[1];i.value=s,r(i,e,e._item)})))}},{key:"eventObserved",value:function(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}PR.onFrame(this._onFrame)}}]),e}();function VV(e,t){return Promise.all(t.map((function(t){return qV(e,t)}))).then((function(t){return dV(e,t)}))}function qV(e,t,n){return zV.apply(this,arguments)}function zV(){return zV=he(fe().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d,h,p,v,m;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.keys,a=n.to,o=n.from,u=n.loop,s=n.onRest,c=n.onResolve,l=$R.obj(n.default)&&n.default,u&&(n.loop=!1),!1===a&&(n.to=null),!1===o&&(n.from=null),(f=$R.arr(a)||$R.fun(a)?a:void 0)?(n.to=void 0,n.onRest=void 0,l&&(l.onRest=void 0)):JR(UV,(function(e){var r=n[e];if($R.fun(r)){var i=t._events[e];n[e]=function(e){var t=e.finished,n=e.cancelled,a=i.get(r);a?(t||(a.finished=!1),n&&(a.cancelled=!0)):i.set(r,{value:null,finished:t||!1,cancelled:n||!1})},l&&(l[e]=n[e])}})),d=t._state,n.pause===!d.paused?(d.paused=n.pause,iP(n.pause?d.pauseQueue:d.resumeQueue)):d.paused&&(n.pause=!0),h=(i||Object.keys(t.springs)).map((function(e){return t.springs[e].start(n)})),p=!0===n.cancel||!0===qB(n,"cancel"),(f||p&&d.asyncId)&&h.push(fV(++t._lastAsyncId,{props:n,state:d,actions:{pause:YR,resume:YR,start:function(e,n){p?(gV(d,t._lastAsyncId),n(vV(t))):(e.onRest=s,n(mV(f,e,d,t)))}}})),!d.paused){e.next=15;break}return e.next=15,new Promise((function(e){d.resumeQueue.add(e)}));case 15:return e.t0=dV,e.t1=t,e.next=19,Promise.all(h);case 19:if(e.t2=e.sent,v=(0,e.t0)(e.t1,e.t2),!u||!v.finished||r&&v.noop){e.next=26;break}if(!(m=RV(n,u,a))){e.next=26;break}return QV(t,[m]),e.abrupt("return",qV(t,m,!0));case 26:return c&&PR.batchedUpdates((function(){return c(v,t,t.item)})),e.abrupt("return",v);case 28:case"end":return e.stop()}}),e)}))),zV.apply(this,arguments)}function WV(e,t){var n=UB({},e.springs);return t&&JR(eP(t),(function(e){$R.und(e.keys)&&(e=PV(e)),$R.obj(e.to)||(e=UB({},e,{to:void 0})),KV(n,e,(function(e){return HV(e)}))})),GV(e,n),n}function GV(e,t){ZR(t,(function(t,n){e.springs[n]||(e.springs[n]=t,KP(t,e))}))}function HV(e,t){var n=new NV;return n.key=e,t&&KP(n,t),n}function KV(e,t,n){t.keys&&JR(t.keys,(function(r){(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function QV(e,t){JR(t,(function(t){KV(e.springs,t,(function(t){return HV(t,e)}))}))}function YV(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var $V,XV,JV=["children"],ZV=function(e){var t=e.children,n=YV(e,JV),r=(0,i.useContext)(eq),a=n.pause||!!r.pause,o=n.immediate||!!r.immediate;n=function(e,t){var n=f((0,i.useState)((function(){return{inputs:t,result:e()}})),1)[0],r=(0,i.useRef)(),a=r.current,o=a;if(o){var u=Boolean(t&&o.inputs&&function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,o.inputs));u||(o={inputs:t,result:e()})}else o=n;return(0,i.useEffect)((function(){r.current=o,a==n&&(n.inputs=n.result=void 0)}),[o]),o.result}((function(){return{pause:a,immediate:o}}),[a,o]);var u=eq.Provider;return i.createElement(u,{value:n},t)},eq=($V=ZV,XV={},Object.assign($V,i.createContext(XV)),$V.Provider._context=$V,$V.Consumer._context=$V,$V);ZV.Provider=eq.Provider,ZV.Consumer=eq.Consumer;var tq=function(){var e=[],t=function(t){lD("".concat(oD,'Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions'));var r=[];return JR(e,(function(e,i){if($R.und(t))r.push(e.start());else{var a=n(t,e,i);a&&r.push(e.start(a))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){var n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){var t=arguments;return JR(e,(function(e){return e.pause.apply(e,ye(t))})),this},t.resume=function(){var t=arguments;return JR(e,(function(e){return e.resume.apply(e,ye(t))})),this},t.set=function(t){JR(e,(function(e){return e.set(t)}))},t.start=function(t){var n=this,r=[];return JR(e,(function(e,i){if($R.und(t))r.push(e.start());else{var a=n._getProps(t,e,i);a&&r.push(e.start(a))}})),r},t.stop=function(){var t=arguments;return JR(e,(function(e){return e.stop.apply(e,ye(t))})),this},t.update=function(t){var n=this;return JR(e,(function(e,r){return e.update(n._getProps(t,e,r))})),this};var n=function(e,t,n){return $R.fun(e)?e(n,t):e};return t._getProps=n,t};function nq(e,t,n){var r=arguments,a=$R.fun(t)&&t;a&&!n&&(n=[]);var o=(0,i.useMemo)((function(){return a||3==r.length?tq():void 0}),[]),u=(0,i.useRef)(0),s=hD(),c=(0,i.useMemo)((function(){return{ctrls:[],queue:[],flush:function(e,t){var n=WV(e,t);return u.current>0&&!c.queue.length&&!Object.keys(n).some((function(t){return!e.springs[t]}))?VV(e,t):new Promise((function(r){GV(e,n),c.queue.push((function(){r(VV(e,t))})),s()}))}}}),[]),l=(0,i.useRef)(ye(c.ctrls)),f=[],d=mD(e)||0;function h(e,n){for(var r=e;r<n;r++){var i=l.current[r]||(l.current[r]=new BV(null,c.flush)),o=a?a(r,i):t[r];o&&(f[r]=DV(o))}}(0,i.useMemo)((function(){JR(l.current.slice(e,d),(function(e){XB(e,o),e.stop(!0)})),l.current.length=e,h(d,e)}),[e]),(0,i.useMemo)((function(){h(0,Math.min(d,e))}),n);var p=l.current.map((function(e,t){return WV(e,f[t])})),v=(0,i.useContext)(ZV),m=mD(v),g=v!==m&&YB(v);dD((function(){u.current++,c.ctrls=l.current;var e=c.queue;e.length&&(c.queue=[],JR(e,(function(e){return e()}))),JR(l.current,(function(e,t){null==o||o.add(e),g&&e.start({default:v});var n=f[t];n&&(JB(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),pD((function(){return function(){JR(c.ctrls,(function(e){return e.stop(!0)}))}}));var y=p.map((function(e){return UB({},e)}));return o?[y,o]:y}function rq(e,t){var n=$R.fun(e),r=nq(1,n?e:[e],n?t||[]:t),i=f(r,2),a=f(i[0],1),o=a[0],u=i[1];return n||2==arguments.length?[o,u]:o}var iq;!function(e){e.MOUNT="mount",e.ENTER="enter",e.UPDATE="update",e.LEAVE="leave"}(iq||(iq={}));var aq=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;pe(this,n),(i=t.call(this)).key=void 0,i.idle=!0,i.calc=void 0,i._active=new Set,i.source=e,i.calc=FP.apply(void 0,ye(r));var a=i._get(),o=PB(a);return xB(re(i),o.create(a)),i}return me(n,[{key:"advance",value:function(e){var t=this._get();XR(t,this.get())||(_B(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&uq(this._active)&&sq(this)}},{key:"_get",value:function(){var e=$R.arr(this.source)?this.source.map(qP):eP(qP(this.source));return this.calc.apply(this,ye(e))}},{key:"_start",value:function(){var e=this;this.idle&&!uq(this._active)&&(this.idle=!1,JR(IB(this),(function(e){e.done=!1})),cP.skipAnimation?(PR.batchedUpdates((function(){return e.advance()})),sq(this)):pP.start(this))}},{key:"_attach",value:function(){var e=this,t=1;JR(eP(this.source),(function(n){VP(n)&&KP(n,e),kV(n)&&(n.idle||e._active.add(n),t=Math.max(t,n.priority+1))})),this.priority=t,this._start()}},{key:"_detach",value:function(){var e=this;JR(eP(this.source),(function(t){VP(t)&&QP(t,e)})),this._active.clear(),sq(this)}},{key:"eventObserved",value:function(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=eP(this.source).reduce((function(e,t){return Math.max(e,(kV(t)?t.priority:0)+1)}),0))}}]),n}(_V);function oq(e){return!1!==e.idle}function uq(e){return!e.size||Array.from(e).every(oq)}function sq(e){e.idle||(e.idle=!0,JR(IB(e),(function(e){e.done=!0})),WP(e,{type:"idle",parent:e}))}cP.assign({createStringInterpolator:aD,to:function(e,t){return new aq(e,t)}});pP.advance;function cq(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var lq=["style","children","scrollTop","scrollLeft"],fq=/^--/;function dq(e,t){return null==t||"boolean"===typeof t||""===t?"":"number"!==typeof t||0===t||fq.test(e)||pq.hasOwnProperty(e)&&pq[e]?(""+t).trim():t+"px"}var hq={};var pq={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vq=["Webkit","Ms","Moz","O"];pq=Object.keys(pq).reduce((function(e,t){return vq.forEach((function(n){return e[function(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}(n,t)]=e[t]})),e}),pq);var mq=["x","y","z"],gq=/^(matrix|translate|scale|rotate|skew)/,yq=/^(translate)/,bq=/^(rotate|skew)/,kq=function(e,t){return $R.num(e)&&0!==e?e+t:e},wq=function e(t,n){return $R.arr(t)?t.every((function(t){return e(t,n)})):$R.num(t)?t===n:parseFloat(t)===n},_q=function(e){ae(n,e);var t=ce(n);function n(e){pe(this,n);var r=e.x,i=e.y,a=e.z,o=cq(e,mq),u=[],s=[];return(r||i||a)&&(u.push([r||0,i||0,a||0]),s.push((function(e){return["translate3d(".concat(e.map((function(e){return kq(e,"px")})).join(","),")"),wq(e,0)]}))),ZR(o,(function(e,t){if("transform"===t)u.push([e||""]),s.push((function(e){return[e,""===e]}));else if(gq.test(t)){if(delete o[t],$R.und(e))return;var n=yq.test(t)?"px":bq.test(t)?"deg":"";u.push(eP(e)),s.push("rotate3d"===t?function(e){var t=f(e,4),r=t[0],i=t[1],a=t[2],o=t[3];return["rotate3d(".concat(r,",").concat(i,",").concat(a,",").concat(kq(o,n),")"),wq(o,0)]}:function(e){return["".concat(t,"(").concat(e.map((function(e){return kq(e,n)})).join(","),")"),wq(e,t.startsWith("scale")?1:0)]})}})),u.length&&(o.transform=new xq(u,s)),t.call(this,o)}return me(n)}(NB),xq=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this))._value=null,i.inputs=e,i.transforms=r,i}return me(n,[{key:"get",value:function(){return this._value||(this._value=this._get())}},{key:"_get",value:function(){var e=this,t="",n=!0;return JR(this.inputs,(function(r,i){var a=qP(r[0]),o=f(e.transforms[i]($R.arr(a)?a:r.map(qP)),2),u=o[0],s=o[1];t+=" "+u,n=n&&s})),n?"none":t}},{key:"observerAdded",value:function(e){var t=this;1==e&&JR(this.inputs,(function(e){return JR(e,(function(e){return VP(e)&&KP(e,t)}))}))}},{key:"observerRemoved",value:function(e){var t=this;0==e&&JR(this.inputs,(function(e){return JR(e,(function(e){return VP(e)&&QP(e,t)}))}))}},{key:"eventObserved",value:function(e){"change"==e.type&&(this._value=null),WP(this,e)}}]),n}(GP),Iq=["scrollTop","scrollLeft"];cP.assign({batchedUpdates:yE.unstable_batchedUpdates,createStringInterpolator:aD,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var Sq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.applyAnimatedValues,r=void 0===n?function(){return!1}:n,i=t.createAnimatedStyle,a=void 0===i?function(e){return new NB(e)}:i,o=t.getComponentProps,u=void 0===o?function(e){return e}:o,s={applyAnimatedValues:r,createAnimatedStyle:a,getComponentProps:u},c=function e(t){var n=FB(t)||"Anonymous";return(t=$R.str(t)?e[t]||(e[t]=OB(t,s)):t[LB]||(t[LB]=OB(t,s))).displayName="Animated(".concat(n,")"),t};return ZR(e,(function(t,n){$R.arr(e)&&(n=FB(t)),c[n]=c(t)})),{animated:c}}(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;var n="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,r=t,i=r.style,a=r.children,o=r.scrollTop,u=r.scrollLeft,s=cq(r,lq),c=Object.values(s),l=Object.keys(s).map((function(t){return n||e.hasAttribute(t)?t:hq[t]||(hq[t]=t.replace(/([A-Z])/g,(function(e){return"-"+e.toLowerCase()})))}));for(var f in void 0!==a&&(e.textContent=a),i)if(i.hasOwnProperty(f)){var d=dq(f,i[f]);fq.test(f)?e.style.setProperty(f,d):e.style[f]=d}l.forEach((function(t,n){e.setAttribute(t,c[n])})),void 0!==o&&(e.scrollTop=o),void 0!==u&&(e.scrollLeft=u)},createAnimatedStyle:function(e){return new _q(e)},getComponentProps:function(e){return cq(e,Iq)}}),Eq=Sq.animated,Tq=function(e){var t=(0,i.useContext)(xY),n=t.auth,r=(t.firestore,f(Ys(n),3)),a=r[0],o=(r[1],r[2],V());return(0,i.useEffect)((function(){o("/todo")}),[]),a?(0,uc.jsxs)(K,{children:[(0,uc.jsx)(G,{exact:!0,path:"/todo/tasks",element:(0,uc.jsx)(sO,{})}),(0,uc.jsx)(G,{exact:!0,path:"/todo/about",element:(0,uc.jsx)(kB,{})}),(0,uc.jsx)(G,{path:"*",element:(0,uc.jsx)(W,{replace:!0,to:"/todo/tasks"})})]}):(0,uc.jsxs)(K,{children:[(0,uc.jsx)(G,{exact:!0,path:"/todo/login",element:(0,uc.jsx)(pB,{})}),(0,uc.jsx)(G,{exact:!0,path:"/todo/signup",element:(0,uc.jsx)(bB,{})}),(0,uc.jsx)(G,{exact:!0,path:"/todo/about",element:(0,uc.jsx)(kB,{})}),(0,uc.jsx)(G,{path:"*",element:(0,uc.jsx)(W,{replace:!0,to:"/todo/login"})})]})},Cq="UpTitle_block__bg4JP",Nq="UpTitle_title__Zv5mL",Aq="UpTitle_exitBtn__8j8pr";var Rq=YD((function(e){return{lang:e.lang.lang,isDarkTheme:e.theme.isDarkTheme}}))((function(e){var t={dark:{r:9,transform:"rotate(40deg)",cx:12,cy:4,opacity:0},light:{r:5,transform:"rotate(90deg)",cx:30,cy:0,opacity:1},springConfig:{mass:4,tension:250,friction:35}},n=t[e.isDarkTheme?"light":"dark"],r=n.r,i=n.transform,a=n.cx,o=n.cy,u=n.opacity,s=rq({transform:i,config:t.springConfig}),c=rq({r:r,config:t.springConfig}),l=rq({cx:a,cy:o,config:t.springConfig}),f=rq({opacity:u,config:t.springConfig});return(0,uc.jsxs)(Eq.svg,{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor",onClick:function(){e.dispatch({type:"CHANGE"})},style:Et({cursor:"pointer"},s),children:[(0,uc.jsxs)("mask",{id:"myMask2",children:[(0,uc.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),(0,uc.jsx)(Eq.circle,{style:l,r:"9",fill:"black"})]}),(0,uc.jsx)(Eq.circle,{cx:"12",cy:"12",style:c,fill:"white",mask:"url(#myMask2)"}),(0,uc.jsxs)(Eq.g,{stroke:"currentColor",style:f,children:[(0,uc.jsx)("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),(0,uc.jsx)("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),(0,uc.jsx)("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),(0,uc.jsx)("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),(0,uc.jsx)("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),(0,uc.jsx)("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),(0,uc.jsx)("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),(0,uc.jsx)("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]})]})}));var Pq=YD((function(e){return{lang:e.lang.lang,isDarkTheme:e.theme.isDarkTheme}}))((function(e){var t=(0,i.useContext)(xY),n=t.auth,r=(t.firestore,f(Ys(n),3)),a=r[0],o=r[1];r[2];return o?"":(0,uc.jsxs)("div",{className:Cq,children:[a?(0,uc.jsxs)("button",{className:Aq,onClick:function(){return n.signOut()},children:[" ",e.lang?"Sign out":"\u0412\u044b\u0439\u0442\u0438","  "]}):"",(0,uc.jsx)("div",{className:Nq,children:"TODO"}),(0,uc.jsx)(Rq,{})]})})),Dq={DT:"DownTools_DT__ymChL",about:"DownTools_about__ONy0+",light:"DownTools_light__UB9-1"};var Oq=YD((function(e){return{lang:e.lang.lang,isDarkTheme:e.theme.isDarkTheme}}))((function(e){var t=B();console.log();var n=e.isDarkTheme?Dq.dark:Dq.light;return(0,uc.jsxs)("div",{className:Dq.DT+" "+n,children:[(0,uc.jsxs)("select",{onChange:function(){e.dispatch({type:"CHANGE_LANG"})},children:[(0,uc.jsx)("option",{children:e.lang?"Eng":"\u0410\u043d\u0433\u043b"}),(0,uc.jsx)("option",{children:e.lang?"Rus":"\u0420\u0443\u0441"})]}),"/tasks"===t.pathname?(0,uc.jsx)("div",{style:{marginLeft:"-10px"},children:e.lang?"drag&drop to reorder list":"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0434\u043b\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u043f\u043e\u0440\u044f\u0434\u043a\u0430"}):"","/about"===t.pathname?(0,uc.jsxs)(Z,{className:Dq.about,to:"/tasks",children:[" ",e.lang?"To main":"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"]}):(0,uc.jsxs)(Z,{className:Dq.about,to:"/about",children:[" ",e.lang?"About":"\u041e \u0441\u0430\u0439\u0442\u0435"]})]})})),Mq={isDarkTheme:!0};var Lq={lang:!0};var Fq=YD((function(e){return{lang:e.lang.lang,isDarkTheme:e.theme.isDarkTheme}}))((function(e){return(0,uc.jsx)("div",{className:e.isDarkTheme?"app dark":"app light",children:(0,uc.jsxs)(J,{children:[(0,uc.jsx)(Pq,{}),(0,uc.jsx)(Tq,{}),(0,uc.jsx)(Oq,{})]})})}));function Uq(){return window}function jq(e,t,n){return Bq.apply(this,arguments)}function Bq(){return Bq=he(fe().mark((function e(t,n,r){var i,a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Uq(),o=a.BuildInfo,ar(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,Hq(n.sessionId);case 4:return u=e.sent,s={},ci()?s.ibi=o.packageName:oi()?s.apn=o.packageName:Jn(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",Ds(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),Bq.apply(this,arguments)}function Vq(){return Vq=he(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Uq(),r=n.BuildInfo,i={},ci()?i.iosBundleId=r.packageName:oi()?i.androidPackageName=r.packageName:Jn(t,"operation-not-supported-in-this-environment"),e.next=5,cs(t,i);case 5:case"end":return e.stop()}}),e)}))),Vq.apply(this,arguments)}function qq(e){var t=Uq().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function zq(e,t,n){return Wq.apply(this,arguments)}function Wq(){return Wq=he(fe().mark((function e(t,n,r){var i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Uq(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Zn(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),oi()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),Wq.apply(this,arguments)}function Gq(e){var t,n,r,i,a,o,u,s,c,l,f=Uq();rr("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),rr("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),rr("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),rr("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),rr("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function Hq(e){return Kq.apply(this,arguments)}function Kq(){return(Kq=he(fe().mark((function e(t){var n,r,i;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Qq(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qq(e){if(ar(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var Yq=function(e){ae(n,e);var t=ce(n);function n(){var e;return pe(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return me(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),ne(ee(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(os);function $q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:tz(),postBody:null,tenantId:e.tenantId,error:Zn(e,"no-auth-event")}}function Xq(e,t){return nz()._set(rz(e),t)}function Jq(e){return Zq.apply(this,arguments)}function Zq(){return Zq=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nz()._get(rz(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,nz()._remove(rz(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),Zq.apply(this,arguments)}function ez(e,t){var n,r,i=function(e){var t=iz(e),n=t.link?decodeURIComponent(t.link):void 0,r=iz(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return iz(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=iz(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Zn(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function tz(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function nz(){return ur(Eo)}function rz(e){return Zr("authEvent",e.config.apiKey,e.name)}function iz(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=u(t=n)||ge(t)||c(t)||l();r[0];return rt(r.slice(1).join("?"))}var az=function(){function e(){pe(this,e),this._redirectPersistence=Co,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ns,this._overrideRedirectResult=Gu}return me(e,[{key:"_initialize",value:function(){var e=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new Yq(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Jn(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=he(fe().mark((function e(t,n,r,i){var a,o,u,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Gq(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),ju.clear(),e.next=10,this._originValidation(t);case 10:return o=$q(t,r,i),e.next=13,Xq(t,o);case 13:return e.next=15,jq(t,o,n);case 15:return u=e.sent,e.next=18,qq(u);case 18:return s=e.sent,e.abrupt("return",zq(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Vq.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=Uq(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(he(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Jq(e);case 2:t.onEvent(uz());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=he(fe().mark((function n(r){var i,a;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,Jq(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ez(i,r.url)),t.onEvent(a||uz());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");Uq().handleOpenURL=function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),oz=az;function uz(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Zn("no-auth-event")}}function sz(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function cz(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return!("file:"!==sz()&&"ionic:"!==sz()&&"capacitor:"!==sz()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function lz(){return Be()&&11===(null===document||void 0===document?void 0:document.documentMode)}function fz(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return/Edge\/\d+/.test(e)}function dz(){try{var e=self.localStorage,t=Ro();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me();return lz()||fz(e)}()||qe()}catch(n){return hz()&&qe()}return!1}function hz(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function pz(){return("http:"===sz()||"https:"===sz()||Ue()||cz())&&!(je()||Fe())&&dz()&&!hz()}function vz(){return cz()&&"undefined"!==typeof document}function mz(){return gz.apply(this,arguments)}function gz(){return(gz=he(fe().mark((function e(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vz()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yz={LOCAL:"local",NONE:"none",SESSION:"session"},bz=rr,kz="persistence";function wz(e,t){bz(Object.values(yz).includes(t),e,"invalid-persistence-type"),je()?bz(t!==yz.SESSION,e,"unsupported-persistence-type"):Fe()?bz(t===yz.NONE,e,"unsupported-persistence-type"):hz()?bz(t===yz.NONE||t===yz.LOCAL&&qe(),e,"unsupported-persistence-type"):bz(t===yz.NONE||dz(),e,"unsupported-persistence-type")}function _z(e){return xz.apply(this,arguments)}function xz(){return xz=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=Iz(),r=Zr(kz,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),xz.apply(this,arguments)}function Iz(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var Sz=rr,Ez=function(){function e(){pe(this,e),this.browserResolver=ur(Ls),this.cordovaResolver=ur(oz),this.underlyingResolver=null,this._redirectPersistence=Co,this._completeRedirectFn=ns,this._overrideRedirectResult=Gu}return me(e,[{key:"_initialize",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=he(fe().mark((function e(t,n,r,i){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=he(fe().mark((function e(t,n,r,i){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return vz()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return Sz(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,mz();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Tz(e){return e.unwrap()}function Cz(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new Dz(e,function(e,t){var n,r=ft(e),i=t;return rr(t.customData.operationType,r,"argument-error"),rr(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),yo._fromError(r,i)}(e,t));else if(r){var i=Nz(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function Nz(e){var t=(e instanceof ze?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof ze)&&"temporaryProof"in t&&"phoneNumber"in t)return Iu.credentialFromResult(e);var n,r=t.providerId;if(!r||r===Un)return null;switch(r){case Fn:n=ua;break;case Mn:n=oa;break;case Ln:n=sa;break;case jn:n=fa;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?ca._create(r,u):Ki._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new aa(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof ze?n.credentialFromError(e):n.credentialFromResult(e)}function Az(e,t){return t.catch((function(t){throw t instanceof ze&&Cz(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,Nz(t)),additionalUserInfo:mo(e),user:Oz.getOrCreate(r)}}))}function Rz(e,t){return Pz.apply(this,arguments)}function Pz(){return Pz=he(fe().mark((function e(t,n){var r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return Az(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),Pz.apply(this,arguments)}var Dz=function(){function e(t,n){pe(this,e),this.resolver=n,this.auth=t.wrapped()}return me(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return Az(Tz(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),Oz=function(){function e(t){pe(this,e),this._delegate=t,this.multiFactor=function(e){var t=ft(e);return _o.has(t)||_o.set(t,wo._fromUser(t)),_o.get(t)}(t)}return me(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Az(this.auth,Pa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Rz(this.auth,yu(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Az(this.auth,Lu(this._delegate,t,Ez)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_z(mi(this.auth));case 2:return e.abrupt("return",Ju(this._delegate,t,Ez));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Az(this.auth,Oa(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return Rz(this.auth,function(e,t,n){return ku.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return Az(this.auth,function(e,t,n){return Mu.apply(this,arguments)}(this._delegate,e,Ez))}},{key:"reauthenticateWithRedirect",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_z(mi(this.auth));case 2:return e.abrupt("return",$u(this._delegate,t,Ez));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return no.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ka(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return uo(ft(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return uo(ft(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return xu.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return oo.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return ro.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();Oz.USER_MAP=new WeakMap;var Mz=rr,Lz=function(){function e(t,n){if(pe(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;Mz(r,"invalid-api-key",{appName:t.name}),Mz(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?Ez:void 0;this._delegate=n.initialize({options:{persistence:Uz(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Kn),this.linkUnderlyingAuth()}return me(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?Oz.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){yi(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return Wa.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ga(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return za.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=he(fe().mark((function e(t,n){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Az(this._delegate,Qa(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return to.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=ta.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=he(fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mz(pz(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,es(this._delegate,Ez);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",Az(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){mi(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=Fz(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=Fz(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Xa.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return qa.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=he(fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:wz(this._delegate,t),e.t0=t,e.next=e.t0===yz.SESSION?4:e.t0===yz.LOCAL?6:e.t0===yz.NONE?11:13;break;case 4:return n=Co,e.abrupt("break",14);case 6:return e.next=8,ur(Xo)._isAvailable();case 8:return r=e.sent,n=r?Xo:Eo,e.abrupt("break",14);case 11:return n=Jr,e.abrupt("break",14);case 13:return e.abrupt("return",Jn("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return Az(this._delegate,function(e){return ma.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return Az(this._delegate,Aa(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return Az(this._delegate,function(e,t){return Ua.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return Az(this._delegate,$a(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return Az(this._delegate,function(e,t,n){return Ja.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return Rz(this._delegate,function(e,t,n){return gu.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mz(pz(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",Az(this._delegate,Du(this._delegate,t,Ez)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=he(fe().mark((function e(t){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mz(pz(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,_z(this._delegate);case 3:return e.abrupt("return",Qu(this._delegate,t,Ez));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Ka.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function Fz(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&Oz.getOrCreate(e))},error:t,complete:n}}function Uz(e,t){var n=function(e,t){var n=Iz();if(!n)return[];var r=Zr(kz,e,t);switch(n.getItem(r)){case yz.NONE:return[Jr];case yz.LOCAL:return[Xo,Co];case yz.SESSION:return[Co];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Xo)||n.push(Xo),"undefined"!==typeof window)for(var r=0,i=[Eo,Co];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Jr)||n.push(Jr),n}Lz.Persistence=yz;var jz=function(){function e(){pe(this,e),this.providerId="phone",this._delegate=new Iu(Tz(mO.auth()))}return me(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return Iu.credential(e,t)}}]),e}();jz.PHONE_SIGN_IN_METHOD=Iu.PHONE_SIGN_IN_METHOD,jz.PROVIDER_ID=Iu.PROVIDER_ID;var Bz,Vz=rr,qz=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mO.app();pe(this,e),Vz(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new pu(t,n,i.auth()),this.type=this._delegate.type}return me(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();(Bz=mO).INTERNAL.registerComponent(new dt("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Lz(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Bn,PASSWORD_RESET:Vn,RECOVER_EMAIL:qn,REVERT_SECOND_FACTOR_ADDITION:zn,VERIFY_AND_CHANGE_EMAIL:Wn,VERIFY_EMAIL:Gn}},EmailAuthProvider:na,FacebookAuthProvider:oa,GithubAuthProvider:sa,GoogleAuthProvider:ua,OAuthProvider:aa,SAMLAuthProvider:la,PhoneAuthProvider:jz,PhoneMultiFactorGenerator:js,RecaptchaVerifier:qz,TwitterAuthProvider:fa,Auth:Lz,AuthCredential:wi,Error:ze}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Bz.registerVersion("@firebase/auth-compat","0.2.15");function zz(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Lh("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function Wz(){if("undefined"===typeof Uint8Array)throw new Lh("unimplemented","Uint8Arrays are not available in this environment.")}function Gz(){if("undefined"==typeof atob)throw new Lh("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Hz=function(){function e(t){pe(this,e),this._delegate=t}return me(e,[{key:"toBase64",value:function(){return Gz(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return Wz(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return Gz(),new e($x.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return Wz(),new e($x.fromUint8Array(t))}}]),e}();function Kz(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=le(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var Qz=function(){function e(){pe(this,e)}return me(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Qx(e=Sx(e,Bx));var n=Vx(e),r=e._freezeSettings(),i=new $_;return zx(n,i,new Q_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Qx(e=Sx(e,Bx));var t=Vx(e),n=e._freezeSettings(),r=new $_;return zx(t,r,new Y_(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Lh(Mh.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Fh;return e._queue.enqueueAndForgetEvenWhileRestricted(he(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=he(fe().mark((function e(t){var n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ny.vt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ny.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Db(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),Yz=function(){function e(t,n,r){var i=this;pe(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof gp||(this._appCompat=t)}return me(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ah("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Nx(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Wx(this._delegate)}},{key:"disableNetwork",value:function(){return Gx(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&wx("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Fh;return e.asyncQueue.enqueueAndForget(he(fe().mark((function n(){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=p_,n.next=3,px(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Vx(e=Sx(e,Bx)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return sS(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Lh("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new cW(this,Dx(this._delegate,e))}catch(t){throw tW(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new eW(this,Ox(this._delegate,e))}catch(t){throw tW(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new oW(this,function(e,t){if(e=Sx(e,Cx),kx("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Lh(Mh.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Rx(e,null,function(e){return new Nv(ip.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw tW(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return dS(this._delegate,(function(n){return e(new Xz(t,n))}))}},{key:"batch",value:function(){var e=this;return Vx(this._delegate),new Jz(new eS(this._delegate,(function(t){return cS(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Hx(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Kx(this._delegate,e).then((function(e){return e?new oW(t,e):null}))}}]),e}(),$z=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).firestore=e,r}return me(n,[{key:"convertBytes",value:function(e){return new Hz(new $x(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return eW.forKey(t,this.firestore,null)}}]),n}(XI);var Xz=function(){function e(t,n){pe(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new $z(t)}return me(e,[{key:"get",value:function(e){var t=this,n=lW(e);return this._delegate.get(n).then((function(e){return new iW(t._firestore,new NI(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=lW(e);return n?(zz("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=lW(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=lW(e);return this._delegate.delete(t),this}}]),e}(),Jz=function(){function e(t){pe(this,e),this._delegate=t}return me(e,[{key:"set",value:function(e,t,n){var r=lW(e);return n?(zz("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=lW(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=lW(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Zz=function(){function e(t,n,r){pe(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return me(e,[{key:"fromFirestore",value:function(e,t){var n=new AI(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new aW(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new $z(t),n),i.set(n,a)),a}}]),e}();Zz.INSTANCES=new WeakMap;var eW=function(){function e(t,n){pe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $z(t)}return me(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new cW(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new cW(this.firestore,Dx(this._delegate,e))}catch(t){throw tW(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ft(e))instanceof Ax&&Mx(this._delegate,e)}},{key:"set",value:function(e,t){t=zz("DocumentReference.set",t);try{return t?aS(this._delegate,e,t):aS(this._delegate,e)}catch(n){throw tW(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?oS(this._delegate,e):oS.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw tW(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return cS(Sx(e.firestore,Bx),[new xm(e._key,sm.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=nW(n),a=rW(n,(function(t){return new iW(e.firestore,new NI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return uS(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?rS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Sx(e,Ax);var t=Sx(e.firestore,Bx);return gx(Vx(t),e._key,{source:"server"}).then((function(n){return lS(t,e,n)}))}(this._delegate):function(e){e=Sx(e,Ax);var t=Sx(e.firestore,Bx);return gx(Vx(t),e._key).then((function(n){return lS(t,e,n)}))}(this._delegate),t.then((function(e){return new iW(n.firestore,new NI(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Zz.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Lh("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Ax(n._delegate,r,new wp(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Ax(n._delegate,r,t))}}]),e}();function tW(e,t,n){return e.message=e.message.replace(t,n),e}function nW(e){var t,n=le(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!Kz(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function rW(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=Kz(e[0])?e[0]:Kz(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var iW=function(){function e(t,n){pe(this,e),this._firestore=t,this._delegate=n}return me(e,[{key:"ref",get:function(){return new eW(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return DI(this._delegate,e._delegate)}}]),e}(),aW=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Ph()}(void 0!==t),t}}]),n}(iW),oW=function(){function e(t,n){pe(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new $z(t)}return me(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,LI(this._delegate,function(e,t,n){var r=t,i=TI("where",e);return new FI(i,r,n)}(t,n,r)))}catch(i){throw tW(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,LI(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=TI("orderBy",e);return new UI(n,t)}(t,n)))}catch(r){throw tW(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,LI(this._delegate,function(e){return Ex("limit",e),new jI("limit",e,"F")}(t)))}catch(n){throw tW(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,LI(this._delegate,function(e){return Ex("limitToLast",e),new jI("limitToLast",e,"L")}(t)))}catch(n){throw tW(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,LI(this._delegate,VI.apply(void 0,arguments)))}catch(t){throw tW(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,LI(this._delegate,qI.apply(void 0,arguments)))}catch(t){throw tW(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,LI(this._delegate,WI.apply(void 0,arguments)))}catch(t){throw tW(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,LI(this._delegate,GI.apply(void 0,arguments)))}catch(t){throw tW(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Lx(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?iS(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Sx(e,Rx);var t=Sx(e.firestore,Bx),n=Vx(t),r=new nS(t);return yx(n,e._query,{source:"server"}).then((function(n){return new RI(t,r,e,n)}))}(this._delegate):function(e){e=Sx(e,Rx);var t=Sx(e.firestore,Bx),n=Vx(t),r=new nS(t);return OI(e._query),yx(n,e._query).then((function(n){return new RI(t,r,e,n)}))}(this._delegate),t.then((function(e){return new sW(n.firestore,new RI(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=nW(n),a=rW(n,(function(t){return new sW(e.firestore,new RI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return uS(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(Zz.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),uW=function(){function e(t,n){pe(this,e),this._firestore=t,this._delegate=n}return me(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new aW(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),sW=function(){function e(t,n){pe(this,e),this._firestore=t,this._delegate=n}return me(e,[{key:"query",get:function(){return new oW(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new aW(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new uW(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new aW(n._firestore,r))}))}},{key:"isEqual",value:function(e){return DI(this._delegate,e._delegate)}}]),e}(),cW=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return me(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new eW(this.firestore,e):null}},{key:"doc",value:function(e){try{return new eW(this.firestore,void 0===e?Ox(this._delegate):Ox(this._delegate,e))}catch(t){throw tW(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=Sx(e.firestore,Bx),r=Ox(e),i=JI(e.converter,t);return cS(n,[oI(aI(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,sm.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new eW(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Mx(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(Zz.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(oW);function lW(e){return Sx(e,Ax)}var fW=function(){function e(){pe(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=ke(Yx,n)}return me(e,[{key:"isEqual",value:function(e){return(e=ft(e))instanceof Yx&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(op.keyField().canonicalString())}}]),e}(),dW=function(){function e(t){pe(this,e),this._delegate=t}return me(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=hS();return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new uI("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=pS.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=vS.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new dI("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),hW={Firestore:Yz,GeoPoint:Jx,Timestamp:Jh,Blob:Hz,Transaction:Xz,WriteBatch:Jz,DocumentReference:eW,DocumentSnapshot:iW,Query:oW,QueryDocumentSnapshot:aW,QuerySnapshot:sW,CollectionReference:cW,FieldPath:fW,FieldValue:dW,setLogLevel:function(e){!function(e){Eh.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new dt("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},hW)))}(e,(function(e,t){return new Yz(e,t,new Qz)})),e.registerVersion("@firebase/firestore-compat","0.1.18")}(mO);var pW="@firebase/database",vW="0.13.0",mW="";var gW=function(){function e(t){pe(this,e),this.domStorage_=t,this.prefix_="firebase:"}return me(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Qe(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Ke(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),yW=function(){function e(){pe(this,e),this.cache_={},this.isInMemoryStorage=!0}return me(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return $e(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),bW=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new gW(t)}}catch(n){}return new yW},kW=bW("localStorage"),wW=bW("sessionStorage"),_W=new It("@firebase/database"),xW=function(){var e=1;return function(){return e++}}(),IW=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Se(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new at;n.update(t);var r=n.digest();return Ce.encodeByteArray(r)},SW=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Qe(r):r,t+=" "}return t},EW=null,TW=!0,CW=function(e,t){Se(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(_W.logLevel=gt.VERBOSE,EW=_W.log.bind(_W),t&&wW.set("logging_enabled",!0)):"function"===typeof e?EW=e:(EW=null,wW.remove("logging_enabled"))},NW=function(){if(!0===TW&&(TW=!1,null===EW&&!0===wW.get("logging_enabled")&&CW(!0)),EW){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=SW.apply(null,t);EW(r)}},AW=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];NW.apply(void 0,[e].concat(n))}},RW=function(){var e="FIREBASE INTERNAL ERROR: "+SW.apply(void 0,arguments);_W.error(e)},PW=function(){var e="FIREBASE FATAL ERROR: ".concat(SW.apply(void 0,arguments));throw _W.error(e),new Error(e)},DW=function(){var e="FIREBASE WARNING: "+SW.apply(void 0,arguments);_W.warn(e)},OW=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},MW="[MIN_NAME]",LW="[MAX_NAME]",FW=function(e,t){if(e===t)return 0;if(e===MW||t===LW)return-1;if(t===MW||e===LW)return 1;var n=KW(e),r=KW(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},UW=function(e,t){return e===t?0:e<t?-1:1},jW=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Qe(t))},BW=function e(t){if("object"!==typeof t||null===t)return Qe(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Qe(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},VW=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function qW(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var zW=function(e){Se(!OW(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var WW=new RegExp("^-?(0*)\\d{1,10}$"),GW=-2147483648,HW=2147483647,KW=function(e){if(WW.test(e)){var t=Number(e);if(t>=GW&&t<=HW)return t}return null},QW=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw DW("Exception was thrown by user callback.",e),t}),Math.floor(0))}},YW=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},$W=function(){function e(t,n){var r=this;pe(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return me(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){DW('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),XW=function(){function e(t,n,r){var i=this;pe(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return me(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(NW("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',DW(e)}}]),e}(),JW=function(){function e(t){pe(this,e),this.accessToken=t}return me(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();JW.OWNER="owner";var ZW="5",eG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tG="websocket",nG="long_polling",rG=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];pe(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=kW.get("host:"+t)||this._host}return me(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&kW.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function iG(e,t,n){var r;if(Se("string"===typeof t,"typeof type must == string"),Se("object"===typeof n,"typeof params must == object"),t===tG)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==nG)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return qW(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var aG=function(){function e(){pe(this,e),this.counters_={}}return me(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;$e(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return Pe(void 0,this.counters_)}}]),e}(),oG={},uG={};function sG(e){var t=e.toString();return oG[t]||(oG[t]=new aG),oG[t]}var cG=function(){function e(t){pe(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return me(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&QW((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),lG="start",fG="close",dG=function(){function e(t,n,r,i,a,o,u){var s=this;pe(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=AW(t),this.stats_=sG(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),iG(n,nG,e)}}return me(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new cG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Ve()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new hG((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===lG)n.id=a,n.password=o;else{if(i!==fG)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=ZW,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&eG.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Qe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Ne(t),r=VW(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!Ve()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Qe(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!Ve()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),hG=function(){function e(t,n,r,i){if(pe(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Ve())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=xW(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){NW("frame writing exception"),u.stack&&NW(u.stack),NW(u)}}}return me(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;Ve()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){NW("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||NW("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),pG=null;"undefined"!==typeof MozWebSocket?pG=MozWebSocket:"undefined"!==typeof WebSocket&&(pG=WebSocket);var vG=function(){function e(t,n,r,i,a,o,u){pe(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=AW(this.connId),this.stats_=sG(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return me(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,kW.set("previous_websocket_failure",!0);try{if(Ve()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/".concat(ZW,"/").concat(mW,"/").concat(process.platform,"/").concat(r),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(i.proxy={origin:o})}this.mySock=new pG(this.connURL,[],undefined)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){kW.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Ke(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Se(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Qe(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=VW(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=ZW,!Ve()&&"undefined"!==typeof location&&location.hostname&&eG.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a.ac=r),i&&(a.p=i),iG(e,tG,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==pG&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return kW.isInMemoryStorage||!0===kW.get("previous_websocket_failure")}}]),e}();vG.responsesRequiredToBeHealthy=2,vG.healthyTimeout=3e4;var mG=function(){function e(t){pe(this,e),this.initTransports_(t)}return me(e,[{key:"initTransports_",value:function(t){var n=vG&&vG.isAvailable(),r=n&&!vG.previouslyFailed();if(t.webSocketOnly&&(n||DW("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[vG];else{var i,a=this.transports_=[],o=le(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[dG,vG]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();mG.globalTransportInitialized_=!1;var gG=function(){function e(t,n,r,i,a,o,u,s,c,l){pe(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=AW("c:"+this.id+":"),this.transportManager_=new mG(n),this.log_("Connection created"),this.start_()}return me(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=YW((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=jW("t",e),n=jW("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=jW("t",e),n=jW("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=jW("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?RW("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):RW("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ZW!==n&&DW("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),YW((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):YW((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(kW.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),yG=function(){function e(){pe(this,e)}return me(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),bG=function(){function e(t){pe(this,e),this.allowedEvents_=t,this.listeners_={},Se(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return me(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=ye(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Se(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),kG=function(e){ae(n,e);var t=ce(n);function n(){var e;return pe(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Le()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return me(n,[{key:"getInitialEvent",value:function(e){return Se("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(bG),wG=function(){function e(t,n){if(pe(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return me(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function _G(){return new wG("")}function xG(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function IG(e){return e.pieces_.length-e.pieceNum_}function SG(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new wG(e.pieces_,t)}function EG(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function TG(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function CG(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new wG(t,0)}function NG(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof wG)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new wG(n,0)}function AG(e){return e.pieceNum_>=e.pieces_.length}function RG(e,t){var n=xG(e),r=xG(t);if(null===n)return t;if(n===r)return RG(SG(e),SG(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function PG(e,t){if(IG(e)!==IG(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function DG(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(IG(e)>IG(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var OG=me((function e(t,n){pe(this,e),this.errorPrefix_=n,this.parts_=TG(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=lt(this.parts_[r]);MG(this)}));function MG(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+LG(e))}function LG(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var FG=function(e){ae(n,e);var t=ce(n);function n(){var e,r,i;return pe(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return me(n,[{key:"getInitialEvent",value:function(e){return Se("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(bG),UG=1e3,jG=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a,o,u,s,c){var l;if(pe(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=AW("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=UG,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Ve())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return FG.getInstance().on("visible",l.onVisible_,re(l)),-1===e.host.indexOf("fblocal")&&kG.getInstance().on("online",l.onOnline_,re(l)),l}return me(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Qe(i)),Se(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new De,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Se(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Ye(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Ye(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Se(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Qe(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):RW("Unrecognized action received from server: "+Qe(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Se(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=UG,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=UG,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=UG),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=he(fe().mark((function e(){var t,r,i,a,o,u,s,c,l,d,h,p,v,m,g=this;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},l=function(e){Se(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:l},d=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);case 19:h=e.sent,p=f(h,2),v=p[0],m=p[1],u?NW("getToken() completed but was canceled"):(NW("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,s=new gG(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){DW(e+" ("+g.repoInfo_.toString()+")"),g.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&DW(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){NW("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){NW("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Je(this.interruptReasons_)&&(this.reconnectDelay_=UG,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return BW(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new wG(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){NW("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){NW("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=le(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=le(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";Ve()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+mW.replace(/\./g,"-")]=1,Le()?e["framework.cordova"]=1:je()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=kG.getInstance().currentlyOnline();return Je(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&$e(e,"w")){var n=Xe(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();DW("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(yG);jG.nextPersistentConnectionId_=0,jG.nextConnectionId_=0;var BG,VG=function(){function e(t,n){pe(this,e),this.name=t,this.node=n}return me(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),qG=function(){function e(){pe(this,e)}return me(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new VG(MW,e),r=new VG(MW,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return VG.MIN}}]),e}(),zG=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"compare",value:function(e,t){return FW(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Ee("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return VG.MIN}},{key:"maxPost",value:function(){return new VG(LW,BG)}},{key:"makePost",value:function(e,t){return Se("string"===typeof e,"KeyIndex indexValue must always be a string."),new VG(e,BG)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return BG},set:function(e){BG=e}}]),n}(qG),WG=new zG,GG=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;pe(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return me(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),HG=function(){function e(t,n,r,i,a){pe(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:YG.EMPTY_NODE,this.right=null!=a?a:YG.EMPTY_NODE}return me(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return YG.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return YG.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();HG.RED=!0,HG.BLACK=!1;var KG,QG=function(){function e(){pe(this,e)}return me(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new HG(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),YG=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;pe(this,e),this.comparator_=t,this.root_=n}return me(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,HG.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,HG.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new GG(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new GG(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new GG(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new GG(this.root_,null,this.comparator_,!0,e)}}]),e}();function $G(e,t){return FW(e.name,t.name)}function XG(e,t){return FW(e,t)}YG.EMPTY_NODE=new QG;var JG,ZG,eH,tH=function(e){return"number"===typeof e?"number:"+zW(e):"string:"+e},nH=function(e){if(e.isLeafNode()){var t=e.val();Se("string"===typeof t||"number"===typeof t||"object"===typeof t&&$e(t,".sv"),"Priority must be a string or number.")}else Se(e===KG||e.isEmpty(),"priority of unexpected type.");Se(e===KG||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},rH=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;pe(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Se(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),nH(this.priorityNode_)}return me(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return AG(t)?this:".priority"===xG(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=xG(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Se(".priority"!==r||1===IG(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(SG(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+tH(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?zW(this.value_):this.value_,this.lazyHash_=IW(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Se(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Se(i>=0,"Unknown leaf type: "+n),Se(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return JG},set:function(e){JG=e}}]),e}();rH.VALUE_TYPE_ORDER=["object","boolean","number","string"];var iH,aH,oH=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?FW(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return VG.MIN}},{key:"maxPost",value:function(){return new VG(LW,new rH("[PRIORITY-POST]",eH))}},{key:"makePost",value:function(e,t){var n=ZG(e);return new VG(t,new rH("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(qG),uH=new oH,sH=Math.log(2),cH=function(){function e(t){pe(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/sH,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return me(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),lH=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new HG(o,a.node,HG.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new HG(o,a.node,HG.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new HG(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,HG.BLACK):(u(f,HG.BLACK),u(f,HG.RED))}return a}(new cH(e.length));return new YG(r||t,a)},fH={},dH=function(){function e(t,n){pe(this,e),this.indexes_=t,this.indexSet_=n}return me(e,[{key:"get",value:function(e){var t=Xe(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof YG?t:null}},{key:"hasIndex",value:function(e){return $e(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Se(t!==WG,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(VG.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?lH(i,t.getCompare()):fH;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this,i=Ze(this.indexes_,(function(e,i){var a=Xe(r.indexSet_,i);if(Se(a,"Missing index implementation for "+i),e===fH){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(VG.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),lH(o,a.getCompare())}return fH}var c=n.get(t.name),l=e;return c&&(l=l.remove(new VG(t.name,c))),l.insert(t,t.node)}));return new e(i,this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Ze(this.indexes_,(function(e){if(e===fH)return e;var r=n.get(t.name);return r?e.remove(new VG(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Se(fH&&uH,"ChildrenNode.ts has not been loaded"),iH=iH||new e({".priority":fH},{".priority":uH})}}]),e}(),hH=function(){function e(t,n,r){pe(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&nH(this.priorityNode_),this.children_.isEmpty()&&Se(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return me(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||aH}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?aH:t}},{key:"getChild",value:function(e){var t=xG(e);return null===t?this:this.getImmediateChild(t).getChild(SG(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Se(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new VG(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?aH:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=xG(e);if(null===n)return t;Se(".priority"!==xG(e)||1===IG(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(SG(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(uH,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+tH(this.getPriority().val())+":"),this.forEachChild(uH,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":IW(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new VG(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new VG(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new VG(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,VG.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,VG.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===pH?-1:0}},{key:"withIndex",value:function(t){if(t===WG||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===WG||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(uH),r=t.getIterator(uH),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===WG?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return aH||(aH=new e(new YG(XG),null,dH.Default))}}]),e}();hH.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var pH=new(function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.call(this,new YG(XG),hH.EMPTY_NODE,dH.Default)}return me(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return hH.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(hH));Object.defineProperties(VG,{MIN:{value:new VG(MW,hH.EMPTY_NODE)},MAX:{value:new VG(LW,pH)}}),zG.__EMPTY_NODE=hH.EMPTY_NODE,rH.__childrenNodeConstructor=hH,KG=pH,function(e){eH=e}(pH);function vH(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return hH.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Se(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new rH(n,vH(t))}if(e instanceof Array){var r=hH.EMPTY_NODE;return qW(e,(function(t,n){if($e(e,t)&&"."!==t.substring(0,1)){var i=vH(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(vH(t))}var i=[],a=!1,o=e;if(qW(o,(function(e,t){if("."!==e.substring(0,1)){var n=vH(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new VG(e,n)))}})),0===i.length)return hH.EMPTY_NODE;var u=lH(i,$G,(function(e){return e.name}),XG);if(a){var s=lH(i,uH.getCompare());return new hH(u,vH(t),new dH({".priority":s},{".priority":uH}))}return new hH(u,vH(t),dH.Default)}!function(e){ZG=e}(vH);var mH=function(e){ae(n,e);var t=ce(n);function n(e){var r;return pe(this,n),(r=t.call(this)).indexPath_=e,Se(!AG(e)&&".priority"!==xG(e),"Can't create PathIndex with empty path or .priority key"),r}return me(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?FW(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=vH(e),r=hH.EMPTY_NODE.updateChild(this.indexPath_,n);return new VG(t,r)}},{key:"maxPost",value:function(){var e=hH.EMPTY_NODE.updateChild(this.indexPath_,pH);return new VG(LW,e)}},{key:"toString",value:function(){return TG(this.indexPath_,0).join("/")}}]),n}(qG),gH=function(e){ae(n,e);var t=ce(n);function n(){return pe(this,n),t.apply(this,arguments)}return me(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?FW(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return VG.MIN}},{key:"maxPost",value:function(){return VG.MAX}},{key:"makePost",value:function(e,t){var n=vH(e);return new VG(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(qG),yH=new gH,bH="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){var e=0,t=[]}();function kH(e){return{type:"value",snapshotNode:e}}function wH(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function _H(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function xH(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var IH=function(){function e(){pe(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=uH}return me(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Se(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Se(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:MW}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Se(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Se(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:LW}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Se(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===uH}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function SH(e){var t,n={};return e.isDefault()||(e.index_===uH?t="$priority":e.index_===yH?t="$value":e.index_===WG?t="$key":(Se(e.index_ instanceof mH,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Qe(t),e.startSet_&&(n.startAt=Qe(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Qe(e.indexStartName_))),e.endSet_&&(n.endAt=Qe(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Qe(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function EH(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==uH&&(t.i=e.index_.toString()),t}var TH=function(e){ae(n,e);var t=ce(n);function n(e,r,i,a){var o;return pe(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=AW("p:rest:"),o.listens_={},o}return me(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=SH(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Xe(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=SH(e._queryParams),r=e._path.toString(),i=new De;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=f(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+nt(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Ke(c.responseText)}catch(n){DW("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&DW("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Se(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(yG),CH=function(){function e(){pe(this,e),this.rootNode_=hH.EMPTY_NODE}return me(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function NH(){return{value:null,children:new Map}}function AH(e,t,n){if(AG(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=xG(t);e.children.has(r)||e.children.set(r,NH()),AH(e.children.get(r),t=SG(t),n)}}function RH(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){RH(r,new wG(t.toString()+"/"+e),n)}))}var PH,DH=function(){function e(t){pe(this,e),this.collection_=t,this.last_=null}return me(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&qW(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),OH=function(){function e(t,n){pe(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new DH(t);var r=1e4+2e4*Math.random();YW(this.reportStats_.bind(this),Math.floor(r))}return me(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;qW(t,(function(t,i){i>0&&$e(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),YW(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function MH(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(PH||(PH={}));var LH,FH=function(){function e(t,n,r){pe(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=PH.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return me(e,[{key:"operationForChild",value:function(t){if(AG(this.path)){if(null!=this.affectedTree.value)return Se(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new wG(t));return new e(_G(),n,this.revert)}return Se(xG(this.path)===t,"operationForChild called for unrelated child."),new e(SG(this.path),this.affectedTree,this.revert)}}]),e}(),UH=function(){function e(t,n,r){pe(this,e),this.source=t,this.path=n,this.snap=r,this.type=PH.OVERWRITE}return me(e,[{key:"operationForChild",value:function(t){return AG(this.path)?new e(this.source,_G(),this.snap.getImmediateChild(t)):new e(this.source,SG(this.path),this.snap)}}]),e}(),jH=function(){function e(t,n,r){pe(this,e),this.source=t,this.path=n,this.children=r,this.type=PH.MERGE}return me(e,[{key:"operationForChild",value:function(t){if(AG(this.path)){var n=this.children.subtree(new wG(t));return n.isEmpty()?null:n.value?new UH(this.source,_G(),n.value):new e(this.source,_G(),n)}return Se(xG(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,SG(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),BH=function(){function e(t,n,r){pe(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return me(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(AG(e))return this.isFullyInitialized()&&!this.filtered_;var t=xG(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function VH(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Ee("Should only compare child_ events.");var r=new VG(t.childName,t.snapshotNode),i=new VG(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function qH(e,t){return{eventCache:e,serverCache:t}}function zH(e,t,n,r){return qH(new BH(t,n,r),e.serverCache)}function WH(e,t,n,r){return qH(e.eventCache,new BH(t,n,r))}function GH(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function HH(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var KH=function(){return LH||(LH=new YG(UW)),LH},QH=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:KH();pe(this,e),this.value=t,this.children=n}return me(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:_G(),value:this.value};if(AG(e))return null;var n=xG(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(SG(e),t);return null!=i?{path:NG(new wG(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(AG(t))return this;var n=xG(t),r=this.children.get(n);return null!==r?r.subtree(SG(t)):new e(null)}},{key:"set",value:function(t,n){if(AG(t))return new e(n,this.children);var r=xG(t),i=(this.children.get(r)||new e(null)).set(SG(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(AG(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=xG(t),r=this.children.get(n);if(r){var i,a=r.remove(SG(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(AG(e))return this.value;var t=xG(e),n=this.children.get(t);return n?n.get(SG(e)):null}},{key:"setTree",value:function(t,n){if(AG(t))return n;var r,i=xG(t),a=(this.children.get(i)||new e(null)).setTree(SG(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(_G(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(NG(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,_G(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(AG(e))return null;var i=xG(e),a=this.children.get(i);return a?a.findOnPath_(SG(e),NG(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,_G(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(AG(t))return this;this.value&&r(n,this.value);var i=xG(t),a=this.children.get(i);return a?a.foreachOnPath_(SG(t),NG(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(_G(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(NG(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return qW(t,(function(e,t){n=n.set(new wG(e),t)})),n}}]),e}(),YH=function(){function e(t){pe(this,e),this.writeTree_=t}return me(e,null,[{key:"empty",value:function(){return new e(new QH(null))}}]),e}();function $H(e,t,n){if(AG(t))return new YH(new QH(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=RG(i,t);return a=a.updateChild(o,n),new YH(e.writeTree_.set(i,a))}var u=new QH(n),s=e.writeTree_.setTree(t,u);return new YH(s)}function XH(e,t,n){var r=e;return qW(n,(function(e,n){r=$H(r,NG(t,e),n)})),r}function JH(e,t){if(AG(t))return YH.empty();var n=e.writeTree_.setTree(t,new QH(null));return new YH(n)}function ZH(e,t){return null!=eK(e,t)}function eK(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(RG(n.path,t)):null}function tK(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(uH,(function(e,n){t.push(new VG(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new VG(e,n.value))})),t}function nK(e,t){if(AG(t))return e;var n=eK(e,t);return new YH(null!=n?new QH(n):e.writeTree_.subtree(t))}function rK(e){return e.writeTree_.isEmpty()}function iK(e,t){return aK(_G(),e.writeTree_,t)}function aK(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Se(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=aK(NG(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(NG(e,".priority"),r)),n}function oK(e,t){return kK(t,e)}function uK(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function sK(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Se(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&cK(u,r.path)?i=!1:DG(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=fK(e.allWrites,lK,_G()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=JH(e.visibleWrites,r.path):qW(r.children,(function(t){e.visibleWrites=JH(e.visibleWrites,NG(r.path,t))}));return!0}return!1}function cK(e,t){if(e.snap)return DG(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&DG(NG(e.path,n),t))return!0;return!1}function lK(e){return e.visible}function fK(e,t,n){for(var r=YH.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)DG(n,o)?r=$H(r,u=RG(n,o),a.snap):DG(o,n)&&(u=RG(o,n),r=$H(r,_G(),a.snap.getChild(u)));else{if(!a.children)throw Ee("WriteRecord should have .snap or .children");if(DG(n,o))r=XH(r,u=RG(n,o),a.children);else if(DG(o,n))if(AG(u=RG(o,n)))r=XH(r,_G(),a.children);else{var s=Xe(a.children,xG(u));if(s){var c=s.getChild(SG(u));r=$H(r,_G(),c)}}}}}return r}function dK(e,t,n,r,i){if(r||i){var a=nK(e.visibleWrites,t);if(!i&&rK(a))return n;if(i||null!=n||ZH(a,_G())){return iK(fK(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(DG(e.path,t)||DG(t,e.path))}),t),n||hH.EMPTY_NODE)}return null}var o=eK(e.visibleWrites,t);if(null!=o)return o;var u=nK(e.visibleWrites,t);return rK(u)?n:null!=n||ZH(u,_G())?iK(u,n||hH.EMPTY_NODE):null}function hK(e,t,n,r){return dK(e.writeTree,e.treePath,t,n,r)}function pK(e,t){return function(e,t,n){var r=hH.EMPTY_NODE,i=eK(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(uH,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=nK(e.visibleWrites,t);return n.forEachChild(uH,(function(e,t){var n=iK(nK(a,new wG(e)),t);r=r.updateImmediateChild(e,n)})),tK(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return tK(nK(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function vK(e,t,n,r){return function(e,t,n,r,i){Se(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=NG(t,n);if(ZH(e.visibleWrites,a))return null;var o=nK(e.visibleWrites,a);return rK(o)?i.getChild(n):iK(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function mK(e,t){return function(e,t){return eK(e.visibleWrites,t)}(e.writeTree,NG(e.treePath,t))}function gK(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=nK(e.visibleWrites,t),c=eK(s,_G());if(null!=c)u=c;else{if(null==n)return[];u=iK(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),d=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),h=d.getNext();h&&l.length<i;)0!==f(h,r)&&l.push(h),h=d.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function yK(e,t,n){return function(e,t,n,r){var i=NG(t,n),a=eK(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?iK(nK(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function bK(e,t){return kK(NG(e.treePath,t),e.writeTree)}function kK(e,t){return{treePath:e,writeTree:t}}var wK=function(){function e(){pe(this,e),this.changeMap=new Map}return me(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Se("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Se(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,xH(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,_H(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,wH(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Ee("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,xH(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),_K=new(function(){function e(){pe(this,e)}return me(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),xK=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;pe(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return me(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new BH(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return yK(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:HH(this.viewCache_),i=gK(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function IK(e,t,n,r,i){var a,o,u=new wK;if(n.type===PH.OVERWRITE){var s=n;s.source.fromUser?a=TK(e,t,s.path,s.snap,r,i,u):(Se(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!AG(s.path),a=EK(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===PH.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=NG(n,r);CK(t,xG(c))&&(u=TK(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=NG(n,r);CK(t,xG(c))||(u=TK(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Se(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=AK(e,t,c.path,c.children,r,i,o,u))}else if(n.type===PH.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=mK(r,n))return t;var u,s=new xK(r,t,i),c=t.eventCache.getNode();if(AG(n)||".priority"===xG(n)){var l;if(t.serverCache.isFullyInitialized())l=hK(r,HH(t));else{var f=t.serverCache.getNode();Se(f instanceof hH,"serverChildren would be complete if leaf node"),l=pK(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var d=xG(n),h=yK(r,d,t.serverCache);null==h&&t.serverCache.isCompleteForChild(d)&&(h=c.getImmediateChild(d)),(u=null!=h?e.filter.updateChild(c,d,h,SG(n),s,a):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(c,d,hH.EMPTY_NODE,SG(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=hK(r,HH(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=mK(r,_G()),zH(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=mK(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(AG(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return EK(e,t,n,s.getNode().getChild(n),i,a,u,o);if(AG(n)){var c=new QH(null);return s.getNode().forEachChild(WG,(function(e,t){c=c.set(new wG(e),t)})),AK(e,t,n,c,i,a,u,o)}return t}var l=new QH(null);return r.foreach((function(e,t){var r=NG(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),AK(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==PH.LISTEN_COMPLETE)throw Ee("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=WH(t,a.getNode(),a.isFullyInitialized()||AG(n),a.isFiltered());return SK(e,o,n,r,_K,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=GH(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(kH(GH(t)))}}(t,a,f),{viewCache:a,changes:f}}function SK(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=mK(r,n))return t;if(AG(n))if(Se(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=HH(t),l=pK(r,c instanceof hH?c:hH.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=hK(r,HH(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var d=xG(n);if(".priority"===d){Se(1===IG(n),"Can't have a priority with additional path components");var h=s.getNode(),p=vK(r,n,h,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(h,p):s.getNode()}else{var v,m=SG(n);if(s.isCompleteForChild(d)){u=t.serverCache.getNode();var g=vK(r,n,s.getNode(),u);v=null!=g?s.getNode().getImmediateChild(d).updateChild(m,g):s.getNode().getImmediateChild(d)}else v=yK(r,d,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),d,v,m,i,a):s.getNode()}}return zH(t,o,s.isFullyInitialized()||AG(n),e.filter.filtersNodes())}function EK(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(AG(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var d=xG(n);if(!c.isCompleteForPath(n)&&IG(n)>1)return t;var h=SG(n),p=c.getNode().getImmediateChild(d).updateChild(h,r);s=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,h,_K,null)}var v=WH(t,s,c.isFullyInitialized()||AG(n),l.filtersNodes());return SK(e,v,n,i,new xK(i,v,a),u)}function TK(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new xK(i,t,a);if(AG(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=zH(t,s,!0,e.filter.filtersNodes());else{var f=xG(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=zH(t,s,c.isFullyInitialized(),c.isFiltered());else{var d,h=SG(n),p=c.getNode().getImmediateChild(f);if(AG(h))d=r;else{var v=l.getCompleteChild(f);d=null!=v?".priority"===EG(h)&&v.getChild(CG(h)).isEmpty()?v:v.updateChild(h,r):hH.EMPTY_NODE}if(p.equals(d))u=t;else u=zH(t,e.filter.updateChild(c.getNode(),f,d,h,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function CK(e,t){return e.eventCache.isCompleteForChild(t)}function NK(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function AK(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=AG(n)?r:new QH(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=NK(0,t.serverCache.getNode().getImmediateChild(n),r);c=EK(e,c,new wG(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var f=NK(0,t.serverCache.getNode().getImmediateChild(n),r);c=EK(e,c,new wG(n),f,i,a,o,u)}})),c}var RK;function PK(e,t){var n=HH(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!AG(t)&&!n.getImmediateChild(xG(t)).isEmpty())?n.getChild(t):null}function DK(e,t,n,r){t.type===PH.MERGE&&null!==t.source.queryId&&(Se(HH(e.viewCache_),"We should always have a full cache before handling merges"),Se(GH(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=IK(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Se(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Se(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Se(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,OK(e,u.changes,u.viewCache.eventCache.getNode(),null)}function OK(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),VH(e,i,"child_removed",t,r,n),VH(e,i,"child_added",t,r,n),VH(e,i,"child_moved",a,r,n),VH(e,i,"child_changed",t,r,n),VH(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var MK;function LK(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Se(null!=a,"SyncTree gave us an op for an invalid query."),DK(a,t,n,r)}var o,u=[],s=le(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(DK(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function FK(e,t){var n,r=null,i=le(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||PK(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var UK=me((function e(t){pe(this,e),this.listenProvider_=t,this.syncPointTree_=new QH(null),this.pendingWriteTree_={visibleWrites:YH.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function jK(e,t,n,r,i){return function(e,t,n,r,i){Se(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=$H(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?zK(e,new UH({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function BK(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=uK(e.pendingWriteTree_,t),i=sK(e.pendingWriteTree_,t);if(i){var a=new QH(null);return null!=r.snap?a=a.set(_G(),!0):qW(r.children,(function(e){a=a.set(new wG(e),!0)})),zK(e,new FH(r.path,a,n))}return[]}function VK(e,t,n){return zK(e,new UH({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function qK(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=FK(n,RG(e,t));if(r)return r}));return dK(r,t,i,n,!0)}function zK(e,t){return WK(t,e.syncPointTree_,null,oK(e.pendingWriteTree_,_G()))}function WK(e,t,n,r){if(AG(e.path))return GK(e,t,n,r);var i=t.get(_G());null==n&&null!=i&&(n=FK(i,_G()));var a=[],o=xG(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=bK(r,o);a=a.concat(WK(u,s,c,l))}return i&&(a=a.concat(LK(i,e,r,n))),a}function GK(e,t,n,r){var i=t.get(_G());null==n&&null!=i&&(n=FK(i,_G()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=bK(r,t),s=e.operationForChild(t);s&&(a=a.concat(GK(s,i,o,u)))})),i&&(a=a.concat(LK(i,e,r,n))),a}function HK(e,t){return e.tagToQueryMap.get(t)}function KK(e){var t=e.indexOf("$");return Se(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new wG(e.substr(0,t))}}function QK(e,t,n){var r=e.syncPointTree_.get(t);return Se(r,"Missing sync point for query tag that we're tracking"),LK(r,n,oK(e.pendingWriteTree_,t),null)}var YK=function(){function e(t){pe(this,e),this.node_=t}return me(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),$K=function(){function e(t,n){pe(this,e),this.syncTree_=t,this.path_=n}return me(e,[{key:"getImmediateChild",value:function(t){var n=NG(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return qK(this.syncTree_,this.path_)}}]),e}(),XK=function(e,t,n){return e&&"object"===typeof e?(Se(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?JK(e[".sv"],t,n):"object"===typeof e[".sv"]?ZK(e[".sv"],t):void Se(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},JK=function(e,t,n){if("timestamp"===e)return n.timestamp;Se(!1,"Unexpected server value: "+e)},ZK=function(e,t,n){e.hasOwnProperty("increment")||Se(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Se(!1,"Unexpected increment value: "+r);var i=t.node();if(Se(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},eQ=function(e,t,n,r){return nQ(t,new $K(n,e),r)},tQ=function(e,t,n){return nQ(e,new YK(t),n)};function nQ(e,t,n){var r,i=e.getPriority().val(),a=XK(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=XK(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new rH(u,vH(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new rH(a))),s.forEachChild(uH,(function(e,i){var a=nQ(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var rQ=me((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};pe(this,e),this.name=t,this.parent=n,this.node=r}));function iQ(e,t){for(var n=t instanceof wG?t:new wG(t),r=e,i=xG(n);null!==i;){var a=Xe(r.node.children,i)||{children:{},childCount:0};r=new rQ(i,r,a),i=xG(n=SG(n))}return r}function aQ(e){return e.node.value}function oQ(e,t){e.node.value=t,fQ(e)}function uQ(e){return e.node.childCount>0}function sQ(e,t){qW(e.node.children,(function(n,r){t(new rQ(n,e,r))}))}function cQ(e,t,n,r){n&&!r&&t(e),sQ(e,(function(e){cQ(e,t,!0,r)})),n&&r&&t(e)}function lQ(e){return new wG(null===e.parent?e.name:lQ(e.parent)+"/"+e.name)}function fQ(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===aQ(e)&&!uQ(e)}(n),i=$e(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,fQ(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,fQ(e))}(e.parent,e.name,e)}var dQ=/[\[\].#$\/\u0000-\u001F\u007F]/,hQ=/[\[\].#$\u0000-\u001F\u007F]/,pQ=10485760,vQ=function(e){return"string"===typeof e&&0!==e.length&&!dQ.test(e)},mQ=function(e){return"string"===typeof e&&0!==e.length&&!hQ.test(e)},gQ=function e(t,n,r){var i=r instanceof wG?new OG(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+LG(i));if("function"===typeof n)throw new Error(t+"contains a function "+LG(i)+" with contents = "+n.toString());if(OW(n))throw new Error(t+"contains "+n.toString()+" "+LG(i));if("string"===typeof n&&n.length>pQ/3&&lt(n)>pQ)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+LG(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(qW(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!vQ(n)))throw new Error(t+" contains an invalid key ("+n+") "+LG(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=lt(t),MG(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=lt(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+LG(i)+" in addition to actual children.")}},yQ=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!vQ(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),mQ(e)}(n))throw new Error(ct(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},bQ=me((function e(){pe(this,e),this.eventLists_=[],this.recursionDepth_=0}));function kQ(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||PG(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function wQ(e,t,n){kQ(e,n),_Q(e,(function(e){return DG(e,t)||DG(t,e)}))}function _Q(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(xQ(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function xQ(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();EW&&NW("event: "+n.toString()),QW(r)}}}var IQ="repo_interrupt",SQ=function(){function e(t,n,r,i){pe(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=NH(),this.transactionQueueTree_=new rQ,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return me(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function EQ(e,t,n){if(e.stats_=sG(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new TH(e.repoInfo_,(function(t,n,r,i){NQ(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return AQ(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Qe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new jG(e.repoInfo_,t,(function(t,n,r,i){NQ(e,t,n,r,i)}),(function(t){AQ(e,t)}),(function(t){!function(e,t){qW(t,(function(t,n){RQ(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return uG[n]||(uG[n]=t()),uG[n]}(e.repoInfo_,(function(){return new OH(e.stats_,e.server_)})),e.infoData_=new CH,e.infoSyncTree_=new UK({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=VK(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),RQ(e,"connected",!1),e.serverSyncTree_=new UK({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);wQ(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function TQ(e){var t=e.infoData_.getNode(new wG(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function CQ(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:TQ(e)})}function NQ(e,t,n,r,i){e.dataUpdateCount++;var a=new wG(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Ze(n,(function(e){return vH(e)}));o=function(e,t,n,r){var i=HK(e,r);if(i){var a=KK(i),o=a.path,u=a.queryId,s=RG(o,t),c=QH.fromObject(n);return QK(e,o,new jH(MH(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=vH(n);o=function(e,t,n,r){var i=HK(e,r);if(null!=i){var a=KK(i),o=a.path,u=a.queryId,s=RG(o,t);return QK(e,o,new UH(MH(u),s,n))}return[]}(e.serverSyncTree_,a,s,i)}else if(r){var c=Ze(n,(function(e){return vH(e)}));o=function(e,t,n){var r=QH.fromObject(n);return zK(e,new jH({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=vH(n);o=VK(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=UQ(e,a)),wQ(e.eventQueue_,f,o)}function AQ(e,t){RQ(e,"connected",t),!1===t&&function(e){OQ(e,"onDisconnectEvents");var t=CQ(e),n=NH();RH(e.onDisconnect_,_G(),(function(r,i){var a=eQ(r,i,e.serverSyncTree_,t);AH(n,r,a)}));var r=[];RH(n,_G(),(function(t,n){r=r.concat(VK(e.serverSyncTree_,t,n));var i=zQ(e,t);UQ(e,i)})),e.onDisconnect_=NH(),wQ(e.eventQueue_,_G(),r)}(e)}function RQ(e,t,n){var r=new wG("/.info/"+t),i=vH(n);e.infoData_.updateSnapshot(r,i);var a=VK(e.infoSyncTree_,r,i);wQ(e.eventQueue_,r,a)}function PQ(e){return e.nextWriteId_++}function DQ(e){e.persistentConnection_&&e.persistentConnection_.interrupt(IQ)}function OQ(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];NW.apply(void 0,[t].concat(r))}function MQ(e,t,n){return qK(e.serverSyncTree_,t,n)||hH.EMPTY_NODE}function LQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||qQ(e,t),aQ(t)){var n=BQ(e,t);Se(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&FQ(e,lQ(t),n)}else uQ(t)&&sQ(t,(function(t){LQ(e,t)}))}function FQ(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=MQ(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Se(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=RG(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){OQ(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(BK(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);qQ(e,iQ(e.transactionQueueTree_,t)),LQ(e,e.transactionQueueTree_),wQ(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)QW(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{DW("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}UQ(e,t)}}),o)}function UQ(e,t){var n=jQ(e,t),r=lQ(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s=t[a],c=RG(n,s.path),l=!1,f=void 0;if(Se(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)l=!0,f=s.abortReason,i=i.concat(BK(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)l=!0,f="maxretry",i=i.concat(BK(e.serverSyncTree_,s.currentWriteId,!0));else{var d=MQ(e,s.path,o);s.currentInputSnapshot=d;var h=t[a].update(d.val());if(void 0!==h){gQ("transaction failed: Data returned ",h,s.path);var p=vH(h);"object"===typeof h&&null!=h&&$e(h,".priority")||(p=p.updatePriority(d.getPriority()));var v=s.currentWriteId,m=CQ(e),g=tQ(p,d,m);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=g,s.currentWriteId=PQ(e),o.splice(o.indexOf(v),1),i=(i=i.concat(jK(e.serverSyncTree_,s.path,g,s.currentWriteId,s.applyLocally))).concat(BK(e.serverSyncTree_,v,!0))}else l=!0,f="nodata",i=i.concat(BK(e.serverSyncTree_,s.currentWriteId,!0))}wQ(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,u=t[a].unwatcher,setTimeout(u,Math.floor(0)),t[a].onComplete&&("nodata"===f?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(f),!1,null)}))))},s=0;s<t.length;s++)u(s);qQ(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)QW(r[c]);LQ(e,e.transactionQueueTree_)}(e,BQ(e,n),r),r}function jQ(e,t){var n,r=e.transactionQueueTree_;for(n=xG(t);null!==n&&void 0===aQ(r);)r=iQ(r,n),n=xG(t=SG(t));return r}function BQ(e,t){var n=[];return VQ(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function VQ(e,t,n){var r=aQ(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);sQ(t,(function(t){VQ(e,t,n)}))}function qQ(e,t){var n=aQ(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,oQ(t,n.length>0?n:void 0)}sQ(t,(function(t){qQ(e,t)}))}function zQ(e,t){var n=lQ(jQ(e,t)),r=iQ(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){WQ(e,t)})),WQ(e,r),cQ(r,(function(t){WQ(e,t)})),n}function WQ(e,t){var n=aQ(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Se(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Se(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(BK(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?oQ(t,void 0):n.length=a+1,wQ(e.eventQueue_,lQ(t),i);for(var u=0;u<r.length;u++)QW(r[u])}}var GQ=function(e,t){var n=HQ(e),r=n.namespace;"firebase.com"===n.domain&&PW(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||PW("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&DW("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new rG(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new wG(n.pathString)}},HQ=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var d=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=le(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):DW("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var h=t.slice(0,c);if("localhost"===h.toLowerCase())n="localhost";else if(h.split(".").length<=2)n=h;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in d&&(a=d.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},KQ=function(){function e(t,n,r,i){pe(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return me(e,[{key:"key",get:function(){return AG(this._path)?null:EG(this._path)}},{key:"ref",get:function(){return new QQ(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=EH(this._queryParams),t=BW(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return EH(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=ft(t))instanceof e))return!1;var n=this._repo===t._repo,r=PG(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}();var QQ=function(e){ae(n,e);var t=ce(n);function n(e,r){return pe(this,n),t.call(this,e,r,new IH,!1)}return me(n,[{key:"parent",get:function(){var e=CG(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(KQ);!function(e){Se(!RK,"__referenceConstructor has already been defined"),RK=e}(QQ),function(e){Se(!MK,"__referenceConstructor has already been defined"),MK=e}(QQ);var YQ={},$Q=!1;function XQ(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||PW("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),NW("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=GQ(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/todo",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=GQ(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new JW(JW.OWNER):new XW(e.name,e.options,t);yQ("Invalid Firebase Database URL",u),AG(u.path)||PW("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=YQ[t.name];i||(i={},YQ[t.name]=i);var a=i[e.toURLString()];a&&PW("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new SQ(e,$Q,n,r),i[e.toURLString()]=a,a}(s,e,l,new $W(e.name,n));return new JQ(f,e)}var JQ=function(){function e(t,n){pe(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return me(e,[{key:"_repo",get:function(){return this._instanceStarted||(EQ(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new QQ(this._repo,_G())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=YQ[t];n&&n[e.key]===e||PW("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),DQ(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&PW("Cannot call "+e+" on a deleted database.")}}]),e}();jG.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},jG.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){mW=e}(ln),nn(new dt("database",(function(e,t){var n=t.instanceIdentifier;return XQ(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),mn(pW,vW,e),mn(pW,vW,"esm2017")}();var ZQ="firebasestorage.googleapis.com",eY=function(e){ae(n,e);var t=ce(n);function n(e,r){var i;return pe(this,n),(i=t.call(this,tY(e),"Firebase Storage: ".concat(r," (").concat(tY(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(re(i),n.prototype),i}return me(n,[{key:"_codeEquals",value:function(e){return tY(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(ze);function tY(e){return"storage/"+e}function nY(){return new eY("unknown","An unknown error occurred, please check the error payload for server response.")}function rY(){return new eY("canceled","User canceled the upload/download.")}function iY(e){return new eY("invalid-argument",e)}function aY(){return new eY("app-deleted","The Firebase app was deleted.")}var oY,uY=function(){function e(t,n){pe(this,e),this.bucket=t,this.path_=n}return me(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new eY("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===ZQ?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var d=f[l.indices.bucket],h=f[l.indices.path];h||(h=""),r=new e(d,h),l.postModify(r);break}}if(null==r)throw function(e){return new eY("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),sY=function(){function e(t){pe(this,e),this.promise_=Promise.reject(t)}return me(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function cY(e,t,n,r){if(r<t)throw iY("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw iY("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function lY(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(oY||(oY={}));var fY=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var d=this;pe(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return me(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=nY();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?aY():rY());else i(new eY("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}};this.canceled_?t(0,new dY(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(h,s())}),t)}function d(){a&&clearTimeout(a)}function h(e){if(c)d();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return d(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,d(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new dY(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===oY.NO_ERROR,a=r.getStatus();if(n&&!e.isRetryStatusCode_(a)){var o=-1!==e.successCodes_.indexOf(a);t(!0,new dY(o,r))}else{var u=r.getErrorCode()===oY.ABORT;t(!1,new dY(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),dY=me((function e(t,n,r){pe(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function hY(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}var pY=function(){function e(t,n){pe(this,e),this._service=t,this._location=n instanceof uY?n:uY.makeFromUrl(n,t.host)}return me(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new uY(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return hY(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new uY(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new eY("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function vY(e,t){var n=null===t||void 0===t?void 0:t.storageBucket;return null==n?null:uY.makeFromBucketSpec(n,e)}var mY=function(){function e(t,n,r,i,a){pe(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=ZQ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?uY.makeFromBucketSpec(i,this._host):vY(this._host,this.app.options)}return me(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=uY.makeFromBucketSpec(this._url,e):this._bucket=vY(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){cY("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){cY("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=he(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=he(fe().mark((function e(){var t,n;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new pY(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new sY(aY());var a=function(e,t,n,r,i,a){var o=lY(e.urlParams),u=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new fY(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then((function(){return i._requests.delete(a)}),(function(){return i._requests.delete(a)})),a}},{key:"makeRequestWithTokens",value:function(){var e=he(fe().mark((function e(t,n){var r,i,a,o;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=f(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),gY="@firebase/storage",yY="0.9.6",bY="storage";function kY(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new mY(r,i,a,n,ln)}nn(new dt(bY,kY,"PUBLIC").setMultipleInstances(!0)),mn(gY,yY,""),mn(gY,yY,"esm2017");mO.initializeApp({apiKey:"AIzaSyDKCXycGDqQY9p_Z8AOmME8OID9VJR8nU8",authDomain:"chat-fc5b9.firebaseapp.com",databaseURL:"https://ics2-abcd9-default-rtdb.europe-west1.firebasedatabase.app",projectId:"chat-fc5b9",storageBucket:"chat-fc5b9.appspot.com",messagingSenderId:"453867670088",appId:"1:453867670088:web:df1021368474d4357e667d",measurementId:"G-KLWDMGJW6W"});var wY=mO.auth(),_Y=mO.firestore(),xY=(0,i.createContext)(null),IY=o.createRoot(document.getElementById("root")),SY=function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"===typeof e[i]&&(n[i]=e[i])}var a,o=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if("undefined"===typeof n(void 0,{type:TS.INIT}))throw new Error(IS(12));if("undefined"===typeof n(void 0,{type:TS.PROBE_UNKNOWN_ACTION()}))throw new Error(IS(13))}))}(n)}catch(u){a=u}return function(e,t){if(void 0===e&&(e={}),a)throw a;for(var r=!1,i={},u=0;u<o.length;u++){var s=o[u],c=n[s],l=e[s],f=c(l,t);if("undefined"===typeof f){t&&t.type;throw new Error(IS(14))}i[s]=f,r=r||f!==l}return(r=r||o.length!==Object.keys(e).length)?i:e}}({theme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mq,t=arguments.length>1?arguments[1]:void 0;return"CHANGE"===t.type?{isDarkTheme:!e.isDarkTheme}:e},lang:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lq,t=arguments.length>1?arguments[1]:void 0;return"CHANGE_LANG"===t.type?{lang:!e.lang}:e}}),EY=NS(SY);IY.render((0,uc.jsx)(xY.Provider,{value:{firebase:mO,auth:wY,firestore:_Y},children:(0,uc.jsx)($D,{store:EY,children:(0,uc.jsx)(Fq,{})})}))}()}();
//# sourceMappingURL=main.4a3bec11.js.map